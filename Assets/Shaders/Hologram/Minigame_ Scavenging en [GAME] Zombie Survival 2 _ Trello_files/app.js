window.siteDomain=location.origin||/^[^\/]+?[\/]{2}[^\/]+/.exec(location.href)[0];var e=[],t=function(t){e.push(t)},n=window;!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v;s=void 0,t(function(){return s=e(456)}),a=void 0,t(function(){return a=e(365)}),u=void 0,t(function(){return u=e(402)}),c=void 0,t(function(){return c=e(509)}),l=void 0,t(function(){return l=e(34)}),d=e("bluebird"),o=e("jquery"),m=e("moment"),v=e(43),f=e(129),p=e(231),i=e(211),g=function(e){var t;return t=parseInt(e,10),isNaN(t)?void 0:t},h=function(e,t){return null!=t?e(t):void 0},n.exports={routes:[["board/*path","oldBoardView"],["b/:shortLink(/*path)","boardView"],["card/board/(:slug/):idBoard/:cardComponent","oldCardView"],["card/(:slug/):idBoard/:cardComponent","oldCardView"],["c/:id(/*path)","cardView"]],boardView:function(e,t){var n,r,o,i,s,a,u,c;return null==t&&(t=""),i=t.split("/"),u=i[0],s=i[1],c=i[2],o=i[3],r=i[4],a={idBoard:e},"calendar"===s&&(n=m().startOf("day"),n.year(g(c)),n.month(h(p.sub(1),g(o))),n.date(g(r)),n.isValid()&&(a.calendarDate=n.toDate())),"member"===s&&null!=c&&(a.usernameBoardProfile=c),("calendar"===s||"member"===s||"power-ups"===s)&&(a.section=s),this.displayBoard(a).done()},oldBoardView:function(e){var t,n;return n={},t=e.split("/"),1===t.length?n.idBoard=t[0]:n.idBoard=t[1],3===t.length?n.section=t[2]:4===t.length&&(n.usernameBoardProfile=t[3]),this.displayBoard(n).done()},cardView:function(e,t){var n;return n=location.hash.length>1?location.hash.substr(1):null,this.displayBoard({idCard:e,highlight:n}).done()},oldCardView:function(e,t,n){var r,o;return o=function(e){return/^\d+$/.test(e)},r=o(n)?l.for("top-level","loadCardId",t,n).catch(i,function(){return null}):d.resolve(n),r.then(function(e){return function(n){return e.displayBoard({idBoard:t,idCard:n})}}(this)).done()},showCardDetail:function(e,t){var n,r,o,i,l,d,p,h;if(l=null!=t?t:{},o=l.highlight,p=l.runMethod,i=l.isNavigating,null!=e){if(!this.onBoardView(null!=(d=e.getBoard())?d.id:void 0)||e.modelCache!==this.getCurrentModelCache())return void this.navigate(this.getCardUrl(e,o),{trigger:!0});v("Card Front","Open Card Detail"),r=new u({modelCache:this.getCurrentModelCache(),model:e}),n=e.getBoard(),h=this.showingCalendar(e.getBoard()&&this.applicationView.existingSubviewOrUndefined(a,e.getBoard())),c.show({view:r,hide:function(e){return function(t){return s.clear(),t?void 0:(e.setBoardLocation(n.id,h?"calendar":void 0),e.title(n.get("name")))}}(this),isNavigating:i}),this.waitForId(e,function(t){return function(){return t.navigate(t.getCardUrl(e,o),{replace:t.onCardView(),trigger:!1})}}(this)),null!=p&&r[p](),null!=o&&r.highlight(o,!0)}}}},{}],2:[function(e,n,r){var o,i,s,a,u,c;a=e(736),i=void 0,t(function(){return i=e(34)}),s=e("underscore"),u=e(101),o=e(29),c=e(736),n.exports={routes:[["*splat","displayErrorPage"]],displayErrorPage:function(e){var t;return t=s.extend({errorType:"notFound"},e,{url:location.pathname+location.search,isLoggedIn:o.isLoggedIn()}),this.staticView({title:u("error"),template:c,templateData:t,viewType:"error"})}}},{}],3:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T;a=e(29),i=e(506),s=e(211),u=void 0,t(function(){return u=e(156)}),c=void 0,t(function(){return c=e(365)}),p=void 0,t(function(){return p=e(34)}),d=void 0,t(function(){return d=e(33)}),h=e(514),m=e("bluebird"),f=e(126),g=e("underscore"),o=e("jquery"),v=e(70),b=e(231),C=e(40),x=e(102),j=e("moment"),S=e(129),T=e(43),l=x("DisplayBoard",["ConfirmToView","CardNotFound","CardNotFoundOnThisBoard","BoardNotFound"]),y=function(e){return"board_"+e},w=function(e,t){var n,r;null==t&&(t=m.resolve()),r=p.for("top-level","loadBoardSecondary",e),n=p.for("top-level","loadBoardPluginData",e),m.all([r,n]).catch(s,function(){}).done()},k=function(e){var t;return t=p.for("top-level","loadCurrentBoardData",e),w(e,t),t.catch(s.Unconfirmed,function(){return m.reject(l.ConfirmToView())}).catch(s,function(){return m.reject(l.BoardNotFound())})},_=function(){return h.hold(),m.resolve().disposer(function(){return h.release()})},n.exports={showCardOnBoard:function(e,t,n,r){return m.try(function(){var t;return null!=(t=n.getCard(e))?(v(null!=t.get("idBoard")&&null!=t.get("idList")&&null!=t.get("name"),"Tried to display a card that was only partially loaded"),t):r(e).tap(function(e){e.get("idBoard")!==n.id&&m.reject(l.CardNotFoundOnThisBoard("",{idBoard:n.id}))})}).then(function(e){return function(n){return e.showCardDetail(n,{highlight:t})}}(this))},showBoardDetailView:function(e,t){return m.try(function(n){return function(){var r,o,i,s;return r=t.model,null!=(i=e.idCard)?n.showCardOnBoard(i,e.highlight,r,e.loadCardData):e.usernameBoardProfile&&null!=(s=r.modelCache.findOne("Member","username",e.usernameBoardProfile))?t.showMemberProfile(s):null!=(o=e.calendarDate)?t.showCalendar(o):(e.openListComposer&&t.openListComposer(),n.setBoardLocation(r.id,e.section))}}(this))},renderBoard:function(e,t){var n;return m.resolve(this.onBoardView(e.id)?(n=this.existingTopLevelView(c,e),n.closeDetailView(),n):(this.clearPreviousView(),this.setViewType(e),this.showHeader(),n=this.topLevelView(c,e,g.extend(t,{modelCache:e.modelCache})),o("#content").html(n.render().el),o("body").addClass("body-board-view"),n))},settingsFromQuery:function(){return g.chain(location.search.substr(1).split("&")).map(function(e){return e.split("=",2)}).filter(function(e){var t;return t=e[0],"menu"===t||"filter"===t}).map(function(e){var t,n;return t=e[0],n=e[1],[t,decodeURIComponent(n)]}).object().value()},displayBoard:function(e){var t,n,r,o,u,c;return C("controller",["boardView",e.idBoard]),c=Date.now(),r=e.idBoard,o=e.idCard,v(r||o,"Illegal invocation of displayBoard: requires one of idBoard, or idCard"),v(null==r||f.checkId(r)||f.isShortLink(r),'Illegal invocation of displayBoard: idBoard must be a board ID or a short link (got "'+r+'")'),v(null==o||f.checkId(o)||f.isShortLink(o),'Illegal invocation of displayBoard: idCard must be a card ID or a short link (got "'+o+'")'),u=g.once(function(e){return p.for("top-level","loadCardData",e).catch(s,function(){return m.reject(l.CardNotFound())})}),t=function(e){return function(t){var n;return n=t.model,new m(function(t){return e.waitForId(n,t)})}}(this),n=g.extend({loadCardData:u},e),m.using(this.getSpinner(),function(s){return function(){return p.release("top-level"),m.try(function(){return null!=o?u(o).call("get","idBoard"):r}).then(function(e){return m.props({loadStartTime:Date.now(),board:k(e),timingLabel:null!=p.getUpToDateBoard(e)?"Known Board":"New Board"})}).then(function(r){var o,i,a;return o=r.board,a=r.timingLabel,i=r.loadStartTime,T("Timing","Load",a,Date.now()-c),m.using(_(),function(){var r;return r=Date.now(),s.renderBoard(o,{section:e.section,settings:s.settingsFromQuery()}).tap(function(){return T("Timing","Load and Render",a,Date.now()-c),T("Timing","Render",a,Date.now()-r)}).tap(t).then(b(s,"showBoardDetailView",n))})}).catch(l.ConfirmToView,function(){return v(a.isLoggedIn(),"Got 401: 'Confirm to view' while not logged in"),S(d,"waitFor","Member",a.myId()).then(function(){return s.displayErrorPage(g.extend({errorType:"unconfirmedBoardNotFound"},a.me().toJSON()))})}).catch(l.CardNotFound,function(){return s.displayErrorPage({errorType:"cardNotFound"})}).catch(l.BoardNotFound,function(){return s.displayErrorPage({errorType:"boardNotFound"})}).catch(l.CardNotFoundOnThisBoard,function(t){var n;return n=t.idBoard,i.show("card does not exist","warning","doesnotexist",5e3),s.setBoardLocation(n,e.section)})}}(this))}}},{}],4:[function(e,n,r){var o,i,s,a,u,c,l;i=e(211),s=void 0,t(function(){return s=e(435)}),a=void 0,t(function(){return a=e(33)}),u=void 0,t(function(){return u=e(34)}),l=e(40),c=e("bluebird"),o=e("jquery"),n.exports={routes:[["e/:name/admin","enterpriseAdminDashboardView"]],displayEnterprisePage:function(e){var t,n,r;return t=e.enterpriseName,n=e.loadFn,r=e.viewClass,l("controller",["enterprise"]),c.using(this.getSpinner(),function(s){return function(){return u.release("top-level"),u.for("top-level",n,t).then(function(t){var n,i,u;return t.isRealEnterprise()?(s.clearPreviousView(),s.setViewType(t),i={modelCache:a},n=s.topLevelView(r,t,i),s.showHeader(),o("body").addClass("body-tabbed-page"),o("#content").html(n.render().el),u=t.get("name"),void s.setLocation({title:u,location:e.getLocation.call(s,t.get("name"))})):void s.displayErrorPage()}).catch(i,function(){s.displayErrorPage()})}}(this))},enterpriseAdminDashboardView:function(e){return this.displayEnterprisePage({enterpriseName:e,loadFn:"loadEnterprise",viewClass:s,getLocation:this.getEnterpriseAdminDashboardUrl}).done()}}},{}],5:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x;s=e(29),a=void 0,t(function(){return a=e(380)}),i=void 0,t(function(){return i=e(436)}),u=void 0,t(function(){return u=e(439)}),c=void 0,t(function(){return c=e(441)}),l=void 0,t(function(){return l=e(446)}),d=void 0,t(function(){return d=e(448)}),p=void 0,t(function(){return p=e(450)}),h=void 0,t(function(){return h=e(33)}),m=e(451),f=e(514),g=void 0,t(function(){return g=e(452)}),v=void 0,t(function(){return v=e(645)}),y=void 0,t(function(){return y=e(453)}),b=void 0,t(function(){return b=e(454)}),w=e(126),_=e("underscore"),o=e("jquery"),x=e(493),k=e(27),C=function(e){var t;return t=e.getPref("twoFactor"),(null!=t?t.enabled:void 0)&&t.needsNewBackups},n.exports={showHeader:function(e){var t,n,r,j,S;null==e&&(e={}),o("#header .header-user").remove(),o("#header .header-boards-button").remove(),o("#header #header-search").parent().remove(),o("#header-search").empty(),o(".header-banner").remove(),o("#header nav").remove(),o("#boards-drawer").empty(),S=s.me(),r=h,o("#header").empty().prepend(x.fill("header_logo")),window.top===window&&(e.promo||!s.isLoggedIn()?o("#header").append(x.fill("header_promo_nav")):(o("#header").append(this.topLevelView(c,S,{modelCache:r}).render().el),e.noSearch||o("#header").append(this.topLevelView(v,S,{modelCache:r}).render().el),o("#header .header-woof").parent().remove(),o("#header").append(this.topLevelView(d,S,{modelCache:r}).render().el),f.enqueue("render_"+this.cid,function(e){return function(){return o("#boards-drawer").append(e.topLevelView(a,S,{modelCache:r}).render().el)}}(this))),o("#header").append(this.topLevelView(l,S,{modelCache:r}).render(e.promo).el),t=_.chain(k).pluck("code").filter(function(e){return 0!==e.indexOf("en")}).value(),null!=this.currentModel.get()&&w.hasValidInviteTokenFor(this.currentModel.get())?(e={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?e.idBoard=this.currentModel.get().id:this.onAnyOrganizationView()&&(e.idOrganization=this.currentModel.get().id),o("#header").after(this.topLevelView(p,S,e,this.currentModel.get().id).render().el)):s.isLoggedIn()?s.confirmed()?s.canLogIn()?(j=_.find(t,function(e){return s.me().shouldShowNewLanguageBannerFor(e)}))?o("#header").after(this.topLevelView(m,S,{modelCache:r,locale:j}).render().el):C(s.me())?o("#header").after(this.topLevelView(b,S,{modelCache:r}).render().el):(null!=(n=s.me().enterpriseWithRequiredConversion())||s.me().missedTransferDate())&&(e={modelCache:r,locale:j,enterprise:n},o("#header").after(this.topLevelView(i,S,e).render().el)):o("#header").after(this.topLevelView(y,S,{modelCache:r}).render().el):o("#header").after(this.topLevelView(u,S,{modelCache:r}).render().el):this.onAnyBoardView()&&this.currentModel.get().isPublic()&&o("#header").after(this.topLevelView(g,this.currentModel.get(),{modelCache:this.getCurrentModelCache()}).render().el),S.checkColorBlindMode())}}},{}],6:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V,$,z,R,F,U,q,H,K,W,G,J,Q,Y,X,Z=function(e,t){function n(){this.constructor=e}for(var r in t)ee.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},ee={}.hasOwnProperty;o=e("jquery"),i=void 0,t(function(){return i=e(506)}),a=void 0,t(function(){return a=e(282)}),u=void 0,t(function(){return u=e(456)}),c=e(29),l=e(227),d=void 0,t(function(){return d=e(156)}),p=void 0,t(function(){return p=e(365)}),m=void 0,t(function(){return m=e(509)}),f=e(77),g=void 0,t(function(){return g=e(86)}),v=e("hearsay"),y=void 0,t(function(){return y=e(95)}),b=e(18),w=void 0,t(function(){return w=e(198)}),_=void 0,t(function(){return _=e(33)}),k=void 0,t(function(){return k=e(34)}),C=void 0,t(function(){return C=e(200)}),x=void 0,t(function(){return x=e(202)}),j=void 0,t(function(){return j=e(513)}),S=e("bluebird"),T=void 0,t(function(){return T=e(269)}),M=void 0,t(function(){return M=e(270)}),R=e(39),J=e(43),Q=e(46),O=e(126),B=e(494),L=e("underscore"),F=e(106),G=e(493),z=e(101),P=e(70),A=e(231),s=e(211),X=e("xtend"),N=e(38),K=function(e){return RegExp("^/"+O.escapeForRegex(e)+"/([a-zA-Z0-9]{8})(/|$)")},I=function(e){var t;return null!=(t=K("c").exec(e))?t[1]:void 0},D=function(e){var t;return null!=(t=K("b").exec(e))?t[1]:void 0},q=function(e,t){return e&&t&&e===t},$=function(e,t){var n,r,o,i;return o=I(e),i=I(t),q(o,i)?!0:(n=D(e),r=D(t),q(n,r)?!0:!1)},V=function(e,t){var n;return n=c.isLoggedIn()?k.for("header",e):S.resolve(null),n.then(function(){return k.triggerWaits(t)}).catch(s,function(e){throw R(new Error("headerLoad ApiError, err = "+e+", err.constructor.name = "+e.constructor.name)),e}).catch(s.Unauthenticated,function(e){return console.log("Error trying to load header")}).done()},F(f,h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Z(t,e),t.prototype.initialize=function(){return this._savedTitle="",this.currentModel=new v.Slot(null),this.currentModel.use()},t.prototype.start=function(){return V("loadHeaderData","headerData"),setTimeout(A(V,"loadBoardsMenuData","boardsData"),500),B.addHandler({shortcut:function(e){return function(t){return t===b.QuestionMark?(e.navigate("shortcuts"),e.shortcutsView(),"Shortcuts page"):void 0}}(this)},{scope:"global"}),y.autoJoin().then(function(e){return e?QuickLoad.clear():void 0}).return()},t.prototype.viewType="none",t.prototype.topLevelView=function(e,t,n){return null==this.applicationView&&(this.applicationView=new a),null==n&&(n={}),null==n.modelCache&&(n.modelCache=this.getCurrentModelCache()),this.applicationView.subview(e,t,n)},t.prototype.existingTopLevelView=function(e,t){return this.applicationView.existingSubview(e,t)},t.prototype.existingTopLevelViewOrUndefined=function(e,t){var n;return null!=(n=this.applicationView)?n.existingSubviewOrUndefined(e,t):void 0},t.prototype.title=function(e){var t,n,r,o,i;return null!=e&&(this._savedTitle=e),o=C.unreadCount(_),i=o?"* ":"",t=i,(null!=(n=this._savedTitle)?n.length:void 0)>0&&(t+=this._savedTitle+" | "),t+="Trello",null!=(r=window.fluid)&&(r.dockBadge=o?o:null),g.setNotifications(o>0),document.title=t},t.prototype.setLocation=function(e){var t,n,r;r=e.title,t=e.location,n=e.options,null!=r&&this.title(r),t&&(/^#/.test(t)&&(t=t.substr(1)),this.navigate(t,n),this.location=t)},t.prototype.showingCalendar=function(e){return(null!=e?e.$(".calendar-wrapper").length:void 0)>0},t.prototype.setBoardLocation=function(e,t,n,r){var o;null==t&&(t=""),null==n&&(n=[]),o=_.get("Board",e).get("name"),this.setLocation({title:o,location:this.getBoardUrl(e,t,n),options:r})},t.prototype.saveMemberBoardProfileLocation=function(e,t){return this.setLocation({title:e.get("fullName"),location:this.getMemberBoardProfileUrl(e.get("username"),t)})},t.prototype.isOnSearchPage=function(){return"search"===this.currentPage},t.prototype.onAnyOrganizationView=function(){return this.currentModel.get()instanceof x},t.prototype.onOrganizationView=function(e){return this.onAnyOrganizationView()&&this.currentModel.get().id===e},t.prototype.onAnyBoardView=function(){return this.currentModel.get()instanceof d},t.prototype.onBoardView=function(e){return this.onAnyBoardView()?O.checkId(e)?this.currentModel.get().id===e:O.isShortLink(e)?this.currentModel.get().get("shortLink")===e:void 0:!1},t.prototype.getCurrentBoardView=function(){return this.existingTopLevelViewOrUndefined(p,this.getCurrentBoard())},t.prototype.getCurrentBoard=function(){return this.onAnyBoardView()?this.currentModel.get():null},t.prototype.getCurrentModelCache=function(){return this.currentModelCache},t.prototype.saveBoardsView=function(){null==this.savedBoardViewInformation&&this.onAnyBoardView()&&(this.savedBoardViewInformation={idBoard:this.currentModel.get().id,path:/\/b\/[^\/]*\/(.*)/.exec(this.location)[1]})},t.prototype.loadBoardsView=function(){var e,t,n;if(this.savedBoardViewInformation)return n=this.savedBoardViewInformation,e=n.idBoard,t=n.path,this.boardView(e,t),delete this.savedBoardViewInformation},t.prototype.clearPreviousView=function(){var e;this.overBoardsPage&&(this.overBoardsPage=!1),T.setQuery(""),null!=(e=this.applicationView)&&e.remove(),delete this.applicationView,j.hide(),m.isVisible&&m.hide(!0),o("#content").html(""),o("body").scrollTop("0").removeClass("body-single-column body-tabbed-page body-search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background body-default-header").css({"background-image":"","background-color":""},u.clear())},t.prototype.setViewType=function(e){var t;this.currentModel.get()instanceof d&&this.currentModel.get().markAsViewed(),L.isString(e)?(this.currentModelCache=_,this.currentModel.set(null)):(this.currentModelCache=e.modelCache,this.currentModel.set(e)),this.currentPage=e,this.currentModel.get()instanceof d?(t=this.currentModel.get(),this.waitForId(t,function(){return t.markAsViewed(),M.pushBoard(t.id)})):g.setBackground({useDefault:!0})},t.prototype.onCardView=function(){return/^c\/[a-zA-Z0-9]{8}(\/[^\/]+)?/.test(l.history.fragment)},t.prototype.organizationById=function(e){return k.for("top-level","loadOrgNameById",e).then(function(e){return function(t){return e.organizationBoardsView(t)}}(this)).catch(s,function(e){return function(){return e.displayErrorPage()}}(this)).done()},t.prototype.getSpinner=function(){return o(".header-logo").addClass("is-throbbing"),S.resolve().disposer(function(){o(".header-logo").removeClass("is-throbbing")})},t.prototype.syncError=function(){i.showHtml(G.fill("sync_error"),"error","modelSync"),this._reportedError||(this._reportedError=!0,J("Error","Sync Error"))},t}(l.Router)),U=l.History.prototype.navigate,Y=function(e){return""===e&&(e="boards"),"function"==typeof window.ga&&window.ga("send","pageview","/"+e),"function"==typeof window.sp&&window.sp("trackPageView",null,N()),Q.pageView()},L.extend(l.History.prototype,{navigate:function(e,t){$(e,this.location.pathname)&&(t=X(t,{replace:!0})),U.call(this,e,t),Y(e)}}),E=[e(3),e(12),e(5),e(11),e(10),e(7),e(13),e(1),e(4),e(8),e(9),e(2)],H=L.chain(E).map(function(e){return L.extend(h.prototype,e),delete h.prototype.routes,e.routes}).compact().flatten(!0).value().reverse(),W=new h,H.forEach(function(e){var t,n;return n=e[0],t=e[1],W.route(n,t)}),n.exports=W},{}],7:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f;o=e("jquery"),i=e(211),s=void 0,t(function(){return s=e(212)}),a=e(29),u=void 0,t(function(){return u=e(499)}),c=void 0,t(function(){return c=e(95)}),l=void 0,t(function(){return l=e(33)}),d=void 0,t(function(){return d=e(34)}),p=e(217),h=e("bluebird"),m=e("underscore"),f=function(e){var t,n,r,i,s;return n=o.cookie("invitation")||"",r=n.split(":"),s=r[0],t=r[1],i=r[2],s!==e&&(t=null),{id:t,secret:i}},n.exports={routes:[["invite/accept-board","handleBoardCookieInvitation"],["invite/accept-team","handleTeamCookieInvitation"]],_handleInvitation:function(e){var t,n,r,l,p,m,f,g,v,y;return l=e.id,p=e.loadModel,g=e.targetUrl,v=e.transferUrl,y=e.viewType,t=e.apiUrl,m=e.nameFromInvite,n=e.emailRestrictionsFromInvite,f=function(e){return function(){return d.await("headerData").then(function(){if(!a.isLoggedIn())throw i.Unauthorized();return p()}).then(function(){var t;if(null!=(t=g()))return e.navigate(t,{trigger:!0});throw i.Unauthorized()})}}(this),r=null!=t?s({url:t,type:"get"}):h.reject(i.NotFound()),h.using(this.getSpinner(),function(e){return function(){return o("#content").html('<div class="spinner loading"></div>'),c.autoJoin().then(function(){return f()}).catch(i.NotFound,i.Unauthorized,i.Unconfirmed,function(){var i;return e.clearPreviousView(),i=a.me(),null!=i&&e.setViewType(i),e.showHeader(),h.props({invite:r,member:a.isLoggedIn()?d.for("top-level","loadMemberLogins",a.myId()):void 0}).then(function(r){var a,l;return l=r.invite,a=e.topLevelView(u,i,{inviter:l.memberInviter,name:m(l),emailRestrictions:n(l),transferUrl:"function"==typeof v?v():void 0,willJoinOnConfirm:c.inQueue(t),fxJoin:function(){return s({method:"post",url:t}).then(f)},fxQueueJoin:function(){return c.add(t)}}),o("#content").html(a.render().el)})})}}(this))},handleBoardInvitation:function(e,t){var n;n=e&&t?"/1/board/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return d.for("top-level","loadBoardData",e,p.currentBoardMinimal);throw i.BadRequest("invalid board shortLink")},targetUrl:function(t){return function(){var n;return null!=(n=l.get("Board",e))&&n.isMember(a.me())?t.getBoardUrl(n):null}}(this),viewType:"board-invitation-link",apiUrl:n,nameFromInvite:function(e){return e.board.name},emailRestrictionsFromInvite:function(){return[]}}).catch(i,function(e){return function(){return e.displayErrorPage({errorType:"boardInvitationNotFound"})}}(this)).done()},handleOrgInvitation:function(e,t){var n;n=e&&t?"/1/organization/"+e+"/invitationSecret/"+t:null,this._handleInvitation({loadModel:function(){if(e)return d.for("top-level","loadOrganizationData",e);throw i.BadRequest("invalid orgname")},targetUrl:function(t){return function(){var n;return null!=(n=l.findOne("Organization",function(t){return t.get("name")===e}))&&n.isMember(a.me())?t.getOrganizationUrl(e):null}}(this),transferUrl:function(){return"/"+e+"/transfer-account"},viewType:"org-invitation-link",apiUrl:n,nameFromInvite:function(e){return e.organization.displayName},emailRestrictionsFromInvite:function(e){var t,n;return null!=(t=null!=(n=e.organization.prefs)?n.orgInviteRestrict:void 0)?t:[]}}).catch(i,function(e){return function(t){return e.displayErrorPage({errorType:"orgInvitationNotFound"})}}(this)).done()},handleBoardCookieInvitation:function(){var e,t,n;return e=f("board"),n=e.id,t=e.secret,this.handleBoardInvitation(n,t)},handleTeamCookieInvitation:function(){var e,t,n;return t=f("organization"),e=t.id,n=t.secret,this.handleOrgInvitation(e,n)}}},{}],8:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M;s=e(29),a=void 0,t(function(){return a=e(509)}),k=e(101),u=void 0,t(function(){return u=e(198)}),c=void 0,t(function(){return c=e(537)}),l=void 0,t(function(){return l=e(541)}),d=void 0,t(function(){return d=e(543)}),p=void 0,t(function(){return p=e(548)}),h=void 0,t(function(){return h=e(553)}),m=void 0,t(function(){return m=e(554)}),f=void 0,t(function(){return f=e(33)}),g=void 0,t(function(){return g=e(34)}),v=e("bluebird"),M=e(118),o=e("jquery"),C=e(40),w=e("underscore"),_=e(70),i=e(211),y=void 0,t(function(){return y=e(560)}),x=e(85),T=e(46),b=e(126),j=null,S="/"===location.pathname,n.exports={routes:[["","memberBoardsView"],[":username/cards","memberCardsView"],[":username/notifications","memberNotificationsView"]],displayMemberPage:function(e){var t,n,r,u,c,l,d,p,h,m,b;return m=e.username,l=e.loadFn,b=e.viewClass,u=e.getLocation,t=e.bodyClass,c=e.inDialogIfOnBoard,d=e.maxDialogWidth,p=e.product,h=e.titleKey,r=e.fxAllowOverlay,null==m&&(m=s.myUsername()),n=this.onAnyBoardView()&&c||this.overBoardsPage,C("controller",["memberBoardsView"]),v.using(this.getSpinner(),function(c){return function(){return g.release("top-level"),g.for("top-level",l,m).then(function(i){var l,d,m,g,v;n&&c.saveBoardsView(),n||c.clearPreviousView(),("function"==typeof r?r(i):void 0)&&(g=c.topLevelView(y,i),o("body").append(g.render().el)),c.setViewType(i),m={product:p,modelCache:f},n?(d=new b(w.extend({model:i},m)),l=null,null!=e.maxDialogWidth&&(l=e.maxDialogWidth),a.show({isNavigating:!0,view:d,maxWidth:l,hide:function(e){return e?void 0:c.loadBoardsView()}})):(d=c.topLevelView(b,i,m),c.showHeader(),t?o("body").addClass(t):o("body").addClass("body-tabbed-page"),o("#content").html(d.render().el)),v=s.isMe(i)&&null!=h?k(["page title",h]):i.get("fullName")+" ("+i.get("username")+")",c.setLocation({title:v,location:u.call(c,i.get("username"),p),options:{replace:!0}})}).catch(i,function(){c.displayErrorPage()})}}(this))},memberBoardsView:function(){var e;return s.isLoggedIn()?(null==j&&(j=o.cookie("simulateNewUser")),e={username:"me",loadFn:"loadMemberBoardsData",viewClass:d,getLocation:this.getMemberBoardsUrl,titleKey:"boards",fxAllowOverlay:function(e){var t;return(!e.isDismissed("quick-team-create")||j)&&S&&(j||b.idToDate(s.myId())>b.dateBefore({minutes:3})&&0===e.organizationList.length&&e.boardList.length<=1)&&(null!=(t=x("quickTeamOverlayV4"))?t.get("enabled"):void 0)}},this.displayMemberPage(e).then(M).done(),j||b.idToDate(s.myId())>b.dateBefore({minutes:3})?T.newSignup():void 0):this.displayErrorPage()},memberNotificationsView:function(e){return null==e&&(e="me"),s.isLoggedIn()?(e="me",this.displayMemberPage({username:e,loadFn:"loadNotificationData",viewClass:h,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:this.getMemberNotificationsUrl,titleKey:"notifications"}).done()):this.displayErrorPage()},memberProfileView:function(e){return null==e&&(e="me"),this.displayMemberPage({username:e,loadFn:"loadMemberProfileData",viewClass:m,getLocation:this.getMemberProfileUrl,titleKey:"profile"}).done()},memberCardsView:function(e,t){var n;return null==e&&(e="me"),n=w.extend({username:e,loadFn:"loadMemberCardsData",viewClass:p,getLocation:this.getMemberCardsUrl,titleKey:"cards"},t),this.displayMemberPage(n).done()},memberAccountView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:c,getLocation:this.getMemberAccountUrl,titleKey:"settings"}).done()},memberBillingView:function(e){return e="me",this.displayMemberPage({username:e,loadFn:"loadMemberAccountData",viewClass:l,getLocation:this.getMemberBillingUrl,titleKey:"billing"}).done()}}},{}],9:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;s=e(29),a=void 0,t(function(){return a=e(509)}),u=void 0,t(function(){return u=e(198)}),c=void 0,t(function(){return c=e(33)}),l=void 0,t(function(){return l=e(34)}),d=void 0,t(function(){return d=e(202)}),p=void 0,t(function(){return p=e(590)}),h=void 0,t(function(){return h=e(592)}),m=void 0,t(function(){return m=e(596)}),f=void 0,t(function(){return f=e(597)}),g=void 0,t(function(){return g=e(601)}),v=void 0,t(function(){return v=e(606)}),o=e("jquery"),_=e(40),b=e("underscore"),w=e(231),y=e("bluebird"),k=e(129),i=e(211),C=e("xtend"),n.exports={routes:[["org/:id","organizationById"],[":name/members","organizationMembersView"],[":name/:username/cards","organizationMemberCardsView"],[":name/export","organizationExportView"]],organizationBoardsView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},viewClass:m,getLocation:this.getOrganizationUrl}).done()},organizationMembersView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationMembersData",viewClass:v,getLocation:this.getOrganizationMembersUrl}).get("id").then(w(l,"loadOrganizationMembersExtraData")).done()},organizationMemberCardsView:function(e,t){return this.displayOrganizationPage({orgname:e,username:t,loadFn:"loadOrganizationMinimal",additionalFns:{cards:"loadOrgMemberCardData",members:"loadOrganizationMemberMinimal"},viewClass:g,getLocation:this.getOrganizationMemberCardsUrl}).done()},organizationAccountView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:p,getLocation:this.getOrganizationAccountUrl,membersOnly:!0}).done()},organizationExportView:function(e){return this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationExportData",viewClass:f,getLocation:this.getOrganizationExportUrl,adminOnly:!0}).done()},organizationBillingView:function(e,t){return null==t&&(t={}),this.displayOrganizationPage({orgname:e,loadFn:"loadOrganizationData",viewClass:h,getLocation:this.getOrganizationBillingUrl,urlOptions:{returnUrl:t.returnUrl}}).done()},displayOrganizationPage:function(e){var t,n,r,d,p;return n=e.orgname,p=e.username,r=e.product,d=e.urlOptions,t=this.onAnyBoardView()&&e.inDialogIfOnBoard||this.overBoardsPage,_("controller",["organization"]),y.using(this.getSpinner(),function(h){return function(){return l.release("top-level"),l.for("top-level",e.loadFn,n).tap(function(t){var n;return y.all(b.values(null!=(n=e.additionalFns)?n:{}).map(function(e){return l[e](t.id,p)}))}).then(function(i){var l,m,f,g,v,y;return f=c.findOne(u,"username",p),!i.owned()&&e.adminOnly||!i.isMember(s.me())&&e.membersOnly||null!=e.businessClass&&!i.isFeatureEnabled(e.businessClass)?(h.organizationBoardsView(n),i):(t?h.saveBoardsView():h.clearPreviousView(),h.setViewType(i),g={urlOptions:d},f&&(g.member=f),null!=r&&(g.product=r),g.modelCache=h.getCurrentModelCache(),t?(m=null,null!=e.maxDialogWidth&&(m=e.maxDialogWidth),v=new e.viewClass(b.extend({model:i},g)),a.show({isNavigating:!0,view:v,maxWidth:m,hide:function(e){return e?void 0:h.loadBoardsView()}})):(v=h.topLevelView(e.viewClass,i,g),h.showHeader(),o("body").addClass("body-tabbed-page"),o("#content").html(v.render().el)),y=i.get("displayName")+" ("+i.get("name")+")",l=e.getLocation.apply(h,f?[i.get("name"),f.get("username"),d]:r?[i.get("name"),r,d]:[i.get("name"),d]),h.setLocation({title:y,location:l}),i)}).catch(i.Unconfirmed,function(){return k(c,"waitFor","Member",s.myId()).then(function(){return h.displayErrorPage(b.extend({errorType:"unconfirmedOrgNotFound"},s.me().toJSON()))})}).catch(i,function(){return h.displayErrorPage()})}}(this))}}},{}],10:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;i=e(29),s=void 0,t(function(){return s=e(579)}),a=void 0,t(function(){return a=e(509)}),u=void 0,t(function(){return u=e(198)}),c=void 0,t(function(){return c=e(33)}),l=void 0,t(function(){return l=e(34)}),d=e("bluebird"),p=void 0,t(function(){return p=e(645)}),h=void 0,t(function(){return h=e(269)}),m=e(126),o=e("jquery"),g=e(101),v=e(40),f=e("underscore"),y=e(493),n.exports={routes:[["shortcuts","shortcutsView"],["blank","blankView"],["select-org-to-upgrade","businessClassSelectOrgView"],["select-team-to-upgrade","businessClassSelectTeamView"],["search(?*query)","searchView"]],businessClassSelectOrgView:function(){this.navigate("/select-team-to-upgrade",{replace:!0,trigger:!0})},businessClassSelectTeamView:function(){var e;return e="/select-team-to-upgrade",i.isLoggedIn()?d.using(this.getSpinner(),function(t){return function(){return l.for("top-level","loadMyOrganizations").then(function(n){var r,i;return t.setViewType("select-org"),r=f.filter(n.organizationList.models,function(e){return!e.isPremium()}),1===r.length?void t.navigate("/"+r[0].get("name")+"/billing",{trigger:!0}):(t.setLocation({title:g("select organization to upgrade to business class"),location:e}),t.clearPreviousView(),i=t.topLevelView(s,n),t.showHeader(),o("#content").html(i.render().el))})}}(this)).done():void(window.location="/login?returnUrl="+e)},searchView:function(){return v("controller",["searchView"]),d.using(this.getSpinner(),function(e){return function(){return l.await("headerData").then(function(){var t,n,r,s,a;return i.isLoggedIn()?(e.setViewType("search"),e.clearPreviousView(),
r=i.me(),t=c,s=m.getQueryParameter("q",""),n=e.topLevelView(p,r,{modelCache:t}),a=n.getResultsView(),h.setQuery(s),a.update(),e.showHeader({noSearch:!0}),o("body").addClass("body-search-page"),o("#content").append(n.render().el).append(a.render().el),void f.defer(function(){return n.focusInput()})):void e.displayErrorPage()})}}(this)).done()},blankView:function(){return d.using(this.getSpinner(),function(e){return function(){return l.await("headerData").then(function(){e.setViewType("blank"),e.clearPreviousView(),e.showHeader()})}}(this)).done()},shortcutsView:function(){l.waitFor("headerData",function(e){return function(){var t,n;return n=g("keyboard shortcuts"),t="shortcuts",e.onAnyBoardView()||e.overBoardsPage?(e.saveBoardsView(),a.show({html:y.fill("shortcuts"),maxWidth:550,hide:function(t){return t?void 0:e.loadBoardsView()}}),e.setLocation(n,t)):e.staticView({title:n,location:t,bodyClass:"body-single-column",template:function(){return y.fill("shortcuts")}})}}(this))},staticView:function(e){var t,n,r,i,s,a,u;return a=e.title,r=e.location,i=e.template,s=e.templateData,t=e.bodyClass,u=e.viewType,n=e.headerOpts,v("controller",[r+"View"]),d.using(this.getSpinner(),function(e){return function(){return l.await("headerData").then(function(){return e.setViewType(null!=u?u:r),e.clearPreviousView(),e.showHeader(n),i(s)}).then(function(n){return o("body").addClass(t),o("#content").html(n),e.setLocation({title:a,location:r})})}}(this)).done()}}},{}],11:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g;o=e("jquery"),u=e("underscore"),s=void 0,t(function(){return s=e(34)}),i=e(29),a=e("bluebird"),h=function(e){return e.toLowerCase().replace(/[-_()\[\]:,]/g," ").replace(/\s+/g," ")},l=function(e,t){var n;return n=h(t),u.find(e,function(e){return h(e.get("name"))===n})},g=function(e){return e.toLowerCase().split(/[-_ ]/)},f=function(e,t){var n;return n=g(t),u.find(e,function(e){var t;return t=g(h(e.get("name"))),u.all(n,function(e){return u.any(t,function(t){return 0===t.indexOf(e)})})})},p=function(e,t){var n;return n=g(t),u.find(e,function(e){var t;return t=h(e.get("name")),u.all(n,function(e){return-1!==t.indexOf(e)})})},m=function(e){return e.isOpen()},c=function(e){return-new Date(e.get("dateLastActivity"))},d=function(e){return e.replace(/[-_ ]+/g," ")},n.exports={routes:[["go/*search","quickBoard"],["to/*search","quickBoard"],["/*search","quickBoard"]],quickBoard:function(e){return e=decodeURIComponent(e),i.isLoggedIn()?void a.using(this.getSpinner(),function(t){return function(){return a.all([s.await("headerData").then(function(){return t.showHeader()}),a.try(function(){return e?s.for("top-level","loadQuickBoardsSearch",d(e)):void 0}),s.for("top-level","loadQuickBoardsData")]).then(function(){var n,r,o,s,a,u,h,g,v,y,b,w,_;for(y=i.me(),_=y.boardStarList.chain().invoke("getBoard").compact().filter(m).value(),b=y.boardList.chain().filter(m).sortBy(c).value(),w=y.organizationList.chain().pluck("boardList").pluck("models").flatten().filter(m).sortBy(c).value(),v=[l,f,p],o=[_,b,w],s=0,u=v.length;u>s;s++)for(g=v[s],a=0,h=o.length;h>a;a++)if(r=o[a],null!=(n=g(r,e)))return history.replaceState(null,null,t.getBoardUrl(n)+location.search),void t.displayBoard({idBoard:n.id});return t.navigate("/search?q="+encodeURIComponent(d(e)),{trigger:!0})})}}(this)).done():void(window.location="/login?returnUrl="+encodeURIComponent("//"+e))}}},{}],12:[function(e,n,r){var o,i,s,a;o=e(29),i=void 0,t(function(){return i=e(33)}),s=e(126),a=e("underscore"),n.exports={getSearchUrl:function(e){return"/search?q="+encodeURIComponent(e)},getOrganizationUrl:function(e){var t;return t=a.isString(e)?e:e.get("name"),"/"+t},getEnterpriseAdminDashboardUrl:function(e){var t;return t=a.isString(e)?e:e.get("name"),"/e/"+t+"/admin"},_orgUrl:function(e,t,n){var r;return null==n&&(n={}),r=n.returnUrl?r="?returnUrl="+encodeURIComponent(n.returnUrl):"",""+this.getOrganizationUrl(e)+t+r},getOrganizationMemberCardsUrl:function(e,t){return this._orgUrl(e,"/"+t+"/cards")},getOrganizationAccountUrl:function(e){return this._orgUrl(e,"/account")},getOrganizationBillingUrl:function(e,t){return this._orgUrl(e,"/billing",t)},getOrganizationExportUrl:function(e){return this._orgUrl(e,"/export")},getOrganizationMembersUrl:function(e){return this._orgUrl(e,"/members")},getBoardUrl:function(e,t,n){var r,o,a,u,c,l,d;for(null==n&&(n=[]),null!=(null!=e?e.id:void 0)&&(e=e.id),o=i.get("Board",e),null!=(d=null!=o?o.get("url"):void 0)?r=s.relativeUrl(d):(c=null!=o?o.get("name"):void 0,r=c?"/board/"+s.makeSlug(c)+"/"+e:"/board/"+e),t&&(r+="/"+t),a=0,u=n.length;u>a;a++)l=n[a],r+="/"+l;return r},getBoardShortUrl:function(e,t){var n,r,o,a;return null!=(null!=e?e.id:void 0)&&(e=e.id),r=i.get("Board",e),null!=(a=null!=r?r.get("shortUrl"):void 0)?n=s.relativeUrl(a):(o=null!=r?r.get("shortLink"):void 0,n="/b/"+o),t&&(n+="/"+t),n},getBoardPowerUpsUrl:function(e){return this.getBoardUrl(e)+"?menu=power-ups"},getBoardPowerUpsUpgradeUrl:function(e){var t;return null!=(t=e.getOrganization())?this.getOrganizationBillingUrl(t,{returnUrl:this.getBoardPowerUpsUrl(e)}):"/business-class"},getMemberBoardProfileUrl:function(e,t){return[this.getBoardUrl(t),"member",e].join("/")},getMemberProfileUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e},getMemberNotificationsUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/notifications"},getMemberBoardsUrl:function(e){return null==e&&(e=o.myUsername()),e===o.myUsername()?"/":"/"+e+"/boards"},getMemberCardsUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/cards"},getMemberAccountUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/account"},getMemberBillingUrl:function(e){return null==e&&(e=o.myUsername()),"/"+e+"/billing"},getCardUrl:function(e,t){var n,r,o,i;return n=null!=(i=e.get("url"))?s.relativeUrl(i):(r=e.get("name"),this.getCardUrlWithoutModels(e.get("idBoard"),null!=(o=e.get("idShort"))?o:e.id,r)),t?[n,t].join("#"):n},getCardUrlWithoutModels:function(e,t,n){return null==t?null:s.isShortId(t)?"/card/"+s.makeSlug(n)+"/"+e+"/"+t:"/card/board/"+s.makeSlug(n)+"/"+e+"/"+t},getBoardInvitationLinkUrl:function(e,t){return"/invite/b/"+e.get("shortLink")+"/"+t+"/"+s.makeSlug(e.get("name"))},getOrganizationInvitationLinkUrl:function(e,t){return"/invite/"+e.get("name")+"/"+t},getActionUrl:function(e){var t,n;return n=e.isCommentLike()?"comment":"action",t=[n,e.id].join("-"),this.getCardUrl(e.getCard(),t)}}},{}],13:[function(e,n,r){var o,i,s,a,u,c,l,d;o=e("jquery"),i=e(211),s=void 0,t(function(){return s=e(212)}),a=e("bluebird"),u=e(112),c=e("underscore"),d=e(231),l=e(70),n.exports={routes:[[":name/account","userOrOrgAccountView"],[":name/billing(?*query)","userOrOrgBillingView"],[":name/billing/card","userOrOrgBillingCardView"],[":name/billing/card/:product","userOrOrgBillingCardView"],[":name(/)","userOrOrgProfileView"]],userOrOrgProfileView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberProfileView,this.organizationBoardsView)},userOrOrgAccountView:function(e){null==e&&(e="me"),this.userOrOrgView(e,this.memberAccountView,this.organizationAccountView)},userOrOrgBillingView:function(e){var t,n,r;null==e&&(e="me"),r=null!=(t=null!=(n=/returnUrl=([^&]+)/.exec(location.search))?n[1]:void 0)?decodeURIComponent(t):void 0,/^\/($|[a-zA-Z0-9])/.test(r)||(r=void 0),this.userOrOrgView(e,this.memberBillingView,this.organizationBillingView,{returnUrl:r})},userOrOrgBillingCardView:function(e,t){null==e&&(e="me"),this.navigate([e,"billing"].join("/"),{replace:!0,trigger:!0})},getViewData:function(e){var t,n;return t="typeof_"+e,null!=(n=u.get(t))?a.resolve(n):s({url:"/1/types/"+e}).tap(d(u,"set",t))},userOrOrgView:function(e,t,n,r){return null==r&&(r={}),this.getViewData(e).then(function(o){return function(i){var s;return s=function(){switch(i.type){case"member":return t;case"organization":return n}}(),l(null!=s,"/1/types/"+e+" resolved to "+i.type),s.call(o,e,r)}}(this)).catch(i.NotFound,function(e){return function(){return e.displayErrorPage()}}(this)).done()}}},{}],14:[function(e,t,n){var r,o;o="http://creativecommons.org/licenses/by/2.0/deed.en",r={unsplash:{name:"Unsplash"},photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}},t.exports={blue:{type:"default",brightness:"dark",color:"#0079BF"},orange:{type:"default",brightness:"dark",color:"#D29034"},green:{type:"default",brightness:"dark",color:"#519839"},red:{type:"default",brightness:"dark",color:"#B04632"},purple:{type:"default",brightness:"dark",color:"#89609E"},pink:{type:"default",brightness:"dark",color:"#CD5A91"},lime:{type:"default",brightness:"dark",color:"#4BBF6B"},sky:{type:"default",brightness:"dark",color:"#00AECC"},grey:{type:"default",brightness:"dark",color:"#838C91"},mountain:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://a.trellocdn.com/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://a.trellocdn.com/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://a.trellocdn.com/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:o}},cosmos:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://a.trellocdn.com/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,url:"https://a.trellocdn.com/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://a.trellocdn.com/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:o}},rain:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",license:o}},dew:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://a.trellocdn.com/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://a.trellocdn.com/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},{width:320,height:212,url:"https://a.trellocdn.com/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",license:o}},"snow-bokeh":{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:o}},city:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://a.trellocdn.com/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://a.trellocdn.com/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://a.trellocdn.com/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:o}},canyon:{type:"premium",pack:r.photos,brightness:"light",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:o}},ocean:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:o}},river:{type:"premium",pack:r.photos,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:o}},fall:{type:"premium",pack:r.photos,discontinued:!0,fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://a.trellocdn.com/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://a.trellocdn.com/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:o}},snow:{type:"premium",pack:r.photos,discontinued:!0,fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://a.trellocdn.com/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},{width:1024,height:683,url:"https://a.trellocdn.com/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://a.trellocdn.com/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:o}},purty_wood_dark:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:o}},"subtle-irongrip":{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:o}},"red-sweater":{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:o}},hex:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:r.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:r.patterns,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},"orange-blur":{type:"premium",pack:r.patterns,brightness:"dark",fullSizeUrl:"https://a.trellocdn.com/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}}},{}],15:[function(e,t,n){t.exports={enabled:!0,id:"webinars-2016-10-20",icon:"information",dateExpires:"2016-10-20T16:00:00Z",locale:"en-US",message:"Upcoming Webinar: [Roadmaps and Retrospectives](https://trello.com/webinars)."}},{}],16:[function(e,t,n){var r,o,i,s,a,u,c;for(t.exports=r={},c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0,s=c.length;s>i;i++)o=c[i],r[o.toLowerCase().charCodeAt(0)]=o,r[o.toUpperCase().charCodeAt(0)]=o;u={" ":"Space","?":"QuestionMark",",":"Comma",".":"Period","/":"ForwardSlash","<":"AngleLeft",">":"AngleRight",";":"Semicolon"};for(o in u)a=u[o],r[o.charCodeAt(0)]=a},{}],17:[function(e,t,n){var r;t.exports=r={8:"Backspace",9:"Tab",10:"LineFeed",13:"Enter",27:"Escape",46:"Delete",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"}},{}],18:[function(e,t,n){var r,o,i,s,a,u,c,l,d;r=e(16),o=e(17),t.exports=i={Unknown:"Unknown"};for(d in r)c=r[d],i[c]=c;for(d in o)c=o[d],i[c]=c;for(l="0123456789".split(""),a=0,u=l.length;u>a;a++)s=l[a],i["_"+s]=i[s]},{}],19:[function(e,t,n){var r,o,i;o=e("underscore"),r=e(21),i=o.chain(r).values().max().value(),t.exports=i>Date.now()?"NewPowerUps_"+i.toISOString().substr(0,10):void 0},{}],20:[function(e,t,n){var r,o,i,s,a,u,c=[].slice;r=e(87),o=["additionalStickers","customStickers","additionalBoardBackgrounds","customBoardBackgrounds","largeAttachments","customEmoji","savedSearches"],a=c.call(o).concat(["crown"],["readSecrets"],["threePlugins"]),u=c.call(o).concat(["infinitePlugins"]),s={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:u},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:a,yearlyEquivalent:38},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:a}},i={currentProducts:{monthly:"trelloGoldMonthly",yearly:"trelloGoldYearly"},extras:{currentPriceObjectForModel:function(e){var t,n;return t=this.currentProducts.monthly,n=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),monthlyPrice:this.getPrice(t)},yearly:{productNumber:this.getProductNumber(n),price:this.getPrice(n),monthlyPrice:this.getPrice(n)/12,savePercent:this.getYearlyDiscountPercent(n,t)},billingStrategy:{flatRate:!0}}}}},t.exports=new r(s,i)},{}],21:[function(e,t,n){var r,o;r=e("underscore"),o={"55a5d917446f51777421000d":"2016-08-07","56d5e249a98895a9797bebb9":"2016-08-23","570262ea1100fa611d7e200a":"2016-08-23","56cdf5f7071f133a93eb2363":"2016-08-23","57b47fb862d25a30298459b1":"2016-08-23"},t.exports=r.chain(o).pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,new Date(Date.parse(n))]}).object().value()},{}],22:[function(e,t,n){var r,o,i,s,a,u,c,l=[].slice;r=e(87),o=["export","logo","observers","removal","activity","deactivated","orgCards","googleApps","orgMembersPage","superAdmins","prefs","inviteOrg","restrictVis","disableExternalMembers"],i=l.call(o).concat(["goldMembers"],["csvExport"],["shortExportHistory"]),s=l.call(i).concat(["tags"],["plugins"]),a=l.call(s).concat(["enterpriseUI"]),c={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:o,hidden:!0,prebill:!1,upgrade:!0,yearlyEquivalent:36},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:o,hidden:!0,upgrade:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:o,hidden:!0,upgrade:!0,yearlyEquivalent:40},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:o,hidden:!0,upgrade:!0},96:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:5,features:i,perUser:!0,upgrade:!0,yearlyEquivalent:97},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:i,perUser:!0,upgrade:!0},98:{shortName:"businessClass3Monthly",name:"Business Class",interval:"monthly",price:10,features:s,perUser:!0,perActiveUser:!0,yearlyEquivalent:99},99:{shortName:"businessClass3Yearly",name:"Business Class",interval:"yearly",price:100,features:s,perUser:!0,perActiveUser:!0},100:{shortName:"enterprise",name:"Enterprise",interval:"yearly",price:0,features:a,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},101:{shortName:"businessClass2PO",name:"Business Class v2 PO",interval:"yearly",price:0,features:i,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0,upgrade:!0},102:{shortName:"businessClass3PO",name:"Business Class v3 PO",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0},103:{shortName:"businessClass3x1Monthly",name:"Business Class",interval:"monthly",price:12.5,features:s,perUser:!0,perActiveUser:!0,yearlyEquivalent:104},104:{shortName:"businessClass3x1Yearly",name:"Business Class",interval:"yearly",price:119.99,features:s,perUser:!0,perActiveUser:!0},105:{shortName:"businessClass3x2Monthly",name:"Business Class",interval:"monthly",price:12.5,features:s,perUser:!0,perActiveUser:!1,yearlyEquivalent:106},106:{shortName:"businessClass3x2Yearly",name:"Business Class",interval:"yearly",price:119.99,features:s,perUser:!0,perActiveUser:!1},107:{shortName:"businessClass3x1PO",name:"Business Class v3.1 PO",interval:"yearly",price:0,features:s,perUser:!1,perActiveUser:!1,hidden:!0,purchaseOrder:!0}},u={globalFeatures:["logo"],currentProducts:{monthly:"businessClass3x2Monthly",yearly:"businessClass3x2Yearly"},extras:{BC1Products:[35,36,39,40],currentPriceObjectForModel:function(e){var t,n;return t=this.currentProducts.monthly,n=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(t),price:this.getPrice(t),totalPrice:e.totalPerUserPrice(t),monthlyPrice:this.getPrice(t),totalMonthlyPrice:e.totalPerUserPrice(t)},yearly:{productNumber:this.getProductNumber(n),price:this.getPrice(n),totalPrice:e.totalPerUserPrice(n),monthlyPrice:this.getPrice(n)/12,totalMonthlyPrice:e.totalPerUserPrice(n)/12,savePercent:this.getYearlyDiscountPercent(n,t)},billingStrategy:e.getBillingStrategy(n)}}}},t.exports=new r(c,u)},{}],23:[function(e,t,n){var r,o,i,s;r={"":"Q","":"W","":"E","":"R","":"T","":"Y","":"U","":"I","":"O","":"P","":"A","":"S","":"D","":"F","":"G","":"H","":"J","":"K","":"L","":"Z","":"X","":"C","":"V","":"B","":"N","":"M","":"Comma","":"Period"},i={};for(o in r)s=r[o],i[o.charCodeAt(0)]=s;t.exports=i},{}],24:[function(e,t,n){t.exports=10},{}],25:[function(e,t,n){t.exports=80},{}],26:[function(e,t,n){t.exports={standard:{premium:!1,stickers:[{image:"check",url:"https://a.trellocdn.com/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/5168d92437a5fc166632f0006879d5ea/check%402x.png"}]},{image:"heart",url:"https://a.trellocdn.com/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/51a19b35bc5092e9e2761b479ce6105d/heart%402x.png"}]},{image:"warning",url:"https://a.trellocdn.com/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/e0197b2fb0cbd4a389d4ab5de9e1193a/warning%402x.png"}]},{image:"clock",url:"https://a.trellocdn.com/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/b678287abafc2d8c99f3dfa9b8e7a30c/clock%402x.png"}]},{image:"smile",url:"https://a.trellocdn.com/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/fa6754c4dd9625bdce765781c5c69635/smile%402x.png"}]},{image:"laugh",url:"https://a.trellocdn.com/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6a4570e57d1e3df870143fc016ed2f7d/laugh%402x.png"}]},{image:"huh",url:"https://a.trellocdn.com/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/4a513d5705f0f89b365f27ec05784147/huh%402x.png"}]},{image:"frown",url:"https://a.trellocdn.com/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/c414ef32894f9c9873142fc964ec4e08/frown%402x.png"}]},{image:"thumbsup",url:"https://a.trellocdn.com/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6f6cea3566b6fbbc0067561b53f4048a/thumbsup%402x.png"}]},{image:"thumbsdown",url:"https://a.trellocdn.com/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/79d155c5163ee1a67509b789f98a858b/thumbsdown%402x.png"}]},{image:"star",url:"https://a.trellocdn.com/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/27460fa90f9753396db36bf60815e93a/star%402x.png"}]},{image:"rocketship",url:"https://a.trellocdn.com/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/5bd888e40e6e27bd733d37015857b218/rocketship%402x.png"}]}]},taco:{premium:!0,stickers:[{image:"taco-love",url:"https://a.trellocdn.com/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},{image:"taco-confused",url:"https://a.trellocdn.com/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},{image:"taco-cool",url:"https://a.trellocdn.com/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},{image:"taco-angry",url:"https://a.trellocdn.com/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},{image:"taco-celebrate",url:"https://a.trellocdn.com/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},{image:"taco-robot",url:"https://a.trellocdn.com/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},{image:"taco-alert",url:"https://a.trellocdn.com/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},{image:"taco-active",url:"https://a.trellocdn.com/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},{image:"taco-money",url:"https://a.trellocdn.com/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},{image:"taco-reading",url:"https://a.trellocdn.com/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},{image:"taco-trophy",url:"https://a.trellocdn.com/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},{image:"taco-sleeping",url:"https://a.trellocdn.com/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},{image:"taco-pixel",url:"https://a.trellocdn.com/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},{image:"taco-proto",url:"https://a.trellocdn.com/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},{image:"taco-embarrassed",url:"https://a.trellocdn.com/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},{image:"taco-clean",url:"https://a.trellocdn.com/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://a.trellocdn.com/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://a.trellocdn.com/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]}]},pete:{premium:!0,stickers:[{image:"pete-happy",url:"https://a.trellocdn.com/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},{image:"pete-love",url:"https://a.trellocdn.com/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},{image:"pete-broken",url:"https://a.trellocdn.com/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},{image:"pete-alert",url:"https://a.trellocdn.com/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},{image:"pete-talk",url:"https://a.trellocdn.com/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},{image:"pete-vacation",url:"https://a.trellocdn.com/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},{image:"pete-confused",url:"https://a.trellocdn.com/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},{image:"pete-shipped",url:"https://a.trellocdn.com/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},{image:"pete-busy",url:"https://a.trellocdn.com/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},{image:"pete-completed",url:"https://a.trellocdn.com/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},{image:"pete-space",url:"https://a.trellocdn.com/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},{image:"pete-sketch",url:"https://a.trellocdn.com/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},{image:"pete-ghost",url:"https://a.trellocdn.com/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},{image:"pete-award",url:"https://a.trellocdn.com/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},{image:"pete-music",url:"https://a.trellocdn.com/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://a.trellocdn.com/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://a.trellocdn.com/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}]}}},{}],27:[function(e,t,n){t.exports=[{code:"cs",name:"etina"},{code:"de",name:"Deutsch"},{code:"en-GB",name:"English (UK)"},{code:"en-US",name:"English (US)"},{code:"es",name:"Espaol"},{code:"fr",name:"Franais"},{code:"fr-CA",name:"Franais (Canada)"},{code:"it",name:"Italiano"},{code:"hu",name:"Magyar"},{code:"nl",name:"Nederlands"},{code:"nb",name:"Norsk (bokml)"},{code:"pl",name:"Polski"},{code:"pt-BR",name:"Portugus (Brasil)"},{code:"fi",name:"Suomi"},{code:"sv",name:"Svenska"},{code:"vi",name:"Ting Vit"},{code:"tr",name:"Trke"},{code:"ru",name:""},{code:"uk",name:""},{code:"th",name:""},{code:"zh-Hans",name:" ()"},{code:"zh-Hant",name:" ()"},{code:"ja",name:""}]},{}],28:[function(e,t,n){t.exports=[{id:"guide-1",bgcolor:"#FAF3C0",imgUrl1x:"https://a.trellocdn.com/images/tips/3a63a6244ef2e7ade4d645ca0830dc63/guide-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/eab001f563b4e3d8a5d1199cce807e59/guide-1%402x.png",url:"https://trello.com/guide?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=guide"},{id:"inspiration-1",bgcolor:"#298FCA",imgUrl1x:"https://a.trellocdn.com/images/tips/e1565bd541d2b56ec792b202bd420c54/inspiration-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/537647bd716153a10a3254e6912b623b/inspiration-1%402x.png",langs:["en-US","en-GB","fr","pt-BR"],url:"https://trello.com/inspiration?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=inspiration"},{id:"power-ups-1",bgcolor:"#42548E",imgUrl1x:"https://a.trellocdn.com/images/tips/d7178bb1e5dc48fb4fe66ea30e772bed/power-ups-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/283ff0f7ee60508a0ea9267b27351402/power-ups-1%402x.png",url:"https://trello.com/power-ups?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=power-ups"},{id:"webinars-1",bgcolor:"#42548E",imgUrl1x:"https://a.trellocdn.com/images/tips/7e1a1e13b5deffa70d0e8ec4fda324cc/webinars-1%401x.png",imgUrl2x:"https://a.trellocdn.com/images/tips/f1f39fe1384c4439d9326e23b378a492/webinars-1%402x.png",url:"https://trello.com/webinars?utm_source=trello&utm_medium=inapp&utm_content=header-tips&utm_campaign=webinar"}]},{}],29:[function(e,n,r){var o,i,s,a;o=e("jquery"),i=void 0,t(function(){return i=e(198)}),s=void 0,t(function(){return s=e(33)}),a=e("underscore"),n.exports=new(function(){function e(){this.updateToken()}var t,n,r,u;return t="notLoggedIn",n=null,r=null,u="token"+window.location.port,e.prototype.isLoggedIn=function(){return n!==t},e.prototype.myId=function(){return n},e.prototype.myUsername=function(){var e;return null!=(e=this.me())?e.get("username"):void 0},e.prototype.myToken=function(){return r},e.prototype.me=function(){var e;return e=s.get("Member",n),null!=e||this.isLoggedIn()||(e=new i({id:t,notLoggedIn:!0},{modelCache:s}),s.add(e)),e},e.prototype.isMe=function(e){return(null!=e?e.id:void 0)?this.isMe(e.id):e===n},e.prototype.confirmed=function(){return this.me().get("confirmed")},e.prototype.canLogIn=function(){var e,t;return!a.isEmpty(null!=(e=null!=(t=this.me())?t.get("loginTypes"):void 0)?e:[]);
},e.prototype.updateToken=function(){return r=o.cookie(u)||"",n=r.split("/")[0]||t},e.prototype.logoutPost=function(){var e;return e=o("<input>").attr("name","dsc").val(o.cookie("dsc")),o("<form>").attr({method:"post",action:"/logout"}).append(e).css({display:"none"}).appendTo("body").submit()},e.prototype.removeToken=function(){return o.cookie(u,null,{path:"/"}),window.location.reload()},e}())},{}],30:[function(e,t,n){var r;r=e(126),t.exports=window.IdCache=new(function(){function e(){this._shortLinkToId={Card:{},Board:{}},this._idCardToIdBoard={}}return e.prototype.getId=function(e,t){if(r.checkId(t))return t;if(r.isShortLink(t))return this._shortLinkToId[e][t];throw new Error("Not a shortLink or id: "+t)},e.prototype.setId=function(e,t,n){if(!r.checkId(n))throw new Error("Not an id: "+n);if(!r.isShortLink(t))throw new Error("Not a shortLink: "+t);return this._shortLinkToId[e][t]=n},e.prototype.setCardId=function(e,t){return this.setId("Card",e,t)},e.prototype.setBoardId=function(e,t){return this.setId("Board",e,t)},e.prototype.getCardId=function(e){return this.getId("Card",e)},e.prototype.getBoardId=function(e){return this.getId("Board",e)},e}())},{}],31:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=[].slice;r=e("jquery"),i=e(75),s=e(30),a=e(34),u=e("bluebird"),c=e(104),l=e("trello-markdown"),d=e(126),p=e("underscore"),g=e(493),v=e(137),m=e(101),f=e(254),y=e("xtend"),o=e(211),h=function(e,t){var n,r,o,i,s;if(null==t)return null;i=f(t),o=[t];for(n in e)if(r=e[n],p.isString(r)){if(r!==i[n])return null}else{if(!p.isRegExp(r))throw Error("invalid specification");if(null==(s=r.exec(i[n])))return null;o=o.concat(s.slice(1))}return o},t.exports=new(function(){function e(){}return e.prototype._knownUrls=[{key:"trello board",match:{protocol:location.protocol,host:location.host,pathname:/^\/b\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var n,r,i,u;return n=e[0],u=e[1],null!=(r=null!=(i=t.get("Board",s.getBoardId(u)))?i.get("name"):void 0)?r:a.loadBoardName(u).catch(o.NotFound,o.Unauthorized,function(){return n})}},{key:"trello action",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/,hash:/^\#(?:comment|action)-([0-9a-f]{24})$/},previewClass:"attachment-thumbnail-preview-trello-logo",getShared:function(e,t){var n,r,o;return n=e[0],o=e[1],r=e[2],u.try(function(){var e;return null!=(e=t.get("Action",r))?e:a.loadAction(r)}).then(function(e){return null!=e?{action:e,memberCreator:t.get("Member",e.get("idMemberCreator"))}:{}})},getIcon:function(e,t,n){var r,o,i,s,a;return o=e[0],a=e[1],i=e[2],s=n.memberCreator,null!=(r=null!=s?s.get("avatarHash"):void 0)?[window.avatarDomain,r,"30.png"].join("/"):"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png"},getText:function(e,t,n){var r,o,s,a,u,l;return o=e[0],u=e[1],s=e[2],r=n.action,null==r?o:(l=p.chain(new i("action").getEntities(r.get("display"),null!=(a=r.get("data").card)?a.id:void 0)).map(function(e){var t,n;return n=e.type,t=e.text,"member"===n&&r.isCommentLike()?t+":":"comment"===n?c.comments.textInline(t):t}).join("").value(),v(l,64))}},{key:"trello card",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://a.trellocdn.com/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(e,t){var n,r,i,u;return n=e[0],u=e[1],null!=(r=null!=(i=t.get("Card",s.getCardId(u)))?i.get("name"):void 0)?r:a.loadCardName(u).catch(o.NotFound,o.Unauthorized,function(){return n})}},{key:"fogbugz case",match:{protocol:/^https?:$/,host:/^([^\.]+)\.fogbugz\.com$/,pathname:/^\/f\/cases\/([\d]+)/},previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://a.trellocdn.com/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",getArgs:function(e){var t,n,r;return t=e[0],r=e[1],n=e[2],{caseNumber:n}}},{key:"kiln commit",match:{protocol:/^https?:$/,host:/^([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)$/,pathname:/^\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/},previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://a.trellocdn.com/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",getText:function(e){var t,n,r,o,i,s;return t=e[0],s=e[1],o=e[2],i=e[3],n=e[4],r=e[5],"Group"===i?o+"  "+n+": "+r:o+"  "+i+"  "+n+": "+r},dataUrl:function(e){return e.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(e,t){var n,r,o,i,s;if(null!=t.reviews)for(i=t.reviews,n=0,o=i.length;o>n;n++)s=i[n],s.status=m(["known services","kiln commit","status",s.sStatus]),s.url=e.replace(/\/Code\/.*$/,"/Review/"+s.sReview);return t.sAuthor&&(t.author=t.sAuthor.replace(/\s<.*$/,"")),t.hash&&(t.shortHash=t.hash.substr(0,6)),t.sDescription&&(r=new l({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),t.shortCommitMessage=t.sDescription.split("\n")[0],t.commitMessageHtml=r.format(t.sDescription).output),t.url=e,t},previewHtml:function(e,t){return g.fill("kiln_changeset_preview",this._processJSON(e,t))},previewHtmlError:function(e,t){var n;return/unable to access/i.test(t)?(e=null!=(n=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(e))?n[0]:void 0,{login:m("known services.kiln commit.error")}):null},thumbnailHtml:function(e,t,n){return g.fill("kiln_changeset_thumbnail",y(this._processJSON(e,t),n))}},{key:"github commit",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{7,40})$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getText:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],o+"/"+r+": "+n.substr(0,7)}},{key:"github issue",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],{user:o,repo:r,number:n}}},{name:"GitHub Pull Request",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://a.trellocdn.com/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],{user:o,repo:r,number:n}},getText:function(e){var t,n,r,o;return t=e[0],o=e[1],r=e[2],n=e[3],o+"/"+r+": Pull Request "+n}}],e.prototype.interpret=function(e,t){var n,r,o,i,s;for(s=this._knownUrls,r=0,o=s.length;o>r;r++)if(n=s[r],null!=(i=h(n.match,e)))return function(e){var n,r,o,s,a,c,l,d;return c=e.key,l=e.name,s=e.getText,n=e.getArgs,d=e.previewClass,a=e.icon,o=e.getShared,r=e.getIcon,u.resolve("function"==typeof o?o(i,t):void 0).then(function(e){var o,p,h;return h=null!=s?s(i,t,e):(o=null!=(p="function"==typeof n?n(i,t):void 0)?p:{},m(["known services",c,"text"],o)),null!=r&&(a=r(i,t,e)),null==l&&(l=m(["known services",c,"name"])),u.props({name:l,previewClass:d,icon:a,text:h})})}(n);return u.resolve()},e.prototype._runHandler=function(){var e,t,n,o,i,s,a,u,c,l,d;for(u=arguments[0],d=arguments[1],e=4<=arguments.length?b.call(arguments,2,n=arguments.length-1):(n=2,[]),c=arguments[n++],l=this._knownUrls,o=0,s=l.length;s>o;o++)if(i=l[o],null!=h(i.match,d)&&null!=i[u])return a=i.match,t=i.dataUrl,void r.ajax({url:t(d),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(t){return c(null,i[u].apply(i,[d,t].concat(b.call(e))))},error:function(t,n,r){var o,s;return o=u+"Error",s="function"==typeof i[o]?i[o].apply(i,[d,r].concat(b.call(e))):void 0,c(null!=s?s:"could not load")}});c()},e.prototype.previewHtml=function(e,t){return this._runHandler("previewHtml",e,t)},e.prototype.thumbnailHtml=function(e,t,n){return this._runHandler("thumbnailHtml",e,t,n)},e}())},{}],32:[function(e,t,n){var r;r=e(29),t.exports={locales:[window.locale,"en-GB"]}},{}],33:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B=[].slice,O=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(29),i=e(227),r=e(147),u=e(157),c=e(159),s=e(156),a=e(154),l=e(188),d=e(77),p=e(195),h=e(196),m=e(198),g=e(200),v=e(202),y=e(204),b=e(203),w=e("bluebird"),M=e(221),_=e(126),k=e("underscore"),S=e(40),T=e(106),j=e(231),C=e(70),x={Action:{type:r,test:j.eq("actions")},Card:{type:u,test:j.eq("cards")},Checklist:{type:c,test:j.eq("checklists")},Board:{type:s,test:function(e){return/^board($|s)/.test(e)}},BoardPlugin:{type:a,test:j.eq("boardPlugins")},Enterprise:{type:l,test:function(){return!1}},Label:{type:p,test:j.eq("labels")},List:{type:h,test:function(e){return/^lists?/.test(e)}},Member:{type:m,test:function(e){return/^member/.test(e)&&"memberships"!==e&&"memberType"!==e&&"membershipCounts"!==e}},Notification:{type:g,test:j.eq("notifications")},Organization:{type:v,test:function(e){return/^organization/.test(e)}},Plugin:{type:y,test:function(e){return/^plugins?$/.test(e)}},PluginData:{type:b,test:j.eq("pluginData")}},T(d,f=function(){function e(){var e;this._cache={},this._locked=[],this._lockIndex=0,this._deltaQueue=[],this.uniqueId=k.uniqueId("mc");for(e in x)this._cache[e]={}}return e.prototype.get=function(e,t){var n;return k.isArray(t)?t.map(j(this,"get",e)):_.isShortLink(t)?this.findOne(e,"shortLink",t):(k.isString(e)||(e=e.prototype.typeName),null!=(n=this._cache[e])?n[t]:void 0)},e.prototype.find=function(){var e,t,n,r,o;return n=arguments[0],e=2<=arguments.length?B.call(arguments,1):[],1===e.length?(r=e[0],k.filter(this.all(n),r)):(t=e[0],o=e[1],this.find(n,function(e){return e.get(t)===o}))},e.prototype.findOne=function(){var e;return e=1<=arguments.length?B.call(arguments,0):[],k.first(this.find.apply(this,e))},e.prototype.waitFor=function(e,t,n){var r;return r=this.get(e,t),null!=r?n(null,r):this.once("add:"+e+":"+t,function(r){return function(){return r.waitFor(e,t,n)}}(this))},e.prototype.all=function(e){return k.isString(e)||(e=e.prototype.typeName),k.values(this._cache[e])},e.prototype.add=function(e){var t;e.id&&null!=this.get(e.typeName,e.id)||null!=x[e.typeName]&&(t=e.id?e.id:e.cid,this._cache[e.typeName][t]=e,this.stopListening(e),this.listenTo(e,"change",this.onModelChange),this.listenTo(e,"destroy",this.remove),this.waitForId(e,function(t){return function(n){return delete t._cache[e.typeName][e.cid],t._cache[e.typeName][n]=e,t.trigger("add:"+e.typeName+":"+n,e),"function"==typeof e.triggerCacheEvents?e.triggerCacheEvents(t,"add",e):void 0}}(this)),this.trigger("add:"+e.typeName,e))},e.prototype.onModelChange=function(e){var t,n,r;"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"change",e),this.trigger("change:"+e.typeName,e),n=e.changedAttributes();for(t in n)r=n[t],this.trigger("change:"+e.typeName+":"+t,e)},e.prototype.remove=function(e){var t,n,r,o;if(null!=e){if(e instanceof u)for(o=e.actionList.models,n=0,r=o.length;r>n;n++)t=o[n],this.remove(t);return delete this._cache[e.typeName][e.id],delete this._cache[e.typeName][e.cid],this.trigger("remove:"+e.typeName,e),null!=e.id&&this.trigger("remove:"+e.typeName+":"+e.id,e),"function"==typeof e.triggerCacheEvents&&e.triggerCacheEvents(this,"remove",e),this.stopListening(e),e.trigger("destroy"),e.destructor()}},e.prototype._update=function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f;if(null==n&&(n={}),k.isArray(t))return t.map(function(t){return function(r){return t._update(e,r,n)}}(this));if(t.deleted)return void this.remove(this.get(e,t.id));d=k.clone(t),u=function(){var e;e=[];for(a in n)s=n[a],a in d&&(o=d[a],delete d[a],e.push(j(s,o)));return e}();for(r in x){l=x[r],h=l.type,p=l.test;for(a in t)f=t[a],p(a)&&(this._update(r,f,n),delete d[a])}return i=k.isString(e)?this.get(e,t.id):e,null!=i?(this.unmarkModel(i),i.set(d),u.forEach(function(e){return e(i)}),i):(m=x[e])?(c=new m.type(d,{modelCache:this}),u.forEach(function(e){return e(c)}),c):t},e.prototype.lock=function(e){var t;return t=this._lockIndex++,S("MC",e+" took lock "+t),this._locked.push(t),t},e.prototype.locked=function(){return!k.isEmpty(this._locked)},e.prototype.unlock=function(e){return O.call(this._locked,e)>=0?(S("MC","gave lock "+e),this._locked=k.without(this._locked,e),this.locked()||this.processDeltas(),!0):!1},e.prototype.getLock=function(){return w.resolve(this.lock()).disposer(function(e){return function(t){return e.unlock(t)}}(this))},e.prototype.enqueueDelta=function(e,t,n,r){null==n&&(n={}),null==r&&(r=function(){}),k.isFunction(n)&&(r=n,n={}),S("MC","got an update for "+(k.isString(e)?e:e.typeName)),this.locked()?this._deltaQueue.push({modelOrType:e,delta:t,mappingRules:n,next:r}):r(null,this._update(e,t,n))},e.prototype.processDeltas=function(){var e,t,n,r,o,i,s,a,u,c,l,d,p;for(u=this._deltaQueue,this._deltaQueue=[],p=function(e){return!k.isString(e)&&null==e.id},S("MC","Running "+u.length+" updates"),t=0,r=u.length;r>t;t++)c=u[t],s=c.modelOrType,e=c.delta,i=c.mappingRules,a=c.next,p(s)&&a(null,this._update(s,e,i));for(d=[],n=0,o=u.length;o>n;n++)l=u[n],s=l.modelOrType,e=l.delta,i=l.mappingRules,a=l.next,p(s)||d.push(a(null,this._update(s,e,i)));return d},e.prototype.markModel=function(e,t){return e._marked=t},e.prototype.unmarkModel=function(e){return delete e._marked},e.prototype.isMarked=function(e,t){return e._marked===t},e.prototype.forEachModel=function(e){var t,n,r,o;for(o in this._cache){r=this._cache[o];for(t in r)n=r[t],e(n)}},e.prototype.mark=function(){var e;return e=k.uniqueId("mark"),this.forEachModel(function(t){return function(n){return t.markModel(n,e)}}(this)),e},e.prototype.sweep=function(e){this.forEachModel(function(t){return function(n){return t.isMarked(n,e)?t.remove(n):void 0}}(this))},e}()),k.extend(f.prototype,i.Events),t.exports=window.ModelCache=new f},{}],34:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V=[].slice;r=e("jquery"),o=e(147),s=e(156),a=e(157),u=e(188),c=e(30),l=e(196),d=e(198),p=e(33),m=e(200),f=e(202),v=e(204),g=e(217),y=e("bluebird"),E=e(221),w=e(115),A=e(47),_=e(126),k=e("underscore"),B=e("moment"),O=e(129),N=e("xtend"),T=e(231),O=e(129),j=e(70),i=e(211),S=function(e,t){var n,r;return r=e.query,n=e.mappingRules,{query:N(r,t),mappingRules:n}},L={},b=5,P=function(e){var t;return t=L,y.fromNode(function(n){return t=QuickLoad.load(e,n)}).catch(function(e){var t,n;return n=e[0],t=e[1],y.reject(i.fromResponse(n,t))}).tap(function(){return j(t!==L,"Promises resolved synchronously; didn't get preload information from QuickLoad")}).spread(function(e,n){return[e,n,t]})},M=function(e){var t;null!=e&&(t=Date.now()-e.start,A("quickload use",e.url,{int_key_1:"time saved",int_val_1:t}))},D=function(e){var t;null!=(t=e.getResponseHeader("X-Server-Time"))&&w.updateServerTime(parseInt(t,10))},I=function(e){return function(t){return y.try(function(){var n;return null!=(n=h.getUpToDateBoard(t))?n:e.call(h,t)})}},x={},C={},t.exports=window.ModelLoader=h={_history:[],_replaying:!1,_loadApiData:function(){var e,t,n,r,o,i,s,a,u,c,l,d;return s=arguments[0],t=arguments[1],u=arguments[2],e=4<=arguments.length?V.call(arguments,3):[],a=e[0],i=e[1],r=e[2],c=u.query,o=null!=(l=u.mappingRules)?l:{},k.isString(s)||(s=s.prototype.typeName),null==a&&(a=_.pluralize(s)+"/"+t),n=_.invitationTokens().join(","),k.isEmpty(n)||(c=k.extend({},c,{invitationTokens:n})),d=QuickLoad.makeUrl("/1/"+a,c),P(d).spread(function(e,t,n){return D(t),M(n),[e,t]}).tap(function(){return r?void 0:new y(function(e){return h.waitFor("headerData",e)})}).spread(function(e,t){return O(p,"enqueueDelta",s,e,o).then(function(e){var n;return i?(n=window.JSON.parse(t.getResponseHeader(i)),[e,n]):e})})},getUpToDateBoard:function(e){var t,n,r;return this.isReplaying()?null:(n=c.getBoardId(e),null==n?null:(t=p.get("Board",n),null==t?null:(r=E.getIxLastUpdate(t.id),null!=r?t:null)))},isReplaying:function(){return this._replaying},replay:function(){var e;return this._replaying=!0,e=p.mark(),y.map(this._history,function(e){return function(t){var n,r,o;return o=t.owner,r=t.loadName,n=t.args,e[r].apply(e,n)}}(this),{concurrency:b}).then(function(){return p.sweep(e)}).finally(function(e){return function(){return e._replaying=!1}}(this)).return()},record:function(){var e,t,n;if(n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],null!=n)return this._history.push({owner:n,loadName:t,args:e});throw Error("Unclaimed "+t)},for:function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?V.call(arguments,2):[],this.record.apply(this,[n,t].concat(V.call(e))),this[t].apply(this,e)},release:function(e){this._history=k.reject(this._history,function(t){return t.owner===e})},loadHeaderData:function(){return this._loadApiData(d,"me",g.memberHeader,void 0,void 0,!0).then(function(e){return["Member",e,g.memberHeader.mappingRules]})},loadBoardsMenuData:function(){return this._loadApiData(d,"me",g.boardsMenuMinimal).then(function(e){return["Member",e,g.boardsMenuMinimal.mappingRules]})},loadBoardData:function(e,t){return this._loadApiData(s,e,t)},loadCardData:function(){var e,t,n,r;return e=2<=arguments.length?V.call(arguments,0,t=arguments.length-1):(t=0,[]),r=arguments[t++],n=e[0],null!=n?this._loadApiData(a,r,g.card,"boards/"+n+"/cards/"+r):this._loadApiData(a,r,g.card)},loadCardName:function(e){return this._loadApiData(a,e,{query:{fields:"name"}}).call("get","name")},loadCardId:function(e,t){return this._loadApiData(a,t,g.idCard,"boards/"+e+"/cards/"+t).get("id")},loadCardDetails:function(e,t){return this._loadApiData(a,e,S(g.cardDetails,{actions_limit:t}),"cards/"+e)},loadCardHideDetails:function(e,t){return this._loadApiData(a,e,S(g.cardDetails,{actions:"commentCard,copyCommentCard,createCard,copyCard",actions_limit:t}),"cards/"+e)},loadCardVoters:function(e){return this._loadApiData(a,e,g.cardVoters,"cards/"+e)},loadCardCopyData:function(e,t){return this._loadApiData(a,t,g.cardCopy,"boards/"+e+"/cards/"+t)},loadCardList:function(e){return this._loadApiData(l,e,g.cardList,"cards/"+e+"/list")},loadNotification:function(e){return this._loadApiData(m,e,{query:{fields:"all"}})},loadNotificationData:function(e){return this._loadApiData(d,e,g.memberNotifications)},loadMoreNotificationData:function(e,t){var n,r;return r={filter:"all",limit:10,display:!0,page:t},n="members/"+e+"/notifications",this._loadApiData(m,null,{query:r},n)},loadMemberBoardsData:function(e){return this._loadApiData(d,e,g.memberBoards)},loadMemberCardsData:function(e){return this._loadApiData(d,e,g.memberCards)},loadMemberEmail:function(e){return this._loadApiData(d,e,{query:{fields:"email",invitationTokens:_.invitationTokens().join(",")}})},loadOrganizationMemberGhost:function(e,t){var n,r,o;return n=null!=(o=_.inviteTokenFor(e))?o.split("-")[0]:void 0,null==n?y.resolve({}):(r={fields:g.memberFields,invitationTokens:_.invitationTokens().join(",")},this._loadApiData(d,n,{query:r}).catch(i,function(){return{}}))},loadMyBoardsUnreadData:function(){return this._loadApiData(d,"me",g.memberUnreadBoards)},loadMoreActionData:function(){var e,t,n,r,i,s,a,u;return s=arguments[0],r=arguments[1],a=arguments[2],i=arguments[3],e=5<=arguments.length?V.call(arguments,4):[],n=e[0],t=e[1],u={filter:"all",limit:i,page:a,display:!0},null!=n&&(u.idModels=n.join(",")),null!=t&&(u.filter=t),this._loadApiData(o,r,{query:u},s+"s/"+r+"/actions")},loadClosedCards:function(e,t){var n,r,o;return r=t.limit,n=t.before,o={stickers:!0,attachments:!0,pluginData:!0},null!=r&&(o.limit=r),null!=n&&(o.before=n),this._loadApiData(a,e,{query:o},"boards/"+e+"/cards/closed")},loadClosedBoards:function(){return this._loadApiData(s,null,{query:{filter:"closed"}},"members/me/boards")},loadArchivedLists:function(e){return this._loadApiData(s,e,g.archivedLists)},loadMemberPaidAccount:function(e){return this._loadApiData(d,e,g.memberPaidAccount)},loadMemberAccountData:function(e){return this._loadApiData(d,e,g.memberAccount)},loadMemberLogins:function(e){return this._loadApiData(d,e,{query:{fields:"",logins:!0}})},loadMemberProfileData:function(e){var t,n;return n=g.memberProfile,t=g.memberProfile_daysBack,n.action_since=B().subtract(t,"days").toString(),this._loadApiData(d,e,g.memberProfile)},loadMemberCustomBackgrounds:function(e){return this._loadApiData(d,e,{query:{fields:"",boardBackgrounds:"custom"}})},loadMemberCustomStickers:function(e){return this._loadApiData(d,e,{query:{fields:"",customStickers:"all"}})},loadMemberCustomEmoji:function(e){return this._loadApiData(d,e,{query:{fields:"",customEmoji:"all"}})},_loadOrganizationPayload:function(e,t){return this._loadApiData(f,t,e)},loadOrganizationData:function(e){return this._loadOrganizationPayload(g.organization,e)},loadOrganizationBoardsData:function(e){return this._loadOrganizationPayload(g.organizationBoardsPage,e)},loadOrganizationPaidAccount:function(e){return this._loadOrganizationPayload(g.organizationPaidAccount,e)},loadOrganizationMinimal:function(e){return this._loadOrganizationPayload(g.organizationMinimal,e)},loadOrganizationMembersData:function(e){return this._loadOrganizationPayload(g.organizationMembers,e)},loadOrganizationMembersExtraData:function(e){return this._loadOrganizationPayload(g.organizationMembersExtra,e)},loadOrganizationMembersMinimal:function(e){return this._loadOrganizationPayload(g.organizationMembersMinimal,e)},loadOrganizationExportData:function(e){return this._loadOrganizationPayload(g.organizationExports,e)},loadOrganizationMemberMinimal:function(e,t){return this._loadApiData(d,t,g.memberMinimal)},loadOrgMemberCardData:function(e,t){var n;return n="organization/"+e+"/members/"+t+"/cards",this._loadApiData(a,e,g.orgMemberCards,n)},loadOrgNameById:function(e){var t;return t={fields:"name"},this._loadApiData(f,e,{query:t}).call("get","name")},loadCurrentBoardData:I(function(e){return this.loadBoardData(e,g.currentBoardMinimal)}),loadBoardSecondary:I(function(e){return this._loadApiData(s,e,g.currentBoardSecondary)}),loadBoardPluginData:I(function(e){return this._loadApiData(s,e,g.currentBoardPluginData)}),loadBoardName:function(e){var t;return t={fields:["name","closed"].join(",")},this._loadApiData(s,e,{query:t}).call("get","name")},loadMembersOfEnterprise:function(e,t){var n;return n=k.extend({fields:g.enterpriseMemberFields},t),this._loadApiData(d,e,{query:n},"enterprises/"+e+"/members","X-Trello-API-Query-Meta")},loadEnterprise:function(e){return this._loadApiData(u,e,{query:{fields:"all",organizations:"all"}})},loadMyOrganizations:function(){return this.loadMemberOrganizations("me")},loadMemberOrganizations:function(e){return this._loadApiData(d,e,g.organizations)},loadSearchData:function(e){return this._loadApiData("search",null,{query:e},"search")},loadModel:function(e,t,n){return this._loadApiData(e,t,n)},loadBoardAvailablePlugins:function(e){return this._loadApiData(v,null,{query:{filter:"available"}},"boards/"+e+"/plugins")},loadBoardEnabledPlugins:function(e){return this._loadApiData(v,null,{query:{filter:"enabled"}},"boards/"+e+"/plugins")},loadQuickBoardsData:function(){return this._loadApiData(d,"me",g.memberQuickBoards)},loadQuickBoardsSearch:function(e){return this._loadApiData("search",null,{query:g.quickBoardsSearch.query(e)},"search")},loadAction:function(e){return this._loadApiData(o,e,g.action)},loadBCFeatures:function(e){return this._loadApiData(f,e,g.bcFeatures)},triggerWaits:function(e){var t,n,r,o,i;for(x[e]=!0,i=null!=(o=C[e])?o:[],n=0,r=i.length;r>n;n++)(t=i[n])();return delete C[e]},waitFor:function(e,t){return x[e]?t():(null!=C[e]?C[e]:C[e]=[]).push(t)},await:function(e){return new y(function(t){return function(n){return t.waitFor(e,n)}}(this))}}},{}],35:[function(e,t,n){var r;r=e("jquery"),r(document).ajaxSend(function(e,t,n){0===n.url.indexOf("/")&&t.setRequestHeader("X-Trello-Client-Version",window.clientVersion)})},{}],36:[function(e,t,n){var r,o,i,s;r=e("jquery"),o=e(29),s=e(145),t.exports=i={version:new s.Client(window.clientVersion),server:{version:"0.0.0",environment:"dev"},setServerVersion:function(e){var t,n;t=!1;for(n in this.server)this.server[n]!==e[n]&&(t=!0,this.server[n]=e[n]);return t?r(this).triggerHandler("change:serverVersion"):void 0},setServerVersionFromResponse:function(e){var t,n;return n=e.getResponseHeader("X-Trello-Version"),t=e.getResponseHeader("X-Trello-Environment"),null!=n&&(this.server.version=n),null!=t?this.server.environment=t:void 0}},Object.defineProperty(window,"TrelloVersion",{get:function(){return"Server: "+i.server.version+" ("+i.server.environment+")\nClient: "+i.version+" ("+o.me().get("channels").active+")"}})},{}],37:[function(e,t,n){var r,o,i;o=e(114),i=e("underscore"),r="error_history",t.exports={add:function(e){var t;return t=this.recent(),t.unshift(e),t=i.first(t,5),o.set(r,t)},recent:function(){var e;return null!=(e=o.get(r))?e:[]}}},{}],38:[function(e,t,n){var r,o,i;r=e(36),i=e(32).locales,o=i[0],t.exports=function(){return[{schema:"iglu:com.trello/web-context/jsonschema/1-0-4",data:{client_version:r.version.toString(),client_locale:o}}]}},{}],39:[function(e,t,n){var r,o,i,s;r=e("jquery"),o=e(29),i=e(73),s=e(37),t.exports=function(e,t,n,a){var u,c,l,d,p,h,m;p=window.clientVersion.split("-"),d=p[0],m=p[1],m=parseInt(m,10),u={head:d,version:m,patch:0},c={name:e.name,msg:e.message,url:t,line:n,col:a,stack:e.stack,ua:navigator.userAgent,browser:i.asString,language:null!=(h=navigator.language)?h:navigator.browserLanguage,clientVersion:u},o.isLoggedIn()&&(c.idMember=o.myId());try{r.post("/err",{errors:[c]}),s.add({timestamp:(new Date).toISOString(),stack:e.stack,name:e.name,msg:e.message,url:t})}catch(e){l=e}}},{}],40:[function(e,t,n){var r;r=e(41),t.exports=r.log.bind(r)},{}],41:[function(e,t,n){var r,o,i,s=[].slice;r=e("jquery"),o=e(114),i=e("underscore"),t.exports=window.Logger=new(function(){function e(){var e;this.enabled=null!=(e=o.get("loggers"))?e:{},this.historyMap={},this.logHistory=!1,this.timeSpent={},this.timing={}}return e.prototype.log=function(){var e,t,n,o;o=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],("undefined"!=typeof console&&null!==console?console.log:void 0)&&(n=!1,0===e.length?(n=!0,e.push(o),o="all"):n=this.enabled.all||this.enabled[o],n&&(1===e.length&&i.isArray(e[0])&&(e=e[0]),e.unshift(o),e.unshift(new Date),r("body").is(".chrome")?console.log(e):console.dir(e)),this.logHistory&&(null==(t=this.historyMap)[o]&&(t[o]=[]),this.historyMap[o].push(e)))},e.prototype.enable=function(e){null==e&&(e="all"),this.enabled[e]=!0,this.save()},e.prototype.disable=function(e){null==e&&(e="all"),delete this.enabled[e],this.save()},e.prototype.disableAll=function(){this.enabled={},this.save()},e.prototype.enableAll=function(){this.enabled.all=!0,this.save()},e.prototype.history=function(e){var t,n,r,o;if(e in this.historyMap)for(o=this.historyMap[e],n=0,r=o.length;r>n;n++)t=o[n],"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(t)},e.prototype.list=function(){"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(i.keys(this.historyMap))},e.prototype.save=function(){o.set("loggers",this.enabled)},e.prototype.time=function(e){return this.timing[e]=performance.now()},e.prototype.endTime=function(e){var t,n;return n=performance.now()-this.timing[e],null==(t=this.timeSpent)[e]&&(t[e]=0),this.timeSpent[e]+=n},e}())},{}],42:[function(e,t,n){var r,o,i,s;r=e(29),o=e(22),i=e(126),s=e("moment"),t.exports=function(e,t,n){var a,u,c,l,d,p,h,m,f,g,v,y,b;return null==t&&(t="not specified"),n||(n="none given"),p=e.toJSON(),d=r.me().toJSON(),h=null!=(m=p.paidAccount)&&null!=(f=m.products)?f[0]:void 0,u={},u.ID=p.id,(null!=(g=p.paidAccount)?g.ixSubscriber:void 0)&&(u.ixSubscriber=null!=(v=p.paidAccount)?v.ixSubscriber:void 0),p.displayName&&(u["Organization Display Name"]=p.displayName),p.name&&(u["Organization Name"]=p.name),p.fullName?u["Full Name"]=p.fullName:u["Full Name"]=d.fullName,p.username?u.Username=p.username:u.Username=d.username,p.idBoards&&(u["# Boards"]=p.idBoards.length),p.memberships&&(u["# Members"]=p.memberships.length),null!=h&&(u["Next Billing Date"]=(c=null!=(y=p.paidAccount.billingDates)?y[h]:void 0)?s(new Date(c)).locale("en").format("LL"):"",o.isYearly(h)?u.Interval="Yearly":u.Interval="Monthly",u.Price=o.getPrice(h)),u["Trello Version"]=window.TrelloVersion.replace(/\s+/g," "),a=function(){var e;e=[];for(l in u)b=u[l],e.push(l+": "+b);return e}().join("\n"),i.bugzscout({me:d,project:"Sales",area:"Cancellations",forceNew:1,description:"Cancelled Business Class - "+u.Interval+"\n",extra:a+"\n\nReason: "+t+"\n\nDetails:\n\n"+n})}},{}],43:[function(e,t,n){var r,o,i=[].slice;r=e(38),o=/hound=1/.test(document.cookie),t.exports=function(e,t,n,s,a){var u,c,l,d;if("number"==typeof s&&(a=s,s=void 0),"function"==typeof window.ga&&window.ga("send","event",e,t,n,a),"function"==typeof window.sp&&window.sp("trackStructEvent",e,t,n,s,a,r()),o){c=" ",d=[],l={category:e,action:t,label:n,property:s,value:a};for(u in l)a=l[u],void 0!==a&&null!==a&&""!==a&&(c+="%c"+(u[0].toUpperCase()+u.substr(1))+":%c "+a+" ",d.push("color: #00f; font-weight: bold; background-color: #ddd; border-radius: 2px; padding: 0 2px;"),d.push("color: #444"));return console.log.apply(console,[c].concat(i.call(d)))}}},{}],44:[function(e,t,n){t.exports=function(e){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/debug-event/jsonschema/1-0-1",data:e}):void 0}},{}],45:[function(e,t,n){t.exports=function(e,t,n){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/experiment-event/jsonschema/1-0-0",data:{experiment_id:e,variation_id:t,assignment_id:n}}):void 0}},{}],46:[function(e,t,n){var r,o;r=e(29),o=function(e,t){return null==e&&(e="trell0"),null==t&&(t=!1),"function"==typeof window.sp?window.sp(function(){var n,r,o,i,s,a,u;return(o=null!=(a=this.cf)?a.getDomainUserId():void 0)?(r=Math.random()+"",n=1e16*r,i=document.body.appendChild(document.createElement("div")),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="1px",i.style.height="1px",i.style.display="none",s=i.appendChild(document.createElement("iframe")),s.width=1,s.height=1,s.frameborder=0,s.style="display:none",u="https://5406241.fls.doubleclick.net/activityi;"+("src=5406241;type="+encodeURIComponent(e)+";cat=trell0;u2=trello;")+("u3="+encodeURIComponent(o)+";dc_lat=;dc_rdid=;")+"tag_for_child_directed_treatment=;",u+=t?"ord=1;num="+encodeURIComponent(n)+"?":"ord="+encodeURIComponent(n)+"?",s.src=u):void 0}):void 0},t.exports={pageView:function(){return o(r.isLoggedIn()?"remar0":"trell0")},newSignup:function(){return o("eval-c",!0)}}},{}],47:[function(e,t,n){var r,o,i,s;r=e("underscore"),s=e(44),i=e(254),o=e(105),t.exports=function(e,t,n){var a,u,c;return u=i(t),a=/^\/1\/([^\/]*)/.exec(u.pathname)[1],c=u.query.slice(1),s(r.extend({debug_event_type:e,debug_action:a,string_key_1:"query 1",string_val_1:c.slice(0,255),string_key_2:"query 2",string_val_2:c.slice(255,510),string_key_3:"md5 query",string_val_3:o(c)},n))}},{}],48:[function(e,t,n){var r;r=e("promise-queue"),r.configure(e("bluebird"))},{}],49:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(210),s=e(29),a=e(73),u=e(6),c=e(509),l=e(97),d=e(18),p=e(511),h=e(513),m=e(270),f=e(126),g=e("underscore"),v=e(473),b=e(43),y=function(){var e,t,n,r;t={},r=null,e=0,n=function(){var e,n;for(n in t)w.call(t,n)&&(e=t[n])();r=null,t={}},window.requestAnimationFrame=function(o){var i;return i=e++,null==r&&(r=setTimeout(n)),t[i]=o,i},window.cancelAnimationFrame=function(e){delete t[e]}},r(document).ready(function(){var e,t;return r("meta[name=apple-itunes-app]").attr("content","app-id=461504587, app-argument="+location.href),"requestAnimationFrame"in window||y(),window.orientationchange=function(){return c.calcPos()},a.detectCustomWebkitScrollbars(),r.event.props.push("dataTransfer"),r.event.props.push("detail"),t=function(e,t,n,o){return r(document).on("click",e,function(e){var r,i;return r=function(){var r,s,a,u;for(a=[t,n,o],u=[],r=0,s=a.length;s>r;r++)i=a[r],null!=i&&(g.isFunction(i)?u.push(i.call(this,e)):u.push(i));return u}.call(this),b.apply(null,r)})},t(".js-home-via-logo","Header","Logo","Home"),
t(".header-signup","Header","Sign Up"),r(document).on("click",".js-resend-confirmation-email",g.throttle(function(e){return function(){return i({type:"POST",url:"/resendValidate",data:{email:s.me().get("email")},success:function(){return o.flash("email sent","confirm")}})}}(this),6e4)),e=r(".window-overlay"),e.click(function(t){var n;if(!(t.button>0)){if(n=r(t.target).closest("a"),n.length>0&&"#"===n.attr("href"))return void f.stopPropagation(t);if(!r(t.target).is("a.focus-dummy")&&!r(t.target).hasClass("checkbox"))return h.isVisible?void h.hide():p.isEditing()?void p.cancelEdits():void(t.target===e[0]&&c.hide())}}),r(document).click(function(e){return r(e.target).closest(".js-react-root").length?void 0:v(e)}),r(document).keyup(function(e){var t,n;return n=l.getKey(e),n===d.Escape?(e.preventDefault(),t=u.getCurrentBoard(),m.hideUnpinnedSidebar(),p.isEditing()?p.cancelEdits():r(".new-comment").hasClass("focus")?r(".new-comment").removeClass("focus").find("textarea").blur():(r("input").blur(),r("textarea").blur())):void 0}),r(document).bind("dragstart",function(e){return r(e.target).closest(".ui-draggable, .js-draggable").length>0}),null!=window.fluid?b("FluidApp"):void 0})},{}],50:[function(e,t,n){var r,o,i,s,a,u,c;r=e(211),u=e(39),i=e(76),o=e("underscore"),s=e(231),a=function(e){return e instanceof r.Other||!(e instanceof r)},c=[],i.subscribe(o.debounce(function(e){var t,n,r,i,l;return 10===c.length?!1:(n=e.error,l=e.url,i=e.line,t=e.col,a(n)&&RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(l)?(r=[n.message,l,i,t],o.any(c,s(o.isEqual,r))?!1:(u(n,l,i,t),c.push(r),!1)):!1)},1e3,!0))},{}],51:[function(e,t,n){window.testThatErrorReportingStillWorks=function(){return setTimeout(function(){throw new Error("Error reporting still works!")},1e3)}},{}],52:[function(e,t,n){e(261),window.Promise=e("bluebird"),e(240)},{}],53:[function(e,t,n){var r;r=e(29),"function"==typeof window.sp&&window.sp("newTracker","cf",window.snowplowCloudfrontServer,{appId:"web",cookieDomain:".trello.com",respectDoNotTrack:!0}),r.isLoggedIn()&&"function"==typeof window.sp&&window.sp("setUserId",r.myId())},{}],54:[function(e,t,n){var r;r=e("intl"),r.__addLocaleData(e("intl-locale-data"))},{}],55:[function(e,t,n){var r,o,i,s,a,u,c,l=[].slice;r=e(33),u=e(221),i=e(70),o=e("underscore"),s=function(e,t,n){var r,a,u;return i(t.length>=1),r=t[0],u=2<=t.length?l.call(t,1):[],a=null!=e?o.clone(e):{},a[r]=0===u.length?n:s(a[r],u,n),a},c=function(e){var t,n,i;return null!=e.display?e:null==(t=r.get("Action",e.id))?e:"commentCard"!==t.get("type")?e:(n=null!=(i=e.data)?i.text:void 0,null==n?e:(e=o.clone(e),e.display=s(t.get("display"),["entities","comment","text"],n),e))},a=function(e){return null==e._id?e:(e=o.clone(e),null==e.id&&(e.id=e._id),delete e._id,e)},u.on("updateModels",function(e){var t,n,o,i,s;for(s=e.typeName,n=e.deltas,n=n.map(a),"Action"===s&&(n=n.map(c)),o=0,i=n.length;i>o;o++)t=n[o],r.enqueueDelta(s,t)}),u.on("deleteModels",function(e){var t,n,o,i,s,u;for(u=e.typeName,t=e.deltas,s=t.map(a),n=0,i=s.length;i>n;n++)o=s[n].id,r.enqueueDelta(u,{id:o,deleted:!0})})},{}],56:[function(e,t,n){var r,o;r=e("jquery"),o=e(94),r.getScript("https://apis.google.com/js/api.js",function(){return o.loadedAuth()})},{}],57:[function(e,t,n){window.knowsHowToLoadChannels=!0},{}],58:[function(e,t,n){var r,o,i,s,a,u;r=e("jquery"),o=e(73),i=e(97),s=e(18),a=e(126),"safari"===(u=o.browserStr)&&r(document).on("keydown",function(e){var t,n,o,u,c,l,d,p,h;h=i.getKey(e),h!==s.Tab||e.metaKey||e.shiftKey||e.ctrlKey||(c=r(e.target),c.attr("tabindex")&&(p=parseInt(c.attr("tabindex"),10),u=c.closest("body,.js-tab-parent"),o=u.find("[tabindex]"),t=null,n=null,l=1/0,d=1/0,o.each(function(){var e,o;return o=parseInt(r(this).attr("tabindex"),10),o>p&&l>o&&(l=o,t=r(this),e=!0),null==t&&d>o?(d=o,n=r(this)):void 0}),null==t&&(t=n),null!=t&&(a.stop(e),t.focus())))})},{}],59:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;r=e(29),o=e(227),i=e(156),a=e(6),u=e(77),c=e(202),f=e(106),g=e(221),d=e("underscore"),v=function(e,t){var n;return e.length===(n=t.length)&&n===d.union(e,t).length},s=function(){function e(e){this.maxLength=e,this.contents=[]}return e.prototype.pushift=function(e){return this.contents=d.without(this.contents,e),this.contents.push(e),this.contents.length>this.maxLength?this.contents.shift():null},e.prototype.remove=function(e){return this.contents=d.without(this.contents,e)},e.prototype.map=function(e){return this.contents.map(e)},e}(),h=function(){return r.isLoggedIn()?[{modelType:"Member",idModel:r.myId(),tags:["messages","updates"]}]:[]},m=function(e){return[{modelType:"Organization",idModel:e.id,tags:["allActions","updates"]}]},p=function(e){var t;return[{modelType:"Board",idModel:e.id,tags:["clientActions","updates"]}].concat(null!=(t=e.getOrganization())?m(t):[])},f(u,l=function(){function e(){this.boards=new s(5),this.orgs=new s(1)}return d.extend(e.prototype,o.Events),e.prototype.addModel=function(e){this.waitForId(e,function(t){return function(){return e instanceof i&&t.syncBoard(e),e instanceof c&&t.syncOrg(e),t.ensureSubscriptions()}}(this))},e.prototype.removeModel=function(e){return e instanceof i&&this.boards.remove(e),e instanceof c&&this.orgs.remove(e),this.ensureSubscriptions()},e.prototype.syncBoard=function(e){var t;null!=(t=this.boards.pushift(e))&&this.stopListening(t),this.listenTo(e,"change:idOrganization",this.ensureSubscriptions),this.listenTo(e,"destroy deleting",function(t){return function(){return t.removeModel(e)}}(this))},e.prototype.syncOrg=function(e){this.orgs.pushift(e),this.listenTo(e,"destroy",function(t){return function(){return t.removeModel(e)}}(this))},e.prototype.ensureSubscriptions=function(){var e,t,n,r,o,i,s,a,u,c,l,f,y,b,w;for(e=d.flatten([h(),this.boards.map(p),this.orgs.map(m)]),b={},n=0,o=e.length;o>n;n++)s=e[n],i=s.modelType,r=s.idModel,w=s.tags,null==b[r]&&(b[r]={tags:[],modelType:i}),(a=b[r].tags).push.apply(a,w),b[r].tags=d.uniq(b[r].tags);u=g.currentSubscriptions;for(r in u)i=u[r].modelType,null==b[r]&&g.unsubscribe(i,r);c=g.currentSubscriptions;for(r in c)l=c[r],y=l.tags,i=l.modelType,null!=b[r]&&(t=b[r].tags,v(y,t)||g.unsubscribe(i,r));for(r in b)f=b[r],w=f.tags,i=f.modelType,null==g.currentSubscriptions[r]&&g.subscribe(i,r,w)},e}()),y=new l,a.currentModel.subscribe(function(e){null!=e?y.addModel(e):y.ensureSubscriptions()})},{}],60:[function(e,t,n){var r,o,i,s,a;o=e(29),r=e(211),s=e(76),s.subscribe(function(e){var t;t=e.error,t instanceof r.Unauthenticated&&o.logoutPost()}),a=o.updateToken(),i=setInterval(function(){var e;return e=o.updateToken(),e!==a&&window.location.reload(),a=e},3e3),window.addEventListener("beforeunload",function(){clearInterval(i)})},{}],61:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g;r=e("jquery"),o=e(227),i=e(36),s=e(6),a=e(74),c=e(570),u=e(107),d=e(223),l=e(513),g=e(47),p=e(126),h=e(146),f=e(493),m=e(39),e(35),e(96),r(function(){return"Production"===i.server.environment&&"trello.com"!==location.hostname&&m(Error("Site proxied as "+location.hostname)),setInterval(function(){a.update("body"),a.trigger("renderInterval")},1e4),d.start(),u.init(),s.start().then(function(){return o.history.start({pushState:!0})}),h.ensureRun(),QuickLoad.onRemove(function(e){return e.used?void 0:g("quickload unused",e.url)})})},{}],62:[function(e,t,n){var r,o,i,s;r=e("jquery"),o=e(150),i=e(126),s=e("underscore"),s.defer(function(){var e,t,n,s;return n=i.getMs({minutes:10+5*Math.random()}),s=null,t=("function"==typeof document.hasFocus?document.hasFocus():void 0)||!0,e=function(){return t&&(null==s||Date.now()-s>n)?(o.fetch(),s=Date.now()):void 0},r(window).on("focus",function(n){return t=!0,e()}),r(window).on("blur",function(e){return t=!1}),setInterval(e,n/4),e()})},{}],63:[function(e,t,n){var r;r=e("underscore"),r.mixin({mapObj:r.compose(r.object,r.map),count:function(e,t){var n,r,o,i;for(null==t&&(t=function(){return!0}),n=0,r=0,o=e.length;o>r;r++)i=e[r],t(i)&&n++;return n}})},{}],64:[function(e,t,n){var r,o;r=e("jquery"),o=e(146),r(function(){var e;return o.calc(),e=null,r(window).resize(function(){clearTimeout(e),e=setTimeout(function(){return o.calc()},200)})})},{}],65:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),d={none:-1,new:0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15},l=o.invert(d),i=[3,4,7,8,9,11,12,13,14],c=[1,7,10,11,13,14],u=[4],a=[2,5],s=[6],t.exports=r={hasAccount:function(e){return null!=e&&e!==d.none},isActive:function(e){var t;return null!=e&&(t=Number(e.standing),p.call(i,t)>=0)&&!o.isEmpty(e.products)},isProcessing:function(e){var t;return r.hasAccount(e)&&(t=Number(e),p.call(c,t)>=0)},isProblem:function(e){return e===d.overdue},isCancelled:function(e){var t;return null==e?!1:(t=Number(e.standing),r.hasAccount(e.standing)&&(p.call(s,t)>=0||p.call(i,t)>=0&&p.call(c,t)<0&&o.isEmpty(e.products)))},willExpire:function(e){var t,n;return(null!=(t=e.products)?t[0]:void 0)in(null!=(n=e.expirationDates)?n:{})},needsCC:function(e){var t;return t=Number(e),p.call(a,t)>=0},isInactive:function(e){return r.hasAccount(e)&&!r.isActive(e)},standingName:function(e){return l[e]}}},{}],66:[function(e,t,n){var r,o,i,s,a,u;u=e(252),a=null,s=null,r=function(e){return"function"==typeof e?e():e},o=function(e,t){var n,r,o,i,s;if("."===e)return{val:t};if("object"!=typeof t||null===t)return{};for(s=t,i=e.split("."),n=0,o=i.length;o>n;n++){if(r=i[n],!(r in s))return{};s=s[r]}return{val:s}},i={mustacheRender:function(e,t,n){if(null==n&&(n={}),null!=a)throw new Error("Cannot nest calls to mustacheRender");return u.render(function(){s=n,a=[t];try{e()}finally{a=null,s=null}})},mustacheVar:function(e){var t,n,i;if(null==a)throw new Error("Attempt to render a mustache template outside of a mustacheRender");for(t=a.length-1;t>=0;t+=-1)if(i=a[t],n=o(e,i),n.hasOwnProperty("val"))return r(n.val);return""},mustachePartial:function(e){if(null==s)throw new Error("Attempt to render a mustache template outside of a mustacheRender");if(!(e in s))throw new Error("Unregistered partial "+e);return s[e]()},mustacheBlock:function(e,t){var n,r,o,i,s;if(s=this.mustacheVar(e),!s)return"";if(i=void 0,Array.isArray(s))for(n=0,r=s.length;r>n;n++)o=s[n],a.push(o),t(),a.pop();else"object"==typeof s?(a.push(s),i=t(),a.pop()):i=t();return i},mustacheBlockInverted:function(e,t){var n;return n=this.mustacheVar(e),n?"":t()}},t.exports=e(251)(u,i)},{}],67:[function(e,t,n){var r;t.exports=r=function(){function e(){}return e.prototype.isOpen=function(){return this.get("closed")===!1},e}()},{}],68:[function(e,t,n){var r,o=function(e,t){function n(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},i={}.hasOwnProperty;t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(Error)},{}],69:[function(e,t,n){t.exports=function(e){return function(t,n){if(null==n&&(n="assertion failed"),!t)throw new e(n)}}},{}],70:[function(e,t,n){t.exports=e(69)(e(68))},{}],71:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=[].slice;a=e(231),s=e(70),f=e(246),i=e("underscore"),c=function(e,t){var n,r,o,i;for(n=e,r=0,i=t.length;i>r;r++){if(o=t[r],!n.hasOwnProperty(o))return void 0;n=n[o]}return n},l=function(e,t){var n;return n=c(e,t),null==n?void 0:(s("string"==typeof n,"key "+t.join(".")+" did not resolve to a string"),n)},r=function(){function e(e){this.key=e}return e}(),o=function(){function e(e){this.value=e}return e}(),m=function(e){return e.split(/(\{[^{}]+\})/).map(function(e){return 0===e.length?null:"{"===e[0]?new r(e.substr(1,e.length-2)):new o(e)}).filter(a.id)},h=f(function(e){return e([String],a.method("split",".")),e([Array],a.id)}),u=function(e,t,n){var r;return t=h(t),r=l(e,t),null==r?void 0:m(r)},p=function(e,t){return e.map(a.choke(1,t))},d=function(e,t){return function(){var n,i;return i=arguments[0],n=2<=arguments.length?v.call(arguments,1):[],p(i,f(function(i){return i([r],function(e){var r;return r=e.key,t.apply(null,[r].concat(v.call(n)))}),i([o],function(t){var r;return r=t.value,e.apply(null,[r].concat(v.call(n)))})}))}},g=function(){var e,t,n,r,o;return r=arguments[0],n=arguments[1],o=arguments[2],e=4<=arguments.length?v.call(arguments,3):[],t=u(r,n),null==t?void 0:o.apply(null,[t].concat(v.call(e)))},t.exports={normalizeKeyPath:h,lookup:u,makeVisitor:d,visit:g}},{}],72:[function(e,t,n){var r;r=function(){function e(){this.browser=this.searchString(this.dataBrowser)||"unknown-browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version",this.OS=this.searchString(this.dataOS)||"unknown-os"}return e.prototype.searchString=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)if(t=e[n],this.versionSearchString=t.versionSearch||t.identity,t.string&&-1!==t.string.indexOf(t.subString)||t.prop)return t.identity},e.prototype.searchVersion=function(e){var t;return t=e.indexOf(this.versionSearchString),-1!==t?parseFloat(e.substring(t+this.versionSearchString.length+1)):void 0},e.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],e.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],e}(),t.exports=new r},{}],73:[function(e,t,n){var r,o;r=e("jquery"),o=e(72),t.exports=new(function(){function e(){this.browserStr=o.browser.toLowerCase(),this.browserVersionStr=(o.browser+"-"+o.version).toLowerCase(),this.osStr=o.OS.toLowerCase(),this.asString=this.browserStr+" "+this.browserVersionStr+" "+this.osStr,r(function(e){return function(){return r("body").addClass(e.asString)}}(this))}return e.prototype.isTouch=function(){var e;return"ipad"===(e=this.osStr)||"iphone"===e||"android"===e},e.prototype.isHighDPI=function(){return window.devicePixelRatio>1},e.prototype.allowsDynamicFavicon=function(){var e;return"chrome"===(e=this.browserStr)||"firefox"===e},e.prototype.respectsCrossDomainDownloadAttribute=function(){var e;return"chrome"===(e=this.browserStr)||"opera"===e},e.prototype.detectCustomWebkitScrollbars=function(){var e;try{return r("::-webkit-scrollbar"),e="body-webkit-scrollbars"}catch(t){return e="body-no-webkit-scrollbars"}finally{r("body").addClass(e)}},e}())},{}],74:[function(e,t,n){var r,o,i,s,a,u,c,l,d;r=e("jquery"),o=e(227),s=e(98),a=e(115),u=e(126),c=e("underscore"),d=e("moment"),l=e(101),t.exports=i={objToDate:function(e,t,n){var r;return c.isObject(e)&&(r=e,e=r.year,t=r.month,n=r.day),new Date(e,t-1,n)},dateToObj:function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}},getStartOfWeek:function(e){return d(e).startOf("week").toDate()},getEndOfWeek:function(e){var t;return t=d(e).endOf("week"),6!==t.get("day")&&t.add(-1,"days").set("hour",23),t.toDate()},getDaysOfWeek:function(e){var t;return t=d(e).startOf("week"),[0,1,2,3,4,5,6].map(function(e){return t.clone().add(e,"days").toDate()})},getMidnightInt:function(e){return d(e).startOf("day").valueOf()},getFirstOfMonth:function(e){return d(e).startOf("month").toDate()},getLastOfMonth:function(e){return d(e).endOf("month").toDate()},isFirstOfMonth:function(e){return d(e).isSame(d(e).startOf("month"),"day")},isLastOfMonth:function(e){return d(e).isSame(d(e).endOf("month"),"day")},getDateDeltaString:function(e,t){return e=d(e),t=d(t),e.isSame(t,"day")?Math.abs(t.diff(e,"seconds"))<10?l("just now"):e.from(t):e.calendar(t)},getDaysUntil:function(e){var t;return e=d(i.dateToObj(e)),t=d(i.dateToObj(new Date)),e.diff(t,"days")},getDateWithSpecificTime:function(e,t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},update:function(e){var t,n;t=new Date,n=function(n,o){return r(e).find(n).each(function(){var e,n,s;return e=r(this),n=e.data("date"),null==n&&(n=i.parse(e.attr("dt")),n=a.serverToClient(n),e.data("date",n)),s=i.getDateDeltaString(n,t),o(e,n,s)})},n(".js-date-title[dt]",function(e,t,n){e.attr("title",n)}),n(".date[dt], .date[data-date]",function(e,n,r){e.text(i.getDateDeltaString(n,t)),e.is("[title]")||e.attr("title",d(n).format("LLL"))})},parse:function(e){return null==e&&(e=""),d(e).toDate()},toDateString:function(e){var t,n,r;return e=d(e),r=d(),n=Math.abs(r.diff(e,"months"))>9,t=e.isSame(r,"year")&&!n,e.format(t?"llll":"ll")},validDate:function(e){return c.isDate(e)&&!isNaN(e.getTime())}},c.extend(i,o.Events)},{}],75:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;i=e("underscore"),r=e(74),u=e(71),l=e(231),a=e(70),h=e(39),g={action:e("locale").actions,notification:e("locale").notifications},p=e(140),d=e(141),m=function(e,t,n){return null==n&&(n=!1),{type:"text",text:e,hideIfContext:n,idContext:t}},c=u.makeVisitor(m,function(e,t){return t.entities[e]}),f=u.makeVisitor(l.id,function(e,t){return t.hasOwnProperty(e)?t[e]:(h(new Error("substitution key "+e+" not found!")),"")}),v=function(e){var t,n,r,o;switch(t=i.clone(e),t.type){case"card":t.url=siteDomain+"/c/"+(null!=(n=t.shortLink)?n:t.id);break;case"board":t.url=siteDomain+"/b/"+(null!=(r=t.shortLink)?r:t.id);break;case"organization":t.url=siteDomain+"/"+(null!=(o=t.name)?o:t.id);break;case"attachment":null!=t.url&&(t.isTrelloAttachment=p(t.url),t.isTrello=d(t.url))}return t},s=function(e,t){return function(n){return n.type===e?t(n):n}},t.exports=o=function(){function e(e){this.visit=l(u.visit,g[e])}var t;return t=function(e,t){var n,r,o;return o=[e.translationKey],null==t?o:(n=i.find(i.pairs(e.entities),function(e){var n,r;return r=e[0],n=e[1],n.id===t}),null!=n?(r=n[0],[[e.translationKey,r].join("@")].concat(y.call(o))):o)},e.prototype.getEntities=function(e,n){var r;return"unknown"===e.translationKey?[]:(r=i.chain(t(e,n)).map(function(t){return function(n){return t.visit(n,c,e)}}(this)).compact().first().value(),null==r?(h(new Error("display key '"+e.translationKey+"' not found!")),[]):r.map(s("translatable",this._textFromTranslatable.bind(this))).map(s("relDate",this._localizedRelDate.bind(this))).map(v))},e.prototype._format=function(e,t){return null==t&&(t={}),this.visit(e,f,t).join("")},e.prototype._textFromTranslatable=function(e){var t;return t=this._format(e.translationKey),m(t,e.idContext,e.hideIfContext)},e.prototype._localizedRelDate=function(e){return i.defaults({current:this.relDateText(e.date)},e)},e.prototype.relDateText=function(e,t){var n,o,i;return null==t&&(t=new Date),n=new Date(e),o=r.getDateDeltaString(n,t),i=n>t?"notification_is_due":"notification_was_due",this._format(i,{period:o})},e}()},{}],76:[function(e,t,n){var r,o,i,s,a;o=e("hearsay"),i=e("bluebird"),s=e(70),a=new o.Emitter,a.use(),r=function(){function e(e,t,n,r){this.error=e,this.url=null!=t?t:document.location.href,this.line=null!=n?n:0,this.col=null!=r?r:0,s(null!=this.error)}return e}(),window.onerror=function(e,t,n,o,i){return null==i&&(i=new Error(e)),a.send(new r(i,t,n,o))},i.onPossiblyUnhandledRejection(function(e){return a.send(new r(e))}),t.exports=a},{}],77:[function(e,t,n){var r,o,i,s;o=e("bluebird"),i=e("underscore"),s=e(70),t.exports=r=function(){function e(){}return e.prototype.listenToOnce=function(e,t,n){var r,o;return o=null,r=function(){return n.apply(this,arguments),o()},o=function(n){return function(){return n.stopListening(e,t,r)}}(this),this.listenTo(e,t,r)},e.prototype.waitForId=function(e,t){return this.waitForAttr(e,"id",t)},e.prototype.waitForAttr=function(e,t,n){var r;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttr");null!=(r=e.get(t))?n(r):this.listenToOnce(e,"change:"+t,function(r){return function(){return r.waitForAttr(e,t,n)}}(this))},e.prototype.waitForAttrs=function(e,t,n){var r;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttrs");return r=t.map(function(t){return function(n){return new o(function(r){return t.waitForAttr(e,n,r)})}}(this)),o.all(r).then(function(e){return i.object(i.zip(t,e))}).tap(n).done()},e}()},{}],78:[function(e,t,n){var r,o,i,s,a;r=e(80),o=e(83),i=e(81),s=e(84),a=e(82),t.exports={bcAnnualPricingV1:r,inlineEnablePowerUpV2:o,powerUpRequestCTAV1:i,quickTeamOverlayV4:s,renameAttachments:a}},{}],79:[function(e,t,n){var r;r=e(29),t.exports={allMembers:function(){return!0},englishMembers:function(){return window.locale.match(/^en/)}}},{}],80:[function(e,t,n){t.exports={name:"bcAnnualPricingV1",audiences:["englishMembers"],experimentAllocation:1,defaultWeight:1,defaults:{showPerUserSavings:!1},variations:[{name:"monthlyPerUserSavings",weight:1,values:{showPerUserSavings:!0}}]}},{}],81:[function(e,t,n){t.exports={name:"powerUpRequestCTAV1",audiences:["englishMembers"],experimentAllocation:.1,defaultWeight:1,defaults:{showCTA:!1},variations:[{name:"textOnly",weight:1,values:{showCTA:!0}}]}},{}],82:[function(e,t,n){t.exports={name:"renameAttachments",audiences:["allMembers"],experimentAllocation:0,defaultWeight:1,defaults:{allowAttachmentRenaming:!1},variations:[{name:"turnedOn",weight:0,values:{allowAttachmentRenaming:!0}}]}},{}],83:[function(e,t,n){t.exports={name:"inlineEnablePowerUpV2",audiences:["englishMembers"],experimentAllocation:1,defaultWeight:0,defaults:{showInlinePowerUp:!1},variations:[{name:"inlineText",weight:1,values:{showInlinePowerUp:!0}}]}},{}],84:[function(e,t,n){t.exports={name:"quickTeamOverlayV4",audiences:["allMembers"],experimentAllocation:1,defaultWeight:1,defaults:{enabled:!1},variations:[{name:"showOverlay",weight:1,values:{enabled:!0}}]}},{}],85:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;r=e("jquery"),s=e("underscore"),a=e(79),o=e(29),h=e(105),g=e(78),v=e(45),i=e(126),f={},l=function(e,t){return t&&(e+=t),parseInt(h(e).slice(0,8),16)},y=function(e){var t,n;return t=e.defaultWeight,n=e.variations,[{name:"control",weight:null!=t?t:t=1}].concat(n)},m=function(e,t){return s.find(e,{name:t})},p=function(e){var t,n;return t=y(e),n=t.filter(function(e){return e.weight>0}).reduce(function(e,t){return t.cumlWeight=t.weight+(null!=s.last(e)?s.last(e).cumlWeight:0),e.concat(t)},[])},u=function(e){var t;return t=e.audiences,t?t.some(function(e){return a[e]()}):!0},c=function(e,t,n){return{get:function(t){var r,o;return(null!=(r=n.values)?r.hasOwnProperty(t):void 0)?n.values[t]:(null!=(o=e.defaults)?o.hasOwnProperty(t):void 0)?e.defaults[t]:null}}},d=function(e,t){var n,i,a,d,h,f,b;return(f=g[e])?(d=r.cookie("force_"+f.name))?(b=y(f),c(f,b,m(b,d))):(t=null!=t?t:t=o.me().id,b=p(f),i=Math.floor(s.last(b).cumlWeight/f.experimentAllocation*100),n=l(f.name,t)%i,h=s.find(b,function(e){return e.cumlWeight/f.experimentAllocation*100>=n}),(a=u(f)&&void 0!==h)?(v(f.name,h.name,t),c(f,b,h)):null):null},t.exports=function(e,t){var n;return n=s.compact([e,t]).join(":"),null!=f[n]?f[n]:f[n]=d(e,t)}},{}],86:[function(e,t,n){var r,o,i,s,a,u,c;r=e("jquery"),o=e(14),i=e(73),a=e(126),u=e("underscore"),c=e(105),s=e("bluebird"),t.exports=new(function(){function e(){this.settings={},this._update=u.debounce(this._update,100).bind(this),this._hasher=u.memoize(c)}var t;return t=function(e,t,n,r,o,i,s,a){return null==a&&(a=!0),null==i&&(i=5),e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+o-i),e.quadraticCurveTo(t+r,n+o,t+r-i,n+o),e.lineTo(t+i,n+o),e.quadraticCurveTo(t,n+o,t,n+o-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),a&&e.stroke(),s?e.fill():void 0},e.prototype.drawFavicon=function(e){var n,r,i,s,a,u,c;if(n=document.createElement("canvas"),n.width=n.height=64,null==(r="function"==typeof n.getContext?n.getContext("2d"):void 0))throw Error("Can't render to the canvas!");return r.save(),null!=e?(t(r,0,0,64,64,8,!1,!1),r.clip(),this.settings.tiled?r.drawImage(e,0,0):(c=e.width,s=e.height,c>s?r.drawImage(e,0,0,64*c/s,64):r.drawImage(e,0,0,64,64*s/c))):(this.settings.useDefault?(i=r.createLinearGradient(0,0,0,32),i.addColorStop(0,"#298FCA"),i.addColorStop(1,"#0079BF"),r.fillStyle=i):r.fillStyle=null!=(u=this.settings.color)?u:o.blue.color,t(r,0,0,64,64,12,!0)),r.fillStyle="#fff",t(r,9,9,19,44,6,!0),t(r,36,9,19,29,6,!0),r.restore(),this.settings.hasNotifications&&(a=15,r.beginPath(),r.arc(64-a,a,a,0,2*Math.PI,!1),r.fillStyle="#EB5A46",r.fill(),r.lineWidth=4,r.strokeStyle="#FFFFFF",r.stroke(),r.closePath()),n.toDataURL("image/png")},e.prototype._update=function(){return i.allowsDynamicFavicon()?s.try(function(e){return function(){return null!=e.settings.url?new s(function(t,n){var r;return r=document.createElement("img"),r.setAttribute("crossorigin","anonymous"),r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.src=e.settings.url+"?favicon"}):void 0}}(this)).then(function(e){return function(t){var n;return n=e.drawFavicon(t),r("#favicon").remove(),r("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:n}).appendTo("head")}}(this)).catch(function(){}).done():void 0},e.prototype.setNotifications=function(e){return this.settings.hasNotifications=e,this._update()},e.prototype.setBackground=function(e){var t,n,r,o;return r=e.url,n=e.tiled,t=e.color,o=e.useDefault,this.settings.url=r,this.settings.tiled=n,this.settings.color=t,this.settings.useDefault=o,this._update()},e}())},{}],87:[function(e,t,n){var r,o,i,s,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),i=e(70),s=e(231),t.exports=r=function(){function e(e,t){var n,r,s,a;null==t&&(t={}),this.products={},this.prices={},this.intervals={},this.productShortNames={},this.prebilledProducts={},this.productFeatures={},this.perUserProducts={},this.perActiveUserProducts={},this.purchaseOrderProducts={},this.globalFeatures=null!=(s=t.globalFeatures)?s:[],this.upgradeProducts=[],this.yearlyEquivalents={},i(t.currentProducts),this.currentProducts=t.currentProducts,o.extend(this,t.extras);for(n in e)a=e[n],r=parseInt(n,10),a=o.extend({interval:"monthly",hidden:!1,prebill:!0,perUser:!1,features:[],upgrade:!1},a),this.products[r]=a.name,a.hidden||(this.productShortNames[a.shortName]=r),this.prebilledProducts[r]=a.prebill,this.perUserProducts[r]=a.perUser,this.perActiveUserProducts[r]=a.perActiveUser,this.productFeatures[r]=a.features,this.prices[r]=a.price,this.intervals[r]=a.interval,this.upgradeProducts[r]=a.upgrade,this.yearlyEquivalents[r]=a.yearlyEquivalent,this.purchaseOrderProducts[r]=a.purchaseOrder}return e.prototype._convertToId=function(e){return o.isString(e)?/^\d+$/.test(e)?parseInt(e,10):this.productShortNames[e]:e},e.prototype.getProductNumber=function(e){return this._convertToId(e)},e.prototype.getPrice=function(e){return this.prices[this._convertToId(e)]},e.prototype.getInterval=function(e){return this.intervals[this._convertToId(e)]},e.prototype.isMonthly=function(e){return"monthly"===this.getInterval(e)},e.prototype.isYearly=function(e){return"yearly"===this.getInterval(e)},e.prototype.isPerActiveUser=function(e){return this.perActiveUserProducts[this._convertToId(e)]},e.prototype.isPerUser=function(e){return this.perUserProducts[this._convertToId(e)]},e.prototype.isPrebilled=function(e){return this.prebilledProducts[this._convertToId(e)]},e.prototype.isUpgrade=function(e){return this.upgradeProducts[this._convertToId(e)]},e.prototype.usesPurchaseOrder=function(e){return this.purchaseOrderProducts[this._convertToId(e)]},e.prototype.getYearlyEquivalent=function(e){return this.yearlyEquivalents[this._convertToId(e)]},e.prototype.getYearlyDiscountPercent=function(e,t){var n,r;return r=this.getPrice(e),n=12*this.getPrice(t),Math.round(100*(n-r)/n)},e.prototype.features=function(e){return null==e&&(e=[]),o.chain(e).map(s.lookup(this.productFeatures)).tap(function(t){return i(o.all(t,s.id),"FeatureSet::features called on an unrecognized product: "+e)}).flatten().unique().value()},e.prototype.hasProduct=function(e){return null==e&&(e=[]),o.any(e,function(e){return function(t){return t in e.products}}(this))},e.prototype.isFeatureEnabled=function(e,t){return a.call(this.globalFeatures,e)>=0||a.call(this.features(t),e)>=0},e}()},{}],88:[function(e,t,n){var r,o,i;r=e("underscore"),i=e(117),o=e(28),t.exports=r.filter(o,function(e){return i(["templates","tips",e.id])?e.langs?r.contains(e.langs,window.locale):!0:!1})},{}],89:[function(e,t,n){t.exports={number:e(91),taxRate:e(93),percentage:e(92),money:e(90)}},{}],90:[function(e,t,n){var r,o,i;r=e("intl"),i=e(32).locales,o=null,t.exports=function(e,t){return null==o&&(o=new r.NumberFormat(i[0],{minimumFractionDigits:2,maximumFractionDigits:2})),t?o.format(e):o.format(Math.floor(100*e)/100)}},{}],91:[function(e,t,n){var r,o,i;r=e("intl"),i=e(32).locales,o=null,t.exports=function(e){return null==o&&(o=new r.NumberFormat(i[0])),o.format(e)}},{}],92:[function(e,t,n){var r,o,i;r=e("intl"),i=e(32).locales,o=null,t.exports=function(e){return null==o&&(o=new r.NumberFormat(i[0],{style:"percent"})),o.format(e)}},{}],93:[function(e,t,n){var r,o,i;r=e("intl"),i=e(32).locales,o=null,t.exports=function(e){return null==o&&(o=new r.NumberFormat(i[0],{style:"percent",minimumFractionDigits:4,maximumFractionDigits:4})),o.format(e)}},{}],94:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e("jquery"),o=e(227),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.loadedAuth=function(){var e;return null!=(e=window.gapi)?e.load("auth",function(e){return function(){return e.loaded=!0,e.trigger("loaded"),e.authorize(!0)}}(this)):void 0},t.authorize=function(e,t){return this.validToken()?"function"==typeof t?t(null,this.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDriveClientId,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:e},function(e){return function(n){var r;return!n||n.error?(e.oauthToken=null,"function"==typeof t?t(null!=(r=null!=n?n.error:void 0)?r:Error("Failed to request token")):void 0):(e.oauthToken=n,"function"==typeof t?t(null,e.oauthToken.access_token):void 0)}}(this))},t.validToken=function(){var e;return(null!=(e=this.oauthToken)?e.access_token:void 0)&&Date.now()/1e3<parseInt(this.oauthToken.expires_at)},t}(o.Events)},{}],95:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=[].slice;i=e(211),s=e(212),a=e(29),c=e(34),l=e("bluebird"),d=e(114),p=e("underscore"),o="autoJoinQueue",r="any",u=function(){function e(){}return e.prototype.getQueue=function(){var e;return null!=(e=d.get(o))?e:[]},e.prototype.setQueue=function(e){return d.set(o,e)},e.prototype.clearQueue=function(){
return d.unset(o)},e.prototype._idMember=function(){return a.isLoggedIn()?a.myId():r},e.prototype._entryForUrl=function(e){return{url:e,idMember:this._idMember()}},e.prototype._matchesMember=function(e){return e===r||e===a.myId()},e.prototype.add=function(e){var t;return t=this.getQueue(),p.any(t,function(t){return function(n){return n.url===e&&t._matchesMember(n.id)}}(this))?void 0:this.setQueue(h.call(t).concat([this._entryForUrl(e)]))},e.prototype.inQueue=function(e){return p.any(this.getQueue(),function(t){return function(n){return n.url===e&&t._matchesMember(n.idMember)}}(this))},e.prototype.autoJoin=function(){var e;return e=this.getQueue(),0!==e.length&&a.isLoggedIn()?null!=this._runOnce?this._runOnce:this._runOnce=c.await("headerData").then(function(t){return function(){return a.me().get("confirmed")?l.map(e,function(e){var n,r,o;return o=e.url,r=e.target,n=e.idMember,t._matchesMember(n)?s({method:"post",url:o}).then(function(){return null}).catch(i,function(){return null}):e}).then(function(n){return n=p.compact(n),0===n.length?t.clearQueue():t.setQueue(n),n.length<e.length}):!1}}(this)):l.resolve(!1)},e}(),t.exports=new u},{}],96:[function(e,t,n){var r,o;r=e("jquery"),o=e(101),r.fn.format=function(e,t){return this.text(o(e,t,{raw:!0})),this},r.fn.formatHtml=function(e,t){return this.html(o(e,t)),this}},{}],97:[function(e,t,n){var r,o,i,s;i=e(18),r=e(16),o=e(17),s=e(23),t.exports={getKey:function(e){var t,n,a;switch(e.type){case"keydown":case"keyup":return null!=(n=o[e.which])?i[n]:i.Unknown;case"keypress":return null!=(t=null!=(a=r[e.which])?a:s[e.which])?i[t]:i.Unknown;default:throw Error("Can't getKey for this event")}},isArrow:function(e){return e===i.ArrowLeft||e===i.ArrowRight||e===i.ArrowUp||e===i.ArrowDown},isSubmitEvent:function(e){var t;if("keydown"!==e.type)throw Error("Checking for submit only works on keydown");return(t=this.getKey(e))===i.Enter||t===i.LineFeed},isForceSubmitEvent:function(e){return this.isSubmitEvent(e)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey}}},{}],98:[function(e,t,n){var r,o,i,s,a,u,c,l,d=[].slice;r=e("jquery"),o=e("underscore"),i=e(231),s=function(e){return e.toLowerCase().split("-")},a=function(e,t){var n,r;return n=s(e),r=s(t),o.all(r,function(e,t){return n[t]===e})},u=function(e){var t,n,r,o;return e=e.split("@")[0],e=e.split(".")[0],t=e.split(/[-_]/),1===t.length?t[0]:(n=t[0],r=t[1],o=3<=t.length?d.call(t,2):[],[n,r.toUpperCase()].concat(d.call(o)).join("-"))},c=o.chain([r.cookie("lang"),navigator.language].concat(d.call(null!=(l=navigator.languages)?l:[]),[navigator.userLanguage],[navigator.browserLanguage],["en-GB"])).compact().map(function(e){return u(e)}).unique().value(),t.exports={preferred:c,matches:a,normalizeLocale:u,is:function(e){return a(c[0],e)},mostPreferred:function(e,t){return o.chain(e).map(function(e){return o.find(t,i(a,e))}).compact().first().value()}}},{}],99:[function(e,t,n){var r,o,i,s;s=e(117),i=e(101),r=e("underscore"),o=e("locale").counting,t.exports=function(e,t,n){var i;return null==n&&(n={}),i=r.extend({count:String(t)},n),s(["counts",e,o(t)],i)}},{}],100:[function(e,t,n){var r,o;r=e("underscore"),o=e(117),t.exports=function(e){var t,n;return t=r.isString(e)?e:null!=(null!=(n=e.responseJSON)?n.message:void 0)?e.responseJSON.message:null!=e.message?e.message:e.responseText,o(["server error",t])||t}},{}],101:[function(e,t,n){var r,o;o=e(117),r=e(70),t.exports=function(e,t,n){var i;return i=o(e,t,n),r("string"==typeof i,"babble: key "+e+" not found"),i}},{}],102:[function(e,t,n){var r,o,i,s;i=e(239),r=e("underscore"),o=e(70),s="Error",t.exports=function(e,t){var n,r,a,u;for(n=i([e,s].join("::")),r=0,a=t.length;a>r;r++)u=t[r],o(u!==s,u+" is the reserved base name!"),o(!(u in n),"You can't use "+u+" as the name of a custom error"),n[u]=i([e,u].join("::"),{},n);return n}},{}],103:[function(e,t,n){var r;r=e(104),t.exports=new(function(){function e(){}return e.prototype.markdownAsHtml=function(e,t){return null==t&&(t={}),null==e&&(e=""),""===e?e:r.description.format(e,t).output},e.prototype.bytes=function(e){var t,n,r,o,i,s,a;if(null==e)return"Unknown Size";for(a=["B","KB","MB","GB"],t=e,r=n=0,o=a.length;o>n;r=++n){if(s=a[r],1024>t||r===a.length-1)return i=Math.round(100*t)/100,i+" "+s;t/=1024}return"unknown"},e}())},{}],104:[function(e,t,n){var r,o,i,s,a,u,c,l;r=e(29),o=e(157),i=e(6),s=e(33),u=e("trello-markdown"),c=e(126),l=e("underscore"),a=e("emoji-map"),t.exports=window.TFM=new(function(){function e(){var e;e={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember},e.shouldOpenLinkInNewTab=c.isExternalURL,this.description=new u(e),this.comments=new u(l.extend({restrict:{block:["blockquote","code","fencedCode","hr","list","newline","paragraph"],inline:["atMention","autolink","break","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e)),this.checkItems=new u(l.extend({inlineOnly:!0,restrict:{inline:["atMention","autolink","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},e))}return e.prototype.lookupEmoji=function(e,t){var n,r,o;return e=e.toLowerCase(),null!=(n=null!=(r=t.textData)&&null!=(o=r.emoji)?o[e]:void 0)?n:a[e]},e.prototype.lookupMember=function(e,t){var n,o,i,a;return e=e.toLowerCase(),"card"===e||"board"===e?[e,!0]:(o=function(){return s.findOne("Member","username",e)},n=function(){return s.findOne("Member",function(t){var n;return n=t.get("fullName"),n?l.chain(n.toLowerCase().split(/\s+/)).filter(function(e){return e.length>=2}).contains(e).value():!1})},i=null!=(a=o())?a:n(),null!=i?[i.get("fullName"),r.isMe(i)]:/^[a-z0-9_]{3,}/.test(e)?[e,!1]:[null,!1])},e.prototype.lookupCardInfo=function(e,t){var n,r,o,a,u;return e=parseInt(e,10),a=null!=t&&null!=(u=t.board)?u.id:void 0,null==a&&null!=(o=i.getCurrentBoard())&&(a=o.id),n=s.findOne("Card",function(t){return t.get("idBoard")===a&&t.get("idShort")===e}),null!=n?{title:n.get("name"),url:i.getCardUrl(n)}:(r="Card "+e,{title:r,url:i.getCardUrlWithoutModels(a,e,r)})},e}())},{}],105:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v;a=0,s=function(e){return m(f(v(e)))},f=function(e){return r(o(h(e),8*e.length))},m=function(e){var t,n,r,o,i;try{}catch(e){t=e,a=0}for(n=a?"0123456789ABCDEF":"0123456789abcdef",o="",i=void 0,r=0;r<e.length;)i=e.charCodeAt(r),o+=n.charAt(i>>>4&15)+n.charAt(15&i),r++;return o},v=function(e){var t,n,r,o;for(n="",t=-1,r=void 0,o=void 0;++t<e.length;)r=e.charCodeAt(t),o=t+1<e.length?e.charCodeAt(t+1):0,r>=55296&&56319>=r&&o>=56320&&57343>=o&&(r=65536+((1023&r)<<10)+(1023&o),t++),127>=r?n+=String.fromCharCode(r):2047>=r?n+=String.fromCharCode(192|r>>>6&31,128|63&r):65535>=r?n+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):2097151>=r&&(n+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return n},h=function(e){var t,n;for(n=Array(e.length>>2),t=0;t<n.length;)n[t]=0,t++;for(t=0;t<8*e.length;)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32,t+=8;return n},r=function(e){var t,n;for(n="",t=0;t<32*e.length;)n+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return n},o=function(e,t){var n,r,o,i,s,a,u,h,m;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,n=1732584193,r=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;)a=n,u=r,h=o,m=i,n=c(n,r,o,i,e[s+0],7,-680876936),i=c(i,n,r,o,e[s+1],12,-389564586),o=c(o,i,n,r,e[s+2],17,606105819),r=c(r,o,i,n,e[s+3],22,-1044525330),n=c(n,r,o,i,e[s+4],7,-176418897),i=c(i,n,r,o,e[s+5],12,1200080426),o=c(o,i,n,r,e[s+6],17,-1473231341),r=c(r,o,i,n,e[s+7],22,-45705983),n=c(n,r,o,i,e[s+8],7,1770035416),i=c(i,n,r,o,e[s+9],12,-1958414417),o=c(o,i,n,r,e[s+10],17,-42063),r=c(r,o,i,n,e[s+11],22,-1990404162),n=c(n,r,o,i,e[s+12],7,1804603682),i=c(i,n,r,o,e[s+13],12,-40341101),o=c(o,i,n,r,e[s+14],17,-1502002290),r=c(r,o,i,n,e[s+15],22,1236535329),n=l(n,r,o,i,e[s+1],5,-165796510),i=l(i,n,r,o,e[s+6],9,-1069501632),o=l(o,i,n,r,e[s+11],14,643717713),r=l(r,o,i,n,e[s+0],20,-373897302),n=l(n,r,o,i,e[s+5],5,-701558691),i=l(i,n,r,o,e[s+10],9,38016083),o=l(o,i,n,r,e[s+15],14,-660478335),r=l(r,o,i,n,e[s+4],20,-405537848),n=l(n,r,o,i,e[s+9],5,568446438),i=l(i,n,r,o,e[s+14],9,-1019803690),o=l(o,i,n,r,e[s+3],14,-187363961),r=l(r,o,i,n,e[s+8],20,1163531501),n=l(n,r,o,i,e[s+13],5,-1444681467),i=l(i,n,r,o,e[s+2],9,-51403784),o=l(o,i,n,r,e[s+7],14,1735328473),r=l(r,o,i,n,e[s+12],20,-1926607734),n=d(n,r,o,i,e[s+5],4,-378558),i=d(i,n,r,o,e[s+8],11,-2022574463),o=d(o,i,n,r,e[s+11],16,1839030562),r=d(r,o,i,n,e[s+14],23,-35309556),n=d(n,r,o,i,e[s+1],4,-1530992060),i=d(i,n,r,o,e[s+4],11,1272893353),o=d(o,i,n,r,e[s+7],16,-155497632),r=d(r,o,i,n,e[s+10],23,-1094730640),n=d(n,r,o,i,e[s+13],4,681279174),i=d(i,n,r,o,e[s+0],11,-358537222),o=d(o,i,n,r,e[s+3],16,-722521979),r=d(r,o,i,n,e[s+6],23,76029189),n=d(n,r,o,i,e[s+9],4,-640364487),i=d(i,n,r,o,e[s+12],11,-421815835),o=d(o,i,n,r,e[s+15],16,530742520),r=d(r,o,i,n,e[s+2],23,-995338651),n=p(n,r,o,i,e[s+0],6,-198630844),i=p(i,n,r,o,e[s+7],10,1126891415),o=p(o,i,n,r,e[s+14],15,-1416354905),r=p(r,o,i,n,e[s+5],21,-57434055),n=p(n,r,o,i,e[s+12],6,1700485571),i=p(i,n,r,o,e[s+3],10,-1894986606),o=p(o,i,n,r,e[s+10],15,-1051523),r=p(r,o,i,n,e[s+1],21,-2054922799),n=p(n,r,o,i,e[s+8],6,1873313359),i=p(i,n,r,o,e[s+15],10,-30611744),o=p(o,i,n,r,e[s+6],15,-1560198380),r=p(r,o,i,n,e[s+13],21,1309151649),n=p(n,r,o,i,e[s+4],6,-145523070),i=p(i,n,r,o,e[s+11],10,-1120210379),o=p(o,i,n,r,e[s+2],15,718787259),r=p(r,o,i,n,e[s+9],21,-343485551),n=g(n,a),r=g(r,u),o=g(o,h),i=g(i,m),s+=16;return Array(n,r,o,i)},u=function(e,t,n,r,o,s){return g(i(g(g(t,e),g(r,s)),o),n)},c=function(e,t,n,r,o,i,s){return u(t&n|~t&r,e,t,o,i,s)},l=function(e,t,n,r,o,i,s){return u(t&r|n&~r,e,t,o,i,s)},d=function(e,t,n,r,o,i,s){return u(t^n^r,e,t,o,i,s)},p=function(e,t,n,r,o,i,s){return u(n^(t|~r),e,t,o,i,s)},g=function(e,t){var n,r;return n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16),r<<16|65535&n},i=function(e,t){return e<<t|e>>>32-t},t.exports=s},{}],106:[function(e,t,n){var r=[].slice;t.exports=function(){var e,t,n,o,i,s,a,u,c;for(a=2<=arguments.length?r.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],n=0,i=a.length;i>n;n++){s=a[n],u=s.prototype;for(o in u)c=u[o],e.prototype[o]=c}return e}},{}],107:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h;r=e("jquery"),o=e(227),s=e(114),a=e("underscore"),c=0,d=window.sessionStorage,p=null!=(l=null!=d?d.status:void 0)?l:"active",u=null,h=null,"undefined"!=typeof document.hidden?(u="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",h="webkitvisibilitychange"),t.exports=i={init:function(){setInterval(i.check,1e4),r(window).focus(function(){return i.addActivity()}),r(document).bind("keydown mousedown",function(){i.addActivity()}),i.getHidden=null!=u?function(){return document[u]}:function(){return!1},null!=h&&r(document).bind(h,function(e){return function(){return i.trigger("visibilitychange")}}(this))},addActivity:function(){var e;e=(new Date).getTime(),c=e,s.set("lastActivity",c),i.setStatus("active")},check:function(){var e;e=(new Date).getTime()-Math.max(c,s.enabled()?parseInt(s.get("lastActivity")):0),e>3e5&&i.setStatus("idle")},setStatus:function(e){e!==p&&(p=e,d&&(d.status=p),i.trigger("setStatus",p))},getStatus:function(){return p}},a.extend(i,o.Events)},{}],108:[function(e,t,n){var r,o,i,s,a;r=e("jquery"),o=e("react"),i=e("react-dom"),s=e(494),a=e("underscore"),t.exports=o.createClass({displayName:"Wrapper",componentWillMount:function(){var e;return"function"==typeof(e=this.props.view).getData?e.getData():void 0},componentDidMount:function(){var e,t;return t=i.findDOMNode(this),e=this.props.view.render().el,r(t).append(e),s.addHandler(this.props.view,{scope:"popover_view"})},componentWillUnmount:function(){return s.removeHandler(this.props.view)},render:function(){return o.createElement("div",a.pick(this.props,["className"]))}})},{}],109:[function(e,t,n){var r,o,i;r=e("hearsay"),i=e("xtend"),o=e(231),t.exports=i(r.mixin,{componentWillUnmount:function(){return this.unsubscribe()},syncState:function(e){return this.subscribe(e,o(this,"setState"))}})},{}],110:[function(e,t,n){var r,o;r=e("react"),o=e("xtend"),t.exports=function(e,t){return null==t&&(t={}),function(n){return r.createElement(e,o(t,n))}}},{}],111:[function(e,t,n){var r,o,i=[].slice;o=e("underscore"),t.exports=r=function(){function e(){}return e.prototype.setTimeout=function(e,t){var n;return null==this._scheduled_timeouts&&(this._scheduled_timeouts=[]),this._scheduled_timeouts.push(n=setTimeout(e,t)),n},e.prototype.setInterval=function(e,t){var n;return null==this._scheduled_intervals&&(this._scheduled_intervals=[]),this._scheduled_intervals.push(n=setInterval(e,t)),n},e.prototype.requestAnimationFrame=function(e){var t;return null==this._scheduled_frameRequests&&(this._scheduled_frameRequests=[]),this._scheduled_frameRequests.push(t=requestAnimationFrame(e)),t},e.prototype.callback=function(e){var t;return t=null!=this._scheduled_callbacks?this._scheduled_callbacks:this._scheduled_callbacks=[],this._scheduled_callbacks.push(e),function(){var n,r;return n=1<=arguments.length?i.call(arguments,0):[],r=t.indexOf(e),-1!==r?(t.splice(r,1),e.apply(this,n)):void 0}},e.prototype.cancelScheduled=function(){var e,t,n,r,o,i,s,a,u,c,l,d,p;if(null!=this._scheduled_callbacks)for(;this._scheduled_callbacks.length;)this._scheduled_callbacks.pop();if(null!=this._scheduled_intervals)for(u=this._scheduled_intervals,t=0,i=u.length;i>t;t++)n=u[t],clearInterval(n);if(null!=this._scheduled_timeouts)for(c=this._scheduled_timeouts,r=0,s=c.length;s>r;r++)p=c[r],clearTimeout(p);if(null!=this._scheduled_frameRequests)for(d=null!=(l=this._scheduled_frameRequests)?l:[],o=0,a=d.length;a>o;o++)e=d[o],cancelAnimationFrame(e)},e.prototype.defer=function(e){return this.setTimeout(e,1)},e.prototype.debounce=function(e,t){return null==t&&(t=1),this.dynamicDebounce(e,function(){return t})},e.prototype.dynamicDebounce=function(e,t){var n,r;return n=this.setTimeout.bind(this),r=null,function(){var o,i;o=arguments,i=function(t){return function(){r=null,e.apply(t,o)}}(this),clearTimeout(r),r=n(i,t.apply(this,o))}},e.prototype.throttle=function(e,t,n){var r,i,s,a,u,c,l,d,p,h,m;return null==n&&(n={}),i=r=d=h=null,a=null!=(c=n.leading)?c:!0,m=null!=(l=n.trailing)?l:!0,p=this.setTimeout.bind(this),u=null,s=function(){return u=a?o.now():0,h=null,d=e.apply(i,r),i=r=null},function(){var n,c;return n=o.now(),null!=u||a||(u=n),c=t-(n-u),i=this,r=arguments,0>=c?(clearTimeout(h),h=null,u=n,d=e.apply(i,r),i=r=null):!h&&m&&(h=p(s,c)),d}},e}()},{}],112:[function(e,t,n){t.exports=e(113)(window.sessionStorage)},{}],113:[function(e,t,n){t.exports=function(e){return{enabled:function(){return null!=e},set:function(t,n){try{return null!=e?e[t]=JSON.stringify(n):void 0}catch(e){}},get:function(e){var t,n;if(n=this.getRaw(e),!n)return null;try{return JSON.parse(n)}catch(e){return t=e,null}},getRaw:function(t){return null!=e?e[t]:void 0},unset:function(t){return null!=this.getRaw(t)&&null!=e?delete e[t]:void 0}}}},{}],114:[function(e,t,n){t.exports=e(113)(window.localStorage)},{}],115:[function(e,t,n){var r,o;r=e(114),o=e(40),t.exports=new(function(){function e(){}return e.prototype.delta=r.get("serverTimeDelta"),e.prototype.updateServerTime=function(e){return this.delta=new Date(e)-new Date,r.set("serverTimeDelta",this.delta),o("time","delta",this.delta)},e.prototype.serverToClient=function(e){return new Date(new Date(e)-this.delta)},e}())},{}],116:[function(e,t,n){var r,o,i,s,a,u,c,l,d;r=e("jquery"),u=e("underscore"),o=e(227),c=e(139),l=e(467).getTypes,d=e(133),i=e(97),s=e(18),a=function(){function e(){this.value="",r(document).keydown(function(e){return function(t){var n,o,a;if(n=i.getKey(t),e.value&&(t.ctrlKey||t.metaKey)){if(r(t.target).is("#clipboard"))return void(n===s.C&&e.clearCut());if(!r(t.target).is("input:visible,textarea:visible")&&!(("function"==typeof window.getSelection&&null!=(o=window.getSelection())?o.toString():0)||(null!=(a=document.selection)?a.createRange().text:0)))return u.defer(function(){var t;return t=r("#clipboard-container"),t.empty().show(),r('<div id="clipboard" contenteditable="true"></div>').text(e.value).appendTo(t).focus().select(),d(document.getElementById("clipboard"))})}}}(this)),r(document).keyup(function(e){return function(t){var n;return e.isClipboard(t.target)&&(n=r("#clipboard").text(),""===n&&e.setCut(e.value)),e.checkForPastedImage()}}(this)),r(document).on("paste",function(e){return function(t){return u.isEmpty(l(t))||e.cancelPasteImage(),setTimeout(e.clearCut.bind(e),1)}}(this))}return e.prototype.set=function(e){this.value=e},e.prototype.setCut=function(e){try{localStorage.cut=e}catch(e){}},e.prototype.getCut=function(){try{return localStorage.cut}catch(e){}return null},e.prototype.clearCut=function(){try{delete localStorage.cut}catch(e){}},e.prototype.isCut=function(e){return e===this.getCut()},e.prototype.isClipboard=function(e){return"clipboard"===e.id},e.prototype.clear=function(){return r("#clipboard-container").empty().hide()},e.prototype.checkForPastedImage=function(){return clearTimeout(this.pasteImageTimeout),this.pasteImageTimeout=setTimeout(function(e){return function(){var t,n;t=r("#clipboard-container").find("img"),e.clear(),t.length>0&&(n=t.attr("src"),/^data:/.test(n)&&e.trigger("pasteImage",c(n)))}}(this),1)},e.prototype.cancelPasteImage=function(){return clearTimeout(this.pasteImageTimeout),this.clear()},e}(),u.extend(a.prototype,o.Events),t.exports=new a},{}],117:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m;u=e(32).locales,i=e(71),c=e(246),s=e(231),o=e(70),r=e("underscore"),d=r.clone(e("locale").strings),l=r.pick(e("locale"),"axis","exports","labels","templates","billing");for(a in l)p=l[a],o(!(a in d)),d[a]=p;m=i.makeVisitor(s.id,function(e,t,n){return null==n&&(n={}),o(t.hasOwnProperty(e),"'"+e+"' not found in "+JSON.stringify(t)),p=t[e],o("string"==typeof p,"I don't know how to convert values into strings. Please use a localized conversion function and pass me the string result."),n.raw?p:r.escape(p)}),h=s(i.visit,d),t.exports=function(e,t,n){var r;return null==t&&(t={}),null!=(r=h(e,m,t,n))?r.join(""):void 0}},{}],118:[function(e,t,n){var r,o,i;r=e(29),o=e("underscore"),i=e("moment"),t.exports=function(){var e,t,n,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;if(r.isLoggedIn()){for(c=r.me(),k=function(e){var t,n,r,o,i;if(n=e+"",t=n.match(/\(([^\)]+)\)$/)||n.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/))for(t=t[1],/\s/.test(t)&&(t=t.replace(/(\S)\S*/g,function(e,t){return t})),r=null!=(i=t.toUpperCase().match(/[A-Z]/g))?i:[],t=r.join("");t.length<2;)t+="?";else o=e.getTimezoneOffset(),t="UTC"+(0>o?"+":"-")+("00"+Math.floor(Math.abs(o)/60)).substr(-2)+":"+("00"+Math.abs(o)%60).substr(-2);return t},g=v=n=null,t=new Date,g=t.getTimezoneOffset(),w=k(t),h=6e4,s=a=0;12>=a;s=++a)if(t=i(t).add(30,"days").toDate(),t.getTimezoneOffset()!==g){n=t;break}if(null!=n){for(v=n.getTimezoneOffset(),d=(new Date).getTime(),l=n.getTime(),e=0;l>d+h/2&&30>e;)if(e++,p=Math.floor((d+l)/2),f=new Date(p).getTimezoneOffset(),f===g)d=p;else{if(f!==v)break;l=p}_=k(n),n=new Date(h*Math.floor(l/h)).toISOString()}m={},b={offsetCurrent:g,timezoneCurrent:w,offsetNext:v,timezoneNext:_,dateNext:n};for(u in b)C=b[u],null!=C&&(m[u]=C);return y=c.getPref("timezoneInfo"),o.isEqual(m,y)?void 0:c.run("timezoneInfo",m)}}},{}],119:[function(e,t,n){var r;r=e("underscore"),t.exports=function(e){var t;return t=r.reduce(e.split(","),function(e,t){var n,r,o;return o=t.split(":"),n=o[0],r=o[1],null!=r?(null==e[n]&&(e[n]=[]),e[n].push(r)):e[n]=!0,e},{}),function(e){var n,o;return n=t[e.get("type")],null==n?!1:n===!0?!0:(o=e.get("data").old,null!=o&&r.any(n,function(e){return null!=o[e]}))}}},{}],120:[function(e,t,n){var r=[].slice;t.exports=function(){var e,t,n,o,i,s,a,u,c,l,d,p;if(e=2<=arguments.length?r.call(arguments,0,n=arguments.length-1):(n=0,[]),l=arguments[n++],t=e[0],d=2<=e.length?r.call(e,1):[],null==t)return 0;if(d.length>0)for(o=i=0,a=t.length;a>i;o=++i)for(p=t[o],s=0,u=d.length;u>s;s++)if(c=d[s],c.length<=o||!l(p,c[o]))return o;return t.length}},{}],121:[function(e,t,n){var r;r=e("hearsay"),t.exports=function(e,t){return new r.ContinuousSignal(function(n){var r,o,i,s,a;return o=e.get(),r=Date.now(),n(o),i=null,s=function(e){return o=e,r=Date.now(),n(e)},t>0?(a=e.subscribe(function(e){var n;return clearTimeout(i),o!==e?(n=t-(Date.now()-r),0>=n?s(e):i=setTimeout(function(){return s(e)},n)):void 0}),function(){return a(),clearTimeout(i)}):(a=e.subscribe(function(e){return cancelAnimationFrame(i),i=requestAnimationFrame(function(){return n(e)})}),function(){return a(),cancelAnimationFrame(i)})})}},{}],122:[function(e,t,n){var r,o;r=e("underscore"),o=e(127),t.exports=function(e,t,n){var i;return null==n&&(n=function(e,t,n){return n}),(i=function(e,s){var a;return(a=t(e,s))?n(e,s,a):r.isArray(e)?e.map(i):o(e)?r.mapObject(e,i):e})(e)}},{}],123:[function(e,t,n){var r;t.exports=function(){try{return new window.CustomEvent("testEvent"),window.CustomEvent}catch(e){return r=function(e,t){var n;return null==t&&(t={bubbles:!1,cancelable:!1,detail:void 0}),n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},r.prototype=window.Event.prototype,r}}()},{}],124:[function(e,t,n){var r;r=e(123),t.exports=function(e,t,n){var o,i,s,a,u,c;for(o=new r(t,{bubbles:!1,cancelable:!1,detail:null!=(a=n.detail)?a:void 0}),u=!1,o.stopPropagation=function(){return u=!0,r.prototype.stopPropagation.apply(this,arguments)},i=0,s=e.length;s>i;i++)c=e[i],u||c.dispatchEvent(o)}},{}],125:[function(e,t,n){var r;r=e(123),t.exports=function(e,t,n){var o,i,s,a;return null==n&&(n={}),o=new r(t,{bubbles:null!=(i=n.bubbles)?i:!0,cancelable:null!=(s=n.cancelable)?s:!1,detail:null!=(a=n.detail)?a:void 0}),e.dispatchEvent(o)}},{}],126:[function(e,t,n){var r,o,i,s,a,u,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},l={}.hasOwnProperty;r=e("jquery"),o=e(18),s=e("underscore"),a=e(40),u=e(254),t.exports=i={spacing:16384,checkId:function(e){return"ObjectID"===(null!=e?e.constructor.name:void 0)||24===(null!=e?e.length:void 0)&&/^[a-f0-9]*$/.test(e)},capitalize:function(e){return s.isString(e)&&!s.isEmpty(e)?e[0].toUpperCase()+e.substr(1):e},pluralize:function(e){return e+"s"},imageFileExtensions:["png","gif","jpg","jpeg","bmp","ico"],extensionIsImage:function(e){var t,n;return t=null!=(n=i.fileExt(e))?n.toLowerCase():void 0,c.call(i.imageFileExtensions,t)>=0},fileExt:function(e){var t,n,r;return null!=(t=null!=(n=/\.([a-z0-9]+)$/i.exec(e))&&null!=(r=n[1])?r.toLowerCase():void 0)?t:null},traverse:function(e,t){var n,r,o;if(s.isEmpty(t)||!e)return e;if(s.isArray(t)){for(n=0,o=t.length;o>n&&(r=t[n],e=e[r],e);n++);return e}return e[t]},escapeForRegex:function(e){return null!=e?e.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},makeSlug:function(e,t){var n;return null==t&&(t="-"),e&&(n=i.removeAccents(e.toLowerCase()).replace(/[^a-z0-9]+/gi,t).replace(RegExp("^"+t+"|"+t+"$","g"),""),n.length>128&&(n=n.substr(0,128))),n||t},removeAccents:function(e){return e.replace(/[]/g,"a").replace(//g,"ae").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"g").replace(/[]/g,"h").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(//g,"oe").replace(//g,"r").replace(/[]/g,"s").replace(//g,"ss").replace(/[]/g,"u").replace(/[]/g,"y")},isShortId:function(e){return/^[0-9]{1,8}$/.test(e)},isShortLink:function(e){return s.isString(e)&&/^[a-zA-Z0-9]{8}$/.test(e)},getMs:function(e){var t,n,r,o,i,s,a,u;return t=e.days,n=e.hours,r=e.minutes,s=e.seconds,i=e.ms,u=e.years,o=e.months,a=e.weeks,null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==s&&(s=0),null==i&&(i=0),u&&(t+=365*u),o&&(t+=30*o),a&&(t+=7*a),n+=24*t,r+=60*n,s+=60*r,i+=1e3*s},getSeconds:function(e){return this.getMs(e)/1e3},dateAfter:function(e){var t,n;return t=null!=(n=null!=e?e.date:void 0)?n:new Date,new Date(t.getTime()+this.getMs(e))},dateBefore:function(e){var t,n;return t=null!=(n=null!=e?e.date:void 0)?n:new Date,new Date(t.getTime()-this.getMs(e))},compareMemberType:function(e,t,n,r){var o,i,s,a,u;switch(null==r&&(r={}),u=r.mode,null==u&&(u="standard"),u){case"members":i=[["normal","admin"]];break;case"commentDelete":i=[["normal","org"],["admin"]];break;default:i=[["org"],["normal"],["admin"]]}return o=function(t){var n,r,o,s,a;for(a=e.getMemberType(t),o=r=0,s=i.length;s>r;o=++r)if(n=i[o],c.call(n,a)>=0)return o;return-1},s=o(t),a=o(n),s>a?1:a>s?-1:0},idToDate:function(e){return new Date(1e3*parseInt(null!=e?e.substr(0,8):void 0,16))},tryToExcludeEXIFRotated:function(e){var t,n;return t=s.reduce(e,function(e,t){var n,r,o;return r=t.scaled,o=t.width,n=t.height,r&&o!==n?n>o?e+1:e-1:e},0),n=t>0,s.filter(e,function(e){var t,r;return r=e.width,t=e.height,n?t>=r:r>=t})},preferScaledPreviews:function(e){var t;return t=this.tryToExcludeEXIFRotated(s.filter(e,function(e){return e.scaled})),s.isEmpty(t)?e:t},smallestPreviewBiggerThan:function(e,t,n){var r,o,i,a;for(null==e&&(e=[]),null==t&&(t=0),null==n&&(n=0),a=[this.preferScaledPreviews(e),e],o=0,i=a.length;i>o;o++)e=a[o],s.isEmpty(r)&&(r=s.filter(e,function(e){return e.width>=t&&e.height>=n}));return this.smallestPreview(r)},previewBetween:function(e,t,n,r,o){var i;return null==e&&(e=[]),i=s.filter(this.preferScaledPreviews(e),function(e){var i,s;return t<=(i=e.width)&&r>=i&&n<=(s=e.height)&&o>=s}),this.biggestPreview(i)},biggestPreview:function(e){return 0===e.length?null:s.max(this.preferScaledPreviews(e),function(e){return Math.min(e.width,e.height)})},smallestPreview:function(e){return 0===e.length?null:s.min(this.preferScaledPreviews(e),function(e){return Math.max(e.width,e.height)})},rotateArr:function(e,t){return s.flatten([e.slice(-t),e.slice(0,-t)],!0)},stopPropagation:function(e){return null!=e?e.stopPropagation():void 0},preventDefault:function(e){return null!=e?e.preventDefault():void 0},stop:function(e){return i.stopPropagation(e),i.preventDefault(e)},checkEmail:function(e,t){return null==t&&(t=""),RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+t+"]+\\.[a-z"+t+"]+$","i").test(e)},removeDomainFromEmailAddress:function(e,t){return null==t&&(t=""),e.replace(RegExp("@[-a-z0-9\\."+t+"]+\\.[a-z"+t+"]+$"),"")},validName:function(e){return e.length>=1},spaces:function(e){for(this.longStr||(this.longStr=" ");this.longStr.length<e;)this.longStr=this.longStr+this.longStr;return this.longStr.substr(0,e)},_pad:function(e,t,n,r){var o,i;return null==n&&(n=" "),e=e.toString(),e.length>t?e.substr(0,t):(o=t-e.length,i=" "===n?this.spaces(o):this.times(n,o),r?i+e:e+i)},rpad:function(e,t,n){return this._pad(e,t,n,!1)},lpad:function(e,t,n){return this._pad(e,t,n,!0)},times:function(e,t){var n;return s.map(function(){n=[];for(var e=0;t>=0?t>e:e>t;t>=0?e++:e--)n.push(e);return n}.apply(this),function(){return e}).join("")},truncate:function(e,t){var n;return!(null!=e?e.length:void 0)||e.length<t?e:(n=e.substr(0,e.lastIndexOf(" ",t)),n?n:e.substr(0,t))},scrollToTop:function(){return r(window).scrollTop(0)},getProtocol:function(e){var t,n;return e&&null!=(t=null!=(n=/^([a-z]+):/i.exec(e))?n[1]:void 0)?t:""},makeHttp:function(e){return e?(e=e.replace(/^[a-z]*:\/*/i,""),"http://"+e):""},sanitizeWebAddress:function(e){var t;return"http"!==(t=i.getProtocol(e))&&"https"!==t?i.makeHttp(e):e},isInPosition:function(e,t,n){var r;return null==(null!=n?n.id:void 0)?!1:(r=t[e],(null!=r?r.id:void 0)===n.id)},calcPos:function(e,t,n,r,o){var s,a,u,c,l,d,p,h,m;return a=65536,l=t.select(function(e){return(!(null!=n&&n.id===e.id)||o)&&(!r||r(e))}),i.isInPosition(e,l,n)?null!=(m=n.pos)?m:n.get("pos"):(s=Math.min(Math.max(e,0),l.length),c=l[s-1],u=l[s],d=(null!=n?n.get("pos"):void 0)||-1,h=null!=c?c.get("pos"):-1,p=null!=u?u.get("pos"):-1,-1===p?n&&d>h?d:h+a:n&&d>h&&p>d?d:h>=0?(p+h)/2:p/2)},randomWait:function(e,t){return Math.floor(e+Math.random()*t)},toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},calcBoardLayout:function(){return r(window).trigger("resize")},navMenuList:function(e,t,n){var r,i,a,u,c,l,d,p;return a=e.find(t),p=a.filter(".selected").first()[0],d=s.indexOf(a,p),i=a[0],u=a[a.length-1],l=0>d-1?u:a[d-1],c=d+1>a.length?i:a[d+1],n===o.ArrowDown&&(r=c),n===o.ArrowUp&&(r=l),this.selectMenuItem(e,t,r)},selectMenuItem:function(e,t,n){return e.find(t).removeClass("selected"),r(n).addClass("selected")},insertSelection:function(e,t,n,o){var s,a,u,c,l;return e=i.getElem(e),s=r(e),l=s.val(),null!=n||null!=o?(u=l.substring(0,n),a=l.substring(o),this.setCaretPosition(e,n+(""+t).length)):(u=l,a=""),c=/\S$/.test(u)?" ":"",s.val(u+c+t+a),this.setCaretPosition(e,u.length+c.length+t.length),s.focus(),s.trigger("mutated")},_nextWhitespace:function(e,t){var n,r;return n=e.indexOf("\n",t),-1===n&&(n=1/0),r=e.indexOf(" ",t),-1===r&&(r=1/0),Math.min(n,r,e.length)},getWordFromIndex:function(e,t){var n,r,o,i;for(o=Math.max(e.lastIndexOf("\n",t-1),e.lastIndexOf(" ",t-1)),o+=1;/[()\[\]\/\\;"'&]|:@/.test(e[o]);)o++;return n=t,r=n-o,i=e.slice(o,n),{start:o,end:n,length:r,str:i}},getWordFromCaret:function(e){var t,n;return e=i.getElem(e),n=r(e).val(),t=this.getCaretPosition(e),this.getWordFromIndex(n,t)},getLineFromIndex:function(e,t){var n,r,o,i;return o=e.lastIndexOf("\n",t-1),o+=1,n=this._nextWhitespace(e,t),r=n-o,i=e.slice(o,n),{start:o,end:n,length:r,str:i}},getLineFromCaret:function(e){var t,n;return e=i.getElem(e),n=r(e).val(),t=this.getCaretPosition(e),this.getLineFromIndex(n,t)},getCaretPosition:function(e){var t,n,r;return e=i.getElem(e),null!=e.selectionStart?t=e.selectionStart:c.call(document,"selection")>=0&&(e.focus(),n=document.selection.createRange(),r=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),t=n.text.length-r),t},setCaretPosition:function(e,t){var n;return e=i.getElem(e),e.setSelectionRange?(e.focus(),e.setSelectionRange(t,t)):e.createTextRange?(n=e.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()):void 0},setCaretAtEnd:function(e){var t;return e?(t=r(e).val().length,this.setCaretPosition(e,t)):void 0},getLastWord:function(e){var t;return t=r(e).val().split(" "),s.last(t)},removeWordAtIndex:function(e,t){var n,r,o;return o=i.getWordFromIndex(e,t),n=e.slice(0,o.start),r=e.slice(o.end),n+r},stripExtraSpaces:function(e){return null!=e?e.replace(/\s+/g," ").trim():void 0},getMemNameArray:function(e){return s.chain(["username","fullName","initials"]).map(function(t){var n;return null!=(n=e.get(t))?n.toLowerCase().split(/\s+/):void 0}).compact().flatten().value()},getMemNameArrayFromId:function(e,t){var n;return null!=(n=e.get("Member",t))?this.getMemNameArray(n):[]},filterMembers:function(e,t,n){var r,o,a,u,c,l;for(l=RegExp("^"+i.escapeForRegex(t),"i"),o=[],r=0,a=n.length;a>r;r++)u=n[r],c=i.getMemNameArrayFromId(e,u),s.find(c,function(e){return l.test(e)})&&o.push(u);return o},getQueryParameter:function(e,t){var n,r,o,i;return null==t&&(t=""),r=RegExp("[?&]"+e+"=([^?&]*)"),n=null!=(o=r.exec(location.search))?o:r.exec(location.hash),i=null!=n?n[1]:void 0,null!=i?decodeURIComponent(i.replace(/\+/g," ")):t},validFileSize:function(e,t){return null==t&&(t=10485760),(null!=e?e.size:void 0)<t},uploadFile:function(e,t,n){var o,i;return i=s.uniqueId("iframe"),o=r("<iframe>").attr("name",i).css("display","none").appendTo("body").load(function(e){var t,r;s.defer(function(){return o.remove()});try{r=o.contents().text()}catch(e){return t=e,n("File too large")}return/File too large/i.test(r)?n(r):n()}),t.closest("form").attr("target",i).find("input[name=token]").val(e).end().submit(),s.defer(function(){return t.val("")})},hasValidInviteTokenFor:function(e){var t,n;return n=this.inviteTokenFor(e.id),null==n?!1:(t=e.modelCache.get("Member",n.split("-")[0]),null==t?!1:"virtual"===e.getMemberType(t)?!0:e.isMember(t)&&"ghost"===e.get("memberType"));
},inviteTokenFor:function(e){return r.cookie("invite-token-"+e)},invitationTokens:function(){var e,t,n,o;for(t=/invite-token-[-a-f0-9]*/g,o=[];null!=(e=null!=(n=t.exec(document.cookie))?n[0]:void 0);)o.push(r.cookie(e));return o},getElem:function(e){return e instanceof r?e[0]:e},getElemTransformMatrix:function(e){var t;return t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform"),"none"!==t?t:null},getMatrixDegrees:function(e){var t,n,r,o,i;return i=e.split("(")[1].split(")")[0].split(","),t=i[0],n=i[1],r=i[2],o=i[3],Math.round(Math.atan2(n,t)*(180/Math.PI))},getMatrixScale:function(e){var t,n,r,o,i;return i=e.split("(")[1].split(")")[0].split(","),t=i[0],n=i[1],r=i[2],o=i[3],Math.sqrt(t*t+n*n)},getDegrees:function(e,t){return Math.round(Math.atan2(e,t)*(180/Math.PI))},calcDistanceFromCenter:function(e,t,n){var r;return r=Math.pow(t-(e.offset().left+e.width()/2),2)+Math.pow(n-(e.offset().top+e.height()/2),2),Math.floor(Math.sqrt(r))},_runShredders:function(){var e,t,n,r,o,s;for(s=i._shredders,o=new Date,i._shredders=[],e=0,n=0,r=s.length;r>n;n++)t=s[n],o>t.time?(t.fn(),e++):i._shredders.push(t);return a("shred","Shred "+e+" objects, "+i._shredders.length+" left"),i._shredTimeout=null,i._startShredTimer()},_startShredTimer:function(){return!i._shredTimeout&&i._shredders.length>0?null!=i._shredTimeout?i._shredTimeout:i._shredTimeout=setTimeout(i._runShredders,i.getMs({seconds:3})):void 0},shred:function(e){return null==i._shredders&&(i._shredders=[]),i._shredders.push({time:i.dateAfter({seconds:20}),fn:function(t){return function(){var t,n;n=[];for(t in e)l.call(e,t)&&n.push(delete e[t]);return n}}(this)}),i._startShredTimer()},extendEvents:function(e){return function(){return s.defaults(e,s.result(this.constructor.__super__,"events"))}},relativeUrl:function(e){return e.replace(RegExp("^"+siteDomain),"")},isTextElement:function(e){var t,n;if(e instanceof HTMLTextAreaElement)return!0;if(!(e instanceof HTMLInputElement))return!1;if("text"===(t=e.type)||"email"===t||"password"===t||"search"===t)return!0;if("submit"===(n=e.type)||"reset"===n||"button"===n||"checkbox"===n)return!1;try{return e.selectionStart,!0}catch(e){return!1}},withoutAlteringSelection:function(e){var t,n,o,s,a,u,c;n=document.activeElement,t=r(n),a=t.is(":focus"),null!=n&&i.isTextElement(n)?(n.selectionStart?(u=n.selectionStart,s=n.selectionEnd,o=n.selectionDirection):c=this.getCaretPosition(n),e(),u?n.setSelectionRange(u,s,o):c&&this.setCaretPosition(n,c),a&&t.focus()):e()},extendParentClassName:function(e){return function(){return s.result(this.constructor.__super__,"className")+(" "+e)}},waitForImageLoad:function(e,t,n){var r;return r=new Image,r.onload=function(){return t(r)},r.onerror=function(){return"function"==typeof n?n(r):void 0},r.src=e},bugzscout:function(e,t){var n,o,i,s,a,u;return u=e.project,n=e.area,o=e.description,i=e.extra,a=e.me,s=e.forceNew,null==s&&(s=0),r.ajax({url:"//trello.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Bugzscout",ScoutProject:u,ScoutArea:n,Description:o,Extra:i,Email:'"'+a.fullName+'" <'+a.email+">",ForceNewBug:s,FriendlyResponse:0},success:function(){return"function"==typeof t?t():void 0},error:function(e,n){return"function"==typeof t?t(n):void 0}})},sortMembers:function(e,t){var n;return n=function(e){return e===t||e.id===t.get("id")},e.sort(function(e,t){var r,o;return r=n(e),o=n(t),r&&!o?-1:!r&&o?1:e.fullName<t.fullName?-1:e.fullName>t.fullName?1:0}),e},firstLessThan:function(e,t){var n,r,o,i,a;for(o=0,i=t.length;i>o;o++){if(r=t[o],!s.isArray(r))return s.isFunction(r)?r.call(this,e):r;if(n=r[0],a=r[1],n>=e)return s.isFunction(a)?a.call(this,e):a}},hoursLeft:function(e){return(new Date(e)-new Date)/i.getMs({hours:1})},escapedReturnUrl:function(){return encodeURIComponent(location.href.replace(/^https?:\/\/[^\/]+/,""))},isExternalURL:function(e){var t;return t=u(e),t.host!==document.location.host||/^[\\\/.]{2,}/.test(t.pathname)},reverse:function(e){return e.slice(0).reverse()},buildFuzzyMatcher:function(e){var t;return t=s.map(e.split(/\s+/),function(e){return RegExp(""+i.escapeForRegex(e),"i")}),function(e){return s.every(t,function(t){return t.test(e)})}},getPadding:function(e){var t;return t=r(e).css(["padding-left","padding-top","padding-bottom","padding-right"]),{left:parseInt(t["padding-left"],10),top:parseInt(t["padding-top"],10),bottom:parseInt(t["padding-bottom"],10),right:parseInt(t["padding-right"],10)}},frameInCoordinateSpace:function(e,t){var n,r;return r=i.getPadding(t),n={top:e.offsetTop-(t.offsetTop+r.top),left:e.offsetLeft-(t.offsetLeft+r.left)},n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n},getBounds:function(e){var t,n;return t=r(e),n={left:t.scrollLeft(),top:t.scrollTop(),width:t.innerWidth(),height:t.innerHeight()},n.bottom=n.top+n.height,n.right=n.left+n.width,n},scrollElementIntoView:function(e,t,n){var o,s,a,u,c,l,d,p,h,m,f,g;p=null!=n?n:{},c=p.horizontal,g=p.vertical,s=p.animated,l=i.getBounds(e),d=i.getPadding(e),a=i.frameInCoordinateSpace(t,e),u={top:a.top-d.top,bottom:a.bottom+d.bottom,left:a.left-d.left,right:a.right+d.right},f=s?(o=r(e),function(e,t){var n;return n={},n[e]=t,o.animate(n,{duration:150,queue:!1})}):function(t,n){return e[t]=n},g&&(m=function(e){return f("scrollTop",e+d.top)},u.bottom>l.bottom?m(u.bottom-l.height):u.top<l.top&&m(u.top)),c&&(h=function(e){return f("scrollLeft",e+d.left)},u.right>l.right?h(u.right-l.width):u.left<l.left&&h(u.left))}}},{}],127:[function(e,t,n){t.exports=function(e){var t;return null==e?!1:"object"!=typeof e?!1:null===(t=Object.getPrototypeOf(e))||t===Object.prototype}},{}],128:[function(e,t,n){var r,o,i,s;o=e("underscore"),s=e(127),r=e("react"),t.exports=function(e,t){return!(i(e,this.props)&&i(t,this.state))},i=function(e,t){var n,a,u,c,l,d;if(s(e)&&s(t)){if(o.keys(e).length!==o.keys(t).length)return!1;for(c in e)if(d=e[c],!i(e[c],t[c]))return!1}else if(r.isValidElement(e)&&r.isValidElement(t)){if(!i([e.props,e.state],[t.props,t.state]))return!1}else if(o.isArray(e)&&o.isArray(t)){if(e.length!==t.length)return!1;for(n=u=0,l=e.length;l>u;n=++u)if(a=e[n],!i(e[n],t[n]))return!1}else{if(o.isFunction(e)&&o.isFunction(t))return!0;if(e!==t)return!1}return!0}},{}],129:[function(e,t,n){var r,o=[].slice;r=e("bluebird"),t.exports=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],r.fromNode(function(r){return n[t].apply(n,o.call(e).concat([r]))})}},{}],130:[function(e,t,n){t.exports=function(){if(window.getSelection){if(window.getSelection().empty)return window.getSelection().empty();if(window.getSelection().removeAllRanges)return window.getSelection().removeAllRanges()}else if(document.selection)return document.selection.empty()}},{}],131:[function(e,t,n){t.exports=function(e){var t,n,r;return n=window.getSelection(),r=n.toString(),t=n.anchorNode,!!r&&!!e.find(t).length}},{}],132:[function(e,t,n){t.exports=function(){var e,t;return("function"==typeof window.getSelection&&null!=(e=window.getSelection())?e.toString():void 0)||(null!=(t=document.selection)?t.createRange().text:void 0)}},{}],133:[function(e,t,n){t.exports=function(e){var t,n;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):(n=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))}},{}],134:[function(e,t,n){t.exports=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||null!=e.button&&0!==e.button?!1:!0}},{}],135:[function(e,t,n){var r,o,i;i=e(24),o=-i,r=100-i,t.exports=function(e){return o>e?o:e>r?r:e}},{}],136:[function(e,t,n){var r,o=[].slice;r=e("underscore"),t.exports=function(e,t){var n,i,s,a,u,c;for(c=[],a=t.blockLex(e,{}),i=0,s=a.length;s>i;i++)n=a[i],null!=n.children&&(c=o.call(c).concat(o.call(t.inlineLex(n.children.text))));return u=r.chain(c).filter(function(e){return"link"===e.type}).map(function(n){var r,o;return e=null!=(r=n.children)?r.text:void 0,null!=e?{url:n.url,text:t.textInline(null!=(o=n.children)?o.text:void 0)}:{url:n.url}}).value()}},{}],137:[function(e,t,n){t.exports=function(e,t,n){return null==n&&(n=""),e.length>t?e.substr(0,t-n.length+1).replace(/\s+\S*$/,"")+n:e}},{}],138:[function(e,t,n){t.exports=function(e){return/\bhttps?:\/\//.test(e)}},{}],139:[function(e,t,n){t.exports=function(e){var t,n,r,o,i,s,a,u,c,l,d;if(d=e.split(","),a=d[0],r=d[1],l=/data:([^;]+)(?:;charset=([^;]*))?(;base64)?/.exec(a),null!=l){if(t=l[0],c=l[1],s=l[2],u=l[3],!u)throw Error("Unable to handle non-base64 URIs");if(null!=s)throw Error("Unable to handle encodings");return o=atob(r),n=function(){var e,t,n;for(n=[],e=0,t=o.length;t>e;e++)i=o[e],n.push(i.charCodeAt(0));return n}(),new Blob([new Uint8Array(n)],{type:c})}throw Error("Invalid data URI")}},{}],140:[function(e,t,n){t.exports=function(e){return 0===e.indexOf(window.attachmentsDomain)}},{}],141:[function(e,t,n){var r;r=e(254),t.exports=function(e){return r(e).host===location.host}},{}],142:[function(e,t,n){t.exports=function(e){return/^https?:\/\/\S+$/.test(e)}},{}],143:[function(e,t,n){var r,o;r=e(29),o=e(33),t.exports=function(e){var t,n;if(0!==e.indexOf("/")&&0!==e.indexOf(siteDomain+"/"))return!1;if(e=e.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),e=e.replace(/[\?\#].*$/,""),/\.[a-z]+$/i.test(e))return!1;if(/^([bce]|board|card|org)\//.test(e))return!0;if(/^search(\/|$)/.test(e))return!0;if(r.isLoggedIn()){if(RegExp("^"+r.myUsername()+"(/|$)").test(e))return!0;if("/"===e)return!0}if(/^shortcuts\/?$/.test(e))return!0;if(null!=(t=null!=(n=/^[^\/\?\#]+/.exec(e))?n[0]:void 0)){if(r.isLoggedIn()&&("me"===t||"my"===t||"you"===t||"your"===t||"username"===t))return!0;if(/^[a-z0-9_]{3,}$/.test(t)){if(null!=o.findOne("Member","username",t))return!0;if(null!=o.findOne("Organization","name",t))return!0}}return!1}},{}],144:[function(e,t,n){var r,o=[].slice,i={}.hasOwnProperty;r=e("underscore"),t.exports=function(){var e,t,n,s,a;return n=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],e={},r.flatten(t).forEach(function(t){return e[n(t)]=t}),function(){var t;t=[];for(s in e)i.call(e,s)&&(a=e[s],t.push(a));return t}()}},{}],145:[function(e,t,n){var r,o;o=e("underscore"),r={},r.Server=function(){function e(e){var t,n;return e?(t=e.split("."),void(t.length>0?this.parts=function(){var e,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(parseInt(n,10)||0);return o}():this.parts=[0])):null}return e.prototype.toString=function(){return this.parts.join(".")},e.prototype.toJSON=function(){return this.toString()},e.prototype.lessThan=function(e){var t;return t=this.compareTo(e),t&&0>t},e.prototype.greaterThan=function(e){var t;return t=this.compareTo(e),t&&t>0},e.prototype.equalTo=function(e){var t;return t=this.compareTo(e),t&&0===t},e.prototype.compareTo=function(e){var t,n,i,s,a,u,c;if(o.isString(e))e=new r.Server(e);else if(!(e instanceof r.Server))return null;for(n=Math.max(this.parts.length,e.parts.length),u=o.zip(this.parts,e.parts),t=0,i=u.length;i>t;t++){if(c=u[t],s=c[0],a=c[1],null==s&&(s=0),null==a&&(a=0),s>a)return n;if(a>s)return-n;n--}return 0},e.compareStringVersions=function(e,t){return new r.Server(e).compareTo(t)},e.prototype.supports=function(e){var t,n;return n=e.minServerVersion,t=e.maxServerVersion,(!n||this.greaterThan(n))&&(!t||this.lessThan(t))},e}(),r.Client=function(){function e(e){var t,n;t=e.split("-"),this.head=t[0],n=t[1],this.version=parseInt(n,10),this.patch=0}return e.prototype.toString=function(){return this.head+"-"+this.fullVersion()},e.prototype.toJSON=function(){return this.toString()},e.prototype.fullVersion=function(){return o.compact([this.version,this.patch]).join(".")||0},e}(),t.exports=r},{}],146:[function(e,t,n){var r,o,i,s,a;r=e("jquery"),a={width:0},s={width:750},i={width:900},o={width:1280},t.exports={calc:function(){var e;return this.ranCalc=!0,e=r(window).width(),this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1,e>o.width?this.fExtraLarge=!0:e>i.width?this.fLarge=!0:e>s.width?this.fMedium=!0:this.fSmall=!0,r(this).triggerHandler("windowClassChange")},ensureRun:function(){return this.ranCalc?void 0:this.calc()}}},{}],147:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(29),i=e(74),s=e(193),a=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return u(t,e),t.prototype.typeName="Action",t.prototype.urlRoot="/1/actions",n=64,t.prototype.getModel=function(){return this.collection.options.model},t.prototype.triggerCacheEvents=function(e,t){var n,r,o,i;for(i=this.idModels(),n=0,o=i.length;o>n;n++)r=i[n],e.trigger(t+":"+this.typeName+":"+r)},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.isMember=function(e){return this.get("idMemberCreator")===e.id},t.prototype.getDate=function(){return i.parse(this.get("date"))},t.prototype.getBoard=function(){var e,t;return this.modelCache.get("Board",null!=(e=this.get("data"))&&null!=(t=e.board)?t.id:void 0)},t.prototype.getCard=function(){var e,t;return this.modelCache.get("Card",null!=(e=this.get("data"))&&null!=(t=e.card)?t.id:void 0)},t.prototype.getChecklist=function(){var e,t;return this.modelCache.get("Checklist",null!=(e=this.get("data"))&&null!=(t=e.checklist)?t.id:void 0)},t.prototype.editable=function(){var e,t;return e=this.get("idMemberCreator"),"commentCard"===(t=this.get("type"))&&o.isMe(e)},t.prototype.deletable=function(){var e,t,n,r;return t=this.get("idMemberCreator"),"commentCard"===(n=this.get("type"))&&("observer"!==(null!=(r=this.getBoard())?r.getExplicitMemberType(o.me()):void 0)&&o.isMe(t)||null!=(e=this.getBoard())&&e.compareMemberType(o.me(),this.modelCache.get("Member",t),{mode:"commentDelete"})>0&&!(!e.isPremOrgAdmin(o.me())&&e.isPremOrgAdmin(t)))},t.prototype.isPlaceholder=function(){return null==this.get("date")},t.prototype.includesModel=function(e){var t,n,r,o;return r=e.typeName.toLowerCase(),n=e.id,"member"===r&&this.get("idMemberCreator")===n?!0:(t=this.get("data"),"convertToCardFromCheckItem"===this.get("type")&&t.cardSource.id===n?!0:(null!=(o=t[r])?o.id:void 0)===n)},t.prototype.idModels=function(){var e,t,n,r;return t=function(){var e,t,o;t=null!=(e=this.get("data"))?e:{},o=[];for(n in t)r=t[n],null!=(null!=r?r.id:void 0)&&o.push(r.id);return o}.call(this),e=this.get("idMemberCreator"),null!=e&&t.push(e),t},t.prototype.takingTooLong=function(){return this.isTakingTooLong=!0,this.trigger("takingTooLong")},t}(s)},{}],148:[function(e,t,n){var r;r=e(161),t.exports=new r([],{requiresLogin:!1,dataUrl:"/announcements/all"})},{}],149:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),s=e(114),a=e(193),i=e(98),t.exports=o=function(e){function t(e){t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Announcement",t.prototype._key=function(){return"announcement-"+this.id+"-read"},t.prototype.isUnread=function(){return!s.get(this._key())},t.prototype.markRead=function(){return r.post("/announcements/dismiss",{id:this.id}),s.set(this._key(),!0),this.trigger("change:unread")},t.prototype.getLocale=function(){return i.normalizeLocale(this.get("locale")||"en")},t.prototype.matchesLocale=function(e){return i.matches(e,this.getLocale())},t}(a)},{}],150:[function(e,t,n){var r,o,i,s,a;r=e("jquery"),i=e(161),s=e(126),a=e("underscore"),t.exports=o=new i([],{requiresLogin:!0,dataUrl:"/announcements"})},{}],151:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;o=e(193),i=e(126),a=e(254),s=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Attachment",t.prototype.urlRoot=function(){return this.getCard().url()+"/attachments"},t.prototype.getCard=function(){return this.collection.sourceModel},t.prototype.editable=function(){return this.getCard().editable()},t.prototype.smallestPreviewBiggerThan=function(e,t){return i.smallestPreviewBiggerThan(this.get("previews"),e,t)},t.prototype.previewBetween=function(e,t,n,r){return i.previewBetween.apply(i,[this.get("previews")].concat(l.call(arguments)))},t.prototype.biggestPreview=function(){return i.biggestPreview(this.get("previews"))},t.prototype.smallestPreview=function(){return i.smallestPreview(this.get("previews"))},t.prototype.getType=function(){var e;return null!=(e=i.fileExt(this.get("name")))?e:this.get("mimeType")},t.prototype.getServiceKey=function(){var e,t,n;return this.get("isUpload")?"trello":(e=a(this.get("url")).host,n={"docs.google.com":"gdrive","drive.google.com":"gdrive","www.dropbox.com":"dropbox","onedrive.live.com":"onedrive","app.box.com":"box"},null!=(t=n[e])?t:"other")},t.prototype.getPluginSuggestion=function(){var e,t,n;return e=a(this.get("url")).host,t=[{name:"Box",id:"55a5d915446f517774210001",icon:"https://box.trello.services/images/icon.svg",hostRegex:/^app\.box\.com$/},{name:"Dropbox",id:"55a5d915446f517774210002",icon:"https://dropbox.trello.services/images/icon.svg",hostRegex:/(.+\.|^)dropbox\.com$/},{name:"Evernote",id:"55a5d915446f517774210003",icon:"https://evernote.trello.services/images/icon.svg",hostRegex:/(.+\.|^)evernote\.com$/},{name:"GitHub",id:"55a5d916446f517774210004",icon:"https://github.trello.services/images/icon.svg",hostRegex:/(.+\.|^)github\.com$/},{name:"Google Drive",id:"55a5d916446f517774210006",icon:"https://google-drive.trello.services/images/icon.svg",hostRegex:/(docs|drive)\.google\.com$/},{name:"Slack",id:"55a5d917446f51777421000a",icon:"https://slack.trello.services/images/icon.svg",hostRegex:/.+\.slack\.com$/},{name:"Twitter",id:"55a5d917446f51777421000b",icon:"https://twitter.trello.services/images/icon.svg",hostRegex:/(.+\.|^)twitter\.com$/}],n=s.find(t,function(t){return null!==e.match(t.hostRegex)})},t}(o)},{}],152:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomBoardBackground",t}(o)},{}],153:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(194),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardInvitation",t}(o)},{}],154:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardPlugin",t}(o)},{}],155:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="BoardStar",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t}(o)},{}],156:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},$=[].slice;o=e(210),i=e(211),s=e(212),a=e(67),u=e(29),c=e(14),d=void 0,t(function(){return d=e(164)}),p=e(166),h=e(262),m=e(264),f=e(265),g=void 0,t(function(){return g=e(170)}),v=e(6),y=e("hearsay"),b=e(30),w=e(195),_=e(175),k=e(267),C=void 0,t(function(){return C=e(176)}),x=void 0,t(function(){return x=e(178)}),j=e(190),S=e(191),T=e(217),M=e(182),B=e("bluebird"),O=e(126),P=e(119),D=e("xtend"),L=e("underscore"),E=e(106),A=e("moment"),n.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),E(j,a,t),t.prototype.typeName="Board",t.prototype.urlRoot="/1/boards",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.boardPluginList=new p([],{board:this}).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.listList=new C(null,{board:this}).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(e){return function(t){return t.get("idBoard")===e.id&&t.isOpen()}}(this)),this.invitationList=new d([],{modelCache:this.modelCache,board:this}),this.checklistList=new g([],{modelCache:this.modelCache,board:this}),this.labelList=(new _).syncCache(this.modelCache,["idBoard"],function(e){return function(t){return t.get("idBoard")===e.id}}(this)),this.memberList=(new x).syncModel(this,"memberships",{fxGetIds:function(e){return L.pluck(e,"idMember")}}),this.adminList=(new x).syncModel(this,"memberships",{fxGetIds:function(e){return function(t){var n;return n=L.filter(t,function(t){var n,r;return n=e.modelCache.get("Member",t.idMember),"admin"===t.memberType||null!=n&&(null!=(r=e.getOrganization())?r.isPremOrgAdmin(n):void 0)}),L.pluck(n,"idMember")}}(this)}),this.pluginDataList=new M([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"board"===t.get("scope")}}(this)),this.filter=new f(this,{modelCache:this.modelCache}),this.composer=new m(null,{board:this,modelCache:this.modelCache}),this.listComposer=new k(this,{modelCache:this.modelCache}),this.viewState=new h(null,{modelCache:this.modelCache,board:this})]),this.listenForPermChange(),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=P(T.boardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,n;return t=e.id,n=e.shortLink,b.setBoardId(n,t)})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1})},t.prototype.markAsViewed=function(){return u.isLoggedIn()?(this.set("dateLastView",(new Date).toISOString()),o({url:this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0})):void 0},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.isStarred=function(){return null!=u.me().boardStarList.getBoardStar(this.id)},t.prototype.hasUnseenActivity=function(){var e,t;return t=this.get("dateLastView"),e=this.get("dateLastActivity"),null!=t&&null!=e&&e>t},t.prototype.daysUntilPluginsDisable=function(){var e;return null!=(e=this.get("datePluginDisable"))?A(e).diff(A(),"days"):null},t.prototype.isLessActive=function(){var e,t,n;return e=null!=(t=this.get("dateLastActivity"))?t:new Date(O.idToDate(this.id)),n=A().subtract(6,"months"),n.isAfter(e)},t.prototype.getAvailableRoles=function(){return this.hasObservers()?["admin","normal","observer"]:["admin","normal"]},t.prototype.hasObservers=function(){var e;return null!=(e=this.getOrganization())?e.isFeatureEnabled("observers"):void 0},t.prototype.getPermLevel=function(){return this.getPref("permissionLevel")},t.prototype._normalizePref=function(e){return"none"===e?"disabled":e},t.prototype.getCommentPerm=function(){return this._normalizePref(this.get("prefs").comments)},t.prototype.getInvitePerm=function(){return this._normalizePref(this.get("prefs").invitations)},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.org&&(r=this.getOrganization(),null!=r&&(n.hasOrg=!0,n.org=r.toJSON({url:!0}))),e.url&&null==n.url&&(n.url=v.getBoardUrl(this)),e.shortUrl&&null==n.shortUrl&&(n.shortUrl=v.getBoardShortUrl(this)),n},t.prototype.calcPos=function(e,t){return O.calcPos(e,this.listList,t,function(e){return e.isOpen()})},t.prototype.getCard=function(e){return O.isShortId(e)?this.modelCache.findOne("Card","idShort",Number(e)):this.modelCache.get("Card",e)},t.prototype.getList=function(e){return this.listList.get(e)},t.prototype.getUrl=function(){return v.getBoardUrl(this)},t.prototype.getChecklist=function(e){return this.modelCache.get("Checklist",e)},t.prototype.getBoardInvitation=function(e){return this.invitationList.get(e)},t.prototype.getCheckItem=function(e){var t,n,r,o,i,s;for(i=this.checklistList.models,r=0,o=i.length;o>r;r++)if(n=i[r],t=null!=n&&null!=(s=n.checkItemList)?s.get(e):void 0)return t},t.prototype.editable=function(){var e;return e=u.me(),e&&this.editableByMember(e)},t.prototype.editableByMember=function(e){return this.isMember(e)},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.getMembershipCount=function(){var e,t,n,r;return null!=(e=null!=(t=null!=(n=this.get("membershipCounts"))?n.active:void 0)?t:null!=(r=this.get("memberships"))?r.length:void 0)?e:1},t.prototype.getStarCount=function(e){var t,n;return null!=(t=null!=(n=this.get("starCounts"))?n[e]:void 0)?t:0},t.prototype.getIdTags=function(){var e;return null!=(e=this.get("idTags"))?e:[]},t.prototype.owned=function(){var e;return e=u.me(),e&&this.ownedByMember(e)},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.allowsSelfJoin=function(){var e;return null!=(e=this.getPref("selfJoin"))?e:!1},t.prototype.canJoin=function(){var e,t,n;return n=this.getOrganization(),null==n?!1:(t=u.me(),null!=this.getMembershipFor(t)||this.isObserver(t)?!1:(e=n.isMember(t),this.isPremOrgAdmin(t)||this.allowsSelfJoin()&&e))},t.prototype.canInviteMembers=function(){var e,t,n;return null!=this.getOrganization()||this.getPref("canInvite")?("admins"===(null!=(e=this.get("prefs"))?e.invitations:void 0)?n="admin":"members"===(null!=(t=this.get("prefs"))?t.invitations:void 0)&&(n="normal"),"admin"===this.getMemberType(u.me())||n===this.getMemberType(u.me())):!1},t.prototype.compareMemberType=function(e,t,n){return O.compareMemberType(this,e,t,n)},t.prototype.isMemberPublic=function(e){return"public"===this.getMemberType(e)},t.prototype.isMemberOrg=function(e){return"org"===this.getMemberType(e)},t.prototype.isMemberObserver=function(e){return"observer"===this.getMemberType(e)},t.prototype.memberMatchesSetting=function(e,t){switch(this.getPref(t)){case"public":return u.isLoggedIn();case"org":return this.isMember(e)||this.isMemberOrg(e)||this.isMemberObserver(e);case"observers":return this.isMember(e)||this.isMemberObserver(e);case"members":return this.isMember(e);case"admins":return this.ownedByMember(e);default:return!1}},t.prototype.isPowerUpEnabled=function(e){var t,n,r;return t=this.get("powerUps"),null!=t&&V.call(t,e)>=0||"calendar"===e&&V.call(this.idPluginsEnabled(),"55a5d917446f517774210011")>=0||(n="cardAging"===e&&"55a5d917446f517774210012",V.call(this.idPluginsEnabled(),n)>=0)||(r="voting"===e&&"55a5d917446f517774210013",V.call(this.idPluginsEnabled(),r)>=0)},t.prototype.powerUpsCount=function(){return this.boardPluginList.length},t.prototype.canEnableAdditionalPowerUps=function(){return u.isLoggedIn()&&this.powerUpsCount()<u.me().getPowerUpsLimit()},t.prototype.isPluginEnabled=function(e){return this.boardPluginList.any(function(t){return t.get("idPlugin")===e})},t.prototype.enablePlugin=function(e){return this.boardPluginList.create({idPlugin:e})},t.prototype.disablePlugin=function(e){var t;return t=this.boardPluginList.find(function(t){return t.get("idPlugin")===e}),t.destroy()},t.prototype.canVote=function(e){return this.memberMatchesSetting(e,"voting")},t.prototype.canComment=function(e){return this.memberMatchesSetting(e,"comments")},t.prototype.canInvite=function(e){return this.memberMatchesSetting(e,"invitations")},t.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin","background","cardAging","calendarFeedEnabled"],t.prototype.myPrefNames=["showSidebar","showSidebarMembers","showSidebarBoardActions","showSidebarActivity","emailKey","idEmailList","emailPosition","calendarKey","fullEmail"],t.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},t.prototype.isPrivate=function(){return"private"===this.getPref("permissionLevel")},t.prototype.getIdBoardMems=function(){return L.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getOrganization=function(){return this.modelCache.get("Organization",this.get("idOrganization"))},t.prototype.hasOrganization=function(){return this.get("idOrganization")},t.prototype.snoopOrganization=function(){return this.snoop("idOrganization").map(function(e){return function(){return e.getOrganization()}}(this))},t.prototype.orgMembersAvailable=function(){var e;return e=this.getOrganization(),L.chain(e.memberList.filter(function(t){return function(t){return!e.isDeactivated(t)}}(this))).difference(this.memberList.models).value()},t.prototype.joinBoard=function(e){var t,n,r,o;return n=u.me(),t=this.isPremOrgAdmin(n),r=t?"admin":"normal",n.set("idBoards",n.get("idBoards").concat(this.id)),t&&n.set("idPremOrgsAdmin",(null!=(o=n.get("idPremOrgsAdmin"))?o:[]).concat(this.id)),this.addMember(n,r,e)},t.prototype.addMember=function(){var e,t,n,r,o;return n=arguments[0],e=3<=arguments.length?$.call(arguments,1,t=arguments.length-1):(t=1,[]),o=arguments[t++],r=e[0],null==r&&(r="normal"),this.memberList.add(n),this.api({type:"put",method:"members/"+n.id,data:{type:r}},o),this.set("memberships",this.get("memberships").concat({idMember:n.id,memberType:"normal"}))},t.prototype.removeMember=function(e){return this.memberList.remove(e),this.set("memberships",L.reject(this.get("memberships"),function(t){return t.idMember===e.id}))},t.prototype.getObserverList=function(){var e,t,n,r,o;for(r=this.memberList.models,o=[],e=0,t=r.length;t>e;e++)n=r[e],this.isObserver(n)&&o.push(n);return o},t.prototype.filterLabels=function(e){var t,n;return n=RegExp("^"+O.escapeForRegex(e)),t=[],L.chain(this.getLabels()).filter(function(t){var n,r;return(null!=(n=t.get("name"))?n.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(r=t.get("color"))?r.toLowerCase().indexOf(e):void 0)||t.get("color")===w.colors[parseInt(e)-1]}).value()},t.prototype.labelForColor=function(e){return L.chain(this.getLabels()).filter(function(t){return t.get("color")===e}).first().value()},t.prototype.labelsForColors=function(){return L.chain(this.getLabels()).groupBy(function(e){return e.get("color")}).value()},t.prototype.createLabel=function(e,t){var n;n=L.find(this.getLabels(),function(n){return n.get("name")===e&&n.get("color")===t}),n||this.labelList.create({name:e,color:null!=t?t:"",uses:1},{url:"/1/board/"+this.id+"/labels/"})},t.prototype.labelColors=function(){return w.colors},t.prototype.getLabels=function(){return this.labelList.models.sort(w.compare)},t.prototype._generateKey=function(e){return this.api({type:"post",method:e+"Key/generate"})},t.prototype.generateEmailKey=function(){return this._generateKey("email")},t.prototype.generateCalendarKey=function(){return this._generateKey("calendar")},t.prototype.openCards=function(){var e;return L.flatten(function(){var t,n,r,o;for(r=this.listList.models,
o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.openCards().models);return o}.call(this))},t.prototype.listenForPermChange=function(){var e,t,n;if(u.isLoggedIn())return n=this.getViewPermState(u.me()),t=this.owned(),e=this.debounce(function(e){return function(){var r,o;o=e.getViewPermState(u.me()),o!==n&&(n=o,e.trigger("permChange",o)),r=e.owned(),r!==t&&(t=r,e.trigger("ownedChange",r))}}(this)),this.listenTo(u.me().boardList,"add remove reset",e),this.listenTo(u.me().organizationList,"add remove reset",e),this.listenTo(this.memberList,"add remove reset",e),this.listenTo(this,"change:memberships change:prefs.permissionLevel",e)},t.prototype.getViewPermState=function(e){var t,n;return this.isObserver(e)?"observer":"normal"===(t=this.getMemberType(e))||"admin"===t?"member":O.hasValidInviteTokenFor(this)?"inviteToken":(null!=(n=this.getOrganization())?n.isMember(e):void 0)&&"org"===this.getPref("permissionLevel")?"org":"public"===this.getPref("permissionLevel")?"public":"none"},t.prototype.getClientBackgroundColor=function(e){var t,n;return null!=(t=null!=(n=c[e])?n.color:void 0)?t:c.blue.color},t.prototype.dataForLabel=function(e){return e.toJSON()},t.prototype.isViewableBy=function(e){return"none"!==this.getViewPermState(e)},t.prototype.toggleTag=function(e){return this.toggle("idTags",e,V.call(this.getIdTags(),e)<0)},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){var t;return D(null!=(t=this.getOrganization())?t.getPluginData(e):void 0,this.pluginDataList.dataForPlugin(e))},t.prototype.snoopPluginData=function(e){var t,n;return n=this.snoopOrganization().map(function(t){return null!=t?t.snoopPluginData(e):y.const(null)}).latest(),t=this.pluginDataList.snoopDataForPlugin(e),y.combine(n,t).map(function(e){return D.apply(null,e)})},t.prototype.clearPluginData=function(e){var t,n,r;return t=this.pluginDataList.for(e,"private"),null!=t&&t.destroy(),n=null!=(r=this.getOrganization())?r.pluginDataList.for(e,"private"):void 0,null!=n?n.destroy():void 0},t.prototype.idPluginsEnabled=function(){return this.boardPluginList.pluck("idPlugin")},t.prototype.snoopIdPluginsEnabled=function(){return y.combine(this.boardPluginList.snoop()).map(function(e){var t;return t=e[0],t.pluck("idPlugin")})},t.prototype.invitationUrl=function(e){return v.getBoardInvitionLinkUrl(e)},t.prototype.startDelete=function(){return this._isDeleting=!0,this.trigger("deleting"),s({method:"delete",url:this.url()}).then(function(e){return function(){return new B(function(t){var n;return(n=function(){return s({url:e.url(),fields:""}).then(function(){return setTimeout(n,500)}).catch(i.NotFound,function(){return t()}).done()})()})}}(this)).then(function(e){return function(){return e.modelCache.remove(e)}}(this)).return()},t.prototype.isDeleting=function(){return this._isDeleting},t}(S)},{}],157:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E=function(e,t){function n(){this.constructor=e}for(var r in t)A.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},A={}.hasOwnProperty,D=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},I=[].slice;o=e("jquery"),M=e(119),i=e(147),s=void 0,t(function(){return s=e(160)}),a=e(210),c=e(162),u=e(67),l=e(29),p=void 0,t(function(){return p=e(170)}),h=e(6),m=e(74),f=e(30),g=e(175),v=e(189),y=e(196),b=void 0,t(function(){return b=e(178)}),w=e(268),_=e(217),k=e(182),C=e("bluebird"),x=e(184),j=e(193),S=e(126),T=e("underscore"),B=e(106),O=e("moment"),L=e(129),P=e("xtend"),n.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return E(t,e),B(v,u,t),n=1e4,t.prototype.typeName="Card",t.prototype.urlRoot="/1/cards",t.prototype.initialize=function(){return this.destruct([this.memberList=(new b).syncModel(this,"idMembers"),this.labelList=(new g).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var n,r;return n=t.id,D.call(null!=(r=e.get("idLabels"))?r:[],n)>=0}}(this)),this.memberVotedList=(new b).syncModel(this,"idMembersVoted"),this.checklistList=(new p).syncCache(this.modelCache,["idCard"],function(e){return function(t){return t.get("idCard")===e.id}}(this)),this.attachmentList=(new c).syncSubModels(this,"attachments"),this.actionList=(new s).syncCache(this.modelCache,[],function(e){return function(t){var n,r,o,i;return n="commentCard"===(o=t.get("type"))||"copyCommentCard"===o,r=(null!=(i=t.get("data").board)?i.id:void 0)===e.get("idBoard"),t.includesModel(e)&&(n||r)}}(this)),this.stickerList=new x(this.get("stickers"),{card:this,modelCache:this.modelCache}).syncSubModels(this,"stickers"),this.pluginDataList=new k([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"card"===t.get("scope")}}(this)),this.memberEditingList=new b]),this.listenTo(this,"change:id change:idBoard",function(e){return function(){return e.actionList.sync()}}(this)),this._initSubEventsOn("badges"),this.cacheShortLink()},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=M(_.cardActions)),this._actionFilter(e)},t.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(e){var t,n;return t=e.id,n=e.shortLink,f.setCardId(n,t)})},t.prototype.updateEditing=function(e){return null==this._editingTimeout&&(this._editingTimeout={}),this.memberEditingList.add(e),null!=this._editingTimeout[e.id]&&(clearTimeout(this._editingTimeout[e.id]),delete this._editingTimeout[e.id]),this._editingTimeout[e.id]=this.setTimeout(function(t){return function(){return t.memberEditingList.remove(e)}}(this),n)},t.prototype.sync=function(e,n,r){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idList")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idList"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getList(),function(e){return function(t){return e.set("idList",t)}}(this)))},t.prototype.set=function(e,n){var r;return(null!=e?e.labels:void 0)&&(e.labels=function(){var t,n,o,i,s;for(o=e.labels,s=[],t=0,n=o.length;n>t;t++)r=o[t],s.push(null!=(i=r.color)?i:r);return s}()),(null!=e?e.badges:void 0)&&(e.badges=P(this.get("badges"),e.badges)),t.__super__.set.apply(this,arguments)},t.prototype.moveToList=function(e,t){var n;return n=this,this.waitForId(e,function(r){return function(r){var o,i,s,a,u,c,l,d,p;if(u=e.calcPos(t,n),o=e.getBoard().composer,u===n.get("pos")&&n.get("idList")===r&&n.isOpen())return i=o.get("index"),void(i===t?o.set("index",i+1):i===t+1&&o.set("index",i-1));l=n.get("idList"),d=n.getIndexInList(),s={pos:u,idList:r,idBoard:e.getBoard().id,closed:!1};for(a in s)p=s[a],n.get(a)===p&&delete s[a];return n.update(s),(null!=o?o.get("vis"):void 0)?(i=c=o.get("index"),o.get("list").id===r&&o.get("index")>=t&&i++,o.get("list").id===l&&o.get("index")>d&&i--,o.set("index",i)):void 0}}(this))},t.prototype.moveToNextList=function(){var e,t;t=this.getBoard().listList.models,e=T.indexOf(t,this.getList()),e<t.length-1&&this.moveToList(t[e+1],1e9)},t.prototype.moveToPrevList=function(){var e,t;t=this.getBoard().listList.models,e=T.indexOf(t,this.getList()),e>0&&this.moveToList(t[e-1],1e9)},t.prototype.toggleMember=function(){var e,t,n,r,o;return t=arguments[0],e=3<=arguments.length?I.call(arguments,1,r=arguments.length-1):(r=1,[]),o=arguments[r++],n=e[0],null==n&&(n=!this.hasMember(t)),n&&l.isMe(t)&&this.set("subscribed",!0),this.toggle("idMembers",t,n,o)},t.prototype.addMember=function(e,t){return this.toggleMember(e,!0,t)},t.prototype.removeMember=function(e,t){return this.toggleMember(e,!1,t)},t.prototype.hasMember=function(e){return this.memberList.get(e)},t.prototype.getIdCardMems=function(){return T.map(this.memberList.models,function(e){return function(e){return e.id}}(this))},t.prototype.getIdCommenters=function(){var e,t;return t=[],e=T.each(this.getActions(),function(e){return function(e){var n;return"commentCard"===e.get("type")?(n=e.get("idMemberCreator"),t.push(n)):void 0}}(this)),this.idCommenters=T.uniq(t),this.idCommenters},t.prototype.hasChecklist=function(e){return this.checklistList.get(e)},t.prototype.close=function(e){this.update({closed:!0},e)},t.prototype.reopen=function(){var e;e=this.getList(),null!=e&&this.update({closed:!1,pos:e.calcPos(e.cardList.length,this)})},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.getList())?t.getBoard():void 0},t.prototype.getIndexInList=function(){var e;return e=this.getList(),null!=e?T.indexOf(e.cardList.models,this):-1},t.prototype.getList=function(){var e,t;return null!=(e=this.modelCache.get("List",this.get("idList")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.getUrl=function(){return h.getCardUrl(this)},t.prototype.getFullUrl=function(){return""+siteDomain+this.getUrl()},t.prototype.getDueDate=function(){var e;return(null!=(e=this.get("badges"))?e.due:void 0)?new Date(this.get("badges").due):null},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.dateForNewComment=function(){var e,t;return 0===this.actionList.length?new Date:(t=this.actionList.sort().first(),e=O(t.getDate()).add(1,"seconds").toDate(),T.max([new Date,e]))},t.prototype.addComment=function(e){var t;t=this,""!==e&&this.waitForId(t,function(n){return function(r){var o,s,u;return s=t.getBoard(),o=new i({type:"commentCard",date:n.dateForNewComment(),data:{text:e,card:{id:t.id,name:t.get("name")},board:{id:s.id,name:s.get("name")},textData:{emoji:l.me().allCustomEmoji()}},idMemberCreator:l.myId(),display:{translationKey:"action_comment_on_card",entities:{card:{hideIfContext:!0,id:t.id,isContext:!1,shortLink:t.shortLink,text:e,type:"card"},comment:{text:e,type:"comment"},contextOn:{hideIfContext:!0,idContext:t.id,translationKey:"action_on",type:"translatable"},memberCreator:{id:l.myId(),isContext:!1,text:l.me().get("fullName"),type:"member",username:{text:l.me().get("fullName")}}}}},{modelCache:n.modelCache}),u=n.setTimeout(function(){return o.takingTooLong()},2e3),a({url:"/1/cards/"+t.id+"/actions/comments",type:"post",data:{text:e},dataType:"json",success:function(e){return clearTimeout(u),o.isTakingTooLong=!1,n.modelCache.enqueueDelta(o,e)}})}}(this))},t.prototype.changeDueDateMaintainTime=function(e){var t,n,r;return n=null!=(r=new Date(this.get("due")))?r:(new Date).setHours(12,0,0,0),t=m.getDateWithSpecificTime(n,e),this.update({due:t})},t.prototype.vote=function(e){return this.getBoard().canVote(l.me())?this.waitForLock("vote",function(t){return function(n){var r,o;return e===t.voted()?n():(r=null!=(o=T.clone(t.get("badges")))?o:{},e?(r.votes++,r.viewingMemberVoted=!0):(r.votes--,r.viewingMemberVoted=!1),t.set("badges",r),void t.toggle("idMembersVoted",l.myId(),e,{collectionName:"membersVoted"},n))}}(this)):void 0},t.prototype.voted=function(){var e,t;return null!=(e=null!=(t=this.get("badges"))?t.viewingMemberVoted:void 0)?e:!1},t.prototype.hasStickers=function(){return this.stickerList.length>0},t.prototype.hasCover=function(){return null!=this.attachmentList.get(this.get("idAttachmentCover"))},t.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"},t.prototype.getAgingData=function(){var e,t,n;return e=this.getBoard(),n=Date.now()-new Date(this.get("dateLastActivity")),t={level:function(){switch(!1){case!(n<S.getMs({days:7})):return 0;case!(n<S.getMs({days:14})):return 1;case!(n<S.getMs({days:28})):return 2;default:return 3}}(),mode:e.get("prefs").cardAging},t.agingClassesToAdd="aging-level-"+t.level+" aging-"+t.mode,/64$/.test(this.id)&&(t.agingClassesToAdd+=" aging-treasure"),t},t.prototype.toggleVote=function(){this.vote(!this.voted())},t.prototype.subscribe=function(e){var t;e!==this.get("subscribed")&&(t=this.get("badges"),t.subscribed=e,this.update({subscribed:e}))},t.prototype.getCheckItem=function(e){var t,n,r,o,i,s;for(r=o=0,i=this.checklistList.length-1;i>=0?i>=o:o>=i;r=i>=0?++o:--o)if(n=this.checklistList.at(r),t=null!=n&&null!=(s=n.checkItemList)?s.get(e):void 0)return t;return null},t.prototype.toJSON=function(e){var n;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.url&&(n.url=h.getCardUrl(this)),n},t.prototype.upload=function(e,t,n){var r;return r=new FormData,r.append("token",l.myToken()),null!=t?r.append("file",e,t):r.append("file",e),a({url:"/1/cards/"+this.id+"/attachments",data:r,type:"post",processData:!1,contentType:!1,error:function(r){return function(r,o,i,s){var a,u,c;return c=r.status,u=r.responseText,413===c?n("Error uploading "+(null!=(a=e.name)?a:t)):s()}}(this),success:function(e){return function(t){var r;return e.set("attachments",[t].concat(I.call(null!=(r=e.get("attachments"))?r:[]))),n(null,t)}}(this),timeout:S.getMs({hours:6})})},t.prototype.uploadUrl=function(e,t){return null==t&&(t=function(){}),T.isString(e)&&(e={url:e}),a({url:"/1/cards/"+this.id+"/attachments",type:"post",data:e,error:function(e){return function(e,n,r,o){var i,s;return s=e.status,i=e.responseText,t(n)}}(this),success:function(e){return function(n){var r;return e.set("attachments",[n].concat(I.call(null!=(r=e.get("attachments"))?r:[]))),t(null,n)}}(this)})},t.prototype.removeCover=function(){return this.update({idAttachmentCover:""})},t.prototype.makeCover=function(e){return this.update({idAttachmentCover:e.id})},t.prototype.calcChecklistPos=function(e,t){return S.calcPos(e,this.checklistList,t)},t.prototype._neighbor=function(e){var t,n,r;if(n=this.getList().openCards(),r=this.getBoard().filter,t=n.indexOf(this),t>=0){for(t+=e;null!=n.at(t)&&!r.satisfiesFilter(n.at(t));)t+=e;return n.at(t)}return null},t.prototype.prevCard=function(){return this._neighbor(-1)},t.prototype.nextCard=function(){return this._neighbor(1)},t.prototype.labelCreateUrl=function(){return"/1/card/"+this.id+"/labels/"},t.prototype.copyTo=function(e){var t,n,r,o;return r=e.name,t=e.idList,o=e.pos,n=e.keepFromSource,null==r&&(r=this.get("name")),y.load(t,_.listMinimal,this.modelCache).then(function(e){return function(t){return L(t.cardList,"create",{name:r,pos:o},{createData:{idCardSource:e.id,keepFromSource:n}})}}(this))},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){var t;return t=this.pluginDataList.snoopDataForPlugin(e)},t}(j)},{}],158:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CheckItem",t.prototype.urlRoot=function(){var e;return e=this.getChecklist(),e.getCard().url()+"/checklist/"+e.id+"/checkItem"},t.prototype.sync=function(e,n,r){return null!=this.getChecklist()?this.waitForId(this.getChecklist(),function(o){return function(){return t.__super__.sync.call(o,e,n,r)}}(this)):void 0},t.prototype.getChecklist=function(){return this.collection.sourceModel},t.prototype.getCard=function(){return this.getChecklist().getCard()},t.prototype.getBoard=function(){return this.getCard().getBoard()},t.prototype.editable=function(){return this.getChecklist().editable()},t.prototype.getContext=function(){return this.getChecklist()},t.prototype.move=function(e){this.update("pos",this.getChecklist().calcPos(e,this)),this.collection.sort({silent:!0})},t}(o)},{}],159:[function(e,n,r){var o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=void 0,t(function(){return o=e(169)}),s=e(193),a=e(126),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.typeName="Checklist",t.prototype.urlRoot=function(){return"/1/checklists"},t.prototype.initialize=function(){return this.destruct([this.checkItemList=(new o).syncSubModels(this,"checkItems")])},t.prototype.sync=function(e,n,r){return"create"!==e||null!=this.get("idBoard")&&null!=this.get("idCard")?t.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idCard"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this)),this.waitForId(this.getCard(),function(e){return function(t){return e.set("idCard",t)}}(this)))},t.prototype.getCard=function(){var e;return null!=(e=this.modelCache.get("Card",this.get("idCard")))?e:this.collection.sourceModel},t.prototype.getBoard=function(){var e;return null!=(e=this.getCard())?e.getBoard():void 0},t.prototype.getCompletedCount=function(e){var t;return t=0,this.checkItemList.each(function(e){return null!=e.get("state")&&"complete"===e.get("state")?t++:void 0}),t},t.prototype.getCheckItem=function(e){return this.checkItemList.get(e)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.calcPos=function(e,t){return a.calcPos(e,this.checkItemList,t)},t}(s)},{}],160:[function(e,n,r){var o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(147),a=e(173),u=void 0,t(function(){return u=e(34)}),c=e("bluebird"),l=e("underscore"),s=e(211),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return-e.getDate()||0},t.prototype._getRelatedBoards=function(){var e,t,n;return t=function(){var t,r,o,i,s,a,u;for(o=this.models,u=[],t=0,r=o.length;r>t;t++)n=o[t],("moveCardToBoard"===(i=n.get("type"))||"moveCardFromBoard"===i)&&(e=n.get("data"),u.push((null!=(s=e.boardTarget)?s.id:void 0)||(null!=(a=e.boardSource)?a.id:void 0)));return u}.call(this),t=l.compact(l.uniq(t)),t=l.reject(t,function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)),c.resolve(t).map(function(e){return function(e){return u.loadBoardName(e).catch(s.Unauthorized,s.NotFound,function(){})}}(this))},t}(a)},{}],161:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(149),s=e(29),a=e(173),u=e(231),t.exports=i=function(e){function t(e,n){this.requiresLogin=n.requiresLogin,this.dataUrl=n.dataUrl,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=o,t.prototype.sync=function(e,t,n){(!this.requiresLogin||s.isLoggedIn())&&r.ajax({url:this.dataUrl,success:function(e){return"function"==typeof n.success?n.success(t,e,n):void 0}})},t.prototype.forLocale=function(e){return this.filter(u.method("matchesLocale",e))},t}(a)},{}],162:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(151),i=e(173),s=e(74),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.comparator=function(e){return-s.parse(e.get("date"))||0},t.prototype.initialize=function(e,t){this.options=t},t}(i)},{}],163:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(152),i=e(173),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"},t.prototype.initialize=function(e,t){this.member=t.member},t}(i)},{}],164:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(153),i=e(174),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t}(i)},{}],165:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(156),i=e(173),s=e(126),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=r,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t,n,r;return n=e.getOrganization(),r=(null!=n?n.get("displayName"):void 0)||"",t=e.get("name")||"",s.rpad(r,64).toUpperCase()+t.toUpperCase()},t}(i)},{}],166:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(173),r=e(154),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){var n;return n=t.board,this.board=n},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/boardPlugins"},t}(i)},{}],167:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(155),i=e(173),a=e(126),u=e("underscore"),s=e("bluebird"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return c(t,e),t.prototype.model=r,t.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.getBoardStar=function(e){return u.find(this.models,function(t){return t.get("idBoard")===e})},t.prototype.starBoard=function(e){var t;return this.getBoardStar(e)?s.reject(new Error("already starred")):(t=this.length?this.at(this.length-1).get("pos")+a.spacing:a.spacing,new s(function(n){return function(r){return n.create({idBoard:e,pos:t},{modelCache:n.modelCache},r)}}(this)))},t.prototype.unstarBoard=function(e){var t;return t=this.getBoardStar(e),null!=t?new s(function(e,n){return t.waitForId(t,function(){return t.destroy({success:e,error:function(e,t){return n(t)}})})}):s.reject(new Error("not starred"))},t.prototype.updateStarBoard=function(e,t){var n,r;return n=this.getBoardStar(e),r=this.getNewPos(n,t),null!=n?n.update({pos:r}):void 0},t.prototype.getBoards=function(){var e;return e=this.getBoardIds(),u.compact(this.modelCache.get("Board",e))},t.prototype.getBoardIds=function(){var e,t,n,r,o;for(r=u.sortBy(this.models,function(e){return e.get("pos")}),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(n.get("idBoard"));return o},t.prototype.getBoardIndex=function(e){return this.models.filter(n).indexOf(this.getBoardStar(e))},t.prototype.getNewPos=function(e,t){var r;return r=a.calcPos(t,this,e,n)},n=function(e){var t;return t=e.getBoard(),t&&t.isOpen()},t}(i)},{}],168:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(157),i=e(173),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.list=t.list},t.prototype.url="/1/cards",t.prototype.comparator=function(e){return e.get("pos")||0},t}(i)},{}],169:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(158),i=e(173),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t}(i)},{}],170:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(159),i=e(173),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=r,t.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")},t.prototype.idList=function(){return this.pluck("id")},t}(i)},{}],171:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(173),o=e(186),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"},t.prototype.initialize=function(e,t){this.member=t.member},t}(r)},{}],172:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(29),o=e(173),i=e(187),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.url=function(){return"/1/member/"+r.me().id+"/customStickers"},t.prototype.initialize=function(e,t){this.member=t.member},t}(o)},{}],173:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;r=e(227),i=e("hearsay"),s=e(126),a=e("underscore"),u=e(231),t.exports=o=function(e){function t(e,n){this.modelCache=null!=n?n.modelCache:void 0,t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.destructor=function(){return this.stopListening(),s.shred(this)},t.prototype.create=function(){var e,n,r,o,i,s,c,l,p;return o=arguments[0],e=3<=arguments.length?d.call(arguments,1,n=arguments.length-1):(n=1,[]),s=arguments[n++],c=e[0],c||a.isFunction(s)||(c=s,s=function(){}),i=this.model,null==c&&(c={}),r=this.modelCache.lock("Collection Create"),c.success=u.concat(null!=(l=c.success)?l:function(){},function(e){return function(e){return s(null,e)}}(this)),c.error=u.concat(null!=(p=c.error)?p:function(){},function(e){return function(e,t){return s(t)}}(this)),c.complete=u.choke(0,this.modelCache,"unlock",r),null==c.modelCache&&(c.modelCache=this.modelCache),t.__super__.create.call(this,o,c)},t.prototype._update=function(e){var t,n,r;return r=e.length===this.models.length?(t=a.sortBy(e,function(e){return e.cid}),n=a.sortBy(this.models,function(e){return e.cid}),!a.isEqual(t,n)):!0,r?this.reset(e):void 0},t.prototype.owner=function(e){return this.owner=e,this},t.prototype.syncModel=function(e,t,n){var r,o,i,s;return this.sourceModel=e,r=(null!=n?n:{}).fxGetIds,this.modelCache=this.sourceModel.modelCache,i={},o=function(e){return function(){var n,o,i;return n=e.sourceModel.get(t),null!=(o=null!=(i="function"==typeof r?r(n):void 0)?i:n)?o:[]}}(this),s=function(e){return function(t){var n;return n=a.chain(t).map(function(t){return e.modelCache.get(e.model,t)}).compact().value(),e._update(n)}}(this),this.sync=function(e){return function(){var e,t,n,r;for(r=o(),i={},e=0,n=r.length;n>e;e++)t=r[e],i[t]=!0;return s(r)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.listenTo(this.modelCache,"add:"+this.model.prototype.typeName,function(e){i[e.id]&&this.add(e)}),this.listenTo(this.modelCache,"remove:"+this.model.prototype.typeName,function(e){i[e.id]&&this.remove(e)}),this.sync(),this},t.prototype.syncCache=function(e,t,n){var r,o,i,s;for(this.modelCache=e,this.sync=function(e){return function(){return e._update(e.modelCache.all(e.model).filter(n))}}(this),s=this.model.prototype.typeName,this.listenTo(this.modelCache,"add:"+s,function(e){return function(t){return n(t)?e.add(t):void 0}}(this)),this.listenTo(this.modelCache,"remove:"+s,function(e){return function(t){return n(t)?e.remove(t):void 0}}(this)),this.listenTo(this.modelCache,"reset:"+s,this.sync),o=0,i=t.length;i>o;o++)r=t[o],this.listenTo(this.modelCache,"change:"+s+":"+r,function(e){return n(e)?this.add(e):this.remove(e)});return this.sync(),this},t.prototype.syncSubModels=function(e,t){return this.sourceModel=e,null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache),this.sync=function(e){return function(){var n,r,o,i,s,u,c,l,d,p;for(n=e.models,p=null!=(c=e.sourceModel.get(t))?c:[],u=function(){var e,t,n;for(n=[],e=0,t=p.length;t>e;e++)o=p[e],d=a.find(this.models,function(e){return e.id===o.id}),null!=d?this.modelCache.enqueueDelta(d,o):d=new this.model(o,{modelCache:this.modelCache,collection:this}),n.push(d);return n}.call(e),l=e.models,r=0,i=l.length;i>r;r++)s=l[r],null==s.id&&u.push(s);return e._update(u)}}(this),this.listenTo(this.sourceModel,"change:"+t,this.sync),this.sync(),this},t.prototype.snoop=function(){var e,t;return e=1<=arguments.length?d.call(arguments,0):[],t=["add","remove","reset"].concat(e.map(function(e){return["change",e].join(":")})).join(" "),new i.ContinuousSignal(function(e){return function(n){var r;return n(e),r=function(){return n(e)},e.listenTo(e,t,r),function(){return e.stopListening(e,t,r)}}}(this))},t}(r.Collection)},{}],174:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(173),o=e(74),i=e(194),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.initialize=function(e,t){this.options=t},t.prototype.comparator=function(e){return e.get("dateExpires")?-o.parse(e.get("dateExpires")):-(1/0)},t}(r)},{}],175:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(173),o=e(195),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t}(r)},{}],176:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(173),o=e(196),s=e(126),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){this.listenTo(this,"change:pos",this.sort),this.board=t.board},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.calcPos=function(e,t,n){return s.calcPos(e,this,t,null,n)},t.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists";
},t}(r)},{}],177:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(173),o=e(197),s=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.initialize=function(){return this.listenTo(this,"change:primary",this.resetPrimary)},t.prototype.resetPrimary=function(e){var t,n,r;if(e.get("primary")){for(r=this.without(e),t=0,n=r.length;n>t;t++)e=r[t],e.set("primary",!1);return this.sort()}},t.prototype.comparator=function(e){return Number(!e.get("primary"))+e.id},t.prototype.types=function(){return s.countBy(s.flatten(this.pluck("types")))},t}(r)},{}],178:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(210),o=e(29),i=e(173),s=e(198),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=s,t.prototype.sortField="fullName",t.prototype.idList=function(){return this.pluck("id")},t.prototype.remove=function(e,n){var o;return null==this.sourceModel?t.__super__.remove.apply(this,arguments):(t.__super__.remove.call(this,e),o=(null!=n?n.invite:void 0)?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+e.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+e.id,(null!=n?n.mass:void 0)&&(o+="/all"),r({url:o,type:"delete",success:function(e){return(null!=e?e.unreadable:0)?void 0:null!=n&&"function"==typeof n.success?n.success():void 0}}))},t.prototype.filterDeactivated=function(e){var n,r,i,s;return s=null!=e?e:{},i=s.model,n=s.force,null==i&&(i=this.sourceModel),null==n&&(n=!1),r=o.me(),new t(this.filter(function(e){return i.hasActiveMembership(e)||!n&&i.isDeactivated(e)&&i.canSeeDeactivated(r)},this.options))},t.prototype.comparator=function(e){return e.get(this.sortField)},t}(i)},{}],179:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(173),o=e(199),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.initialize=function(){return this.memberIndex={},this.listenTo(this,"add",function(e){return function(t){return e.memberIndex[t.get("idMember")]=t}}(this)),this.listenTo(this,"remove",function(e){return function(t){return delete e.memberIndex[t.get("idMember")]}}(this)),this.listenTo(this,"reset",function(e){return function(){var t,n,r,o,i;for(e.memberIndex={},o=e.models,i=[],t=0,n=o.length;n>t;t++)r=o[t],i.push(e.memberIndex[r.get("idMember")]=r);return i}}(this))},t.prototype.getMember=function(e){var t,n;return t=null!=(n=null!=e?e.id:void 0)?n:e,this.memberIndex[t]},t}(r)},{}],180:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(174),o=e(201),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t}(r)},{}],181:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(173),o=e(202),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},t.prototype.comparator=function(e){var t;return(null!=(t=e.get("name"))?t.toUpperCase():void 0)||""},t}(r)},{}],182:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(173),o=e(203),s=e("bluebird"),a=e("underscore"),u=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.model=o,t.prototype.initialize=function(e,t){return this.scopeModel=t.scopeModel},t.prototype.scope=function(){return this.scopeModel.typeName.toLowerCase()},t.prototype.for=function(e,t){return a.find(this.models,function(n){return function(r){return r.get("idPlugin")===e&&r.get("access")===t&&r.get("scope")===n.scope()&&r.get("idModel")===n.scopeModel.id}}(this))},t.prototype.create=function(e,n){return e=u(e,{scope:this.scope(),idModel:this.scopeModel.id,access:e.visibility}),t.__super__.create.call(this,e,n)},t.prototype.dataForPlugin=function(e){return a.chain(this.models).filter(function(t){return t.get("idPlugin")===e}).groupBy(function(e){return e.get("scope")}).mapObject(function(e){return a.chain(e).groupBy(function(e){return e.get("access")}).mapObject(function(e){return e[0].get("value")}).value()}).value()},t.prototype.snoopDataForPlugin=function(e){return null==this.signalCache&&(this.signalCache={}),null==this.signalCache[e]&&(this.signalCache[e]=this.snoop("value").map(function(t){return function(){return t.dataForPlugin(e)}}(this)),this.signalCache[e].addDisposer(function(t){return function(){return delete t.signalCache[e]}}(this))),this.signalCache[e]},t.prototype.upsert=function(e,t,n){var r;r=this.for(e,t),null!=r?r.update("value",n):this.create({idPlugin:e,visibility:t,value:n})},t}(r)},{}],183:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(173),o=e(205),s=e(126),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/member/"+this.member.id+"/savedSearches"},t.prototype.initialize=function(e,t){return this.member=t.member,this.listenTo(this,"change:pos",this.sort)},t.prototype.comparator=function(e){return e.get("pos")||0},t.prototype.saveSearch=function(e,t){var n;return n=this.length?this.at(this.length-1).get("pos")+s.spacing:s.spacing,this.create({name:e,query:t,pos:n},{modelCache:this.modelCache})},t}(r)},{}],184:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(173),o=e(206),s=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=o,t.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"},t.prototype.initialize=function(e,t){this.card=t.card,this.listenTo(this,"change:zIndex",this.sort)},t.prototype.comparator=function(e){return e.get("zIndex")||0},t.prototype.nextZIndex=function(e){var t;return this.length>0?(t=s.max(this.pluck("zIndex")),(null!=e?e.get("zIndex"):void 0)===t&&1===this.filter(function(e){return e.get("zIndex")===t}).length?t:t+1):1},t}(r)},{}],185:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(173),o=e(207),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.model=o,t.prototype.comparator=function(e,t){return e.get("name").localeCompare(t.get("name"))},t}(r)},{}],186:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomEmoji",t}(o)},{}],187:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="CustomSticker",t}(o)},{}],188:[function(e,n,r){var o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=void 0,t(function(){return i=e(178)}),u=void 0,t(function(){return u=e(181)}),s=void 0,t(function(){return s=e(34)}),a=e(192),c=e("bluebird"),l=e("underscore"),n.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.typeName="Enterprise",t.prototype.nameAttr="name",t.prototype.urlRoot="/1/enterprises",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.destruct([this.organizationList=(new u).syncModel(this,"idOrganizations"),this.memberList=new i])},t.prototype.loadPageOfMembers=function(e){return s.loadMembersOfEnterprise(this.get("name"),l.extend({sortBy:"fullName"},e)).tap(function(e){return function(t){var n;return n=t[0],n.length>0?e.memberList.add(n):void 0}}(this))},t.prototype.isRealEnterprise=function(){return h.call(this.get("products"),100)>=0},t}(a)},{}],189:[function(e,t,n){var r,o;o=e("underscore"),t.exports=r=function(){function e(){}return e.prototype.getLabels=function(){return this.labelList.models},e.prototype.dataForLabel=function(e){return o.extend(e.toJSON(),{isActive:this.hasLabel(e)})},e.prototype.toggleLabelColor=function(e){var t;return t=this.getBoard().labelForColor(e),null!=t?this.toggleLabel(t):void 0},e.prototype.hasLabel=function(e){return this.labelList.contains(e)},e.prototype.toggleLabel=function(e){var t,n;return t=!this.hasLabel(e),n=e.get("uses")+(t?1:-1),this.toggle("idLabels",e.id,t),e.set("uses",n)},e.prototype.createLabel=function(e,t){var n;return(n=o.find(this.getBoard().getLabels(),function(n){return n.get("name")===e&&n.get("color")===t}))?void(this.hasLabel(n)||this.toggleLabel(n)):void this.labelList.create({name:e,color:null!=t?t:"",idBoard:this.get("idBoard"),uses:1},{url:this.labelCreateUrl()})},e}()},{}],190:[function(e,n,r){var o,i,s,a,u,c,l,d=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(212),i=e(29),s=void 0,t(function(){return s=e(179)}),u=e("underscore"),c=e(43),l=e("xtend"),n.exports=a=function(){function e(){}return e.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(e){return function(t){var n;return n=i.isMe(t)?"0":e.isDeactivated(t)?"3":e.isVirtual(t)?"2":"1",n+t.get("fullName")}}(this)).filter(function(e){return function(t){return!e.isDeactivated(t)||e.canSeeDeactivated(i.me())}}(this))},e.prototype.getMemberType=function(e){var t,n;return t=("function"==typeof this.getOrganization&&null!=(n=this.getOrganization())?n.isPremOrgAdmin(e):void 0)?"admin":this.getExplicitMemberType(e),"public"!==t&&("function"==typeof this.isVirtual?this.isVirtual(e):void 0)&&(t="virtual"),t},e.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))},e.prototype._getMembershipFor=function(e){return this._memberships||(this._memberships=new s,this._refreshMemberships(),this.listenTo(this,"change:memberships",this._refreshMemberships)),this._memberships.getMember(e)},e.prototype.getMembershipFor=function(e){var t;return null!=(t=this._getMembershipFor(e))?t.toJSON():void 0},e.prototype.hasActiveMembership=function(e){return null!=this._getMembershipFor(e)&&!this.isDeactivated(e)},e.prototype.isMember=function(e){return null!=this._getMembershipFor(e)},e.prototype.isVirtual=function(e){return"ghost"===(null!=e?e.get("memberType"):void 0)},e.prototype.isDeactivated=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("deactivated"):void 0)===!0},e.prototype.isUnconfirmed=function(e){var t;return(null!=(t=this._getMembershipFor(e))?t.get("unconfirmed"):void 0)===!0},e.prototype.isObserver=function(e){return"observer"===this.getExplicitMemberType(e)},e.prototype.isPremOrgAdmin=function(e){var t,n,r,o;return u.isString(e)&&(e=this.modelCache.get("Member",e)),n=null!=(r=null!=e&&"function"==typeof e.get?e.get("idPremOrgsAdmin"):void 0)?r:[],t=this.getOrganization?null!=(o=this.getOrganization())?o.id:void 0:this.id,d.call(n,t)>=0},e.prototype.getExplicitMemberType=function(e){var t,n;return this.isDeactivated(e)?"deactivated":this.isUnconfirmed(e)?"unconfirmed":(t=this._getMembershipFor(e))?t.get("memberType"):("function"==typeof this.getOrganization&&null!=(n=this.getOrganization())?n.isMember(e):void 0)?"org":"public"},e.prototype.canSeeDeactivated=function(e){var t,n;return this.isMember(e)||(null!=(t=e.organizationList)?t.get(null!=(n=this.getOrganization())?n.id:void 0):void 0)},e.prototype.addMembership=function(e){var t;return t=null!=this.get("memberships")?u.clone(this.get("memberships")):[],t.push(e),this.set("memberships",t)},e.prototype.setOnMembership=function(e,t){return this.set({memberships:this.get("memberships").map(function(n){return n.idMember===e.id?l(n,t):n})})},e.prototype.toggleMemberHidden=function(e,t){return o({url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/hiddenGoogleAppsMembers",type:t.type,data:{gMail:e.get("gMail")}})},e.prototype.changeMemberRole=function(e,t){return null!=t.type&&this.setOnMembership(e,{memberType:t.type}),o({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members/"+e.id,data:t}).then(function(){return c("Member","Change Role",t.type)})},e.prototype.addMemberRole=function(e){return o({type:"PUT",url:"/1/"+this.typeName.toLowerCase()+"/"+this.id+"/members",data:e}).then(function(){return c("Member","Change Role",e.type)})},e}()},{}],191:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(192),i=e("underscore"),t.exports=r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("myPrefs")}return s(t,e),t.prototype.myPrefNames=[],t.prototype.myPrefDefaults={},t.prototype.toJSON=function(e){var n,r,o,i,s,a;if(null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.prefs)for(s=this.myPrefNames,r=0,o=s.length;o>r;r++)i=s[r],a=this.getPref(i),n[i]=a,n[i+"_"+a]=!0;return n},t.prototype.getPref=function(e){var n,r;return u.call(this.myPrefNames,e)>=0?null!=(n=null!=(r=this.get("myPrefs"))?r[e]:void 0)?n:this.myPrefDefaults[e]:t.__super__.getPref.apply(this,arguments)},t.prototype.setPref=function(e,n,r){return u.call(this.myPrefNames,e)>=0?this.setMyPref(e,n,r):t.__super__.setPref.apply(this,arguments)},t.prototype.setMyPref=function(e,t,n){var r;return this.api({type:"put",method:"myPrefs/"+e,data:{value:t}},n),r=i.clone(this.get("myPrefs")),r[e]=t,this.set({myPrefs:r})},t}(o)},{}],192:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(193),i=e("underscore"),t.exports=r=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._initSubEventsOn("prefs")}return s(t,e),t.prototype.prefNames=[],t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),r=function(e){return function(t,o,s){var a,u,c,l,d,p,h;for(p=[],a=0,c=t.length;c>a;a++)l=t[a],u=s?s+"_"+l:l,h=null!=(d=null!=o?o[l]:void 0)?d:e.getPref(l),i.isObject(h)&&!i.isArray(h)?p.push(r(i.keys(h),h,u)):(n[u]=h,p.push(n[u+"_"+h]=!0));return p}}(this),e.prefs&&r(this.prefNames),n},t.prototype.getPref=function(e){var t;return null!=(t=this.get("prefs"))?t[e]:void 0},t.prototype.setPref=function(e,t,n){return this.update("prefs/"+e,t,n)},t.prototype.set=function(e,n){var r,o,s;if(e=i.clone(e),null!=e.prefs){o=e.prefs;for(r in o)s=o[r],"none"===s&&(s="disabled"),"owners"===s&&(s="admins"),o[r]=s}return t.__super__.set.apply(this,arguments)},t}(o)},{}],193:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].slice,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(210),i=e(211),s=e(227),a=e(77),u=e("hearsay"),c=void 0,t(function(){return c=e(34)}),l=e("bluebird"),d=e("promise-queue"),p=e(111),m=e(126),f=e("underscore"),g=e(106),n.exports=g(a,p,h=function(e){function t(e,n){var r;this._marked={},this._lockQueue={},this.modelCache=null!=n?n.modelCache:void 0,this._apiQueue=new d(1),t.__super__.constructor.apply(this,arguments),null!=(r=this.modelCache)&&r.add(this)}return v(t,e),t.prototype._initSubEventsOn=function(e){return this.listenTo(this,"change:"+e,function(t){return function(n,r){var o,i,s,a,u;i=null!=(s=n.previousAttributes())?s[e]:void 0,a=[];for(o in r)u=r[o],(null==i||u!==i[o])&&a.push(t.trigger("change:"+e+"."+o));return a}}(this))},t.prototype.waitForLock=function(e,t){var n;return n=function(t){return function(){var r;return f.isEmpty(t._lockQueue[e])?delete t._lockQueue[e]:(r=t._lockQueue[e].shift())(n)}}(this),null!=this._lockQueue[e]?this._lockQueue[e].push(t):(this._lockQueue[e]=[],t(n))},t.prototype.set=function(e,n){var r,o,i,s,a,u,c,l,d,p,h,m,g,v,y,w,_,k;if(f.isArray(e)&&(e=f.find(e,function(e){return e.id===this.id||e._id===this.id})),null!=(null!=e?e._id:void 0)&&(null==e.id&&(e.id=e._id),delete e._id),_=function(){var t;t=[];for(c in e)k=e[c],c.indexOf("/")>=0&&t.push([c,k]);return t}(),_.length>0)for(e=f.clone(e),a=0,p=_.length;p>a;a++){for(g=_[a],c=g[0],k=g[1],v=c.split("/"),m=v[0],o=3<=v.length?b.call(v,1,u=v.length-1):(u=1,[]),d=v[u++],null==e[m]&&(e[m]=null!=(y=f.clone(this.get(m)))?y:{}),i=e[m],s=l=0,h=o.length;h>l;s=++l)r=o[s],i=i[r]=null!=(w=f.clone(i[r]))?w:{};i[d]=k,delete e[c]}return t.__super__.set.apply(this,arguments)},t.prototype.destructor=function(){var e,t,n,r;if(this.stopListening(),this.cancelScheduled(),null!=this._using)for(r=this._using,e=0,t=r.length;t>e;e++)n=r[e],"function"==typeof n.destructor&&n.destructor();return m.shred(this)},t.prototype.destroy=function(){return t.__super__.destroy.apply(this,arguments),this.destructor()},t.prototype.destruct=function(e){var t,n,r,o;if(f.isArray(e)){for(null==this._using&&(this._using=[]),o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(this._using.push(r));return o}return this.destruct([e])},t.load=function(e,t,n){return l.try(function(r){return function(){var o,i,s;return null==n||null==e?null:(s=function(e,t){var n;return n=f.keys(e),!f.any(n,function(e){return w.call(t,e)<0})},s(t,["query"])&&s(t.query,["fields"])&&null!=(o=n.get(r,e))&&(i=t.query.fields?t.query.fields.split(","):[],f.all(i,function(e){return o.attributes.hasOwnProperty(e)}))?o:null)}}(this)).then(function(n){return function(r){return null!=r?r:c.loadModel(n,e,t)}}(this))},t.prototype.ready=function(e){e&&(this.isReady?e():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(e)))},t.prototype.setReady=function(){var e,t,n,r;if(this.isReady=!0,this.waitingForReady)for(r=this.waitingForReady,this.waitingForReady=null,t=0,n=r.length;n>t;t++)e=r[t],"function"==typeof e&&e()},t.prototype.update=function(){var e,t,n,r,o,i,s,a,u,c;return f.isString(arguments[0])?(n=arguments[0],u=arguments[1],s=4<=arguments.length?b.call(arguments,2,e=arguments.length-1):(e=2,[]),o=s[0],r=arguments[e++],i={},i[n]=u):(i=arguments[0],a=3<=arguments.length?b.call(arguments,1,t=arguments.length-1):(t=1,[]),o=a[0],r=arguments[t++]),null!=o||f.isFunction(r)||(o=r,r=null),c=(null!=o?o:{}).waitForServer,c||this.set(i),this._persistUpdate(i,r)},t.prototype._persistUpdate=function(e,t){return this.api({type:"put",data:e},t)},t.prototype.addToSet=function(){var e,t,n,r,o,i,s,a,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?b.call(arguments,2,r=arguments.length-1):(r=2,[]),i=arguments[r++],s=e[0],null!=s||f.isFunction(i)||(s=i,i=function(){}),a=null!=s?s:{},l=a.waitForServer,n=a.collectionName,o=this,null==n&&(n=t),l||this.set(t,f.uniq((null!=(u=o.get(t))?u:[]).concat(c))),this.api({method:n,data:{value:c},success:function(e){return function(n,r){var i;return i={},i[t]=f.uniq(o.get(t).concat(c)),e.modelCache.enqueueDelta(o,i),"function"==typeof r?r(null,n):void 0}}(this)},i)},t.prototype.pull=function(){var e,t,n,r,o,i,s,a,u,c,l;return t=arguments[0],c=arguments[1],e=4<=arguments.length?b.call(arguments,2,r=arguments.length-1):(r=2,[]),i=arguments[r++],s=e[0],null!=s||f.isFunction(i)||(s=i,i=function(){}),a=null!=s?s:{},l=a.waitForServer,n=a.collectionName,o=this,null==n&&(n=t),l||this.set(t,f.without(null!=(u=o.get(t))?u:[],c)),this.api({method:n+"/"+c,type:"delete",success:function(e){return function(n,r){var i;return i={},i[t]=f.without(o.get(t),c),e.modelCache.enqueueDelta(o,i),"function"==typeof r?r(null,n):void 0}}(this)},i)},t.prototype.run=function(e,t,n){return this.api({method:e,data:t},n)},t.prototype.api=function(e,t){var n,r,s,a,u,c;return s=e.method,c=e.type,n=e.data,u=e.success,r=e.datatype,a=this,null==r&&(r=""),null==s&&(s=""),null==c&&(c="post"),null==n&&(n={}),null==u&&(u=function(e){return function(t,n){var r;t.id===a.id?e.modelCache.enqueueDelta(a,t):f.isArray(t)&&(r=f.find(t,function(e){return e.id===a.id}),null!=r&&e.modelCache.enqueueDelta(a,r)),n(null,t)}}(this)),null==t&&(t=function(){}),this.waitForId(this,function(e){return function(){var a;return a=e.url(),null!=s&&""!==s&&(a+="/"+s),l.using(e.modelCache.getLock(),function(){return e._apiQueue.add(function(){return new l(function(e,t){return o({url:a,type:c,data:n,datatype:r,success:function(t){e(l.fromNode(function(e){return u(t,e)}))},error:function(e,n,r,o){var s,a;a=e.status,s=e.responseText,r=i.fromResponse(a,s),(r instanceof i.Server||r instanceof i.NoResponse)&&o(),t(r)}})})})}).nodeify(t).catch(function(){}).done()}}(this)),this},t.prototype.toggle=function(){var e,t,n,r,o,i,s;return n=arguments[0],s=arguments[1],e=arguments[2],t=5<=arguments.length?b.call(arguments,3,r=arguments.length-1):(r=3,[]),o=arguments[r++],i=t[0],this[e?"addToSet":"pull"](n,s,i,o)},t.prototype.snoop=function(e){return null!=e?new u.ContinuousSignal(function(t){return function(n){var r;return n(t.get("attr")),r=function(){return n(t.get("attr"))},t.listenTo(t,"change:"+e,r),function(){return t.stopListening(t,"change:"+e,r)}}}(this)):new u.ContinuousSignal(function(e){return function(t){var n;return t(e),n=function(){return t(e)},e.listenTo(e,"change",n),function(){return e.stopListening(e,"change",n)}}}(this))},t.prototype.isVisibleAction=function(e){return!0},t.prototype.getActions=function(){var e;return e=1<=arguments.length?b.call(arguments,0):[],this.modelCache.all("Action").filter(function(t){return function(n){return n.includesModel(t)&&f.all(e,function(e){return n.includesModel(e)})&&t.isVisibleAction(n)}}(this))},t}(s.Model))},{}],194:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty,c=[].slice;r=e(210),i=e(193),s=e(40),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.typeName="Invitation",t.prototype.initialize=function(e,t){s("invitation",t),this.invitationList=t.collection,this.setReady()},t.prototype.create=function(e){var t,n,o,i;return o=e.model,t=e.data,i=e.success,n=e.error,r({url:"/1/"+o.typeName+"/"+o.id+"/invitations",type:"post",data:t,dataType:"json",error:function(e){return function(){var t,r,o,i,s;return t=2<=arguments.length?c.call(arguments,0,i=arguments.length-1):(i=0,[]),o=arguments[i++],r=t[0],"Member email restricted by organization administrators"===r.responseText.trim()?void e.$(".error").show():("Member already invited"!==(s=r.responseText.trim())&&"Member already a member"!==s&&"Member email restricted by organization administrators"!==s&&o(),"function"==typeof n?n(r):void 0)}}(this),success:function(e){return function(e){return"function"==typeof i?i(e):void 0}}(this)})},t.prototype.delete=function(e){var t,n,o,i;return o=e.model,n=e.idInvitation,i=e.success,t=e.error,r({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+n,type:"delete",dataType:"json",error:function(e){return function(){var e,n,r,o;return e=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),r=arguments[o++],n=e[0],"Invitation not found"!==n.responseText.trim()&&r(),"function"==typeof t?t(n):void 0}}(this),success:function(e){return function(e){return"function"==typeof i?i(e):void 0}}(this)})},t.prototype.respond=function(e){var t,n,o,i,s;return o=e.model,i=e.response,t=e.data,s=e.success,n=e.error,r({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+i,type:"post",dataType:"json",data:t,error:function(e){return function(){var e,t,r,o;return e=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),r=arguments[o++],t=e[0],"already a member"!==t.responseText.trim()&&r(),"function"==typeof n?n(t):void 0}}(this),success:function(e){return function(e){return"function"==typeof s?s(e):void 0}}(this)})},t}(i)},{}],195:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(193),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Label",t.prototype.urlRoot="/1/labels",t.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.colorSortVal=function(){var e;return e=i.indexOf(t.colors,this.get("color")),e>=0?e:1/0},t.prototype.nameSortVal=function(){var e;return(null!=(e=this.get("name"))?e:"").toLowerCase()},t.compare=function(e,t){var n;return n=e.colorSortVal()-t.colorSortVal(),0===n||isNaN(n)?e.nameSortVal().localeCompare(t.nameSortVal()):n},t.colors=["green","yellow","orange","red","purple","blue","sky","lime","pink","black"],t}(o)},{}],196:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;o=e(67),i=void 0,t(function(){return i=e(168)}),a=e(193),u=e(126),l=e(138),p=e(106),h=e(137),d=e(215),m=e("xtend"),c=e("underscore"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),p(o,t),t.prototype.typeName="List",t.prototype.urlRoot="/1/lists",t.prototype.initialize=function(){return this.destruct([this.cardList=new i(null,{list:this}).owner(this).syncCache(this.modelCache,["idList","closed"],function(e){return function(t){return e.id&&t.get("idList")===e.id&&t.isOpen()}}(this))])},t.prototype.sync=function(e,n,r){return"create"===e&&null==this.get("idBoard")?(this.waitForAttrs(this,["idBoard"],function(o){return function(i){return o.set(i),t.__super__.sync.call(o,e,n,r)}}(this)),this.waitForId(this.getBoard(),function(e){return function(t){return e.set("idBoard",t)}}(this))):t.__super__.sync.apply(this,arguments)},t.prototype.subscribe=function(e){e!==this.get("subscribed")&&this.update({subscribed:e})},t.prototype.move=function(e){this.update({pos:this.getBoard().calcPos(e,this)}),this.collection.sort({silent:!0})},t.prototype.close=function(){this.update({closed:!0})},t.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})},t.prototype.onChange=function(){},t.prototype.calcPos=function(e,t,n){return u.calcPos(e,this.cardList,t,null,n)},t.prototype.bottomCardPos=function(){var e;return null!=(e=this.cardList.last())?e.get("pos")+u.spacing:u.spacing},t.prototype.getBoard=function(){var e,t;return null!=(e=this.modelCache.get("Board",this.get("idBoard")))?e:null!=(t=this.collection)?t.owner:void 0},t.prototype.selectCardInList=function(e){var t;t=this.openCards().at(e),null!=t&&this.getBoard().viewState.selectCard(t)},t.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.getIndexInList=function(){return c.indexOf(this.getBoard().listList.models,this)},t.prototype.openCards=function(){return this.cardList},t.prototype.uploadUrl=function(e,t,n,r){return null==r&&(r=function(){}),this.cardList.create(m({name:n,pos:this.bottomCardPos()},t),{createData:{urlSource:e,name:null!=t?t.name:void 0}},r)},t.prototype._processText=function(e){var t,n,r,o,i;return/[\r\n]/.test(e)?(i=/^\s*([^\r\n]+)/.exec(e),t=i[0],r=i[1],o=h(r,256),n=e):(o=h(e,256),n=o!==e||l(e)?e:""),{name:o,desc:n}},t.prototype.uploadText=function(e,t){var n,r,o;return null==t&&(t=function(){}),e?(o=this._processText(e),r=o.name,n=o.desc,this.cardList.create({name:r,desc:n,pos:this.bottomCardPos()},t)):t()},t.prototype.upload=function(e,t,n){var r,o;return null==n&&(n=function(){}),r={name:t,idList:this.id,pos:this.bottomCardPos()},o=d(c.extend({},r,{fileSource:[e,t]})),this.cardList.create(r,o)},t}(a)},{}],197:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(193),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Login",t.prototype.hasConflict=function(){var e;return e=this.collection.types(),!i.any([function(e){return function(){return i.isEmpty(e.get("types"))}}(this),function(t){return function(){return"password"in e}}(this),function(t){return function(){return e.google>=2}}(this)],function(e){return e()})},t}(o)},{}],198:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B=function(e,t){function n(){this.constructor=e}for(var r in t)O.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},O={}.hasOwnProperty,L=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("jquery"),T=e(119),s=e(210),i=e(65),a=e(29),u=e(163),c=void 0,t(function(){return c=e(165)}),l=e(167),d=e(6),p=e(171),h=e(172),f=e(98),g=e(177),y=e(20),b=void 0,t(function(){return b=e(34)}),w=e(192),_=void 0,t(function(){return _=e(181)}),k=e(217),C=e(183),x=e(114),j=e(126),S=e("underscore"),M=e(101),m=new Date(2016,8,21),n.exports=v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return B(t,e),n=1e4,t.prototype.typeName="Member",t.prototype.nameAttr="fullName",t.prototype.urlRoot="/1/members",t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.destruct([this.boardList=(new c).syncModel(this,"idBoards"),this.organizationList=(new _).syncModel(this,"idOrganizations")]),a.isMe(this)&&(this.destruct([this.boardStarList=new l([],{member:this}).syncSubModels(this,"boardStars"),this.savedSearchList=new C([],{member:this}).syncSubModels(this,"savedSearches"),this.customStickerList=new h([],{
member:this}).syncSubModels(this,"customStickers"),this.boardBackgroundList=new u([],{member:this}).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=new p([],{member:this}).syncSubModels(this,"customEmoji"),this.loginList=new g([],{member:this}).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&b.loadMemberCustomEmoji(this.id).done()),this.listenTo(this,"change:editing",function(e){return function(t){var n,r;return null!=(n=e.modelCache.get("Card",null!=(r=t.get("editing"))?r.idCard:void 0))?n.updateEditing(t):void 0}}(this))},t.prototype.isVisibleAction=function(e){return null==this._actionFilter&&(this._actionFilter=T(k.memberActions)),this._actionFilter(e)},t.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")},t.prototype.getMembershipData=function(e){var t,n,r,o,i,s,u,c,l,d,p,h,m,f,g,v,y,b,w;return t=e.adminList.models,l=a.isMe(this),m=a.me(),h=S.some(t,function(e){return function(t){return t.id!==e.id}}(this)),d=t.length>1,p=e.memberList.length>1,b=e.getMembershipFor(this),f="admin"===e.getExplicitMemberType(this)||"admin"===(null!=b?b.memberType:void 0),v="observer"===e.getExplicitMemberType(this)||"observer"===(null!=b?b.memberType:void 0),g=!(f||v),y=e.isVirtual(this),c=e.owned(),w="org"!==e.getExplicitMemberType(this),n=c,i=!g&&h&&c,s=!v&&h&&c,o=!f&&c,u=p&&(h&&(c||l)||!l&&w&&("function"==typeof e.canInviteMembers?e.canInviteMembers():void 0)&&("function"==typeof e.compareMemberType?e.compareMemberType(m,this):void 0)>=0),r=u&&"Organization"===e.typeName&&c&&!e.isDeactivated(this)&&!y,{isMe:l,canRemove:u,canDeactivate:r,canChangeRole:n,memberIsAdmin:f,memberIsObserver:v,memberIsNormal:g,memberIsVirtual:y,canMakeMember:i,canMakeObserver:s,canMakeAdmin:o,isMoreThanOneAdmin:d,isMoreThanOneMember:p}},t.prototype.canAddBoardsTo=function(e){return null!=e.getMembershipFor(this)},t.prototype.isDismissed=function(e){var t;return L.call(null!=(t=this.get("oneTimeMessagesDismissed"))?t:[],e)>=0},t.prototype.dismiss=function(e,t){return this.isDismissed(e)?"function"==typeof t?t():void 0:this.addToSet("oneTimeMessagesDismissed",e,t)},t.prototype.dismissLanguageBannerFor=function(e,t){return this.dismiss("new-lang-"+e,t)},t.prototype.shouldShowNewLanguageBannerFor=function(e){return e=f.normalizeLocale(e),!this.isDismissed("new-lang-"+e)&&this.getLocale()!==e&&f.normalizeLocale(window.locale)!==e&&f.mostPreferred(f.preferred,[this.getLocale(),e])===e},t.prototype.owned=function(){return a.isMe(this)},t.prototype.prefNames=["minutesBetweenSummaries"],t.prototype.getLocale=function(){return this.getPref("locale")?f.normalizeLocale(this.getPref("locale")):"en"},t.prototype.getLocales=function(){return this.isLoggedIn()?[this.getLocale(),"en"]:f.preferred.map(f.normalizeLocale)},t.prototype.getMemberViewTitle=function(){var e,t,n;return t=this.get("username"),e=this.get("fullName"),n=e+" ("+t+")"},t.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),o("body").toggleClass("body-color-blind-mode-enabled",this.get("prefs").colorBlind))},t.prototype.getOpenBoardsByOrg=function(e){var t,n,r,o,i,s,a,u,c,l,d,p,h;for(c={},l=this.boardList.models,r=0,a=l.length;a>r;r++)t=l[r],t.isOpen()&&(e&&"observer"===t.get("myPermLevel")||(n=t.toJSON(),o=null!=(d=n.idOrganization)?d:"",null==c[o]&&(c[o]={boards:[],displayName:""===o?M("member boards.boards"):null!=(p=this.modelCache.get("Organization",o))?p.get("displayName"):void 0}),c[o].boards.push(n)));for(i=S.sortBy(S.keys(c),function(e){return""===e?"":c[e].displayName}),h=[],s=0,u=i.length;u>s;s++)o=i[s],h.push(c[o]);return h},t.prototype.getSortedOrgs=function(){return S.clone(this.organizationList.models).sort(function(e,t){return e.get("displayName").localeCompare(t.get("displayName"))})},t.prototype.checkColorBlindMode=function(){var e;return o("body").toggleClass("body-color-blind-mode-enabled",(null!=(e=this.get("prefs"))?e.colorBlind:void 0)===!0)},t.prototype.isFeatureEnabled=function(e){return y.isFeatureEnabled(e,this.get("products"))},t.prototype.isGold=function(){return y.hasProduct(this.get("products"))},t.prototype.isInAnyBCOrganization=function(){return this.organizationList.any(function(e){return e.isPremium()})},t.prototype.getBillingStrategy=function(e){return{flatRate:!0}},t.prototype.hasMemberAccount=function(){var e;return i.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.hasMemberOrOrgAccount=function(){return this.hasMemberAccount()||this.organizationList.any(function(e){return e.hasAccount()})},t.prototype.allCustomEmoji=function(){var e,t,n,r,o;if(e={},this.isFeatureEnabled("customEmoji"))for(o=this.customEmojiList.models,n=0,r=o.length;r>n;n++)t=o[n],e[t.get("name")]=t.get("url");return e},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.hasPassword&&(n.hasPassword=L.call(n.loginTypes,"password")>=0),n.accountStanding=i.standingName(null!=(r=this.get("paidAccount"))?r.standing:void 0),n},t.prototype.editing=function(e){return null==e&&(e={}),S.isEqual(e,this.lastMessage)?void 0:(this.lastMessage=e,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=this.setTimeout(function(e){return function(){return e.lastMessage=null}}(this),n/2),a.isLoggedIn()?s({url:this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:S.clone(e)}):void 0)},t.prototype.removeMembershipConfirmationKey=function(e){var t;return t="Organization"===e.typeName,a.isMe(this)?t?"leave org":"leave board":t?"remove member from org":e.isDeactivated(this)?"remove deactivated member from board":"remove member from board"},t.prototype.clearAllNotifications=function(){s({url:"/1/notifications/all/read",type:"post"})},t.prototype.getMobileTempPassword=function(e){s({url:"/1/members/me/loginToken",type:"post",data:{mode:"password"},success:function(t){return e(t.password)}})},t.prototype.maxFileSize=function(){return this.isFeatureEnabled("largeAttachments")?262144e3:10485760},t.prototype.canUploadAttachment=function(e){return e.size<this.maxFileSize()},t.prototype.accountNewerThan=function(e){return j.idToDate(this.id)>e},t.prototype.getShowDetails=function(){var e;return null!=(e=x.get("showDetails"))?e:this.accountNewerThan(m)?!1:!0},t.prototype.setShowDetails=function(e){return x.set("showDetails",e)},t.prototype.enterpriseWithRequiredConversion=function(){var e;if(null==this.get("idEnterprise"))return e=this.organizationList.find(function(e){var t,n;return null!=e.get("idEnterprise")&&null!=e.get("enterprise")&&(null!=(t=e.get("enterprise").prefs)?t.mandatoryTransferDate:void 0)&&!(null!=(n=e.get("enterprise").prefs)?n.ssoOnly:void 0)}),null!=e?e.get("enterprise"):void 0},t.prototype.missedTransferDate=function(){return this.get("missedTransferDate")},t.prototype.hasBCPowerUps=function(){return this.organizationList.any(function(e){return e.isFeatureEnabled("plugins")})},t.prototype.getPowerUpsLimit=function(){return this.hasBCPowerUps()?1/0:this.isFeatureEnabled("threePlugins")?3:1},t.prototype.isEnterpriseAdmin=function(){var e;return(null!=(e=this.get("idEnterprisesAdmin"))?e.length:void 0)>0},t}(w)},{}],199:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t}(o)},{}],200:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(29),o=e(6),s=e(193),a=e(126),u=e("underscore"),c=e("xtend"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.typeName="Notification",t.prototype.urlRoot="/1/notifications",t.sortedByDateDescending=function(e){return u.sortBy(e.all("Notification"),function(e){return-new Date(e.get("date")).getTime()})},t.unreadCount=function(e){return e.all("Notification").filter(function(e){return e.get("unread")}).length},t.prototype.getModel=function(){return this.collection.options.model},t.prototype.getBoard=function(){var e,t,n;return null!=(e=null!=(t=this.get("data"))&&null!=(n=t.board)?n.id:void 0)?this.modelCache.get("Board",e):null},t.prototype.getMember=function(){var e;return null!=(e=this.modelCache.get("Member",this.get("idMemberCreator")))?e.toJSON():void 0},t.prototype.triggerCacheEvents=function(e,t){var n,r,o,i;for(i=this.idModels(),n=0,o=i.length;o>n;n++)r=i[n],e.trigger(t+":"+this.typeName+":"+r)},t.prototype.idModels=function(){var e,t,n,r,o;n=null!=(t=this.get("data"))?t:{},r=[];for(e in n)o=n[e],null!=(null!=o?o.id:void 0)&&r.push(o.id);return r},t.prototype.isCommentLike=function(){var e;return"commentCard"===(e=this.get("type"))||"copyCommentCard"===e},t.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},t.prototype.getExpandedData=function(){var e,t,n,r,o;return n=c(null!=(o=this.toJSON().data)?o:{},{date:this.get("date"),unread:this.get("unread")}),n[this.get("type")]=!0,e=n.board,t=n.card,r=n.organization,n},t.prototype.markRead=function(){return this.update({unread:!1})},t.prototype.navigateToView=function(){var e;return e=this.get("data"),null!=e&&null!=e.card&&null!=e.board?(o.displayBoard({idBoard:e.board.id,idCard:e.card.id}).done(),!0):"memberJoinedTrello"===this.get("type")?(document.location="/recommend",!0):!1},t.prototype.getUrlOfTarget=function(){var e;return e=this.get("data"),null!=e.card?o.getCardUrlWithoutModels(e.board.id,e.card.id,e.card.name):null!=e.board?o.getBoardUrl(e.board):null!=e.organization?o.getOrganizationUrl(e.organization.id):o.getMemberNotificationsUrl()},t}(s)},{}],201:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(194),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="OrganizationInvitation",t}(r)},{}],202:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;o=e(65),i=e(210),s=e(211),a=e(212),u=e(29),c=void 0,t(function(){return c=e(165)}),l=e(6),d=void 0,t(function(){return d=e(178)}),p=e(190),h=e(192),m=e(22),g=void 0,t(function(){return g=e(180)}),y=e(224),b=e(185),v=e(182),w=e(126),_=e("underscore"),k=e(106),C=e(43),x=e("xtend"),n.exports=f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),k(p,t),t.prototype.typeName="Organization",t.prototype.nameAttr="displayName",t.prototype.urlRoot="/1/organizations",t.prototype.initialize=function(){return t.__super__.initialize.call(this),this.destruct([this.invitationList=new g([]),this.boardList=(new c).syncModel(this,"idBoards"),this.memberList=(new d).syncModel(this,"memberships",{fxGetIds:function(e){return _.pluck(e,"idMember")}}),this.adminList=(new d).syncModel(this,"memberships",{fxGetIds:function(e){return function(e){var t;return t=function(e){var t,n;return n=e.memberType,t=e.deactivated,"admin"===n&&!t},_.pluck(_.filter(e,t),"idMember")}}(this)}),this.tagList=(new b).syncSubModels(this,"tags"),this.pluginDataList=new v([],{scopeModel:this}).syncCache(this.modelCache,[],function(e){return function(t){return t.get("idModel")===e.id&&"organization"===t.get("scope")}}(this))]),this._slackAssociation=null},t.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"],t.prototype.editable=function(){var e,t;return e=u.me(),t=this.getMembershipFor(e),e&&"admin"===(null!=t?t.memberType:void 0)},t.prototype.isPremium=function(){return m.hasProduct(this.get("products"))},t.prototype.hasAccount=function(){var e;return o.hasAccount(null!=(e=this.get("paidAccount"))?e.standing:void 0)},t.prototype.isPremiumMonthly=function(){return this.isPremium()&&m.isMonthly(this.get("products"))},t.prototype.isPremiumYearly=function(){return this.isPremium()&&m.isYearly(this.get("products"))},t.prototype.isEnterprise=function(){return null!=this.get("idEnterprise")},t.prototype.paysWithPurchaseOrder=function(){var e;return m.usesPurchaseOrder(this.get("products"))||"purchase-order@trello.com"===(null!=(e=this.get("paidAccount"))?e.contactEmail:void 0)},t.prototype.getBillingStrategy=function(e){return m.isPerUser(e)?{perUser:!0,perActiveUser:m.isPerActiveUser(e),userCount:m.isPerActiveUser(e)?this.get("activeBillableMemberCount"):this.get("billableMemberCount")}:{flatRate:!0}},t.prototype.totalPerUserPrice=function(e){var t;return t=this.getBillingStrategy(e),t.perUser?t.userCount*m.getPrice(e):void 0},t.prototype.needsBCUpgrade=function(){return 0===_.intersection([m.getProductNumber(m.currentProducts.monthly),m.getProductNumber(m.currentProducts.yearly)],this.get("products")).length},t.prototype.isMember=function(e){var t;return"virtual"===(t=this.getMemberType(e))||"normal"===t||"admin"===t},t.prototype.ownedByMember=function(e){return"admin"===this.getMemberType(e)},t.prototype.canAddBoard=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=e.get("prefs").permissionLevel,this.canSetVisibility(t)):!0},t.prototype.canSetVisibility=function(e){var t;return this.isFeatureEnabled("restrictVis")?(t=this.get("prefs").boardVisibilityRestrict[e],!t||"org"===t||"admin"===t&&this.owned()):!0},t.prototype.owned=function(){return"admin"===this.getMemberType(u.me())},t.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain},t.prototype.isFeatureEnabled=function(e){return m.isFeatureEnabled(e,this.get("products"))},t.prototype.snoopIsFeatureEnabled=function(e){return this.snoop("products").map(function(t){return function(){return t.isFeatureEnabled(e)}}(this)).distinct()},t.prototype.toJSON=function(e){var n,r;return null==e&&(e={}),n=t.__super__.toJSON.apply(this,arguments),e.url&&(n.url=l.getOrganizationUrl(this.get("name"))),n.accountStanding=o.standingName(null!=(r=this.get("paidAccount"))?r.standing:void 0),n},t.prototype.getPermLevel=function(){return this.get("prefs").permissionLevel},t.prototype.getAvailableRoles=function(){return this.isFeatureEnabled("superAdmins")?["superadmin","normal"]:["admin","normal"]},t.prototype.hasObservers=function(){return!1},t.prototype.setPluginData=function(e,t,n){return this.pluginDataList.upsert(e,t,n)},t.prototype.getPluginData=function(e){return this.pluginDataList.dataForPlugin(e)},t.prototype.snoopPluginData=function(e){return this.pluginDataList.snoopDataForPlugin(e)},t.prototype.invitationUrl=function(e){return l.getOrganizationInvitionLinkUrl(e)},t.prototype.externalMembersDisabled=function(){return this.isFeatureEnabled("disableExternalMembers")&&this.getPref("externalMembersDisabled")},t.prototype.reactivateMember=function(e){return this.setOnMembership(e,{deactivated:!1}),a({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!1}}).catch(s.Conflict,function(t){return function(n){throw t.setOnMembership(e,{deactivated:!0}),n}}(this))},t.prototype.deactivateMember=function(e){i({url:"/1/organizations/"+this.id+"/members/"+e.id+"/deactivated",type:"PUT",data:{value:!0},success:function(){return C("Organization","Deactivate Member From Organization")}}),this.setOnMembership(e,{deactivated:!0})},t.prototype.getGoogleAppsMappings=function(){return a({url:"/1/organizations/"+this.id+"/googleApps/mappings"})},t.prototype.ensureSlackAssociation=function(){return null!=this._updateSlackAssociationOnce?this._updateSlackAssociationOnce:this._updateSlackAssociationOnce=this.updateSlackAssociation()},t.prototype.updateSlackAssociation=function(){return y.ajaxTrello({url:"/trello/"+this.id+"/association"}).tap(function(e){return function(t){var n,r;return n=t[0],r=t[1],"success"===r?((null!=n?n.associated:void 0)&&!n.teams?e._slackAssociation={associated:!0,canChange:n.canChange,adminOnly:n.adminOnly,teams:[{domain:n.domain,name:n.domain,icon:window.slackTrelloDomain+"/img/slack-default-logo.png",id:n.id,selfJoin:n.selfJoin}]}:e._slackAssociation=n,e.trigger("change:slack-association")):void 0}}(this))},t.prototype.deleteSlackAssociation=function(e){return y.ajaxTrello({url:"/trello/"+this.id+"/association?idSlackTeam="+e,type:"DELETE"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.getLatestSlackAssociation=function(){return this._slackAssociation},t.prototype.changeSlackSelfJoin=function(e,t){return y.ajaxTrello({url:"/trello/"+this.id+"/selfJoin?idSlackTeam="+t+"&value="+e,type:"PUT"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t.prototype.changeSlackAdminOnlyLinking=function(e){return y.ajaxTrello({url:"/trello/"+this.id+"/adminOnlyLinking?value="+e,type:"PUT"}).tap(function(e){return function(){return e.updateSlackAssociation()}}(this))},t}(h)},{}],203:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="PluginData",t.prototype.urlRoot=function(){return"/1/"+this.get("scope")+"/"+this.get("idModel")+"/pluginData"},t}(o)},{}],204:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="Plugin",t}(o)},{}],205:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="SavedSearch",t}(o)},{}],206:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(193),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.typeName="Sticker",t}(o)},{}],207:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(193),i=e("underscore"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.typeName="Tag",t.prototype.urlRoot=function(){return this.getOrganization().url()+"/tags"},t.prototype.getOrganization=function(){return this.collection.sourceModel},t}(o)},{}],208:[function(e,t,n){var r,o,i,s,a;i=e("bluebird"),s=e(70),o=e(213),r=e("jquery"),a=e("xtend"),t.exports=function(e){return s(!("success"in e||"error"in e),"This is promise country!"),new i(function(t,n){return r.ajax(a(e,{success:function(e){return t(e)},error:function(e){return n(o.fromResponse(e.status,e.responseText))}}))})}},{}],209:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=[].slice;r=e("jquery"),i=e(506),s=e(29),a=e(36),u=e(126),c=e("underscore"),d=e(40),p=e(493),l=e(101),t.exports=o=new(function(){function e(){this._msBackoff=100,this._msBackoffMin=100,this._nTriesLeft=12,this._nTriesMax=12,this._retrying=!1,this._stopped=!1,this._maxLength=10,this._queue=[],this._queueIdSeq=0}return e.prototype.uniqueReqId=function(){var e;return(null!=(e=s.me())?e.id:void 0)+"-"+Math.random()},e.prototype.hasQueue=function(){return this._queue.length>0},e.prototype.inQueue=function(e){return c.find(this._queue,function(t){return t.queueId===e.queueId})},e.prototype.removeFromQueue=function(e){return this._queue=c.filter(this._queue,function(t){return t.queueId!==e.queueId})},e.prototype.addToQueue=function(e){return d("AjaxQueue","addToQueue",e),this._queue.length+1>this._maxLength?void d("AjaxQueue","maxLength exceeded"):(this._queue.push(e),this.showRetrying())},e.prototype.success=function(e){return d("AjaxQueue","success",e),this.inQueue(e)?(this.removeFromQueue(e),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()):void 0},e.prototype.retryableError=function(e){return d("AjaxQueue","retryableError",e),o.inQueue(e)?this._retrying=!1:o.addToQueue(e),this.retryNext()},e.prototype.serverAlreadySaw=function(e){return this.inQueue(e)?(this.removeFromQueue(e),this.retryNext()):void 0},e.prototype.retryNext=function(){var e;if(!this._stopped){if(!this.hasQueue())return void this.hideRetrying();if(this.showRetrying(),!this._retrying)return this._retrying=!0,e=this._queue[0],this._nTriesLeft>0?(d("AjaxQueue","retrying in "+this._msBackoff+"ms",e),setTimeout(function(){return r.ajax(e)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft):(this._stopped=!0,this.showOutOfRetries())}},e.prototype.showRealError=function(e,t,n){var r;return d("AjaxQueue","showRealError",n),this.hideRetrying(),r=l("alerts.changes not saved"),i.showHtml(p.fill("connect_failed",{msg:r}),"error","AjaxQueueFail")},e.prototype.showOutOfRetries=function(){var e;return d("AjaxQueue","showOutOfRetries"),this.hideRetrying(),e=l("alerts.timed out"),i.showHtml(p.fill("connect_failed",{msg:e}),"error","AjaxQueueFail")},e.prototype.showRetrying=function(){var e;return e=this._queue.length,i.show("retrying","error","AjaxQueueRetry")},e.prototype.hideRetrying=function(){return i.hide("AjaxQueueRetry")},e.prototype.showSending=function(){return i.show("sending","warning","AjaxQueueSending")},e.prototype.hideSending=function(){return i.hide("AjaxQueueSending")},e.prototype.showUploading=function(e){return i.show(e,"info","AjaxQueueUpload")},e.prototype.hideUploading=function(){return i.hide("AjaxQueueUpload")},e.prototype.ajax=function(e){var t,n,r,i,s,a;a=c.clone(e),this._stopped||(null==a.timeout&&(a.timeout=2e4),null==a.showSendingAfter&&(a.showSendingAfter=3e3),a.queueId=this._queueIdSeq++,a.headers={"X-Trello-ReqId":this.uniqueReqId()},a.oldSuccess=a.success,a.oldError=a.error,a.ourComplete=a.complete,delete a.complete,s=a.modelCache,delete a.modelCache,t=!1,r=!1,i=null!=s?s.lock("AjaxQueue.ajax"):void 0,a.success=function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),t=!0,o.success(this),"function"==typeof this.oldSuccess&&this.oldSuccess.apply(this,e),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(i):void 0},a.error=function(){var e,n,r,a,u,l;return e=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),t=!0,l=e[0],u=e[1],r=e[2],0===(a=l.status)||408===a||500===a?o.retryableError(this):(n=function(){return o._stopped=!0,o.showRealError.apply(o,e)},c.isFunction(this.oldError)?this.oldError.apply(this,h.call(e).concat([n])):n(),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(i):void 0)},/^post$/i.test(a.type)&&(n=function(e){return e.lengthComputable&&e.total>65536},a.xhr=function(e){return function(){var t,o;return o=new XMLHttpRequest,t=o.upload,null!=t&&(t.addEventListener("progress",function(t){var o;if(n(t))return r=!0,o=Math.round(100*t.loaded/t.total).toString()+"%",e.showUploading(["uploading",{percentString:o}])}),t.addEventListener("load",function(t){return r?e.showUploading("processing upload"):void 0})),o}}(this)),this.hasQueue()?o.addToQueue(a):(a.showSendingAfter>=0&&setTimeout(function(e){return function(){return t||r?void 0:o.showSending()}}(this),a.showSendingAfter),this.send(a)))},e.prototype.send=function(e){return r.ajax(e)},e}())},{}],210:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=[].slice;r=e(209),o=e(29),i=e(6),u=e(126),s=e("bluebird"),a=e("promise-queue"),c=e(231),h=e("xtend"),p=new a(3),l=function(e){var t,n;return(null!=(t=null!=(n=e.type)?n:e.method)?t:"GET").toUpperCase()},d=function(e){var t;return null==e.data&&(e.data={}),"GET"!==l(e)&&(e.data.token=o.myToken()),null==(t=e.data).invitationTokens&&(t.invitationTokens=u.invitationTokens().join(",")),e.background?void r.send(e):(null==e.modelCache&&(e.modelCache=i.getCurrentModelCache()),void r.ajax(e))},t.exports=function(e,t){return p.add(function(){var t,n,r,o;return o=null!=(n=e.success)?n:function(){},t=null!=(r=e.error)?r:function(){},new s(function(n,r){e=h(e,{success:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],o.apply(null,e),n(e)},error:function(){var e;e=1<=arguments.length?m.call(arguments,0):[],t.apply(null,e),r(e)}}),d(e)})}).nodeify(t).catch(function(){}).done()}},{}],211:[function(e,t,n){var r,o,i,s,a;s=e(102),o=e(70),a=e("xtend"),i=e(100),r=s("API",["Unauthorized","Unauthenticated","Unconfirmed","Timeout","NoResponse","NotFound","Server","BadRequest","Conflict","Other"]),r.prototype.localizedMessage=function(){return i(this.message)},r.fromResponse=function(e,t){var n;switch(null!=t?n=t.toLowerCase().trim():o(0===e,"Received a response without any content!"),e){case 0:return r.NoResponse();case 400:switch(n){case"invalid token":return r.Unauthenticated();default:return r.BadRequest(t)}break;case 401:switch(n){case"invalid token":return r.Unauthenticated();case"unauthorized permission requested":case"unauthorized organization.":case"unauthorized card permission requested":return r.Unauthorized(t);case"confirm to view":return r.Unconfirmed()}break;case 403:switch(n){case"user not logged in or invalid token.":return r.Unauthenticated();default:return r.Unauthorized(t)}break;case 404:return r.NotFound(t);case 408:return r.Timeout(t);case 409:return r.Conflict(t)}return e>=500&&600>e?r.Server(t):r.Other(e+": "+t)},t.exports=r},{}],212:[function(e,t,n){var r,o,i,s,a,u;r=e(210),i=e("bluebird"),u=e(231),s=e("underscore"),a=e(70),o=e(211),t.exports=function(e){return a(!("success"in e||"error"in e),"This is promise country!"),i.fromNode(u(r,e)).catch(function(e){var t;return t=e[0],i.reject(o.fromResponse(t.status,t.responseText))}).get(0)}},{}],213:[function(e,t,n){var r,o,i,s;i=e(102),o=e(70),s=e("xtend"),r=i("Http",["NoResponse","BadRequest","Unauthorized","Forbidden","NotFound","Timeout","Conflict","Precondition","Server","Other"]),r.fromResponse=function(e,t){switch(o(t||0===e,"Received a response without any content!"),e>=500&&600>e&&r.Server(t),e){case 0:return r.NoResponse();case 400:return r.BadRequest(t);case 401:return r.Unauthorized(t);case 403:return r.Forbidden(t);case 404:return r.NotFound(t);case 408:return r.Timeout(t);case 409:return r.Conflict(t);case 412:return r.Precondition(t);default:return r.Other(e+": "+t)}},t.exports=r},{}],214:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m;u=e("underscore"),d=e(142),p=e(102),h=e(254),s=e(249),a=e("bluebird"),m=e("xtend"),i=2e4,o=p("IFrameIO",["Invalid","NotHandled","Timeout"]),l=null,c=function(){var e,t;if(null==l){if(t="iframe-io-host",l=document.createElement("div"),l.id=t,e=document.getElementsByTagName("body")[0],!e)throw Error("no body to host iframes");e.appendChild(l)}return l},t.exports=r=function(){function e(e,t){this.url=e,this.handlers=t}return e.Error=o,e.prototype._getIO=function(){return null!=this._io?this._io:this._io=new a(function(e){return function(t){var n,r,i;if(!d(e.url))throw o.Invalid("Provided iframe source not valid: "+e.url);return n=document.createElement("iframe"),n.src=e.url,c().appendChild(n),i=s.randomId(64),r=new s({local:window,remote:n.contentWindow,targetOrigin:h(e.url).set("pathname","").href,secret:i,handlers:m(e.handlers,{initialize:function(){return{secret:i}},ready:function(){return t(r)}})})}}(this)).timeout(i).catch(a.TimeoutError,function(e){return function(){throw("undefined"!=typeof console&&null!==console?console.error:void 0)&&console.error("Error, timeout while initializing index iframe for "+e.url+". Timeout="+i+"ms"),o.Timeout("unable to initialize iframe-io in "+i+"ms")}}(this))},e.prototype.request=function(e,t,n){return this._getIO().then(function(r){var i;return i=Date.now(),r.request(e,t).timeout(n).catch(a.TimeoutError,function(){var r;throw("undefined"!=typeof console&&null!==console?console.error:void 0)&&console.error("IFrameIO request timed out. Command="+e+", Plugin="+(null!=t&&null!=(r=t.context)?r.plugin:void 0)+", Elapsed="+(Date.now()-i)),o.Timeout(e+" did not complete in "+n+"ms")})}).catch(s.NotHandled,s.UnsupportedCommand,function(t){throw o.NotHandled("Request to run '"+e+"' failed due to error: '"+t.message+"'")})},e}()},{}],215:[function(e,t,n){var r,o,i=[].slice;r=e(29),o=e("underscore"),t.exports=function(e){var t,n,s;t=new FormData,t.append("token",r.myToken());for(n in e)s=e[n],o.isArray(s)?t.append.apply(t,[n].concat(i.call(s))):t.append(n,s);return{data:t,contentType:!1,processData:!1,timeout:216e5}}},{}],216:[function(e,t,n){var r,o,i,s,a,u,c,l,d=[].slice;r=e(212),o=e(20),s=e(202),i=e(22),u=e("bluebird"),c=function(e,t){return e instanceof s?i.getProductNumber(t):o.getProductNumber(t)},l=function(){var e,t;return e=arguments[0],t=2<=arguments.length?d.call(arguments,1):[],[e.urlRoot,e.id,"paidAccount"].concat(d.call(t)).join("/")},a=t.exports={changeProduct:function(e,t){var n;return n=c(e,t),r({url:l(e,"products"),type:"POST",data:{products:[n]}})},cancel:function(e){return r({url:l(e,"cancel"),type:"POST"})},renew:function(e){return a.changeProduct(e,e.get("paidAccount").products[0])},reactivate:function(e,t){var n;return n=c(e,t),r({url:l(e,"reactivate"),type:"POST",data:{products:[n]}})},createAccount:function(e,t){return r({url:l(e),data:t,type:"POST"})},changeCreditCard:function(e,t){return r({url:l(e,"creditCard"),data:t,type:"POST"})},changeInvoiceDetails:function(e,t){return r({method:"POST",url:l(e,"invoice"),data:t})}}},{}],217:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p;a=e(231),p=e(144),i=e("underscore"),o=e(218),t.exports=r={};for(u in o)if(d=o[u],i.isObject(d))r[u]={query:d};else{if(!i.isString(d))throw new Error("Implicit coupling fell over");r[u]=d}l=function(e,t){var n;return n=i.pluck(e,"id"),t.set("idBoards",n)},r.organizationBoardsPage.mappingRules={boards:l},s=function(e,t){var n,r,o;return n=null!=(o=t.get("attachments"))?o:[],r=p(a.get("id"),n,e),t.set("attachments",r)},r.currentBoardMinimal.mappingRules={attachments:s},r.memberActions=[r.boardActions,"updateMember"].join(","),r.boardFieldsUnread=["dateLastActivity","dateLastView"],r.boardFieldsMinimalMemberships=["name","closed","memberships"].join(","),r.enterpriseMemberFields=["avatarHash","fullName","initials","username","userType","active","roles","memberType","confirmed"].join(","),r.organizationFieldsMinimalMemberships=[r.organizationFieldsMinimal,"memberships"],r.organizationFieldsMembersPage=[r.organizationBoardsFields,"memberships"].join(","),c=function(e,t){var n,r,o;return n=null!=(o=t.get("memberships"))?o:[],r=p(a.get("id"),n,e),t.set("memberships",r)},r.boardMinimal={query:{fields:r.boardFieldsMinimal,organization:!0,organization_fields:r.organizationFieldsMinimal,myPermLevel:!0,memberships:"me"},mappingRules:{memberships:c}},r.boardsMenuMinimal={query:{boards:"open,starred",board_fields:r.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:r.organizationFieldsMinimal,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,board_myPermLevel:!0,board_memberships:"me"},mappingRules:{memberships:c}},r.boardsMenu={query:{fields:"",
board_fields:r.boardFieldsMinimal,organizations:"all",organization_fields:r.organizationFieldsMinimal,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,paid_account:!0}},r.memberUnreadBoards={query:{fields:"",boards:"open,starred",board_fields:r.boardFieldsUnread}},r.boardUnread={query:{fields:r.boardFieldsUnread}},r.cardDetails={query:{actions:r.cardActions,actions_display:!0,action_memberCreator_fields:r.memberFieldsAndPremOrgsAdmin,members:!0,member_fields:r.memberFieldsStatus,attachments:!0,fields:"email",checklists:"all",list:!0,pluginData:!0}},r.cardMinimal={query:{fields:r.cardFieldsBulk}},r.cardVoters={query:{fields:"idMembersVoted",membersVoted:!0}},r.cardCopy={query:{members:!0,member_fields:r.memberFieldsStatus,attachments:!0,stickers:!0,fields:"name",checklists:"all"}},r.cardList={query:{fields:"all"}},r.memberAccount={query:{tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",organizations:"all",organization_paid_account:!0,logins:!0}},r.memberPaidAccount={query:{paid_account:!0}},r.orgMemberCards={query:{board:!0,list:!0,fields:"badges,closed,due,dueComplete,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:r.memberFields}},r.memberCards={query:{boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",cards:"visible",card_fields:[r.cardFieldsBulk,"labels"].join(","),card_attachments:"true",card_stickers:!0,card_members:"true",card_member_fields:r.memberFields,organizations:"all",organization_fields:"displayName,name,prefs,products",organization_memberships:"me",organization_paid_account:!0,paid_account:!0},mappingRules:{memberships:c}},r.memberMinimal={query:{fields:r.memberFields}},r.memberProfile={query:{actions:"all",actions_limit:10,actions_display:!0,organizations:"all",organization_fields:r.organizationFieldsMinimal,organization_paid_account:!0,boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0}},r.memberProfile_daysBack=30,r.organization={query:{boards:"open",board_fields:r.boardFieldsMinimal,enterprise:!0,fields:"all",members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,paid_account:!0},mappingRules:{boards:l}},r.organizationExports={query:{exports:!0,fields:"all",paid_account:!0}},r.organizationPaidAccount={query:{paid_account:!0}},r.organizationMembers={query:{fields:r.organizationFieldsMembersPage,members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,paid_account:!0}},r.organizationMembersExtra={query:{members:"all",member_activity:!0,boards:"open",board_fields:r.boardFieldsMinimalMemberships},mappingRules:{boards:l}},r.organizationMembersMinimal={query:{members:"all",fields:r.organizationFieldsMinimalMemberships}},r.organizationMinimal={query:{fields:"all"}},r.memberNotifications={query:{notifications:"all",notifications_limit:10,notifications_display:!0}},r.organizations={query:{organizations:"all",organization_paid_account:!0}},r.idCard={query:{fields:"",checkItemStates:!1}},r.cardsAndListsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed",cards:"visible",card_fields:"idList,idBoard,pos,closed"}},r.listsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard,closed"}},r.listMinimal={query:{fields:"name,pos,idBoard,closed"}},r.archivedLists={query:{lists:"closed",list_fields:"name,pos,idBoard,closed"}},r.action={query:{display:!0,memberCreator:!0}},r.bcFeatures={query:{boards:"open",board_fields:"all",board_starCounts:"organization",board_membershipCounts:"active",fields:"all",paid_account:!0,memberships:"all",members:"all",tags:!0}}},{}],218:[function(e,t,n){var r;t.exports=r={},r.boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","datePluginDisable","idOrganization","prefs","shortLink","shortUrl","url"].join(","),r.boardFieldsFull=[r.boardFieldsMinimal,"desc","descData","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),r.boardFieldsMinimalSubscribed=[r.boardFieldsMinimal,"subscribed"].join(","),r.memberFields=["fullName","initials","idEnterprise","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),r.memberFieldsStatus=[r.memberFields,"status"].join(","),r.memberFieldsAndPremOrgsAdmin=[r.memberFields,"idPremOrgsAdmin"].join(","),r.organizationFieldsMinimal=["name","displayName","products","prefs","logoHash","idEnterprise"].join(","),r.cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","dueComplete","idAttachmentCover","idList","idBoard","idMembers","idShort","idLabels","name","pos","shortUrl","shortLink","subscribed","url"].join(","),r.boardFieldsInOrganization=[r.boardFieldsMinimal,"idTags"].join(","),r.organizationBoardsFields=[r.organizationFieldsMinimal,"desc","descData","website"].join(","),r.cardActions=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","copyCard","deleteAttachmentFromCard","emailCard","moveCardFromBoard","moveCardToBoard","removeChecklistFromCard","removeMemberFromCard","updateCard:idList","updateCard:closed","updateCard:due","updateCard:dueComplete","updateCheckItemStateOnCard"].join(","),r.boardActions=[r.cardActions,"addMemberToBoard","addToOrganizationBoard","copyBoard","createBoard","createList","deleteCard","disablePlugin","disablePowerUp","enablePlugin","enablePowerUp","makeAdminOfBoard","makeNormalMemberOfBoard","makeObserverOfBoard","moveListFromBoard","moveListToBoard","removeFromOrganizationBoard","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateList:closed"].join(","),r.card={fields:"all",stickers:!0,attachments:!0,pluginData:!0},r.currentBoardMinimal={lists:"open",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:[r.cardFieldsBulk,"labels"].join(","),card_checklists:"none",members:"all",member_fields:r.memberFieldsStatus,membersInvited:"all",membersInvited_fields:r.memberFields,memberships_orgMemberType:!0,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",myPrefs:!0,fields:r.boardFieldsFull},r.currentBoardSecondary={fields:"",actions:r.boardActions,actions_display:!0,actions_limit:50,action_memberCreator_fields:r.memberFieldsAndPremOrgsAdmin,checklists:"none",cards:"visible",card_fields:"",card_checklists:"all",card_checklist_checkItems:"none",labels:"all",labels_limit:1e3},r.currentBoardPluginData={fields:"",boardPlugins:!0,cards:"visible",card_fields:"",card_attachments:!0,card_attachment_fields:"bytes,date,edgeColor,idMember,isUpload,mimeType,name,url",pluginData:!0,card_pluginData:!0,organization:!0,organization_fields:"",organization_pluginData:!0},r.memberBoards={boards:"open,starred",board_fields:r.boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:r.boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:r.organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:r.organizationFieldsMinimal,organizationsInvited:"all",organizationsInvited_fields:r.organizationFieldsMinimal,paid_account:!0},r.memberHeader={channels:!0,notifications:"all",notifications_limit:10,notifications_display:!0,notification_memberCreator_fields:r.memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName,idEnterprise",organization_enterprise:!0,paid_account:!0,savedSearches:!0,missedTransferDate:!0},r.organizationBoardsPage={boards:"open",board_fields:r.boardFieldsInOrganization,board_starCounts:"organization",board_membershipCounts:"active",fields:r.organizationBoardsFields,paid_account:!0,memberships:"active",members:"all",tags:!0},r.memberQuickBoards={fields:"idOrganizations",boards:"open,starred",board_fields:r.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:"idBoards"},r.quickBoardsSearch=function(e){return{query:e,modelTypes:"boards",board_fields:r.boardFieldsMinimal,partial:!0}}},{}],219:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;o=e(211),i=e(29),s=e(227),a=e(220),u=e(36),c=e(6),l=e(107),d=e("bluebird"),h=e("underscore"),f=e(40),m=e(231),g=e(102),p=g("RPC",["SyncError","BatchError"]),v=function(e){try{return JSON.parse(e)}catch(e){return null}},t.exports=r=function(){function e(e){for(this.delegate=e,this.idBoardToPoll=null,this.modelIxUpdate={},this.msPoll=2e3,this.msPollIdle=1e4,this.ajaxSessionId=Math.random().toString().substring(2);this.ajaxSessionId.length<16;)this.ajaxSessionId+="0";this.consecutiveFailures=0,this.consecutiveFailuresAllowed=300,this.totalFailures=0,this.totalFailuresAllowed=1e3}return h.extend(e.prototype,s.Events),e.prototype.subscribe=function(e,t,n,r){return"function"==typeof r?r():void 0},e.prototype.unsubscribe=function(e,t,n){return"function"==typeof n?n():void 0},e.prototype.resync=function(){},e.prototype._getPollLength=function(){return i.isLoggedIn()&&"active"===l.getStatus()?this.msPoll:this.msPollIdle},e.prototype.stopPolling=function(){return null!=this._pollingTimeout?(clearTimeout(this._pollingTimeout),delete this._pollingTimeout):void 0},e.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(e){return function(){return e.consecutiveFailures>=e.consecutiveFailuresAllowed||e.totalFailures>=e.totalFailuresAllowed?void e.trigger("connect_failed"):e.doPoll(function(t){if(null!=t){if("syncError"===t)return;e.trigger("connecting"),++e.consecutiveFailures,++e.totalFailures}else e.consecutiveFailures>0&&e.trigger("reconnect"),e.consecutiveFailures=0;return e.poll()})}}(this),this._getPollLength())},e.prototype.doPoll=function(){var e,t,n,r,o,i,s,a,u,c,l;if(e=2<=arguments.length?y.call(arguments,0,t=arguments.length-1):(t=0,[]),a=arguments[t++],r=e[0],s=e[1],l=[],null==s&&(s=this),h.isArray(r))for(o=0,i=r.length;i>o;o++)n=r[o],l.push(this.delegate.currentSubscriptions[n]);else{if(null!=r)return void f("rpc","Bad argument to doPoll: "+r);u=this.delegate.currentSubscriptions;for(n in u)c=u[n],l.push(c)}return h.isEmpty(l)?(f("rpc","No models to poll for "+r),"function"==typeof a?a():void 0):this._doPoll(l,s,a)},e.prototype._doPoll=function(e,t,n){var r,i;return i=new a,r=e.map(function(e){return function(n){var r,s,a,u,c;return a=n.modelType,r=n.idModel,s=n.ixLastUpdate,u=n.tags,c="/"+a+"/"+r+"/deltas?ixLastUpdate="+encodeURIComponent(s.toString())+"&tags="+encodeURIComponent(u.join(",")),i.request(c).tap(function(n){var o;return null!=n.syncError?d.reject(p.SyncError()):(e.delegate.setIxLastUpdate(r,n.modelIxUpdate[r]),void h.chain(null!=(o=n.messages)?o:[]).map(v).compact().forEach(function(e){var n,r;r=e.notify,n=e.idModelChannel,t.trigger(r.event,h.extend({idModelChannel:n},r))}))}).catch(o,function(){})}}(this)),d.all(r).catch(p.SyncError,function(e){return function(){return c.syncError(),e.stopPolling()}}(this)).catch(a.BatchFailure,function(){}).done(),i.send().tap(function(e){var t;return t=e.jqxhr,u.setServerVersionFromResponse(t)}).catch(a.BatchFailure,function(e){var t,n;return n=e.message,t=e.error,d.reject(p.BatchError(n,{error:t}))}).nodeify(n).done()},e}()},{}],220:[function(e,t,n){var r,o,i,s,a,u,c,l;r=e("jquery"),o=e(211),c=e(239),l=e(231),u=e(70),s=e("bluebird"),a=e("underscore"),t.exports=i=function(){function e(){this._requests=[]}return e.BatchFailure=c("Batcher::BatchFailure"),e.prototype._sent=!1,e.prototype.request=function(e){return u(!this._sent,"Cannot add requests to a batcher after sending!"),new s(function(t){return function(n,r){return t._requests.push({url:e,resolve:n,reject:r})}}(this))},e.prototype.send=function(){var t;return u(!this._sent,"Cannot send more than once!"),this._sent=!0,t=this._requests.map(l.get("url")).join(","),new s(function(n){return function(i,s){return r.ajax({data:{urls:t},url:"/1/batch",success:function(e,t,r){var s,u,c,l,d,p,h,m;for(c=a.zip(e,n._requests),s=0,u=c.length;u>s;s++)l=c[s],m=l[0],d=l[1],h=d.resolve,p=d.reject,"200"in m?h(m[200]):p(o.fromResponse(m.statusCode,m.message));return i({jqxhr:r})},error:function(t){var r,i,a,u,c,l,d;for(d=t.status,l=t.responseText,r=o.fromResponse(d,l),u=n._requests,i=0,a=u.length;a>i;i++)(c=u[i].reject)(e.BatchFailure("",{error:r}));return s(r)}})}}(this))},e}()},{}],221:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=[].slice;r=e(219),o=e(29),i=e(227),a=e(225),u=e(222),c=e(114),l=e("underscore"),d=e(40),p=e(43),window.dropTheHammer=function(){return c.set("useWebsockets","yes"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0},window.pitStop=function(){return c.set("useWebsockets","no"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0},s=function(){function e(){this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null,this.currentSubscriptions={},this.fReadyToSubscribe=!1,this.deferredQueue=[],this.handleLogin()}return l.extend(e.prototype,i.Events),e.prototype.rpcReady=function(){var e,t,n,r;for(this.fReadyToSubscribe=!0,this.isUsingSocket()||this.rpcCurrent.poll(),this.trigger("ready"),r=this.deferredQueue,t=0,n=r.length;n>t;t++)(e=r[t])();return this.listenTo(this,"reconnect",function(e){return function(){return e.resubscribe()}}(this))},e.prototype.resubscribe=function(){var e,t,n,r;this.rpcCurrent.resync(),t=this.currentSubscriptions,n=[];for(e in t)r=t[e],n.push(this.subscribe(r.modelType,e,r.tags));return n},e.prototype.setActiveRPC=function(e){this.stopListening(this.rpcCurrent),this.rpcCurrent=e,this.listenTo(this.rpcCurrent,"all",function(e){return function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e.trigger.apply(e,t)}}(this))},e.prototype.lazyCreateRPC=function(){var e,t,n;if(!this.rpcCurrent){if(this.rpcSocket=new u(this),this.rpcAJAX=new r(this),this.setActiveRPC(this.rpcAJAX),e=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)?performance.now():+new Date},this.rpcSocket.hasSocketTransport()){if(this.rpcSocket.connectedOnce)return;return n=e(),t=8e3,setTimeout(function(e){return function(){return e.fReadyToSubscribe?void 0:(d("rpc","Socket not responsive. Using AJAX."),e.rpcSocket.disconnect(),e.rpcReady())}}(this),t),this.rpcSocket.ping(function(t){return function(r,o){t.fReadyToSubscribe?(t.rpcSocket.disconnect(),p("RPC","No Sockets","Slow ping",e()-n)):(d("rpc","Socket responded to ping in a timely fashion. Using sockets."),t.setActiveRPC(t.rpcSocket),t.rpcReady())}}(this))}return d("rpc","No socket connect. Using AJAX."),this.rpcReady()}},e.prototype.handleLogin=function(){return o.isLoggedIn()?this.lazyCreateRPC():void 0},e.prototype.unsubscribe=function(e,t){return this.lazyCreateRPC(),this.rpcCurrent.unsubscribe(e,t),delete this.currentSubscriptions[t]},e.prototype.subscribe=function(e,t,n){var r;return this.lazyCreateRPC(),null!=(r=this.currentSubscriptions[t])?r.tags=l.union(r.tags,n):this.currentSubscriptions[t]={tags:n,ixLastUpdate:-1,modelType:e,idModel:t},this.fReadyToSubscribe?this.rpcCurrent.subscribe(e,t,n):(d("rpc","deferring subscribe to "+e+" "+t),void this.deferredQueue.push(function(r){return function(){return r.rpcCurrent.subscribe(e,t,n)}}(this)))},e.prototype.getIxLastUpdate=function(e){var t;return null!=(t=this.currentSubscriptions[e])?t.ixLastUpdate:void 0},e.prototype.setIxLastUpdate=function(e,t){var n;return null!=(n=this.currentSubscriptions[e])?n.ixLastUpdate=t:void 0},e.prototype.resync=function(){var e,t;return t=1<=arguments.length?h.call(arguments,0):[],this.lazyCreateRPC(),"function"==typeof(e=this.rpcCurrent).resync?e.resync.apply(e,t):void 0},e.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket},e}(),t.exports=window.rpc=new s},{}],222:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=[].slice;r=e(29),o=e(227),i=e(36),s=e(107),a=e(225),c=e(114),l=e(126),d=e("underscore"),p=e(40),h=e(43),t.exports=u=function(){function e(e){var t,n,o,i,u,d,m,f,g,v;if(this.delegate=e,this.reqid=0,this.dictCallback={},this.dictTime={},this.connectedOnce=!1,this.modelIxUpdate={},this.hasSockets="WebSocket"in window&&"no"!==c.get("useWebsockets"),"WebSocket"in window?"no"===c.get("useWebsockets")&&h("RPC","No Sockets","pitStop"):h("RPC","No Sockets","No WebSocket"),this.hasSockets){for(p("rpc","opening newSocket"),m="http:"===document.location.protocol?"ws:":"wss:",this.socket=new a(m+"//"+document.location.host+"/1/Session/socket?token="+r.myToken(),{maxReconnectDelay:64e3,failedConsecutiveReconnectsLimit:10,reconnectRateLimit:3,reconnectRateWindow:l.getMs({minutes:5}),maxTotalReconnects:30,fxReconnectDelay:function(e){var t,n,r,o;if(o=s.getStatus(),r="active"===o?l.randomWait(l.getMs({seconds:10}),l.getMs({seconds:30})):l.randomWait(l.getMs({seconds:30}),l.getMs({minutes:2})),t="active"===o?l.randomWait(100,l.getMs({seconds:1})):l.randomWait(l.getMs({seconds:2}),l.getMs({seconds:10})),null==e||1006===e.code)return r;if(4e3===e.code){try{n=parseInt(e.reason,0)}catch(e){}return"active"===o?l.randomWait(l.getMs({seconds:n}),4*l.getMs({seconds:n})):l.randomWait(4*l.getMs({seconds:n}),4*l.getMs({seconds:n})*4)}return t}}),f=["connect","reconnect","connecting","reconnecting","disconnect","connect_failed","reconnect_failed","error"],t=function(e){return function(t){return e.socket.on(t,function(e){return p("rpc","socket event",t,e)})}}(this),o=0,u=f.length;u>o;o++)v=f[o],t(v);for(g=["connecting","reconnecting"],n=function(e){return function(t){return e.socket.on(t,function(){return p("rpc","connecting"),e.trigger("connecting")})}}(this),i=0,d=g.length;d>i;i++)v=g[i],n(v);this.socket.on("connect_failed",function(e){return function(){return p("rpc","connect_failed"),e.trigger("connect_failed")}}(this)),this.socket.on("reconnect_failed",function(e){return function(){return p("rpc","reconnect_failed"),e.trigger("reconnect_failed")}}(this)),this.socket.on("connect",function(e){return function(){return p("rpc","connect"),e.trigger("connect"),e.connectedOnce=!0}}(this)),this.socket.on("reconnect",function(e){return function(){return p("rpc","reconnect"),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,e.trigger("reconnect")}}(this)),this.socket.on("disconnect",function(e){return function(t){return p("rpc","disconnect",t),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse}}(this)),this.socket.on("error",function(e){return function(){var t,n;return e.connectedOnce&&!(null!=(t=e.socket)&&null!=(n=t.socket)?n.connected:void 0)?e.trigger("disconnect"):void 0}}(this)),this.socket.on("data",function(e){return function(t){return e._messageHandler(t)}}(this))}}return d.extend(e.prototype,o.Events),e.prototype._messageHandler=function(e){var t,n,r;return p("rpc","message",e),clearTimeout(this.timeoutInvokeResponse),delete this.timeoutInvokeResponse,(null!=e?e.version:void 0)?void i.setServerVersion(e):(null!=e.reqid&&(n=this.dictCallback["fx"+e.reqid]),null!=e.result?"function"==typeof n&&n(null,e.result):(null!=(r=e.notify)?r.event:void 0)?(null!=e.idModelChannel&&this.delegate.setIxLastUpdate(e.idModelChannel,e.ixLastUpdateChannel),this.trigger(e.notify.event,d.extend({idModelChannel:e.idModelChannel},e.notify))):e.error?"function"==typeof n&&n(e.error):p("rpc","unrecognized message",e),void(e.reqid&&(t=new Date-this.dictTime[e.reqid],p("timing","message",e.reqid,"time",t),delete this.dictCallback["fx"+e.reqid],delete this.dictTime[e.reqid])))},e.prototype.subscribe=function(e,t,n,r){return this.send({type:"subscribe",modelType:e,idModel:t,tags:n,invitationTokens:l.invitationTokens()},function(e){return function(n,o){return null!=n?p("rpc",n):e.delegate.setIxLastUpdate(t,o),"function"==typeof r?r(n,o):void 0}}(this))},e.prototype.unsubscribe=function(e,t,n){return this.send({type:"unsubscribe",modelType:e,idModel:t},function(e){return function(e,t){return null!=e&&p("rpc",e),"function"==typeof n?n(e,t):void 0}}(this))},e.prototype.ping=function(e){return this.send({type:"ping"},function(t){return function(t,n){return null!=t&&p("rpc",t),"function"==typeof e?e(t,n):void 0}}(this))},e.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(e){return function(e,t){return null!=t?p("rpc",t):void 0}}(this))},e.prototype.send=function(e,t){var n;this.dictCallback["fx"+this.reqid]=t,this.dictTime[this.reqid]=new Date,e.reqid=this.reqid++,n=JSON.stringify(e),p("rpc","invoke: "+n),this.socket.send(n),null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(e){return function(){var t;if(e.socket.state===a.CONNECTED)return p("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(e.timeoutInvokeResponse),delete e.timeoutInvokeResponse,null!=(t=e.socket)?t.disconnect():void 0}}(this),1e4))},e.prototype.resync=function(){var e;return e=1<=arguments.length?m.call(arguments,0):[],d.isEmpty(e)&&(e=null),this.delegate.rpcAJAX.doPoll(e,this,function(){})},e.prototype.disconnect=function(){p("rpc","disconnecting"),this.socket.disconnect()},e.prototype.hasSocketTransport=function(){return this.hasSockets},e}()},{}],223:[function(e,t,n){var r,o,i,s,a,u;r=e("jquery"),o=e(29),i=e(6),a=e(126),u=e(221),t.exports=s={start:function(){return u.on("ready",function(e){return function(){return r(window).on("beforeunload",function(){e.markCurrentBoardAsViewed()})}}(this)),u.on("updateModels deleteModels",function(e){return function(t){var n,r;n=t.idModelChannel,null!=n&&n===(null!=(r=i.getCurrentBoard())?r.id:void 0)&&e.scheduleMarkCurrentBoardAsViewed()}}(this))},markCurrentBoardAsViewed:function(){var e;return clearTimeout(this._markAsViewedTimeout),null!=(e=i.getCurrentBoard())?e.markAsViewed():void 0},scheduleMarkCurrentBoardAsViewed:function(){return clearTimeout(this._markAsViewedTimeout),this._markAsViewedTimeout=setTimeout(function(e){return function(){return e.markCurrentBoardAsViewed()}}(this),a.getMs({minutes:5}))}}},{}],224:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=[].slice;o=e(29),i=e("bluebird"),d=e("xtend"),r=e("jquery"),l=window.slackTrelloDomain,a=window.slackDomain,u="7737388dfc54ea015104894e3a0a56f9",c="",s=function(e){return new i(function(t,n){e=d(e,{success:function(){var e;e=1<=arguments.length?p.call(arguments,0):[],t(e)},error:function(){var e;e=1<=arguments.length?p.call(arguments,0):[],n(e)}}),r.ajax(e)})},t.exports.ajaxTrello=function(e){return e.url=l+e.url,null==e.data&&(e.data={}),e.data.cookie=document.cookie,s(e)}},{}],225:[function(e,t,n){var r,o,i,s,a,u,c,l=[].slice;r=e(227),s=e(126),a=e("underscore"),u=e(40),c=["close","error","message","open"],o=1001,t.exports=i=function(){function e(e,t){var n,o,i,u;for(this.url=e,u=null!=t?t:{},this.fxReconnectDelay=u.fxReconnectDelay,this.maxReconnectDelay=u.maxReconnectDelay,this.failedConsecutiveReconnectsLimit=u.failedConsecutiveReconnectsLimit,this.reconnectRateLimit=u.reconnectRateLimit,this.reconnectRateWindow=u.reconnectRateWindow,this.maxTotalReconnects=u.maxTotalReconnects,a.extend(this,r.Events),this.ws=null,this.resetRetries(),o=0,i=c.length;i>o;o++)n=c[o],this.listenTo(this,n,this["on"+s.capitalize(n)]);return"WebSocket"in window?(this.mustNeverReconnect=!1,this.reconnectRateAttempts=0,this.totalReconnects=0,this.connect(),this.buffer=[],this.connectedOnce=!1,void this.trigger("connecting")):void this.trigger("connect_failed")}return e.CONNECTING="connecting",e.CONNECTED="connected",e.WAITING_TO_RECONNECT="waiting to reconnect",e.RECONNECTING="reconnecting",e.CLOSED="closed",e.PING_TIMEOUT=3e4,e.prototype._setReconnectBackOff=function(){return null==this._timeoutBackOff?this._timeoutBackOff=setTimeout(function(e){return function(){return clearTimeout(e._timeoutBackOff),delete e._timeoutBackOff,e.reconnectRateAttempts=0}}(this),this.reconnectRateWindow):void 0},e.prototype.resetRetries=function(){return this.failedConsecutiveReconnectAttempts=0},e.prototype._clearPingTimeout=function(){return null!=this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=null},e.prototype._resetPingTimeout=function(){return this._clearPingTimeout(),this._pingTimeout=setTimeout(this._noPing.bind(this),e.PING_TIMEOUT)},e.prototype._noPing=function(){return!this.state!==e.CONNECTED?this.disconnect():void 0},e.prototype.connect=function(){var t,n,r,o,i,s;if(null!=this.ws)for(r=0,i=c.length;i>r;r++)t=c[r],this.ws["on"+t]=null;for(this.ws=new WebSocket(this.url),n=function(e){return function(t){return e.ws["on"+t]=function(){return e.trigger.apply(e,[t].concat(l.call(arguments)))}}}(this),o=0,s=c.length;s>o;o++)t=c[o],n(t);return this.state=e.CONNECTING},e.prototype.onOpen=function(t){return this.connectedOnce?this.trigger("reconnect"):this.trigger("connect"),this.connectedOnce=!0,this.state=e.CONNECTED,this.flushBuffer(),this.resetRetries()},e.prototype._triggerFailures=function(){return this.state===e.CONNECTING?this.trigger("connect_failed"):void 0},e.prototype.onClose=function(e){var t;return this.trigger("disconnect",null!=(t=null!=e?e.reason:void 0)?t:""),(null!=e?e.code:void 0)===o&&(this.mustNeverReconnect=!0),this._triggerFailures(),this._clearPingTimeout(),this.reconnect(e)},e.prototype.onError=function(e){return this._triggerFailures(),this.disconnect(),this.reconnect()},e.prototype.onMessage=function(e){var t;if(this._resetPingTimeout(),""===e.data)return u("socket","responding to ping"),void this.ws.send("");try{t=JSON.parse(e.data)}catch(e){}return this.trigger("data",t)},e.prototype._shouldNotReconnect=function(){return this.failedConsecutiveReconnectAttempts>=this.failedConsecutiveReconnectsLimit||this.mustNeverReconnect||this.reconnectRateAttempts>=this.reconnectRateLimit||this.totalReconnects>=this.maxTotalReconnects},e.prototype.reconnect=function(t){switch(this.state){case e.CONNECTED:this.ws.close();break;case e.RECONNECTING:case e.WAITING_TO_RECONNECT:return}return this._setReconnectBackOff(),this._shouldNotReconnect()?(this.trigger("reconnect_failed"),void(this.state=e.CLOSED)):(this.state=e.WAITING_TO_RECONNECT,0===this.failedConsecutiveReconnectAttempts&&(this.currentReconnectDelay=this.fxReconnectDelay(t)),u("socket","attempting reconnect in "+this.currentReconnectDelay+"ms"),this._reconnectTimer=setTimeout(function(t){return function(){return t._reconnectTimer=null,t.connect(),t.state=e.RECONNECTING,t.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.totalReconnects++,this.failedConsecutiveReconnectAttempts++,this.reconnectRateAttempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay))},e.prototype.disconnect=function(){var t;switch(this._clearPingTimeout(),t=this.state,this.state=e.CLOSED,t){case e.CONNECTED:case e.CONNECTING:case e.RECONNECTING:return this.ws.close(),this.onClose();case e.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}},e.prototype.send=function(t){if(this.state!==e.CONNECTED)return this.buffer.push(t);try{return this.ws.send(t)}catch(e){return this.buffer.push(t),this.onError()}},e.prototype.flushBuffer=function(){var e,t,n,r,o;for(e=this.buffer,this.buffer=[],o=[],n=0,r=e.length;r>n;n++)t=e[n],o.push(this.send(t));return o},e}()},{}],226:[function(e,t,n){var r;r=e(253),t.exports={unsplashApi:new r.default({applicationId:"454087647775b190c574339cb2994716b17ef2f83ad11838d0ef0dac2d102e66"}),toJson:r.toJson}},{}],227:[function(e,t,n){var r,o,i,s;i=e(893),o=e(29),s=e("underscore"),r=e("jquery"),i.$=r,i.$=e("jquery"),i.prepareData=function(e,t,n){var i,a,u;return null==n&&(n={}),u={token:o.myToken()},a=function(){switch(e){case"create":case"update":return i=null!=n.requestData?s.clone(n.requestData):null!=n.createData?s.extend({},t.toJSON(),n.createData):s.clone(t.toJSON()),s.extend(i,u);case"delete":return u;default:return{}}}(),"read"===e&&s.isArray(n.fields)&&(a.fields=n.fields.join(",")),"read"===e?r.param(a):JSON.stringify(a)},i.syncOriginal=i.sync,i.sync=function(e,t,n){var r,o,a;switch(e){case"update":return null!=n&&"function"==typeof n.success?n.success(t,{},n):void 0;case"create":n.wait||(r=t.modelCache.lock("Backbone.sync create"),o=s.once(function(){return t.modelCache.unlock(r)}),a=function(e){return function(){return"function"==typeof e&&e.apply(null,arguments),o()}},setTimeout(a(),1e4),n.success=a(n.success),n.error=a(n.error));break;case"delete":if(/^placeholder/.test(t.id))return}return i.syncOriginal.apply(i,arguments)},t.exports=i},{}],228:[function(e,t,n){var r,o={}.hasOwnProperty;r=function(e){return function(t){switch(arguments.length){case 0:throw new Error("Operators can't be invoked with no arguments");case 1:return function(n){if(0===arguments.length)throw new Error("Partially applied binary operator can't be invoked with no arguments");return e.call(this,n,t)};default:return e.apply(null,arguments)}}},t.exports=function(e){var t,n,i;n={};for(t in e)o.call(e,t)&&(i=e[t],n[t]=r(i));return n}},{}],229:[function(e,t,n){var r,o,i=[].slice;o=e(238),r=function(e,t){return"function"==typeof e&&(t=e,e=t.length),function(){return arguments.length<e?r(e-arguments.length,o.apply(null,[t].concat(i.call(arguments)))):t.apply(this,arguments)}},t.exports=r},{}],230:[function(e,t,n){var r,o,i=[].slice;r=e(238),o=e(236),t.exports={noop:r(),id:function(e){return e},choke:function(){var e,t,n;return n=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e=r.apply(null,t),function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],e.apply(this,t.slice(0,n))}},concat:function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],function(){var t,n,r,o;for(n=void 0,r=0,o=e.length;o>r;r++)t=e[r],n=t.apply(this,arguments);return n}},compose:function(e,t){return function(){return e.call(this,t.apply(this,arguments))}},unpack:function(e){return function(t){return e.apply(this,t)}},invoke:function(){var e,t;return t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],t.apply(this,e)},guard:function(e,t,n){return function(){return t.apply(this,arguments)?e.apply(this,arguments):n}},const:function(e){return function(){return e}},once:function(e,t){return null==t&&(t="Function called more than once!"),o({first:e,after:function(){throw new Error(t)}})}}},{}],231:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h={}.hasOwnProperty;for(o=e(238),u=[e(233),e(232),e(234),e(237),e(230)],d=0,p=u.length;p>d;d++){a=u[d];for(i in a)h.call(a,i)&&(l=a[i],o[i]=l)}o.overloaded=e(235),o.curried=e(229),o.prime=e(236),r={sub:"subtract",mult:"multiply",div:"divide",idiv:"intDivide",mod:"modulo",neg:"negate",rem:"remainder",comp:"compose",dot:"get"};for(s in r)h.call(r,s)&&(c=r[s],o[s]=o[c]);t.exports=o},{}],232:[function(e,t,n){var r;r=e(228),t.exports=r({and:function(e,t){return e&&t},or:function(e,t){return e||t}}),t.exports.not=function(e){return!e}},{}],233:[function(e,t,n){var r;r=e(228),t.exports=r({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t},intDivide:function(e,t){return Math.floor(e/t)},modulo:function(e,t){return(e%t+t)%t},remainder:function(e,t){return e%t}}),t.exports.negate=function(e){return-e}},{}],234:[function(e,t,n){var r,o=[].slice;r=e(229),t.exports={get:r(function(e,t){return t[e]}),lookup:r(function(e,t){return e[t]}),set:r(function(e,t,n){return t[e]=n}),method:function(){var e,t;return t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],function(){var n,r;return r=arguments[0],n=2<=arguments.length?o.call(arguments,1):[],0===n.length?r[t].apply(r,e):r[t].apply(r,o.call(e).concat(o.call(n)))}}}},{}],235:[function(e,t,n){var r,o={}.hasOwnProperty;r=function(e,t){var n;return n=e.filter(function(e){return t>=e}),0===n.length?null:Math.max.apply(null,n)},t.exports=function(e){
var t,n,i,s,a;if(1!==arguments.length)throw new Error("overloaded is not overloaded!");if(n={},s=function(){var r;r=[];for(t in e)if(o.call(e,t)){if(a=e[t],i=Number(t),""===t||isNaN(i))throw new Error("non-numeric key "+t);n[i]=a,r.push(i)}return r}(),0===s.length)throw new Error("you must pass at least one overload!");return function(){var e,t,o;return t=arguments.length,e=null!=(o=n[t])?o:function(){if(t=r(s,t),null===t)throw new Error("function not overloaded to accept "+arguments.length+" arguments");return n[t]}(),e.apply(this,arguments)}}},{}],236:[function(e,t,n){var r,o,i=[].slice;r=e(238),o=function(){var e,t,n,r,o,s,a;for(t=arguments[0],e=arguments[1],r=3<=arguments.length?i.call(arguments,2):[],o=void 0,s=0,a=r.length;a>s;s++)n=r[s],null!=n&&(o=n.apply(t,e));return o},t.exports=function(e){var t,n,r,i,s,a;return s=e.first,t=e.after,r=e.beforeBoth,n=e.afterBoth,i=e.both,n=null!=n?n:i,a=!0,function(){return o(this,arguments,r,a?(a=!1,s):t,n)}}},{}],237:[function(e,t,n){var r;r=e(228),t.exports=r({gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return t>e},lte:function(e,t){return t>=e},eq:function(e,t){return e===t},neq:function(e,t){return e!==t}})},{}],238:[function(e,t,n){var r,o,i,s,a,u,c=[].slice;s=function(){},r=null!=(u=Array.isArray)?u:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=function(e){return"function"==typeof e},i=function(e){return"string"==typeof e},a=function(){var e,t,n,r,a;return n=1<=arguments.length?c.call(arguments,0):[],0===n.length?s:null==n[0]?s:"function"==typeof n[0]?(t=n[0],e=2<=n.length?c.call(n,1):[],0===e.length?t:function(){return t.call.apply(t,[this].concat(c.call(e),c.call(arguments)))}):(a=n[0],r=n[1],e=3<=n.length?c.call(n,2):[],t=function(){if(i(r))return a[r];if(o(r))return r;throw new Error("The [target, method, args...] functionoid requires a string or a function as the method")}(),function(){return t.call.apply(t,[a].concat(c.call(e),c.call(arguments)))})},t.exports=a},{}],239:[function(e,t,n){var r=Object.prototype.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var o in t)r.call(t,o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype},i=function(e){return function(t){for(var n=Array.prototype.slice.call(arguments,1),o=0;o<n.length;o++){var i=n[o];for(var s in i)r.call(i,s)&&e(t,s,i)&&(t[s]=i[s])}return t}},s=i(function(){return!0}),a=i(function(e,t){return"undefined"==typeof e[t]});t.exports=function(e,t,n){function i(e,n){if(!(this instanceof i)){var r=new i(e,n);return null!=Error.captureStackTrace&&Error.captureStackTrace(r,arguments.callee),r}Error.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),this.message=e,a(this,n,t);var o=this.message||e;delete this.message,Object.defineProperty(this,"message",{get:function(){return this.getMessage(o)},set:function(e){o=e}})}return null==n&&(n=Error),o(i,n),i.prototype.name=e,i.prototype.getMessage=function(e){return e},i.prototype.toObject=function(){var e={};for(var t in this)r.call(this,t)&&(e[t]=this[t]);return e},i.prototype.toJSON=function(){return s({message:this.message},this.toObject())},i}},{}],240:[function(e,t,n){!function(e,t){"use strict";function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||l(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?o/n:0}function r(e,t){var n=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=i(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function o(){return e.performance&&performance.now&&performance.now()}function i(e,t){var n=null;return function(){n||(n=setTimeout(function(){e(),n=null},t))}}function s(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function u(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left),i=Math.min(e.right,t.right),s=i-o,a=r-n;return s>=0&&a>=0&&{top:n,bottom:r,left:o,right:i,width:s,height:a}}function c(e){var t=e.getBoundingClientRect();if(t)return t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t}function l(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}if(!("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)){var d=t.documentElement,p=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||0>e||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=e||"0px",n=t.split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():l();this._observationTargets.forEach(function(r){var i=r.element,s=c(i),a=this._rootContainsTarget(i),u=r.entry,l=e&&a&&this._computeTargetAndRootIntersection(i,t),d=r.entry=new n({time:o(),target:i,boundingClientRect:s,rootBounds:t,intersectionRect:l});e&&a?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=e.getComputedStyle(t).display){for(var r=c(t),o=r,i=t.parentNode,s=!1;!s;){var a=null;if(i==this.root||1!=i.nodeType?(s=!0,a=n):"visible"!=e.getComputedStyle(i).overflow&&(a=c(i)),a&&(o=u(a,o),!o))break;i=i.parentNode}return o}},r.prototype._getRootRect=function(){var e;if(this.root)e=c(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var i=this.thresholds[o];if(i==n||i==r||n>i!=r>i)return!0}},r.prototype._rootIsInDom=function(){return!this.root||d.contains(this.root)},r.prototype._rootContainsTarget=function(e){return(this.root||d).contains(e)},r.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},r.prototype._unregisterInstance=function(){var e=p.indexOf(this);-1!=e&&p.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=n}}(window,document)},{}],241:[function(e,t,n){!function(n){"function"==typeof define&&define.amd?define(["jquery"],function(e){n(e,window,document)}):"object"==typeof t&&t.exports?t.exports=n(e("jquery"),window,document):n(jQuery,window,document)}(function(e,t,n,r){"use strict";function o(t,n){this.telInput=e(t),this.options=e.extend({},a,n),this.ns="."+i+s++,this.isGoodBrowser=Boolean(t.setSelectionRange),this.hadInitialPlaceholder=Boolean(e(t).attr("placeholder"))}var i="intlTelInput",s=1,a={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customPlaceholder:null,dropdownContainer:"",excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,initialCountry:"",nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},u={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9},c=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];e(t).on("load",function(){e.fn[i].windowLoaded=!0}),o.prototype={_init:function(){return this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(e("body").addClass("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer="body")),this.autoCountryDeferred=new e.Deferred,this.utilsScriptDeferred=new e.Deferred,this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests(),[this.autoCountryDeferred,this.utilsScriptDeferred]},_processCountryData:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries()},_addCountryCode:function(e,t,n){t in this.countryCodes||(this.countryCodes[t]=[]);var r=n||0;this.countryCodes[t][r]=e},_filterCountries:function(e,t){var n;for(n=0;n<e.length;n++)e[n]=e[n].toLowerCase();for(this.countries=[],n=0;n<l.length;n++)t(e.indexOf(l[n].iso2))&&this.countries.push(l[n])},_processAllCountries:function(){this.options.onlyCountries.length?this._filterCountries(this.options.onlyCountries,function(e){return e>-1}):this.options.excludeCountries.length?this._filterCountries(this.options.excludeCountries,function(e){return-1==e}):this.countries=l},_processCountryCodes:function(){this.countryCodes={};for(var e=0;e<this.countries.length;e++){var t=this.countries[e];if(this._addCountryCode(t.iso2,t.dialCode,t.priority),t.areaCodes)for(var n=0;n<t.areaCodes.length;n++)this._addCountryCode(t.iso2,t.dialCode+t.areaCodes[n])}},_processPreferredCountries:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),n=this._getCountryData(t,!1,!0);n&&this.preferredCountries.push(n)}},_generateMarkup:function(){this.telInput.attr("autocomplete","off");var t="intl-tel-input";this.options.allowDropdown&&(t+=" allow-dropdown"),this.options.separateDialCode&&(t+=" separate-dial-code"),this.telInput.wrap(e("<div>",{class:t})),this.flagsContainer=e("<div>",{class:"flag-container"}).insertBefore(this.telInput);var n=e("<div>",{class:"selected-flag"});n.appendTo(this.flagsContainer),this.selectedFlagInner=e("<div>",{class:"iti-flag"}).appendTo(n),this.options.separateDialCode&&(this.selectedDialCode=e("<div>",{class:"selected-dial-code"}).appendTo(n)),this.options.allowDropdown?(n.attr("tabindex","0"),e("<div>",{class:"iti-arrow"}).appendTo(n),this.countryList=e("<ul>",{class:"country-list hide"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"preferred"),e("<li>",{class:"divider"}).appendTo(this.countryList)),this._appendListItems(this.countries,""),this.countryListItems=this.countryList.children(".country"),this.options.dropdownContainer?this.dropdown=e("<div>",{class:"intl-tel-input iti-container"}).append(this.countryList):this.countryList.appendTo(this.flagsContainer)):this.countryListItems=e()},_appendListItems:function(e,t){for(var n="",r=0;r<e.length;r++){var o=e[r];n+="<li class='country "+t+"' data-dial-code='"+o.dialCode+"' data-country-code='"+o.iso2+"'>",n+="<div class='flag-box'><div class='iti-flag "+o.iso2+"'></div></div>",n+="<span class='country-name'>"+o.name+"</span>",n+="<span class='dial-code'>+"+o.dialCode+"</span>",n+="</li>"}this.countryList.append(n)},_setInitialState:function(){var e=this.telInput.val();this._getDialCode(e)&&!this._isRegionlessNanp(e)?this._updateFlagFromNumber(e):"auto"!==this.options.initialCountry&&(this.options.initialCountry?this._setFlag(this.options.initialCountry.toLowerCase()):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,e||this._setFlag(this.defaultCountry)),e||this.options.nationalMode||this.options.autoHideDialCode||this.options.separateDialCode||this.telInput.val("+"+this.selectedCountryData.dialCode)),e&&this._updateValFromNumber(e)},_initListeners:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initFocusListeners(),this.options.allowDropdown&&this._initDropdownListeners()},_initDropdownListeners:function(){var e=this,t=this.telInput.closest("label");t.length&&t.on("click"+this.ns,function(t){e.countryList.hasClass("hide")?e.telInput.focus():t.preventDefault()});var n=this.selectedFlagInner.parent();n.on("click"+this.ns,function(t){!e.countryList.hasClass("hide")||e.telInput.prop("disabled")||e.telInput.prop("readonly")||e._showDropdown()}),this.flagsContainer.on("keydown"+e.ns,function(t){var n=e.countryList.hasClass("hide");!n||t.which!=u.UP&&t.which!=u.DOWN&&t.which!=u.SPACE&&t.which!=u.ENTER||(t.preventDefault(),t.stopPropagation(),e._showDropdown()),t.which==u.TAB&&e._closeDropdown()})},_initRequests:function(){var n=this;this.options.utilsScript?e.fn[i].windowLoaded?e.fn[i].loadUtils(this.options.utilsScript,this.utilsScriptDeferred):e(t).on("load",function(){e.fn[i].loadUtils(n.options.utilsScript,n.utilsScriptDeferred)}):this.utilsScriptDeferred.resolve(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.autoCountryDeferred.resolve()},_loadAutoCountry:function(){e.fn[i].autoCountry?this.handleAutoCountry():e.fn[i].startedLoadingAutoCountry||(e.fn[i].startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(t){e.fn[i].autoCountry=t.toLowerCase(),setTimeout(function(){e(".intl-tel-input input").intlTelInput("handleAutoCountry")})}))},_initKeyListeners:function(){var e=this;this.telInput.on("keyup"+this.ns,function(){e._updateFlagFromNumber(e.telInput.val())&&e._triggerCountryChange()}),this.telInput.on("cut"+this.ns+" paste"+this.ns,function(){setTimeout(function(){e._updateFlagFromNumber(e.telInput.val())&&e._triggerCountryChange()})})},_cap:function(e){var t=this.telInput.attr("maxlength");return t&&e.length>t?e.substr(0,t):e},_initFocusListeners:function(){var t=this;this.telInput.on("mousedown"+this.ns,function(e){t.telInput.is(":focus")||t.telInput.val()||(e.preventDefault(),t.telInput.focus())}),this.telInput.on("focus"+this.ns,function(e){t.telInput.val()||t.telInput.prop("readonly")||!t.selectedCountryData.dialCode||(t.telInput.val("+"+t.selectedCountryData.dialCode),t.telInput.one("keypress.plus"+t.ns,function(e){e.which==u.PLUS&&t.telInput.val("")}),setTimeout(function(){var e=t.telInput[0];if(t.isGoodBrowser){var n=t.telInput.val().length;e.setSelectionRange(n,n)}}))});var n=this.telInput.prop("form");n&&e(n).on("submit"+this.ns,function(){t._removeEmptyDialCode()}),this.telInput.on("blur"+this.ns,function(){t._removeEmptyDialCode()})},_removeEmptyDialCode:function(){var e=this.telInput.val(),t="+"==e.charAt(0);if(t){var n=this._getNumeric(e);n&&this.selectedCountryData.dialCode!=n||this.telInput.val("")}this.telInput.off("keypress.plus"+this.ns)},_getNumeric:function(e){return e.replace(/\D/g,"")},_showDropdown:function(){this._setDropdownPosition();var e=this.countryList.children(".active");e.length&&(this._highlightListItem(e),this._scrollTo(e)),this._bindDropdownListeners(),this.selectedFlagInner.children(".iti-arrow").addClass("up")},_setDropdownPosition:function(){var n=this;if(this.options.dropdownContainer&&this.dropdown.appendTo(this.options.dropdownContainer),this.dropdownHeight=this.countryList.removeClass("hide").outerHeight(),!this.isMobile){var r=this.telInput.offset(),o=r.top,i=e(t).scrollTop(),s=o+this.telInput.outerHeight()+this.dropdownHeight<i+e(t).height(),a=o-this.dropdownHeight>i;if(this.countryList.toggleClass("dropup",!s&&a),this.options.dropdownContainer){var u=!s&&a?0:this.telInput.innerHeight();this.dropdown.css({top:o+u,left:r.left}),e(t).on("scroll"+this.ns,function(){n._closeDropdown()})}}},_bindDropdownListeners:function(){var t=this;this.countryList.on("mouseover"+this.ns,".country",function(n){t._highlightListItem(e(this))}),this.countryList.on("click"+this.ns,".country",function(n){t._selectListItem(e(this))});var r=!0;e("html").on("click"+this.ns,function(e){r||t._closeDropdown(),r=!1});var o="",i=null;e(n).on("keydown"+this.ns,function(e){e.preventDefault(),e.which==u.UP||e.which==u.DOWN?t._handleUpDownKey(e.which):e.which==u.ENTER?t._handleEnterKey():e.which==u.ESC?t._closeDropdown():(e.which>=u.A&&e.which<=u.Z||e.which==u.SPACE)&&(i&&clearTimeout(i),o+=String.fromCharCode(e.which),t._searchForCountry(o),i=setTimeout(function(){o=""},1e3))})},_handleUpDownKey:function(e){var t=this.countryList.children(".highlight").first(),n=e==u.UP?t.prev():t.next();n.length&&(n.hasClass("divider")&&(n=e==u.UP?n.prev():n.next()),this._highlightListItem(n),this._scrollTo(n))},_handleEnterKey:function(){var e=this.countryList.children(".highlight").first();e.length&&this._selectListItem(e)},_searchForCountry:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var n=this.countryList.children("[data-country-code="+this.countries[t].iso2+"]").not(".preferred");this._highlightListItem(n),this._scrollTo(n,!0);break}},_startsWith:function(e,t){return e.substr(0,t.length).toUpperCase()==t},_updateValFromNumber:function(e){if(this.options.formatOnDisplay&&t.intlTelInputUtils&&this.selectedCountryData){var n=this.options.separateDialCode||!this.options.nationalMode&&"+"==e.charAt(0)?intlTelInputUtils.numberFormat.INTERNATIONAL:intlTelInputUtils.numberFormat.NATIONAL;e=intlTelInputUtils.formatNumber(e,this.selectedCountryData.iso2,n)}e=this._beforeSetNumber(e),this.telInput.val(e)},_updateFlagFromNumber:function(e){e&&this.options.nationalMode&&this.selectedCountryData&&"1"==this.selectedCountryData.dialCode&&"+"!=e.charAt(0)&&("1"!=e.charAt(0)&&(e="1"+e),e="+"+e);var t=this._getDialCode(e),n=null,r=this._getNumeric(e);if(t){var o=this.countryCodes[this._getNumeric(t)],i=this.selectedCountryData&&o.indexOf(this.selectedCountryData.iso2)>-1,s="+1"==t&&r.length>=4,a=this.selectedCountryData&&"1"==this.selectedCountryData.dialCode;if((!a||!this._isRegionlessNanp(r))&&(!i||s))for(var u=0;u<o.length;u++)if(o[u]){n=o[u];break}}else"+"==e.charAt(0)&&r.length?n="":e&&"+"!=e||(n=this.defaultCountry);return null!==n?this._setFlag(n):!1},_isRegionlessNanp:function(e){var t=this._getNumeric(e);if("1"==t.charAt(0)){var n=t.substr(1,3);return c.indexOf(n)>-1}return!1},_highlightListItem:function(e){this.countryListItems.removeClass("highlight"),e.addClass("highlight")},_getCountryData:function(e,t,n){for(var r=t?l:this.countries,o=0;o<r.length;o++)if(r[o].iso2==e)return r[o];if(n)return null;throw new Error("No country data for '"+e+"'")},_setFlag:function(e){var t=this.selectedCountryData&&this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.attr("class","iti-flag "+e);var n=e?this.selectedCountryData.name+": +"+this.selectedCountryData.dialCode:"Unknown";if(this.selectedFlagInner.parent().attr("title",n),this.options.separateDialCode){var r=this.selectedCountryData.dialCode?"+"+this.selectedCountryData.dialCode:"",o=this.telInput.parent();t.dialCode&&o.removeClass("iti-sdc-"+(t.dialCode.length+1)),r&&o.addClass("iti-sdc-"+r.length),this.selectedDialCode.text(r)}return this._updatePlaceholder(),this.countryListItems.removeClass("active"),e&&this.countryListItems.find(".iti-flag."+e).first().closest(".country").addClass("active"),t.iso2!==e},_updatePlaceholder:function(){var e="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&(this.options.autoPlaceholder===!0||"polite"===this.options.autoPlaceholder);if(t.intlTelInputUtils&&e&&this.selectedCountryData){var n=intlTelInputUtils.numberType[this.options.placeholderNumberType],r=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,n):"";r=this._beforeSetNumber(r),"function"==typeof this.options.customPlaceholder&&(r=this.options.customPlaceholder(r,this.selectedCountryData)),this.telInput.attr("placeholder",r)}},_selectListItem:function(e){var t=this._setFlag(e.attr("data-country-code"));if(this._closeDropdown(),this._updateDialCode(e.attr("data-dial-code"),!0),this.telInput.focus(),this.isGoodBrowser){var n=this.telInput.val().length;this.telInput[0].setSelectionRange(n,n)}t&&this._triggerCountryChange()},_closeDropdown:function(){this.countryList.addClass("hide"),this.selectedFlagInner.children(".iti-arrow").removeClass("up"),e(n).off(this.ns),e("html").off(this.ns),this.countryList.off(this.ns),this.options.dropdownContainer&&(this.isMobile||e(t).off("scroll"+this.ns),this.dropdown.detach())},_scrollTo:function(e,t){var n=this.countryList,r=n.height(),o=n.offset().top,i=o+r,s=e.outerHeight(),a=e.offset().top,u=a+s,c=a-o+n.scrollTop(),l=r/2-s/2;if(o>a)t&&(c-=l),n.scrollTop(c);else if(u>i){t&&(c+=l);var d=r-s;n.scrollTop(c-d)}},_updateDialCode:function(e,t){var n,r=this.telInput.val();if(e="+"+e,"+"==r.charAt(0)){var o=this._getDialCode(r);n=o?r.replace(o,e):e}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(r)n=e+r;else{if(!t&&this.options.autoHideDialCode)return;n=e}}this.telInput.val(n)},_getDialCode:function(t){var n="";if("+"==t.charAt(0))for(var r="",o=0;o<t.length;o++){var i=t.charAt(o);if(e.isNumeric(i)&&(r+=i,this.countryCodes[r]&&(n=t.substr(0,o+1)),4==r.length))break}return n},_getFullNumber:function(){var t,n=e.trim(this.telInput.val()),r=this.selectedCountryData.dialCode,o=this._getNumeric(n),i="1"==o.charAt(0)?o:"1"+o;return t=this.options.separateDialCode?"+"+r:"+"!=n.charAt(0)&&"1"!=n.charAt(0)&&r&&"1"==r.charAt(0)&&4==r.length&&r!=i.substr(0,4)?r.substr(1):"",t+n},_beforeSetNumber:function(e){if(this.options.separateDialCode){var t=this._getDialCode(e);if(t){null!==this.selectedCountryData.areaCodes&&(t="+"+this.selectedCountryData.dialCode);var n=" "===e[t.length]||"-"===e[t.length]?t.length+1:t.length;e=e.substr(n)}}return this._cap(e)},_triggerCountryChange:function(){this.telInput.trigger("countrychange",this.selectedCountryData)},handleAutoCountry:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=e.fn[i].autoCountry,this.telInput.val()||this.setCountry(this.defaultCountry),this.autoCountryDeferred.resolve())},handleUtils:function(){t.intlTelInputUtils&&(this.telInput.val()&&this._updateValFromNumber(this.telInput.val()),this._updatePlaceholder()),this.utilsScriptDeferred.resolve()},destroy:function(){if(this.allowDropdown&&(this._closeDropdown(),this.selectedFlagInner.parent().off(this.ns),this.telInput.closest("label").off(this.ns)),this.options.autoHideDialCode){var t=this.telInput.prop("form");t&&e(t).off(this.ns)}this.telInput.off(this.ns);var n=this.telInput.parent();n.before(this.telInput).remove()},getExtension:function(){return t.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""},getNumber:function(e){return t.intlTelInputUtils?intlTelInputUtils.formatNumber(this._getFullNumber(),this.selectedCountryData.iso2,e):""},getNumberType:function(){return t.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99},getSelectedCountryData:function(){return this.selectedCountryData||{}},getValidationError:function(){return t.intlTelInputUtils?intlTelInputUtils.getValidationError(this._getFullNumber(),this.selectedCountryData.iso2):-99},isValidNumber:function(){var n=e.trim(this._getFullNumber()),r=this.options.nationalMode?this.selectedCountryData.iso2:"";return t.intlTelInputUtils?intlTelInputUtils.isValidNumber(n,r):null},setCountry:function(e){e=e.toLowerCase(),this.selectedFlagInner.hasClass(e)||(this._setFlag(e),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())},setNumber:function(e){var t=this._updateFlagFromNumber(e);this._updateValFromNumber(e),t&&this._triggerCountryChange()}},e.fn[i]=function(t){var n=arguments;if(t===r||"object"==typeof t){var s=[];return this.each(function(){if(!e.data(this,"plugin_"+i)){var n=new o(this,t),r=n._init();s.push(r[0]),s.push(r[1]),e.data(this,"plugin_"+i,n)}}),e.when.apply(null,s)}if("string"==typeof t&&"_"!==t[0]){var a;return this.each(function(){var r=e.data(this,"plugin_"+i);r instanceof o&&"function"==typeof r[t]&&(a=r[t].apply(r,Array.prototype.slice.call(n,1))),"destroy"===t&&e.data(this,"plugin_"+i,null)}),a!==r?a:this}},e.fn[i].getCountryData=function(){return l},e.fn[i].loadUtils=function(t,n){e.fn[i].loadedUtilsScript?n&&n.resolve():(e.fn[i].loadedUtilsScript=!0,e.ajax({type:"GET",url:t,complete:function(){e(".intl-tel-input input").intlTelInput("handleUtils")},dataType:"script",cache:!0}))},e.fn[i].version="10.0.6",e.fn[i].defaults=a;for(var l=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1246"],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1441"],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guernsey","gg","44",1],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1876"],["Japan ()","jp","81"],["Jersey","je","44",3],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["Macedonia (FYROM) ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco ()","ma","212",0],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47",0],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262",0],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy (Saint-Barthlemy)","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna","wf","681"],["Western Sahara ( )","eh","212",1],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["land Islands","ax","358",1]],d=0;d<l.length;d++){
var p=l[d];l[d]={name:p[0],iso2:p[1],dialCode:p[2],priority:p[3]||0,areaCodes:p[4]||null}}})},{}],242:[function(e,t,n){t.exports=e(241)},{}],243:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=t,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if(o=n.next(),o.done)break;i=o.value}var s=i;if(!e(s))return!1}return!0}},{}],244:[function(e,t,n){"use strict";var r=e(248);t.exports=new r(function(){return!0})},{}],245:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e(243),i=e(248),s=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push([e[r],t[r]]);return n},a=function(e){var t=r(e,2),n=t[0],o=t[1];return n(o)},u=function(e){return"string"==typeof e},c=function(e){return"boolean"==typeof e},l=function(e){return"number"==typeof e},d=function(e){return"function"==typeof e},p=void 0,h=function(e){var t=e.map(p);return function(n){return Array.isArray(n)&&e.length===n.length&&o(a,s(t,n))}},m=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,p(e[n])]);return function(e){if("object"!=typeof e)return!1;for(var n=t,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var s;if(o){if(i>=n.length)break;s=n[i++]}else{if(i=n.next(),i.done)break;s=i.value}var a=r(s,2),u=a[0],c=a[1];if(!(u in e&&c(e[u])))return!1}return!0}};p=function(e){return e instanceof i?e.matches:e===String?u:e===Boolean?c:e===Number?l:e===Function?d:e===Array?Array.isArray:Array.isArray(e)?h(e):"object"==typeof e?m(e):"function"==typeof e?function(t){return t instanceof e}:function(t){return t===e}},t.exports=p},{}],246:[function(e,t,n){"use strict";var r=e(248),o=e(247),i=e(245),s=e(243);o.Any=e(244),o.If=function(e){return new r(e)},o.Or=function(e,t){return e=i(e),t=i(t),new r(function(n){return e(n)||t(n)})},o.And=function(e,t){return e=i(e),t=i(t),new r(function(n){return e(n)&&t(n)})};var a=function(e){return Array.isArray(e)||"undefined"!=typeof Symbol&&e[Symbol.iterator]};o.List=function(e){return new r(function(t){return a(t)&&s(i(e),t)})},o.compile=i,o.overload=o,t.exports=o},{}],247:[function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=e(245),i=e(244);t.exports=function(e){if("function"!=typeof e)throw new Error("Pass a function to pattern.");var t=[],n=function(e,n){if(0===arguments.length)throw new Error("Cannot call match without arguments.");if(1===arguments.length&&(n=e,e=i),"function"!=typeof n)throw new Error("Final argument to match must be a function implementation.");t.push([o(e),n])};return e(function(){n.apply(this,arguments)}),n=function(){throw new Error("Cannot call match outside of a pattern invocation.")},function(){for(var e=arguments.length,n=Array(e),o=0;e>o;o++)n[o]=arguments[o];for(var i=t,s=Array.isArray(i),a=0,i=s?i:i[Symbol.iterator]();;){var u;if(s){if(a>=i.length)break;u=i[a++]}else{if(a=i.next(),a.done)break;u=a.value}var c=r(u,2),l=c[0],d=c[1];if(l(n))return d.apply(this,n)}throw new Error("No matching pattern")}}},{}],248:[function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=function e(t){r(this,e),this.matches=t,Object.freeze(this)}},{}],249:[function(e,t,n){var r=e("bluebird"),o=e(250),i=function(e){this.local=e.local,this.remote=e.remote,this.targetOrigin=e.targetOrigin,this.secret=e.secret,this.handlers=e.handlers,this.defaultHandler=e.defaultHandler,this.hostHandlers=e.hostHandlers,this._pendingRequests={},this._messageQueue=[],this.listen()},s="not handled",a="unsupported command";i.NotHandled=o("PostMessageIO:NotHandled",{code:s}),i.UnsupportedCommand=o("PostMessageIO:UnsupportedCommand",{code:a});var u=function(e,t){return Array.prototype.slice.call(e,t)},c=function(){var e={};return u(arguments,0).forEach(function(t){if(t)for(key in t)e[key]=t[key]}),e},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.randomId=function(e){e=e||16;var t=[];if(window.crypto&&window.crypto.getRandomValues)t=window.crypto.getRandomValues(new Uint32Array(e));else if("object"==typeof window.msCrypto&&"function"==typeof window.msCrypto.getRandomValues)t=window.msCrypto.getRandomValues(new Uint32Array(e));else for(;t.length<e;)t.push(Math.floor(Math.random()*l.length));for(var n=[],r=0;e>r;r++)n.push(l[t[r]%l.length]);return n.join("")},i.prototype.listen=function(){var e=this;e.stop(),e.listener=function(t){var n=t.data,r=t.source;if(r==e.remote||n.secret==e.secret){var o=function(t){var n=t.data;switch(t.type){case"request":e._handleRequest(n.id,n.command,n.args,r);break;case"response":e._handleResponse(n.to,n.success,n.response);break;case"bulk":n.forEach(o)}};o(n)}},this.local.addEventListener("message",e.listener)},i.prototype.stop=function(){this.local.removeEventListener("message",self.listener)},i.prototype._handleRequest=function(e,t,n,o){var s=this,a=c(s.hostHandlers,{NotHandled:i.NotHandled,command:t,args:n,source:o,request:function(){return s.request.apply(s,u(arguments,0).concat([o]))},secret:s.secret});r.try(function(){if(!s.handlers.hasOwnProperty(t)){if(s.defaultHandler)return s.defaultHandler.apply(s,[a,t].concat(n));throw new i.UnsupportedCommand("unsupported command: "+t)}return s.handlers[t].apply(s,[a].concat(n))}).then(function(t){s.respond(e,!0,t,o)}).catch(i.NotHandled,i.UnsupportedCommand,function(t){s.respond(e,!1,{code:t.code,message:t.message},o)}).done()},i.prototype._handleResponse=function(e,t,n){var r=this;if(r._pendingRequests.hasOwnProperty(e))if(t)r._pendingRequests[e].resolve(n);else{var o=null;switch(n.code){case s:o=new i.NotHandled(n.message);break;case a:o=new i.UnsupportedCommand(n.message);break;default:o=new Error(n.message)}r._pendingRequests[e].reject(o)}},i.prototype.raw=function(e,t,n){var r=this;if("bulk"==e){var o={secret:r.secret,type:e,data:t};n?n.postMessage(o,"*"):r.remote.postMessage(o,r.targetOrigin)}else 0==r._messageQueue.length&&setTimeout(r.emptyQueue.bind(r),0),r._messageQueue.push({type:e,data:t,target:n})},i.prototype.emptyQueue=function(){var e=this,t=e._messageQueue;e._messageQueue=[];for(var n=0;n<t.length;n++){var r=t[n];if(!r.sent){for(var o=r.target,i=[],s=n;s<t.length;s++)t[s].target==o&&(i.push({type:t[s].type,data:t[s].data}),t[s].sent=!0);e.raw("bulk",i,o)}}},i.prototype.request=function(e){var t=this,n=u(arguments,1),o=i.randomId(),s=void 0,a=n[n.length-1];return a&&"function"==typeof a.postMessage&&(s=n.pop()),t.raw("request",{id:o,command:e,args:n},s),new r(function(r,i){t._pendingRequests[o]={id:o,command:e,args:n,resolve:r,reject:i}})},i.prototype.respond=function(e,t,n,r){var o=this;o.raw("response",{to:e,success:t,response:n},r)},t.exports=i},{}],250:[function(e,t,n){arguments[4][239][0].apply(n,arguments)},{}],251:[function(e,t,n){var r=Object.prototype.hasOwnProperty,o=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return"object"!=typeof e&&(e=null),t.reduce(function(e,t){return"object"!=typeof t||null===t?e:Object.create(e,i(t))},e)},i=function(e){var t=Object.getOwnPropertyNames(e);return t.reduce(function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t},Object.create(null))},s=function(e,t){return"undefined"==typeof t&&(t=Object.prototype),a(e,t,{})},a=function(e,t,n){u(n,i(e));var r=Object.getPrototypeOf(e);return r===t||null===r?Object.create(r,n):a(r,t,n)},u=function(e,t){Object.keys(t).forEach(function(n){r.call(e,n)||(e[n]=t[n])})};t.exports=o,t.exports.getOwnPropertyDescriptorMap=i,t.exports.flatten=s},{}],252:[function(e,t,n){(function(){var e,n,r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=[].slice,C=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};n={default:"<!DOCTYPE html>",5:"<!DOCTYPE html>",xml:'<?xml version="1.0" encoding="utf-8" ?>',transitional:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',strict:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',frameset:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">',1.1:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">',basic:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">',mobile:'<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">',ce:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "ce-html-1.0-transitional.dtd">'},r={regular:"a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins kbd label legend li map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp section select small span strong sub summary sup table tbody td textarea tfoot th thead time title tr u ul video",raw:"style",script:"script",void:"area base br col command embed hr img input keygen link meta param source track wbr",obsolete:"applet acronym bgsound dir frameset noframes isindex listing nextid noembed plaintext rb strike xmp big blink center font marquee multicol nobr spacer tt",obsolete_void:"basefont frame"},g=function(){var e,t,n,o,i,s,a,u,c;for(t=1<=arguments.length?k.call(arguments,0):[],c=[],o=0,s=t.length;s>o;o++)for(e=t[o],u=r[e].split(" "),i=0,a=u.length;a>i;i++)n=u[i],C.call(c,n)<0&&c.push(n);return c},e=function(){function e(){this.htmlOut=null}return e.prototype.resetBuffer=function(e){var t;return null==e&&(e=null),t=this.htmlOut,this.htmlOut=e,t},e.prototype.render=function(){var e,t,n,r;r=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],t=this.resetBuffer("");try{r.apply(null,e)}finally{n=this.resetBuffer(t)}return n},e.prototype.cede=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.render.apply(this,e)},e.prototype.renderable=function(e){var t;return t=this,function(){var n,r;if(n=1<=arguments.length?k.call(arguments,0):[],null===t.htmlOut){t.htmlOut="";try{e.apply(this,n)}finally{r=t.resetBuffer()}return r}return e.apply(this,n)}},e.prototype.renderAttr=function(e,t){var n,r;return null==t?" "+e:t===!1?"":"data"===e&&"object"==typeof t?function(){var e;e=[];for(n in t)r=t[n],e.push(this.renderAttr("data-"+n,r));return e}.call(this).join(""):(t===!0&&(t=e)," "+e+"="+this.quote(this.escape(t.toString())))},e.prototype.attrOrder=["id","class"],e.prototype.renderAttrs=function(e){var t,n,r,o,i,s;for(i="",o=this.attrOrder,t=0,n=o.length;n>t;t++)r=o[t],r in e&&(i+=this.renderAttr(r,e[r]));for(r in e)s=e[r],C.call(this.attrOrder,r)>=0||(i+=this.renderAttr(r,s));return i},e.prototype.renderContents=function(){var e,t,n;if(e=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],null==e);else{if("function"!=typeof e)return this.text(e);if(n=e.apply(this,t),"string"==typeof n)return this.text(n)}},e.prototype.isSelector=function(e){var t;return e.length>1&&("#"===(t=e.charAt(0))||"."===t)},e.prototype.parseSelector=function(e){var t,n,r,o,i,s,a,u;for(r=null,t=[],s=e.split("."),n=0,i=s.length;i>n;n++)u=s[n],u=u.trim(),r?t.push(u):(a=u.split("#"),o=a[0],r=a[1],""!==o&&t.push(u));return{id:r,classes:t}},e.prototype.normalizeArgs=function(e){var t,n,r,o,i,s,a,u,c,l;for(n={},l=null,o=null,a=i=0,u=e.length;u>i;a=++i)if(t=e[a],null!=t)switch(typeof t){case"string":0===a&&this.isSelector(t)?(l=t,c=this.parseSelector(t)):o=t;break;case"function":case"number":case"boolean":o=t;break;case"object":t.constructor===Object?n=t:o=t;break;default:o=t}return null!=c&&(s=c.id,r=c.classes,null!=s&&(n.id=s),(null!=r?r.length:void 0)&&(n.class&&r.push(n.class),n.class=r.join(" "))),{attrs:n,contents:o,selector:l}},e.prototype.tag=function(){var e,t,n,r,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.renderContents(n),this.raw("</"+o+">")},e.prototype.rawTag=function(){var e,t,n,r,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.raw(n),this.raw("</"+o+">")},e.prototype.scriptTag=function(){var e,t,n,r,o;return o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,this.raw("<"+o+this.renderAttrs(t)+">"),this.renderContents(n),this.raw("</"+o+">")},e.prototype.selfClosingTag=function(){var e,t,n,r,o;if(o=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],r=this.normalizeArgs(e),t=r.attrs,n=r.contents,n)throw new Error("Teacup: <"+o+"/> must not have content.  Attempted to nest "+n);return this.raw("<"+o+this.renderAttrs(t)+" />")},e.prototype.coffeescript=function(e){return this.raw('<script type="text/javascript">(function() {\n  var __slice = [].slice,\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n      __hasProp = {}.hasOwnProperty,\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n  ('+this.escape(e.toString())+")();\n})();</script>")},e.prototype.comment=function(e){return this.raw("<!--"+this.escape(e)+"-->")},e.prototype.doctype=function(e){return null==e&&(e=5),this.raw(n[e])},e.prototype.ie=function(e,t){return this.raw("<!--[if "+this.escape(e)+"]>"),this.renderContents(t),this.raw("<![endif]-->")},e.prototype.text=function(e){if(null==this.htmlOut)throw new Error("Teacup: can't call a tag function outside a rendering context");return this.htmlOut+=null!=e&&this.escape(e.toString())||"",null},e.prototype.raw=function(e){return null!=e?(this.htmlOut+=e,null):void 0},e.prototype.escape=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.prototype.quote=function(e){return'"'+e+'"'},e.prototype.use=function(e){return e(this)},e.prototype.tags=function(){var e,t,n,r,o,i;for(e={},t=[].concat("cede coffeescript comment component doctype escape ie normalizeArgs raw render renderable script tag text use".split(" "),g("regular","obsolete","raw","void","obsolete_void")),n=function(t){return function(n){return e[n]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],t[n].apply(t,e)}}}(this),r=0,o=t.length;o>r;r++)i=t[r],n(i);return e},e.prototype.component=function(e){return function(t){return function(){var n,r,o,i,s,a;return n=1<=arguments.length?k.call(arguments,0):[],i=t.normalizeArgs(n),a=i.selector,r=i.attrs,o=i.contents,s=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],e.unshift(o),t.renderContents.apply(t,e)},e.apply(t,[a,r,s])}}(this)},e}(),v=g("regular","obsolete"),o=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.tag.apply(this,[t].concat(k.call(e)))}};for(u=0,d=v.length;d>u;u++)_=v[u],o(_);for(y=g("raw"),i=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.rawTag.apply(this,[t].concat(k.call(e)))}},c=0,p=y.length;p>c;c++)_=y[c],i(_);for(b=g("script"),s=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.scriptTag.apply(this,[t].concat(k.call(e)))}},l=0,h=b.length;h>l;l++)_=b[l],s(_);for(w=g("void","obsolete_void"),a=function(t){return e.prototype[t]=function(){var e;return e=1<=arguments.length?k.call(arguments,0):[],this.selfClosingTag.apply(this,[t].concat(k.call(e)))}},f=0,m=w.length;m>f;f++)_=w[f],a(_);("undefined"!=typeof t&&null!==t?t.exports:void 0)?(t.exports=(new e).tags(),t.exports.Teacup=e):"function"==typeof define&&define.amd?define("teacup",[],function(){return(new e).tags()}):(window.teacup=(new e).tags(),window.teacup.Teacup=e)}).call(this)},{}],253:[function(e,t,n){!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.Unsplash=r():e.Unsplash=r()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"function"==typeof e.json?e.json():e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.toJson=i;var a=n(1),u=n(11),c=n(3),l=r(c),d=n(6),p=r(d),h=n(10),m=r(h),f=n(7),g=r(f),v=n(4),y=r(v),b=n(5),w=r(b),_=n(8),k=r(_),C=n(9),x=r(C),j=function(){function e(t){o(this,e),this._apiUrl=t.apiUrl||a.API_URL,this._apiVersion=t.apiVersion||a.API_VERSION,this._applicationId=t.applicationId,this._secret=t.secret,this._callbackUrl=t.callbackUrl,this._bearerToken=t.bearerToken,this.auth=l.default.bind(this)(),this.currentUser=p.default.bind(this)(),this.users=m.default.bind(this)(),this.photos=g.default.bind(this)(),this.categories=y.default.bind(this)(),this.collections=w.default.bind(this)(),this.search=k.default.bind(this)(),this.stats=x.default.bind(this)()}return s(e,[{key:"request",value:function(e){var t=u.buildFetchOptions.bind(this)(e),n=t.url,r=t.options;return fetch(n,r)}}]),e}();t.default=j},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_URL="https://api.unsplash.com",t.API_VERSION="v1",t.OAUTH_AUTHORIZE_URL="https://unsplash.com/oauth/authorize",t.OAUTH_TOKEN_URL="https://unsplash.com/oauth/token"},function(e,t,n){"use strict";t.decode=t.parse=n(13),t.encode=t.stringify=n(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=this;return{getAuthenticationUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["public"],n=s.default.stringify({client_id:e._applicationId,redirect_uri:e._callbackUrl,response_type:"code",scope:t.length>1?t.join("+"):t.toString()});return decodeURIComponent(a.OAUTH_AUTHORIZE_URL+"?"+n)},userAuthentication:function(t){var n=a.OAUTH_TOKEN_URL;return e.request({url:n,method:"POST",body:{client_id:e._applicationId,client_secret:e._secret,redirect_uri:e._callbackUrl,grant_type:"authorization_code",code:t},oauth:!0})},setBearerToken:function(t){t&&(e._bearerToken=t)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(2),s=r(i),a=n(1)},function(e,t){"use strict";function n(){var e=this;return{listCategories:function(){var t="/categories";return e.request({url:t,method:"GET"})},category:function(t){var n="/categories/"+t;return e.request({url:n,method:"GET"})},categoryPhotos:function(t,n,r){var o="/categories/"+t+"/photos",i={page:n,per_page:r};return e.request({url:o,method:"GET",query:i})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{listCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections",o={page:t,per_page:n};return e.request({url:r,method:"GET",query:o})},listCuratedCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections/curated",o={page:t,per_page:n};return e.request({url:r,method:"GET",query:o})},listFeaturedCollections:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="/collections/featured",o={page:t,per_page:n};return e.request({url:r,method:"GET",query:o})},getCollection:r.bind(this,!1),getCuratedCollection:r.bind(this,!0),getCuratedCollectionPhotos:o.bind(this,!0),getCollectionPhotos:o.bind(this,!1),createCollection:i.bind(this,null),updateCollection:i.bind(this),deleteCollection:function(t){var n="/collections/"+t;return e.request({url:n,method:"DELETE"})},addPhotoToCollection:function(t,n){var r="/collections/"+t+"/add";return e.request({url:r,method:"POST",body:{photo_id:n}})},removePhotoFromCollection:function(t,n){var r="/collections/"+t+"/remove?photo_id="+n;return e.request({url:r,method:"DELETE"})}}}function r(e,t){var n=e?"/collections/curated/"+t:"/collections/"+t;return this.request({url:n,method:"GET"})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"latest",i=e?"/collections/curated/"+t+"/photos":"/collections/"+t+"/photos",s={page:n,per_page:r,order_by:o};return this.request({url:i,method:"GET",query:s})}function i(e,t,n,r){var o=e?"/collections/"+e:"/collections",i={title:t,description:n,private:r};return this.request({url:o,method:e?"PUT":"POST",body:i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{profile:function(){var t="/me";return e.request({url:t,method:"GET"})},updateProfile:function(t){var n="/me",r=t.username,o=t.firstName,i=t.lastName,s=t.email,a=t.url,u=t.location,c=t.bio,l=t.instagramUsername,d={username:r,first_name:o,last_name:i,email:s,url:a,location:u,bio:c,instagram_username:l};return Object.keys(d).forEach(function(e){d[e]||delete d[e]}),e.request({url:n,method:"PUT",body:d})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{listPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",o="/photos",i={page:t,per_page:n,order_by:r};return e.request({url:o,method:"GET",query:i})},listCuratedPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"latest",o="/photos/curated",i={page:t,per_page:n,order_by:r};return e.request({url:o,method:"GET",query:i})},searchPhotos:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i="/photos/search",s={query:t,category:n.length>1?n.join(","):n.toString(),page:r,per_page:o};return e.request({url:i,method:"GET",query:s})},getPhoto:function(t,n,r,o){var i="/photos/"+t,s={w:n,h:r,rect:o};return e.request({url:i,method:"GET",query:s})},getPhotoStats:function(t){var n="/photos/"+t+"/stats";return e.request({url:n,method:"GET"})},getRandomPhoto:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="/photos/random",r=t.collections||[],o={category:t.category,featured:t.featured,username:t.username,orientation:t.orientation,collections:r.join(),query:t.query,w:t.width,h:t.height,c:t.cacheBuster||(new Date).getTime()};return Object.keys(o).forEach(function(e){o[e]||delete o[e]}),e.request({url:n,method:"GET",query:o})},uploadPhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos";return e.request({url:n,method:"POST",body:{photo:t}})},likePhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos/"+t+"/like";return e.request({url:n,method:"POST"})},unlikePhoto:function(t){if(!e._bearerToken)throw new Error("Requires a bearerToken to be set.");var n="/photos/"+t+"/like";return e.request({url:n,method:"DELETE"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return{all:r.bind(this,"/search"),photos:r.bind(this,"/search/photos"),users:r.bind(this,"/search/users"),collections:r.bind(this,"/search/collections")}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o={query:t,page:n,per_page:r};return this.request({url:e,method:"GET",query:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{total:function(){var t="/stats/total";return e.request({url:t,method:"GET"})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){var e=this;return{profile:function(t){var n="/users/"+t;return e.request({url:n,method:"GET"})},photos:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",i="/users/"+t+"/photos",s={page:n,per_page:r,order_by:o};return e.request({url:i,method:"GET",query:s})},likes:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",i="/users/"+t+"/likes",s={page:n,per_page:r,order_by:o};return e.request({url:i,method:"GET",query:s})},collections:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"published",i="/users/"+t+"/collections",s={page:n,per_page:r,order_by:o};return e.request({url:i,method:"GET",query:s})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return c.default(e)}function i(e){var t=e.method,n=e.query,r=e.oauth,i=e.body,u=r===!0?e.url:""+this._apiUrl+e.url,c=s({},e.headers,{"Accept-Version":this._apiVersion,Authorization:this._bearerToken?"Bearer "+this._bearerToken:"Client-ID "+this._applicationId});return i&&(c["Content-Type"]="application/x-www-form-urlencoded"),n&&(u=decodeURIComponent(u+"?"+a.stringify(n))),{url:u,options:{method:t,headers:c,body:"GET"!==t&&i?o(i):void 0}}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.formUrlEncode=o,t.buildFetchOptions=i;var a=n(2),u=n(12),c=r(u)},function(e,t){e.exports=function(e,t){function n(e){return String(e).replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,function(e){return"%"+e.charCodeAt().toString(16).slice(-2).toUpperCase()})}function r(e){var n=Object.keys(e);return t.sorted?n.sort():n}function o(e){return e.filter(function(e){return e}).join("&")}function i(e,t){return o(r(t).map(function(n){return a(e+"["+n+"]",t[n])}))}function s(e,t){return o(t.map(function(t){return a(e+"[]",t)}))}function a(e,r){var o=typeof r,a=null;return r===a?a=t.ignorenull?a:n(e)+"="+a:/string|number|boolean/.test(o)?a=n(e)+"="+n(r):Array.isArray(r)?a=s(e,r):"object"===o&&(a=i(e,r)),a}return t="object"==typeof t?t:{},o(r(e).map(function(t){return a(t,e[t])}))}},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var s=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;u>c;++c){var l,d,p,h,m=e[c].replace(s,"%20"),f=m.indexOf(r);f>=0?(l=m.substr(0,f),d=m.substr(f+1)):(l=m,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),n(i,p)?Array.isArray(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(n(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(n(e))}).join(t):i+encodeURIComponent(n(e[o]))}).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""}}])})},{}],254:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var c,l,d,p,h=a.test(e),m=typeof t,f=this,g=0;for("object"!==m&&"string"!==m&&(n=t,t=null),n&&"function"!=typeof n&&(n=s.parse),t=i(t);g<u.length;g++)l=u[g],c=l[0],p=l[1],c!==c?f[p]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof l[2]?(f[p]=e.slice(0,d),e=e.slice(d+l[2])):(f[p]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(f[p]=d[1],e=e.slice(0,e.length-d[0].length)),f[p]=f[p]||(l[3]||"port"===p&&h?t[p]||"":""),l[4]&&(f[p]=f[p].toLowerCase());n&&(f.query=n(f.query)),o(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(l=f.auth.split(":"),f.username=l[0]||"",f.password=l[1]||""),f.href=f.toString()}var o=e(257),i=e(255),s=e(256),a=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(e,t,n){var r=this;return"query"===e?("string"==typeof t&&t.length&&(t=(n||s.parse)(t)),r[e]=t):"port"===e?(r[e]=t,o(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="")):"hostname"===e?(r[e]=t,r.port&&(t+=":"+r.port),r.host=t):"host"===e?(r[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),r.hostname=t[0],r.port=t[1])):r[e]=t,r.href=r.toString(),r},r.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,n.query&&(t="object"==typeof n.query?e(n.query):n.query,r+=("?"===t.charAt(0)?"":"?")+t),n.hash&&(r+=n.hash),r},r.qs=s,r.location=i,t.exports=r},{}],255:[function(e,t,r){"use strict";var o,i={hash:1,query:1};t.exports=function(t){t=t||n.location||{},o=o||e(254);var r,s={},a=typeof t;if("blob:"===t.protocol)s=new o(unescape(t.pathname),{});else if("string"===a){s=new o(t,{});for(r in i)delete s[r]}else if("object"===a)for(r in t)r in i||(s[r]=t[r]);return s}},{}],256:[function(e,t,n){"use strict";function r(e){for(var t,n=/([^=?&]+)=([^&]*)/g,r={};t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function o(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)i.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var i=Object.prototype.hasOwnProperty;n.stringify=o,n.parse=r},{}],257:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],258:[function(e,t,n){
t.exports=e(260)},{}],259:[function(e,t,n){!function(e){"use strict";var n=-1,r={onVisible:function(e){var t=r.isSupported();if(!t||!r.hidden())return e(),t;var n=r.change(function(t,o){r.hidden()||(r.unbind(n),e())});return n},change:function(e){if(!r.isSupported())return!1;n+=1;var t=n;return r._callbacks[t]=e,r._listen(),t},unbind:function(e){delete r._callbacks[e]},afterPrerendering:function(e){var t=r.isSupported(),n="prerender";if(!t||n!=r.state())return e(),t;var o=r.change(function(t,i){n!=i&&(r.unbind(o),e())});return o},hidden:function(){return!(!r._doc.hidden&&!r._doc.webkitHidden)},state:function(){return r._doc.visibilityState||r._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!r._doc.visibilityState&&!r._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var t=r.state();for(var n in r._callbacks)r._callbacks[n].call(r._doc,e,t)},_listen:function(){if(!r._init){var e="visibilitychange";r._doc.webkitVisibilityState&&(e="webkit"+e);var t=function(){r._change.apply(r,arguments)};r._doc.addEventListener?r._doc.addEventListener(e,t):r._doc.attachEvent(e,t),r._init=!0}}};"undefined"!=typeof t&&t.exports?t.exports=r:e.Visibility=r}(this)},{}],260:[function(e,t,n){!function(n){"use strict";var r=-1,o=function(e){return e.every=function(t,n,o){e._time(),o||(o=n,n=null),r+=1;var i=r;return e._timers[i]={visible:t,hidden:n,callback:o},e._run(i,!1),e.isSupported()&&e._listen(),i},e.stop=function(t){return e._timers[t]?(e._stop(t),delete e._timers[t],!0):!1},e._timers={},e._time=function(){e._timed||(e._timed=!0,e._wasHidden=e.hidden(),e.change(function(){e._stopRun(),e._wasHidden=e.hidden()}))},e._run=function(t,r){var o,i=e._timers[t];if(e.hidden()){if(null===i.hidden)return;o=i.hidden}else o=i.visible;var s=function(){i.last=new Date,i.callback.call(n)};if(r){var a=new Date,u=a-i.last;o>u?i.delay=setTimeout(function(){i.id=setInterval(s,o),s()},o-u):(i.id=setInterval(s,o),s())}else i.id=setInterval(s,o)},e._stop=function(t){var n=e._timers[t];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},e._stopRun=function(t){var n=e.hidden(),r=e._wasHidden;if(n&&!r||!n&&r)for(var o in e._timers)e._stop(o),e._run(o,!n)},e};"undefined"!=typeof t&&t.exports?t.exports=o(e(259)):o(n.Visibility)}(window)},{}],261:[function(e,t,n){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=s(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=s(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function f(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},d.call(h.prototype),d.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];g.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=h,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var o=new h(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:f(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new g(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],262:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(29),i=e(116),s=e(193),a=e(146),u=e("underscore"),c=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.sync=function(e,t,n){throw new Error("BoardState is a special weird non-persistent thing")},t.prototype.initialize=function(e,n){return t.__super__.initialize.apply(this,arguments),this.board=n.board,this.useSidebarPref()?(this.setShowSidebarFromPref(),this.listenTo(this.board,"change:myPrefs",this.setShowSidebarFromPref)):this.set("showSidebar",!a.fSmall),this.set("listComposerOpen",!1)},t.prototype.setSidebarDisplayType=function(e){return this.set("sidebarDisplayType",null!=e?e:"")},t.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")},t.prototype.selectCard=function(e){e!==this._selectedCard&&(this._selectedCard&&this.stopListening(this._selectedCard,"change:closed"),this._selectedCard=e,null!=this._selectedCard&&(this.listenTo(this._selectedCard,"change:closed",function(e){return function(){return e.selectCardAfter(e._selectedCard)}}(this)),this.waitForId(this._selectedCard,function(t){return function(){return t._selectedCard===e?i.set(e.getFullUrl()):void 0}}(this))),this.trigger("active-card-changed"))},t.prototype.isCardSelected=function(e){return null!=e&&e===this._selectedCard},t.prototype.clearSelectedCard=function(){return this.selectCard(null)},t.prototype.getCard=function(){return this._selectedCard},t.prototype.getList=function(){var e;return null!=(e=this.getCard())?e.getList():void 0},t.prototype.selectCardAfter=function(e){var t,n,r,o;return n=e.getList(),o=null!=n?n.cardList.filter(function(e){return function(t){return e.board.filter.satisfiesFilter(t)}}(this)):void 0,r=null==n||0===o.length?null:(t=function(e){return function(e){return function(t){return t!==e&&t.get("pos")>=e.get("pos")}}}(this),u.find(o,t(e))),this.selectCard(null!=r?r:u.last(o))},t.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)},t.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)},t.prototype.useSidebarPref=function(){return r.isLoggedIn()&&(a.fExtraLarge||a.fLarge||a.fMedium)},t.prototype.setShowSidebar=function(e){var t;return e!==this.get("showSidebar")&&(t=e?"Open":"Close",c("Board Menu",t+" Board Menu"),this.set("showSidebar",e),this.useSidebarPref())?this.board.setPref("showSidebar",e):void 0},t.prototype.setShowSidebarFromPref=function(){return this.waitForAttr(this.board,"myPrefs",function(e){return function(){return e.set("showSidebar",e.board.getPref("showSidebar"))}}(this))},t}(s)},{}],263:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(266),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.default=function(){return{mode:"month"}},t.prototype.getMode=function(){return this.get("mode")},t.prototype.setMode=function(e){return this.update("mode",e)},t}(o)},{}],264:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(175),i=e(189),s=e(266),a=e(106),t.exports=a(i,r=function(e){function t(e,n){this.board=n.board,t.__super__.constructor.apply(this,arguments),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardComposerSettings-"+t}),e.fetch()}}(this)),this.destruct([this.labelList=(new o).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(e){return function(t){var n,r;return n=t.id,l.call(null!=(r=e.get("idLabels"))?r:[],n)>=0}}(this))])}return u(t,e),t.prototype.typeName="CardComposer",t.prototype.syncedKeys=["title"],t.prototype.default=function(){return{list:null,index:null,idMembers:[],idLabels:[],pos:"bottom",title:"",vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.labelList.reset(),this.save({idMembers:[],idLabels:[],title:""})},t.prototype.moveToNext=function(){var e;this.save({index:(null!=(e=this.get("index"))?e:0)+1})},t.prototype.getBoard=function(){return this.board},t.prototype.getList=function(){return this.get("list")},t.prototype.editable=function(){return this.getBoard().editable()},t.prototype.addMember=function(e){return this.addToSet("idMembers",e)},t.prototype.removeMember=function(e){return this.pull("idMembers",e)},t.prototype.labelCreateUrl=function(){return"/1/board/"+this.getBoard().id+"/labels/"},t}(s))},{}],265:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},g=[].slice;r=e(29),i=e(74),a=e(195),u=e(266),c=e(126),l=e("underscore"),p=e("moment"),d=e(101),s="000000000000000000000000",t.exports=o=function(e){function t(e,n){this.board=e,t.__super__.constructor.call(this,null,n),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardCardFilterSettings-"+t}),e.fetch(),e._resetNewCards()}}(this)),this.dueMap={day:1,week:7,month:28,overdue:0,notdue:0,complete:0,incomplete:0},this.modeMap={or:"or",and:"and"},this.newCardsWithoutIds=[],this.listenTo(this,"change:title change:idLabels change:idMembers change:due",this.debounce(this._resetNewCards))}return h(t,e),t.prototype.default=function(){return{idMembers:[],idLabels:[],title:null,due:null,limitMembers:!0,limitLabels:!0,newCards:[],mode:"or"}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.getBoard=function(){return this.board},t.prototype._resetNewCards=function(){return this.newCardsWithoutIds=[],this.save("newCards",[])},t.prototype.toggleQuietMode=function(){var e,t,n,o,i;if(e=r.myId(),null!=e){o=this.default(),o.idMembers=[e],t=!0;for(n in o)i=o[n],t&&(t=l.isEqual(this.get(n),i));return t?this.clear():this.save(o)}},t.prototype.toggleIdLabel=function(e){return this.toggle("idLabels",e)},t.prototype.toggleMember=function(e){return this.toggle("idMembers",e)},t.prototype.isFiltering=function(){var e;return l.some([!l.isEmpty(this.get("idMembers")),!l.isEmpty(this.get("idLabels")),null!=(e=this.get("title"))?e.trim():void 0,null!=this.get("due")])},t.prototype.satisfiesFilter=function(e){var t,n,r,o,i,a,u,c,d,h,m,v,y,b,w,_,k,C,x,j,S,T,M,B,O;if(null==e)return!1;if(e.get("closed"))return!0;if(C=e.id,f.call(null!=(x=this.get("newCards"))?x:[],C)>=0||f.call(this.newCardsWithoutIds,e)>=0)return!0;for(O="and"===this.get("mode"),j=["idLabels","idMembers"],h=0,b=j.length;b>h;h++)if(d=j[h],!l.isEmpty(this.get(d)))if(t=e.get(d),l.isEmpty(t)&&(t=[s]),u=this.get(d),v=l.intersection(u,t),O){if(v.length<u.length)return!1}else if(0===v.length)return!1;if(null!=this.get("due"))switch(a=this.get("due"),i=e.get("due"),o=e.get("dueComplete"),a){case"complete":if(!o)return!1;break;case"incomplete":if(!i||o)return!1;break;case"notdue":if(null!=e.get("due"))return!1;break;case"overdue":if(_=new Date,o||null==i||p(i).isAfter(_))return!1;break;default:if(o||null==i)return!1;if(w=p().add(this.dueMap[a],"day"),!p(i).isBetween(p(),w))return!1}return T=this.get("title"),null==T||(c=function(e){return l.compact(e.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},M=c(T),l.isEmpty(M)||(m=null!=e.get("idShort")?c(e.get("idShort").toString()):[],n=l.flatten([c(null!=(S=e.get("name"))?S:""),m]),r=2<=M.length?g.call(M,0,y=M.length-1):(y=0,[]),k=M[y++],!l.isEmpty(r)&&!l.isEmpty(l.intersection(r,n))||(B=function(e){return e.substring(0,k.length)===k},l.any(n,B))))?!0:!1},t.prototype.addNewCard=function(e){return this.newCardsWithoutIds.push(e),this.waitForId(e,function(t){return function(n){return t.newCardsWithoutIds=l.without(t.newCardsWithoutIds,e),t.addToSet("newCards",n)}}(this))},t.prototype.toJSON=function(e){var n,o,i,u,p,h,m;return p=null!=e?e:{},n=p.board,o=p.expanded,i=t.__super__.toJSON.apply(this,arguments),n&&(i.board=this.board.toJSON()),o&&(m=null!=(h=this.get("title"))?h:"",u=RegExp("^"+c.escapeForRegex(m),"i"),i.labels=l.chain(this.board.getLabels()).filter(function(e){return u.test(e.get("color"))||u.test(e.get("name"))}).sort(a.compare).map(function(e){return function(t){var n;return l.extend(t.toJSON(),{isActive:(n=t.id,f.call(e.get("idLabels"),n)>=0)})}}(this)).unshift({id:s,name:d(["filtering","no labels"]),isActive:f.call(this.get("idLabels"),s)>=0}).value(),i.members=this.board.memberList.chain().filter(function(e){return"me"===m&&r.isMe(e)||l.any(c.getMemNameArray(e),function(e){return u.test(e)})}).map(function(e){return function(t){var n;return l.extend(t.toJSON(),{isActive:(n=t.id,f.call(e.get("idMembers"),n)>=0)})}}(this)).value(),i.members=c.sortMembers(i.members,r.me()),i.members.unshift({id:s,fullName:d(["filtering","unassigned"]),initials:"?",isActive:f.call(this.get("idMembers"),s)>=0}),i.dueOptions=l.keys(this.dueMap).map(function(e){return function(t){return{time:t,desc:d(["due date filter",t]),isActive:t===e.get("due")}}}(this)),i.modes=l.keys(this.modeMap).map(function(e){return function(t){return{mode:t,desc:d(["filter mode",t]),isActive:t===e.get("mode")}}}(this))),i},t.prototype.toQueryString=function(){var e,t,n,r;return this.isFiltering()?(t=[],(r=this.get("title"))&&t.push(r),this.get("idLabels").forEach(function(e){return function(n){var r,o;return n===s?t.push(["label","none"].join(":")):(r=e.board.modelCache.get("Label",n))?(o=r.get("name"))?t.push(["label",encodeURIComponent(o)].join(":")):t.push(["label",r.get("color")].join(":")):void 0}}(this)),this.get("idMembers").forEach(function(e){return function(n){var r;return n===s?t.push(["member","none"].join(":")):(r=e.board.modelCache.get("Member",n))?t.push("@"+r.get("username")):void 0}}(this)),(e=this.get("due"))&&t.push(["due",e].join(":")),"and"===this.get("mode")&&t.push(["mode","and"].join(":")),n={menu:"filter",filter:t.join(",")},"?"+l.chain(n).pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,n].join("=")}).join("&").value()):""},t.prototype.fromQueryString=function(e){var t,n,r,o,i,a,u,c,d,p,h,m,g,v,y;if(e){for(i=[],o=[],t=void 0,g=void 0,p=e.split(","),m=[],r=0,u=p.length;u>r;r++){switch(n=p[r],n=n.replace(/^@/,"member:"),h=n.split(":"),v=h[0],y=h[1],v){case"member":"none"===y?i.push(s):(c=this.board.modelCache.findOne("Member",function(e){return e.get("username")===y}),null!=c&&i.push(c.id));break;case"label":"none"===y?o.push(s):(a=this.board.labelList.find(function(e){return 0===e.get("name").toLowerCase().indexOf(y.toLowerCase())||""===e.get("name")&&e.get("color")===y}),null!=a&&o.push(a.id));break;case"due":f.call(l.keys(this.dueMap),y)>=0&&(t=y);break;case"mode":"and"===y&&(d="and");break;default:g=n}m.push(this.set({idMembers:i,idLabels:o,due:t,title:g,mode:d}))}return m}},t}(u)},{}],266:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),i=e(114),s=e(193),a=e("underscore"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.default=function(){return{}},t.prototype.sync=function(e,t,n){var r,o,s,u,c;switch(u=n.success,e){case"create":throw Error("not implemented");case"read":return o=t.syncedKeysFromLocalStorage(),a.defaults(o,this.default()),"function"==typeof u?u(t,o,n):void 0;case"update":o=t.toJSON(),r=this.default(),delete o.id;for(s in o)c=o[s],a.isEqual(c,r[s])&&delete o[s];return a.isEmpty(o)?i.unset(t.id):i.set(t.id,o),"function"==typeof u?u(t,t.toJSON(),n):void 0;case"delete":return i.unset(t.id),"function"==typeof u?u(t,null,n):void 0}},t.prototype.syncedKeysFromLocalStorage=function(){var e,t;return e=null!=(t=i.get(this.id))?t:{},a.pick(e,this.syncedKeys)},t.prototype.syncedKeys=function(){return!0},t.prototype.toJSON=function(){return a.pick(this.attributes,this.syncedKeys)},t.prototype._persistUpdate=function(e,t){var n;return i.set(this.id,a.extend(null!=(n=i.get(this.id))?n:this.default(),e)),"function"==typeof t?t(null,this.toJSON()):void 0},t.prototype.toggle=function(e,t){return this.inSet(e,t)?(this.pull(e,t),!1):(this.addToSet(e,t),!0)},t.prototype.inSet=function(e,t){var n;return l.call(null!=(n=this.get(e))?n:[],t)>=0},t.prototype.addToSet=function(e,t){var n;return this.save(e,(null!=(n=this.get(e))?n:[]).concat(t))},t.prototype.pull=function(e,t){var n;return this.save(e,a.without(null!=(n=this.get(e))?n:[],t))},t}(s)},{}],267:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(266),t.exports=r=function(e){function t(e,n){this.board=e,t.__super__.constructor.call(this,null,n),this.waitForId(this.board,function(e){return function(t){return e.set({id:"boardListComposerSettings-"+t}),e.fetch()}}(this))}return i(t,e),t.prototype.default=function(){return{title:null,vis:!1}},t.prototype.clear=function(){return this.save(this.default())},t.prototype.clearItems=function(){this.save({title:""})},t.prototype.getBoard=function(){return this.board},t.prototype.toJSON=function(e){var n,r,o,i;return i=null!=e?e:{},n=i.board,o=i.list,r=t.__super__.toJSON.apply(this,arguments),n&&(r.board=this.getBoard().toJSON()),r},t}(o)},{}],268:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(29),o=e(266),i=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"memberState-"+r.myId()}),this.fetch()}return s(t,e),t.prototype.default=function(){return{cardsPageSortType:"board",processingAttachmentsLength:0,idCollapsedChecklists:[]}},t.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")},t.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")},t.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")},t.prototype.getCollapsedChecklists=function(){return this.get("idCollapsedChecklists")},t.prototype.pullCollapsedChecklist=function(e){return this.pull("idCollapsedChecklists",e)},t.prototype.pushCollapsedChecklist=function(e){var t,n;return this.pull("idCollapsedChecklists",e),this.addToSet("idCollapsedChecklists",e),t=this.getCollapsedChecklists(),n=i.rest(t,Math.max(0,t.length-256)),this.save("idCollapsedChecklists",n)},t}(o))},{}],269:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(193),o=e(126),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}return i(t,e),t.prototype.getQuery=function(){return this.get("query")},t.prototype.setQuery=function(e){return e!==this.getQuery()&&this.set("query",e),""===e?(this.clearSuggestions(),this.clearSuggestionSearchTerm(),this.clearSuggestionSearchModelTypes()):void 0},t.prototype.removeStringFromQuery=function(e){var t,n,r;return t=this.getQuery(),n=RegExp(""+o.escapeForRegex(e)),n.test(t)?(r=t.replace(e,""),r=o.stripExtraSpaces(r),""!==r&&(r+=" "),this.setQuery(r)):void 0},t.prototype.addStringToQuery=function(e){var t,n,r;return t=this.getQuery(),n=RegExp(""+o.escapeForRegex(e)),n.test(t)?void 0:(r=t+" "+e,r=o.stripExtraSpaces(r)+" ",this.setQuery(r))},t.prototype.getSuggestions=function(){return this.get("suggestions")},t.prototype.setSuggestions=function(e){return this.set("suggestions",e)},t.prototype.clearSuggestions=function(){return this.set("suggestions",[])},t.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")},t.prototype.setSuggestionSearchTerm=function(e){return this.set("suggestionSearchTerm",e)},t.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")},t.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")},t.prototype.setSuggestionSearchModelTypes=function(e){return this.set("suggestSearchModelTypes",e)},t.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")},t}(r))},{}],270:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(29),o=e(266),i=e("underscore"),t.exports=new(function(e){function t(){t.__super__.constructor.call(this),this.set({id:"sidebarState-"+r.myId()}),this.fetch()}return s(t,e),t.prototype.default=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}},t.prototype.syncedKeys=["idRecentBoards","collapsedDrawerSections","pinBoardsListSidebar"],t.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")},t.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)},t.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)},t.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")},t.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)},t.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)},t.prototype.hideUnpinnedSidebar=function(){return this.getShowSidebar()&&!this.getPinSidebar()?this.hideSidebar():void 0},t.prototype.getRecentBoards=function(){return this.get("idRecentBoards")},t.prototype.pullBoard=function(e){var t,n;for(n=i.clone(this.getRecentBoards());(t=i.indexOf(n,e))>-1;)n.splice(t,1);return this.save("idRecentBoards",n)},t.prototype.pushBoard=function(e){var t;return t=i.clone(this.getRecentBoards()),i.contains(t,e)&&(t=i.without(t,e)),t.unshift(e),t=t.slice(0,16),this.save("idRecentBoards",t)},t.prototype.getCollapsedSections=function(){var e;return null!=(e=this.get("collapsedDrawerSections"))?e:this.default().collapsedDrawerSections},t.prototype.isCollapsed=function(e){return i.contains(this.getCollapsedSections(),e)},t.prototype.collapseSection=function(e){return this.addToSet("collapsedDrawerSections",e)},t.prototype.expandSection=function(e){return this.pull("collapsedDrawerSections",e)},t}(o))},{}],271:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty,x=[].slice;r=e("jquery"),i=e(272),s=e(273),a=e(74),u=e(126),c=e(496),l=e("underscore"),g=e("moment"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.initialize=function(e){return this.renderOpts=e.renderOpts,this.highlight=e.highlight,this.makeDebouncedMethods("render"),this.listenTo(this.collection,"add remove reset",this.renderDebounced),this.actionViews=[],this.showDetails=!0},t.prototype.render=function(){return this.collection._getRelatedBoards().then(function(e){return function(){var t;t=""===e.$el.html()||e.showDetails!==e._lastShowDetails||e.missingViews(),e._lastShowDetails=e.showDetails,e.rerender(t,!0)}}(this)).then(function(e){return function(){e.trigger("render")}}(this)).done()},t.prototype.missingViews=function(){return l.any(this.actionViews,function(e){return function(t){return!r.contains(e.el,t.el)}}(this))},t.prototype.rerender=function(e,t){var n,r,o,i,s,u,c,d,p,h;for(p=this.saveEdits(),s=p[0],i=p[1],o=this.collection.models,o=l.sortBy(o,function(e){return-a.parse(e.get("date"))}),this.showDetails||(o=l.filter(o,function(e){return e.isCommentLike()})),r=v(o).slice(0,this.renderOpts.limit),e&&t&&this.removeActionViews(),this.$(".js-board-member-profile-no-activity").toggleClass("hide",r.length>0),c=u=0,d=r.length;d>u;c=++u)n=r[c],(e||this.actionNeedsRerender(n,c))&&(h=this.rerenderAction(n,c,r,{rerenderAll:e}),this.restoreEdits(s,i,h))},t.prototype.setShowDetails=function(e){return this.showDetails=e},t.prototype.saveEdits=function(){var e,t;return t=[],e=0,this.$(".editing textarea").each(function(){var n;n=r(this),t.push(n.val()),n.is(":focus")&&(n.parents(".editing").addClass("focused"),e=u.getCaretPosition(n))}),null!=t&&t.reverse(),[t,e]},t.prototype.restoreEdits=function(e,t,n){var r;return n.$el.hasClass("editing")?(n.$("textarea").val(e.pop()),r=u.getElem(n.$("textarea")),n.$el.hasClass("focused")&&u.setCaretPosition(r,t),n.openEditView()):void 0},t.prototype._viewForAction=function(e){return/^comment/.test(e.get("type"))?this.subview(s,e,this.renderOpts):this.subview(i,e,this.renderOpts)},t.prototype.rerenderAction=function(e,t,n,r){var o,i,s,a;return a=this._viewForAction(e),o=this.highlight&&this.highlight===e.id,a.setHighlighted(o),r.rerenderAll?(this.appendSubview(a),this.actionViews.push(a)):(this.insertActionView(a,t),1===this.actionViews.length&&1===n.length?(this.actionViews[t].remove(),this.actionViews.splice(t,1,a)):null==this.actionViews[t+1]?this.actionViews.splice(t,1,a):n.length<=this.actionViews.length?this.actionViews[t+1].model.id===(null!=(i=l.first(n[t+1]))?i.id:void 0)?(this.actionViews[t].remove(),this.actionViews.splice(t,1,a)):(this.actionViews.splice(t,0,a),null!=(s=this.actionViews[this.actionViews.length-1])&&s.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(t,0,a)),a},t.prototype.actionNeedsRerender=function(e,t){var n,r,o;return(null!=(r=this.actionViews[t+1])&&null!=(o=r.model)?o.id:void 0)===e.id&&(this.actionViews[t].remove(),
this.actionViews.splice(t,1)),n=this.actionViews[t],!n||e.id!==n.model.id},t.prototype.insertActionView=function(e,t){return this.actionViews[t]?(e.delegateEvents(),e.render().$el.insertBefore(this.actionViews[t].el)):this.appendSubview(e)},t.prototype.removeActionViews=function(){var e,t,n,r;for(r=this.actionViews,t=0,n=r.length;n>t;t++)e=r[t],e.remove();this.actionViews=[]},t.prototype.delegateEvents=function(){var e,n,r,o;for(t.__super__.delegateEvents.apply(this,arguments),o=this.actionViews,n=0,r=o.length;r>n;n++)e=o[n],e.delegateEvents()},t.prototype.undelegateEvents=function(){var e,n,r,o;for(t.__super__.undelegateEvents.apply(this,arguments),o=this.actionViews,n=0,r=o.length;r>n;n++)e=o[n],e.undelegateEvents()},t.prototype.remove=function(){return this.removeActionViews(),t.__super__.remove.apply(this,arguments)},t.prototype.setHighlight=function(e){var t,n,r;e!==this.highlight&&(this.highlight&&null!=(n=this.collection.get(this.highlight))&&(r=this._viewForAction(n),r.setHighlighted(!1)),this.highlight=e,this.highlight&&(t=this.collection.get(this.highlight))&&(r=this._viewForAction(t),r.setHighlighted(!0)))},t}(c),y=function(e){return function(t){return function(n,r){var o;return o=e in n&&e in r&&n[e].id===r[e].id,o?t(n,r):[!1,!1]}}},w=y("card"),b=y("board"),h=function(e){return[e,e]},p=function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],[n||o,r||i]},m=function(e,t){var n,r;return null==t?!1:0===e.length?!0:(n=e[0],r=2<=e.length?x.call(e,1):[],m(r,t[n]))},f=function(){var e,t;return e=arguments[0],t=2<=arguments.length?x.call(arguments,1):[],l.all(t,function(t){return m(e,t)})},d=[{a:"removeMemberFromCard",b:"addMemberToCard",cancel:w(function(e,t){return h(e.idMember===t.idMember)})},{a:"deleteAttachmentFromCard",b:"addAttachmentToCard",cancel:w(function(e,t){return h(e.attachment.id===t.attachment.id)})},{a:"updateCheckItemStateOnCard",b:"updateCheckItemStateOnCard",cancel:w(function(e,t){return h(e.checkItem.id===t.checkItem.id)})},{a:"updateCard",b:"updateCard",cancel:w(function(e,t){return h("listAfter"in e&&"listBefore"in t&&e.listAfter.id===t.listBefore.id)})},{a:"addChecklistToCard",b:"removeChecklistFromCard",cancel:w(function(e,t){return h(e.checklist.id===t.checklist.id)})},{a:"updateBoard",b:"updateBoard",cancel:b(function(e,t){return[f(["board","prefs","background"],e,t),!1]})}],_=function(e,t){return d.reduce(function(n,r){return e.type!==r.a||t.type!==r.b?n:p(n,r.cancel(e,t))},[!1,!1])},v=function(e){var t,n,r,o,i,s,a,u,c,d,p;if(1===e.length)return e;for(o={},d=e.slice(0,-1),u=a=0,c=d.length;c>a;u=++a)t=d[u],i=t.toJSON(),s=e[u+1].toJSON(),l.extend(i,i.data),l.extend(s,s.data),i.idMemberCreator===s.idMemberCreator&&g(i.date).diff(s.date,"minutes")<5&&!o[i.id]&&!o[s.id]&&(p=_(i,s),n=p[0],r=p[1],n&&(o[i.id]=!0),r&&(o[s.id]=!0));return l.reject(e,function(e){return o[e.id]})}},{}],272:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty;r=e("jquery"),i=e(522),s=e(291),a=e(456),u=e(29),c=e(156),l=e(464),d=e(73),p=e(157),h=e(6),m=e(74),f=e(75),j=e(132),g=e(31),v=e(33),y=e(513),b=e(104),w=e(126),_=e(496),k=e("underscore"),x=e(472),T=e(40),M=e("moment"),B=e(493),O=e(43),S=e(101),C=e(651),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return L(t,e),t.prototype.className="phenom",t.prototype.initialize=function(e){var t,n,r,o;return this.context=e.context,this.highlighted=e.highlighted,this.listenTo(this.model,"takingTooLong change",this.render),r=this.model.get("data"),null!=(null!=(o=r.card)?o.id:void 0)&&r.board&&(this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(e){return function(){return e.remove()}}(this)),null!=(t=this.model.getCard())&&t.id!==this.context.id&&this.listenTo(t,"change:name",this.render)),null!=(n=this.model.getChecklist())?this.listenTo(n,"change:name",this.render):void 0},t.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer","click .js-open-card":"openCard","click .js-reply-to-action":"reply","click .js-expand-comment":"expandComment","click a":"checkAttachment"},t.prototype.getData=function(){var e;return e=new f("action").getEntities(this.model.get("display"),this.context.id),{saved:null!=this.model.id,entities:k.map(e,this._withEntityInfo.bind(this)),date:this.model.get("date"),dateLastEdited:this.model.get("data").dateLastEdited,textData:this.model.get("data").textData,url:null!=this.model.getCard()?h.getActionUrl(this.model):null}},t.prototype.getContext=function(){var e,t,n,r,o,i,s,a,c;return t={},e=this.modelCache.get("Board",null!=(o=this.model.get("data"))&&null!=(i=o.board)?i.id:void 0),this.options.showBoard&&null!=e&&(t.board=e.toJSON({prefs:!0,url:!0}),t.boardPLevelIconClass=l.getPermLevelIconClassForBoard(e),t.boardPLevelAltText=l.getPermLevelAltTextForBoard(e)),this.options.showOrganization&&(r=this.modelCache.get("Organization",null!=(s=this.model.get("data"))&&null!=(a=s.organization)?a.id:void 0),null!=r&&(t.organization=r.toJSON({prefs:!0,url:!0}),t.orgPLevelIconClass=r.getPermLevel(),t.orgPLevelAltText=S(["org perms",r.getPermLevel(),"text"]))),n=this.modelCache.get("Member",this.model.get("idMemberCreator")),t.canReply=(null!=e?e.canComment(u.me()):void 0)&&(this.model.isAddAttachment()||this.model.isCommentLike()&&null!=n&&!u.isMe(n)),t.canDelete=this.model.deletable(),t.canEdit=this.model.editable(),t.member=null!=n?n.toJSON():void 0,null!=(c=t.member)&&(c.url=h.getMemberProfileUrl(t.member.id)),t},t.prototype.getOptions=function(){var e,t;return{showCompactAttachmentPreview:this.options.compact,truncateComment:null!=(t="function"==typeof(e=this.options).truncateComments?e.truncateComments(this.model):void 0)?t:!1,showOptions:!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly,useEmbedly:!this.options.compact&&this.model.isCommentLike(),usePreviews:!this.options.compact&&this.model.isAddAttachment()}},t.prototype.render=function(){var e,t,n,o,i,s,a,u,c,l,d,p,h,f;if(s=this.getData(),l=this.getOptions(),i=this.getContext(),T("actions",s),this.$el.addClass(this.model.isCommentLike()?"mod-comment-type":this.model.isAddAttachment()?"mod-attachment-type":"mod-other-type"),this.$el.html(C(s,i,l)),null!=(o=this.model.getBoard())&&this.$(".js-friendly-links").each(function(){return x(this,o)}),l.useEmbedly)for(e=this.$(".js-embedly"),d=s.entities,u=0,c=d.length;c>u;u++)if(a=d[u],"comment"===a.type&&null!=a.embedly)try{p=JSON.parse(a.embedly);for(h in p)f=p[h],/wistia/i.test(h)||(f["type_"+f.type]=!0,f.requireHttps=!0,e.show().append(B.fill("embedly",f)))}catch(e){}return l.usePreviews&&(n=k.filter(s.entities,function(e){return"attachment"===e.type}),k.isEmpty(n)||(t=this.$(".js-previews"),g.previewHtml(n[0].url,function(e,n){if(t.empty(),null!=e){if(null!=e.login)return r("<div>").addClass("attachment-extra-info-login").html(e.login).appendTo(t),t.removeClass("hide")}else if(null!=n)return r("<div>").addClass("attachment-extra-info").html(n).appendTo(t),t.removeClass("hide")}))),m.update(this.el),this.$el.toggleClass("unsent",!!this.model.isTakingTooLong),this.renderHighlighted(),this},t.prototype.renderHighlighted=function(){return this.$el.toggleClass("mod-highlighted",!!this.highlighted),this},t.prototype._tfmFormatOpts=function(){return{card:this.model.get("data").card,board:this.model.get("data").board},siteDomain,{textData:this.model.get("data").textData}},t.prototype._withEntityInfo=function(e){var t,n,r;return r=k.clone(e),"attachment"===r.type&&(r.url=this.model.get("data").attachment.url),"attachmentPreview"===r.type&&(r.previewUrlForRes=d.isHighDPI()&&null!=r.previewUrl2x?r.previewUrl2x:r.previewUrl),"comment"===r.type&&(r.textHtml=b.comments.format(r.text,this._tfmFormatOpts()).output),"checkItem"===r.type&&(r.nameHtml=b.checkItems.format(r.text,this._tfmFormatOpts()).output),"date"===r.type&&(r.text=M(r.date).calendar()),"card"===r.type&&null!=(t=v.get("Card",r.id))&&(r.text=t.get("name")),"checklist"===r.type&&null!=(n=v.get("Checklist",r.id))&&(r.text=n.get("name")),r},t.prototype.viewMemberActionMenu=function(e){var t,n;w.stop(e),t=this.modelCache.get("Member",null!=(n=r(e.target).closest("[idmember]").attr("idmember"))?n:this.model.get("idMemberCreator")),y.toggle({elem:this.$(e.target).closest(".js-show-mem-menu"),view:i,options:{model:t,modelCache:this.modelCache}})},t.prototype.expandComment=function(e){return w.stop(e),this.$(".js-comment").removeClass("is-truncated")},t.prototype.openCard=function(e){"Card"===this.context.typeName||r(e.target).is("a,textarea")||j()||(w.stop(e),h.navigate(h.getActionUrl(this.model),{trigger:!0}))},t.prototype.openAttachmentViewer=function(e){var t,n;e.metaKey||e.ctrlKey||(t=r(e.target),t.closest(".window-main-col").length>0&&(w.stop(e),a.isActive()||(n=t.closest(".js-open-attachment-viewer").attr("data-idattachment"),a.show({model:this.model.getCard(),idAttachment:n}))))},t.prototype.reply=function(e){return w.stop(e),this.$el.trigger("replyToAction",this.model),O("Card","Reply to Comment")},t.prototype.setHighlighted=function(e){e!==this.highlighted&&(this.highlighted=e,this.renderHighlighted())},t.prototype.checkAttachment=function(e){var t,n,r;if(!e.metaKey&&!e.ctrlKey)return n=this.model.getCard(),r=e.currentTarget.href,null!=n&&0===r.indexOf(window.attachmentsDomain)&&-1!==r.indexOf(n.id)&&(t=n.attachmentList.find(function(e){return e.get("url")===r}),null!=t&&s.isViewerable(w.fileExt(t.get("url"))))?(e.preventDefault(),a.show({model:n,idAttachment:t.id})):void 0},t}(_)},{}],273:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},j={}.hasOwnProperty;r=e("jquery"),o=e(272),i=e(457),s=e(398),u=e(460),c=e(507),l=e(6),d=e(97),p=e(18),h=e(511),f=e(513),g=e(104),v=e(126),y=e("underscore"),w=e(136),_=e(106),k=e(493),C=e(43),b=e(101),m=e(468),t.exports=_(i,u,m,a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.events=v.extendEvents({"click .js-confirm-delete-action":"confirmDeleteAction","click .js-edit-action":"editAction","click .js-discard-comment-edits":"cancelEdit","click .js-save-edit":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","input .js-text":"checkLength","mutated .js-text":"checkLength","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard","click .js-attach-link":"attachLink"}),t.prototype.potentialAttachments=function(){var e;return e=this.model.getCard(),y.filter(w(this.model.get("data").text,g.comments),function(t){var n;return n=t.url,!e.attachmentList.any(function(e){return e.get("url")===n})})},t.prototype.getContext=function(){var e,n;return n=t.__super__.getContext.apply(this,arguments),e=this.model.getCard(),n.canAttachLink=null!=e&&e.editable()&&this.potentialAttachments().length>0,n},t.prototype.confirmDeleteAction=function(e){v.stop(e),c.toggle("delete comment",{elem:r(e.target).closest(".js-confirm-delete-action")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return C("Card","Delete Comment"),e.model.destroy()}}(this)})},t.prototype.getTextInput=function(){return this.$(".js-text")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.editAction=function(e){return v.stop(e),this.$el.hasClass("is-editing")?void 0:(this.$el.addClass("is-editing"),this.$("textarea").focus().select(),this.openEditView())},t.prototype.openEditView=function(){this.$el.append(k.fill("comment_edit_controls")),this.$(".js-text").attr("placeholder","").autosize()},t.prototype.keydownJsText=function(e){return d.isForceSubmitEvent(e)?this.saveEdit(e):d.getKey(e)===p.Escape?(v.stop(e),this.cancelEdit()):this.checkInsert(e)},t.prototype.saveEdit=function(e){var t;("keypress"!==e.type||d.isForceSubmitEvent(e)||d.getKey(e)===p.Enter&&(!r(e.target).is("textarea")||r(e.currentTarget).hasClass("single-line")))&&(v.stop(e),t=this.$(".js-text").val(),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(t),h.cancelEdits(),this.model.get("display").entities.comment.text=t,this.model.update("text",t),this.$(".js-text").trigger("autosize.destroy"),f.hide(),C("Card","Edit Comment"))},t.prototype.showError=function(e){},t.prototype.cancelEdit=function(){var e;e=this.model.get("data").text,this.$(".js-text").val(e),h.cancelEdits(),this.$(".js-text").trigger("autosize.destroy")},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.attachLink=function(e){var t;return v.stop(e),t=this.potentialAttachments(),f.toggle({elem:r(e.currentTarget),view:new s({model:this.getCard(),modelCache:this.modelCache,links:t})})},t}(o))},{}],274:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(29),i=e(126),s=e(496),a=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events=function(){return{click:this.click,"click .js-close-ad":this.close}},t.isEligible=function(e){return!1},t.prototype.getAdId=function(){return this.constructor.adId},t.prototype.click=function(){return a("Ad",this.getAdId(),"Click")},t.prototype.close=function(e){var t;return i.stop(e),null!=(t=this.getAdId())&&(a("Ad",this.getAdId(),"Dismiss"),o.me().dismiss(t)),this.$el.slideUp(100)},t}(s)},{}],275:[function(e,t,n){var r,o,i,s=[].slice;r=e(276),o=e(277),i=e("underscore"),t.exports=new(function(){function e(){}return e.prototype._findAd=function(){var e,t,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?s.call(arguments,2):[],i.find(e,function(e){return!n.isDismissed(e.adId)&&e.isEligible.apply(e,[n].concat(s.call(t)))})},e.prototype.addMemberToOrganizationAd=function(e,t){return this._findAd.apply(this,[[o]].concat(s.call(arguments)))},e.prototype.boardsListAd=function(e,t){return this._findAd.apply(this,[[r]].concat(s.call(arguments)))},e}())},{}],276:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(279),i=e(126),s=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.adId="BoardsListBC",t.isEligible=function(e){var t,n,r,o;return(o=function(e,t){return i.idToDate(e.id)<i.dateBefore(t)})(e,{months:1})?(r=e.organizationList,t=r.any(function(e){return e.isPremium()}),n=r.any(function(e){return o(e,{weeks:1})}),!t&&n):void 0},t.prototype.className="member-boards-list-ad business-class-ad window-title-extra--bc-pitch",t.prototype.copyHtml=function(){return s.fill("ad_business_class")},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(o)},{}],277:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(278),i=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.adId="AddOrganizationMemberBC",t.isEligible=function(e,t){return null!=t&&!t.isPremium()},t.prototype.copyHtml=function(){return i.fill("ad_business_class_google_apps")},t}(o)},{}],278:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(281),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="pop-over-ad business-class-ad",t.prototype.iconClass=function(){return"business-class-mark"},t.prototype.click=function(){return t.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},t}(o)},{}],279:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(274),i=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="span",t.prototype.className="member-boards-list-ad",t.prototype.render=function(){return this.$el.html(i.fill("member_boards_list_ad",{copyHtml:this.copyHtml()})),this},t.prototype.copy=function(){return""},t}(r)},{}],280:[function(e,t,n){var r,o,i;r=e("react"),o=e(488)("paid_product_info"),i=e(43),t.exports=r.createClass({displayName:"PaidProductBannerComponent",render:o.renderable(function(){var e,t,n,r,s,a,u;return u=function(){return i("Billing Page","See All Benefits Link Click")},r=this.props,s=r.stringsKey,a=r.subtitleCount,n=r.infoUrl,e=r.epilogueCount,t=r.icon,o.div({class:o.classify({"business-class-new-intro":!0,"u-gutter":!0,"u-clearfix":!0})},function(){return o.div(".business-class-new-intro-header",{style:{marginBottom:"25px"}},function(){var e,t,n;for(o.h1(".business-class-new-intro-header-title",function(){return o.format([s,"title"])}),t=e=0,n=a;n>=0?n>e:e>n;t=n>=0?++e:--e)o.p(".business-class-new-intro-header-text",function(){return o.format([s,"subtitles",t])})}),o.ul(".business-class-new-intro-list",function(){var e,t;for(t=e=0;3>e;t=++e)o.li(".business-class-new-intro-list-item",function(){return o.h3(function(){return o.format([s,"featureHeaders",t])}),o.p(function(){return o.format([s,"featureBodies",t])})})}),e&&o.div(".business-class-new-intro-header",function(){var t,n,r;for(n=t=0,r=e;r>=0?r>t:t>r;n=r>=0?++t:--t)o.p(function(){return o.format([s,"epilogue recent",n])})}),o.div(".business-class-new-intro-more",function(){return o.a(".business-class-new-intro-more-link.quiet-button",{href:n,target:"_blank",onClick:u},function(){return o.format([s,"link"])})})})})})},{}],281:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(274),i=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.className="pop-over-list-ad",t.prototype.render=function(){return this.$el.html(i.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},t.prototype.copyHtml=function(){return""},t}(r)},{}],282:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(509),s=e(511),a=e(513),u=e(270),c=e(496),l=e(146),d=e("underscore"),p=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){var e,t;this.updatePinnedDrawer(),l.ensureRun(),this.listenTo(u,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()}),t=function(e){l.calc(),a.onWindowResize(),i.isVisible&&i.calcPos()},e=this.debounce(t,300),r(window).on("resize.windowEvent",e)},t.prototype.updatePinnedDrawer=function(){return r("body").toggleClass("body-pinned-drawer",u.getPinSidebar())},t}(c)},{}],283:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(285),i=e(286),s=e(126),a=e(496),c=e(493),u=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="archive",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"},t.prototype.initialize=function(){return this.searchText=this.slot(""),this.cardsView=this.subview(o,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(i,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)},t.prototype.searchChanged=function(){return this.searchText.set(this.$searchInput.val().trim())},t.prototype.didClickSwitchSections=function(e){var t;return t=function(e,t,n){return e===t?n:t},this.activeSubview.set(t(this.activeSubview.get(),this.cardsView,this.listsView)),this.$searchInput.focus(),s.stop(e)},t.prototype.injectSubview=function(e){return this.$(".js-archive-content").append(e.el),e.didBecomeActive()},t.prototype.renderOnce=function(){return this.$el.html(c.fill("board_archive")),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:function(e){return e.$el.detach()}}),this.watch("activeSubview",function(e){return function(t){var n;return n=t===e.cardsView?"switch to archived lists":"switch to archived cards",e.$(".js-switch-section").text(u(n))}}(this)),this.watch("activeSubview.isLoading",function(e){return function(t){return e.$(".js-loading-spinner").toggleClass("hide",!t),e.$(".js-archive-content").toggleClass("hide",t)}}(this)),this},t}(a)},{}],284:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(408),s=e(507),a=e(6),u=e(509),c=e(126),l=e(496),d=e(493),p=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.tagName="div",t.prototype.className="archived-list-card",t.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return t={reOpenText:this.options.reOpenText,canDelete:null!=(n=this.options.canDelete)?n:!1},e=this.subview(i,this.model,{dontFilter:!0}),e.render(),this.$el.append(e.el),this.$el.append(d.fill("archived_card_options",t,{editable:this.model.editable()})),this},t.prototype.openCard=function(e){c.stop(e),a.showCardDetail(this.model),u.calcPos()},t.prototype.deleteModel=function(e){var t;c.stop(e),s.toggle("delete card",{elem:null!=(t=r(e.target).closest(".js-delete"))?t[0]:void 0,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),p("Card","Delete","Via Archive")}}(this)})},t.prototype.reopen=function(e){return c.preventDefault(e),this.model.update({closed:!1},function(e){return function(){return p("Card","Reopen","Via Archive")}}(this)),!1},t}(l)},{}],285:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;r=e(284),i=e(74),s=e("hearsay"),a=e(34),u=e(496),c=e("underscore"),p=e(493),d=e(101),l=e(231),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n,o,s;return h(t,e),t.prototype.CARDS_PER_PAGE=30,o={},s=function(e){var t;return t=o,{lease:function(){var n;return n=function(){(t===o||n===t)&&e.apply(this,arguments)},t=n,n}}},t.prototype.initialize=function(e){var t;return this.searchText=e.searchText,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map(function(e){return e.length>0}).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.updateSearchCallback=s(function(e){return function(t){var n;return n=t.map(function(t){return e.modelCache.get("Card",t.id)}),e.searchResults.set(n),e.isLoadingSearchResults.set(!1)}}(this)),t=function(e){return function(t){return e.sortedContiguousCards.set(c.without(e.sortedContiguousCards.get(),t)),e.searchResults.set(c.without(e.searchResults.get(),t))}}(this),this.listenTo(this.modelCache,{"remove:Card":t,"change:Card:closed":function(e){return function(n){n.get("idBoard")===e.model.id&&(n.get("closed")?e.sortedContiguousCards.set([n].concat(f.call(e.sortedContiguousCards.get()))):t(n))}}(this)}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))},t.prototype.events={"click .js-more-cards":"getMoreCards"},n=!1,t.prototype.didBecomeActive=function(){var e;if(!this.hasBeenActiveBefore)return this.hasBeenActiveBefore=!0,e={limit:this.CARDS_PER_PAGE},this.isLoadingInitialCards.set(!0),a.loadClosedCards(this.model.id,e).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingInitialCards.set(!1)}}(this)).done()},t.prototype.didLoadContiguousCards=function(e){var t,n;return this.hasMoreCards.set(e.length===this.CARDS_PER_PAGE),n=c.sortBy(e,function(e){return function(t){return-e.cardSortRank(t)}}(this)),t=f.call(this.sortedContiguousCards.get()).concat(f.call(n)),this.sortedContiguousCards.set(c.uniq(t))},t.prototype.cardSortRank=function(e){var t,n;return null!=(n="function"==typeof(t=i.parse(e.get("dateLastActivity"))).getTime?t.getTime():void 0)?n:null},t.prototype.getMoreCards=function(){var e,t;return e=c.last(this.sortedContiguousCards.get()),t={limit:this.CARDS_PER_PAGE,before:null!=e?this.cardSortRank(e):null},this.isLoadingMoreCards.set(!0),a.loadClosedCards(this.model.id,t).tap(l(this,"didLoadContiguousCards")).finally(function(e){return function(){return e.isLoadingMoreCards.set(!1)}}(this)).done()},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){var e,t;return this.$el.html(p.fill("archived_cards")),this.watch("isLoadingMoreCards",function(e){return this.$(".js-more-cards").attr("disabled",e)}),t=this.hasMoreCards.and(this.isSearching.not()),this.subscribe(t,function(e){return this.$(".js-more-cards").toggleClass("hide",!e)}),this.watch("isSearching",function(e){var t;return t=e?"no results":"no archived cards",this.$(".js-empty-message").text(d(t))}),this.watch("cards",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("isLoadingSearchResults",function(e){return this.$(".js-search-loading").toggleClass("hide",!e)}),e=this.debounce(this.loadSearchResults,400),this.subscribe(this.searchText.filter(function(e){return e.length>0}),function(){return this.isLoadingSearchResults.set(!0),e.call(this)}),this.subscribe(this.cards,this.frameDebounce(this.renderCards))},t.prototype.loadSearchResults=function(){var e;return e={query:"is:archived "+this.searchText.get(),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0},a.loadSearchData(e).get("cards").then(this.updateSearchCallback.lease()).done()},t.prototype.renderCards=function(){var e,t,n;e=this.$(".js-archive-items"),e.children().detach(),n=function(){var e,n,o,i;for(o=this.cards.get(),i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(this.subview(r,t,{reOpenText:d("unarchive card"),canDelete:!0}));return i}.call(this),this.appendSubviews(n,e)},t}(u)},{}],286:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].slice;o=e(287),i=e(34),s=e(126),a=e(496),u=e("underscore"),l=e(493),c=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){return this.searchText=e.searchText,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map(function(e){var t,n,r;return n=e[0],r=e[1],""===r?n:(t=s.buildFuzzyMatcher(r),u.filter(n,function(e){return t(e.get("name"))}))}).map(function(e){return u.sortBy(e,function(e){return e.get("name")})}),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",function(e){return function(t){return t.get("closed")?e.allArchivedLists.set([t].concat(h.call(e.allArchivedLists.get()))):e.allArchivedLists.set(u.without(e.allArchivedLists.get(),t))}}(this))},t.prototype.hasBeenActiveBefore=!1,t.prototype.didBecomeActive=function(){this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,i.loadArchivedLists(this.model.id).then(function(e){return function(t){var n;return n=e.modelCache.find("List",function(t){return t.get("idBoard")===e.model.id&&t.get("closed")}),e.allArchivedLists.set(n),e.isLoading.set(!1)}}(this)))},t.prototype.vigor=t.VIGOR.SOME,t.prototype.renderOnce=function(){return this.$el.html(l.fill("archived_lists")),this.watch("searchText",function(e){var t;return t=0===e.length?"no archived lists":"no results",this.$(".js-empty-message").text(c(t))}),this.watch("sortedFilteredLists",function(e){return this.$(".js-empty-message").toggleClass("hide",e.length>0)}),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))},t.prototype.renderLists=function(){var e,t;return this.$(".js-archive-items").children().detach(),e=function(){var e,n,r,i;for(r=this.sortedFilteredLists.get(),i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(this.subview(o,t,{reOpenText:c("unarchive list"),canDelete:!1}));return i}.call(this),this.appendSubviews(e,this.$(".js-archive-items")),this},t}(a)},{}],287:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(507),i=e(513),s=e(126),a=e(496),l=e(43),u=e(491)("archive_item"),c=u.renderable(function(e){var t,n,r,o,i,s;return s=e.url,o=e.name,r=e.deleting,n=e.canReopen,i=e.reOpenText,t=e.canDelete,u.p(".item-name",function(){return s&&!r?u.a({href:s},function(){return u.text(o)}):u.span(function(){return u.text(o)})}),r?u.div(".options.quiet",function(){return u.format("deleting")}):u.div(".options",function(){return n&&u.a(".button-link.js-reopen",{href:"#"},function(){return u.icon("refresh"),u.text(" "),u.text(i)}),t?u.a(".button-link.negate.js-delete",{href:"#"},function(){return u.icon("remove","delete")}):void 0})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="li",t.prototype.className="u-clearfix",t.prototype.events={"click .js-reopen":"reopen","click .js-delete":"delete"},t.prototype.initialize=function(){return this.listenTo(this.model,"deleting",this.render)},t.prototype.canReopen=function(){return null!=this.model.owned?this.model.owned():this.model.editable()},t.prototype.canDelete=function(){var e;return"function"==typeof(e=this.model).owned?e.owned():void 0},t.prototype.render=function(){var e,t;return this.$el.html(c({name:this.model.get("name"),url:"function"==typeof(e=this.model).getUrl?e.getUrl():void 0,reOpenText:this.options.reOpenText,canDelete:this.canDelete(),canReopen:this.canReopen(),deleting:"function"==typeof(t=this.model).isDeleting?t.isDeleting():void 0})),this;
},t.prototype.reopen=function(e){return s.preventDefault(e),i.hide(),this.model.update({closed:!1},function(e){return function(){var t;return l(e.model.typeName,"Reopen","Via Archive"),"function"==typeof(t=e.options).onReopen?t.onReopen(e.model):void 0}}(this)),!1},t.prototype.delete=function(e){return s.stop(e),o.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.startDelete().then(function(){return l("Board","Delete","Via Closed Boards List")}).done()}}(this)})},t}(a)},{}],288:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(287),i=e(6),s=e(496),c=e(493),u=e(101),a=e(231),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.frameDebounce(this.render)})},t.prototype.render=function(){var e,t,n,o;return t=this.model.boardList,n={empty:0===t.filter(function(e){return e.get("closed")}).length},this.$el.html(c.fill("closed_boards",n)),e=this.$(".js-archive-items"),o=t.filter(a.method("get","closed")).map(function(e){return function(t){return e.subview(r,t,{onReopen:e.onReopen.bind(e),reOpenText:u("unarchive board")})}}(this)),this.appendSubviews(o,e),this},t.prototype.onReopen=function(e){return i.displayBoard({idBoard:e.id}).done()},t}(s)},{}],289:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)L.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},L={}.hasOwnProperty;w=e("underscore"),r=e(291),i=e(456),s=e(29),a=e(73),u=e(507),c=e(74),l=e(97),d=e(18),p=e(31),x=e(484),m=e(480),f=e(483),g=e(636),v=e(513),h=e(628),j=e(85),y=e(126),b=e(496),_=e(142),k=e(101),S=e(491)("plugin_attachment_thumbnail"),T=e(660),M=e(43),B=e("xtend"),C=S.renderable(function(e){var t,n,r,o,i,s,a,u,c,l,d,p;p=e.url,l=e.openText,t=e.canRemove,n=e.canReply,i=e.image,d=e.title,r=e.created,o=e.createdBy,u=e.modified,c=e.modifiedBy,s=e.initialize,(null==i||null==i.url)&&(i={url:""}),a={href:p,target:p,title:d},i.logo?S.a(".attachment-thumbnail-preview",w.clone(a),function(){return S.span(".attachment-thumbnail-preview-power-up-logo",function(){return S.img({class:"attachment-thumbnail-preview-power-up-logo-image",src:i.url+"?color=999"})})}):S.a(".attachment-thumbnail-preview",B(a,{style:S.stylify({"background-image":i.url?S.urlify(i.url):void 0,"background-position-y":"top"===i.y?"0px":void 0,"background-position-x":"left"===i.x?"0px":void 0,"background-size":function(){switch(i.size){case"cover":return"cover";case"original":return"inherit";default:return"contain"}}()})})),S.p(".attachment-thumbnail-details",function(){var e,i;return S.a(".attachment-thumbnail-details-title",w.clone(a),function(){return S.text(d),null!=r&&S.span(".u-block.quiet",function(){return null!=o?S.format("created-by",{date:r,user:o}):S.format("created",{date:r})}),null!=u?S.span(".u-block.quiet",function(){return null!=c?S.format("modified-by",{date:u,user:c}):S.format("modified",{date:u})}):void 0}),null!=s&&"iframe"===s.type&&(i=s.url,e=s.height,S.iframe(".plugin-iframe.plugin-thumbnail-initialize",{src:i,style:e?"height:"+e+"px;":void 0})),S.span(".quiet.attachment-thumbnail-details-options",function(){return S.a(".attachment-thumbnail-details-options-item.dark-hover",w.clone(a),function(){return S.icon("external-link"),S.text(" "),S.span(".attachment-thumbnail-details-options-item-text.js-direct-link",function(){return S.text(l)})}),t&&S.a(".attachment-thumbnail-details-options-item.attachment-thumbnail-details-options-item-delete.dark-hover.js-confirm-delete",{href:"#"},function(){return S.icon("close"),S.text(" "),S.span(".attachment-thumbnail-details-options-item-text",function(){return S.format("remove")})}),n?S.a(".attachment-thumbnail-details-option-item.js-reply",{href:"#"},function(){return S.icon("comment"),S.text(" "),S.span(".attachment-thumbnail-details-options-item-text",function(){return S.format("comment")})}):void 0})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),t.prototype.className="attachment-thumbnail",t.prototype.events={"click .js-open-viewer":"openViewer","click .js-direct-link":"dontOpenViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete","click .js-reply":"reply","click .js-enable-power-up":"enablePowerUp","keydown .js-attachment-thumbnail-details":"onEditAttachmentName","blur .js-attachment-thumbnail-details":"saveAttachmentName"},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),this.subscribe(x(e,t).combine(t.snoop("idAttachmentCover").combine(this.model.snoop("previews").combine(this.model.snoop("name")))),function(e){return function(){return e.renderPluginThumbnail().catch(f.Error.NotHandled,function(){return e.renderNormal()}).done()}}(this)),this},t.prototype.renderPluginThumbnail=function(){var e,t;return t=this.model.getCard(),e=t.getBoard(),f.one({command:"attachment-thumbnail",card:t,board:e,options:m.attachment(this.model)}).then(function(n){return function(r){return(null!=r?r.url:void 0)&&!_(r.url)&&(r.url=n.model.get("url")),n.$el.html(C(B({url:n.model.get("url"),title:n.model.get("name"),openText:k("attachments.trello.open")},r,{canRemove:n.model.editable(),canReply:null!=n.options.onReply&&e.canComment(s.me()),created:r.created?new Date(r.created):void 0,modified:r.modified?new Date(r.modified):void 0}))),c.update(n.el),n.initIFrames(e,t)}}(this)).return()},t.prototype.renderNormal=function(){return this.listenTo(s.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderNormal)),r.getAttachmentData(this.model).then(function(e){return function(t){var n,o,i,u,l,d,h,m,f,g,v;return o=e.model.getCard(),t.canUseViewer="dropbox"!==e.model.getServiceKey()&&r.isViewerable(t.ext)&&!a.isTouch(),t.canReply=null!=(d=e.model.getCard().getBoard())?d.canComment(s.me()):void 0,l=e.model.smallestPreviewBiggerThan(110,80),a.isHighDPI()&&(i=e.model.smallestPreviewBiggerThan(220,160),l=null!=i?i:l),null!=l&&(v=null!=(h=o.getBoard())&&null!=(m=h.get("prefs"))?m.cardCovers:void 0,t.isCover=v&&o.get("idAttachmentCover")===e.model.id,t.imgSrc=l.url),t.isUpload=e.model.get("isUpload"),t.editable=e.model.editable(),u=j("inlineEnablePowerUpV2"),(null!=u?u.get("showInlinePowerUp"):void 0)&&(e.suggestedPlugin=e.model.getPluginSuggestion()),(null!=(f=e.suggestedPlugin)?f.id:void 0)&&!o.getBoard().isPluginEnabled(e.suggestedPlugin.id)&&!s.me().isDismissed("PowerUpsInlineAd")&&(t.plugin=e.suggestedPlugin),e.$el.html(T(t)),e.renderCoverState(),c.update(e.el),t.isKnownService&&(n=e.$(".js-attachment-thumbnail-details"),p.thumbnailHtml(t.url,t,function(e,t){return null==e&&null!=t?(n.html(t),c.update(n)):void 0})),(null!=(g=j("renameAttachments"))?g.get("allowAttachmentRenaming"):void 0)?e.$(".js-attachment-thumbnail-details").autosize({append:!1}):void 0}}(this)).done(),this},t.prototype.openViewer=function(e){e.metaKey||e.ctrlKey||(y.stop(e),i.isActive()||(i.show({model:this.model.getCard(),attachmentModel:this.model}),M("Attachment","Open Attachment Viewer",this.model.getType())))},t.prototype.dontOpenViewer=function(e){return e.stopPropagation()},t.prototype.renderCoverState=function(){var e,t,n,r,o,i,s,a;n=null!=(o=this.model.getCard())&&null!=(i=o.getBoard())?i.getPref("cardCovers"):void 0,e=this.$(".js-make-cover").addClass("hide"),t=this.$(".js-remove-cover").addClass("hide"),(null!=(s=this.model.get("previews"))?s.length:void 0)>0&&n&&(r=(null!=(a=this.model.getCard())?a.get("idAttachmentCover"):void 0)===this.model.id,e.toggleClass("hide",r),t.toggleClass("hide",!r))},t.prototype.download=function(e){y.stopPropagation(e),M("Attachment","Attachment Thumbnail","Download")},t.prototype.makeCover=function(e){y.stop(e),v.hide(),this.model.getCard().makeCover(this.model),M("Attachment","Attachment Thumbnail","Make Cover")},t.prototype.removeCover=function(e){y.stop(e),v.hide(),this.model.getCard().removeCover(null),M("Attachment","Attachment Thumbnail","Remove Cover")},t.prototype.confirmDelete=function(e){var t;y.stop(e),t=this.model.get("isUpload")?"delete attachment":"remove attachment",u.toggle(t,{elem:this.$(".js-confirm-delete"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),M("Attachment","Delete Attachment",e.model.getType())}}(this)}),M("Attachment","Attachment Thumbnail","Confirm Delete")},t.prototype.reply=function(e){return y.stop(e),this.options.onReply()},t.prototype.enablePowerUp=function(e){var t,n;return t=this.model.getCard().getBoard(),n=this.suggestedPlugin,t.canEnableAdditionalPowerUps()?t.isPluginEnabled(n.id)?void this.renderNormal():(t.enablePlugin(n.id),this.renderNormal(),void M("Power-Ups",n.name,"Enable")):void v.toggle({elem:this.$(e.target),view:new h({model:t}),autoPosition:!0})},t.prototype.onEditAttachmentName=function(e){var t,n;if(null!=(n=j("renameAttachments"))?n.get("allowAttachmentRenaming"):void 0)return t=this.$(e.currentTarget).trigger("autosize.resize"),l.getKey(e)===d.Enter||l.getKey(e)===d.Escape?(y.stop(e),t.blur()):void 0},t.prototype.saveAttachmentName=function(e){var t,n,r,o,i;if(null!=(i=j("renameAttachments"))?i.get("allowAttachmentRenaming"):void 0)return n=this.$(e.currentTarget),t=this.$(".js-attachment-name"),r=n.val().replace(/\s+/g," ").trim(),o=this.model.get("name"),r.length>256&&(r=r.substring(0,256),n.text(r)),r!==o&&r.length>0?(t.text(r),this.model.update("name",r)):(n.val(o),t.text(o))},t}(g)},{}],290:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(291),s=e(74),a=e(18),u=e(513),c=e(494),l=e(126),d=e(496),p=e("underscore"),m=e(493),f=e(43),h=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="attachment-viewer",t.prototype.initialize=function(){var e,t;return u.hide(),this.allowsCardCovers=null!=(t=this.model.getBoard())?t.getPref("cardCovers"):void 0,this.currentAttachment=this.options.attachmentModel,e=this.options.idAttachment,null!=e?this.currentAttachment=this.model.attachmentList.find(function(t){return t.id===e}):void 0},t.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame","mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case a.Escape:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];case a.ArrowRight:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case a.ArrowLeft:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}},t.prototype.getAttachmentModels=function(){return this.model.attachmentList.models},t.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length},t.prototype.getCurrentAttachmentIndex=function(){return p.indexOf(this.getAttachmentModels(),this.currentAttachment)},t.prototype.getNextAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()+1,e>=this.getAttachmentModelsLength()?null:e},t.prototype.getNextModel=function(){var e;return e=this.getNextAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.getPrevAttachmentIndex=function(){var e;return e=this.getCurrentAttachmentIndex()-1,0>e?null:e},t.prototype.getPrevModel=function(){var e;return e=this.getPrevAttachmentIndex(),null!=e?this.getAttachmentModels()[e]:null},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.numAttachments=this.getAttachmentModelsLength(),this.$el.html(m.fill("attachment_viewer",e)),this.addNewFrame(this.currentAttachment,"center"),t=this.getNextModel(),null!=t&&this.addNewFrame(t,"right"),n=this.getPrevModel(),null!=n&&this.addNewFrame(n,"left"),this.setDetailsAndControls(),c.addHandler(this,{scope:"attachment_viewer",modal:!0}),this},t.prototype.setDetailsAndControls=function(){o.getAttachmentData(this.currentAttachment).then(function(e){return function(t){var n,r;return t.canMakeCover=e.allowsCardCovers&&(null!=(r=t.previews)?r.length:void 0)>0,t.isCover=e.allowsCardCovers&&e.model.get("idAttachmentCover")===e.currentAttachment.id,n=e.currentAttachment.get("isUpload")?"delete attachment":"remove attachment",p.extend(t,{removeButtonText:h([n,"button"]),removeMessageText:h([n,"message"]),removeConfirmText:h([n,"confirm"]),removeCancelText:h([n,"cancel"])}),e.$(".js-display-frame-details").html(m.fill("attachment_viewer_frame_details",t,{editable:e.model.editable()})),e.$(".js-show-prev-frame").toggleClass("hide",null==e.getPrevAttachmentIndex()),e.$(".js-show-next-frame").toggleClass("hide",null==e.getNextAttachmentIndex()),s.update(e.el)}}(this)).done()},t.prototype.addNewFrame=function(e,t){return o.getAttachmentData(e).then(function(e){return function(n){var i,s,a,u,c,d,p,h,f,g,v,b,w,_;return null!=t&&(n.directionClass="attachment-viewer-frame-"+t),p=n.ext,u=y.call(o.imageExts(),p)>=0||(null!=(h=n.previews)?h.length:void 0)>0,f=n.ext,i=y.call(o.audioExts(),f)>=0,g=n.ext,c=y.call(o.videoExts(),g)>=0,v=n.ext,a=y.call(o.iFrameableExts(),v)>=0,b=n.ext,s=y.call(o.googleViewerableExts(),b)>=0,n.isExternal?n.isPlaceholder=!0:u?(n.isImage=!0,null!=n.previews&&null!=(d=null!=(w=l.biggestPreview(n.previews))?w.url:void 0)&&(n.url=d)):i?n.isAudio=!0:c?n.isVideo=!0:a?n.isIFrameable=!0:s?(n.isIFrameable=!0,_=encodeURIComponent(n.url),n.url="https://docs.google.com/viewer?embedded=true&url="+_):(n.isPlaceholder=!0,n.openText="Download"),e.$(".js-frames").append(m.fill("attachment_viewer_frame",n,{editable:e.model.editable()})),e.defer(function(){return r(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")})}}(this)).done(),this},t.prototype.focusFrame=function(e,t){var n,o,i,s;switch(this.currentAttachment=e,n=p.find(this.$(".attachment-viewer-frame"),function(t){return function(t){return r(t).attr("data-idAttachment")===e.id}}(this)),t){case"right":o=this.$(".attachment-viewer-frame-left"),s="attachment-viewer-frame-left",i=this.getNextModel();break;case"left":o=this.$(".attachment-viewer-frame-right"),s="attachment-viewer-frame-right",i=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(s),r(n).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center"),o.remove(),null!=i?this.addNewFrame(i,t):this.clearHint(),this.setDetailsAndControls()},t.prototype.showNextFrame=function(e){var t;l.stop(e),t=this.getNextModel(),null!=t&&this.focusFrame(t,"right"),f("Attachment Viewer","Show Next Frame")},t.prototype.showPrevFrame=function(e){var t;l.stop(e),t=this.getPrevModel(),null!=t&&this.focusFrame(t,"left"),f("Attachment Viewer","Show Previous Frame")},t.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")},t.prototype.hintPrevFrame=function(){this.$el.addClass("attachment-viewer-frames-prev-hint")},t.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")},t.prototype.stop=function(e){return l.stopPropagation(e)},t.prototype.openDeleteConfirm=function(e){l.stop(e),this.$(".js-meta").addClass("hide"),this.$(".js-confirm-delete").removeClass("hide"),f("Attachment Viewer","Open Delete Attachment Confirm")},t.prototype.closeDeleteConfirm=function(e){l.stop(e),this.$(".js-meta").removeClass("hide"),this.$(".js-confirm-delete").addClass("hide"),f("Attachment Viewer","Close Delete Attachment Confirm")},t.prototype.delete=function(e){l.stop(e),this.currentAttachment.destroy(),this.close(),f("Attachment Viewer","Delete Attachment")},t.prototype.renderToggleCover=function(){var e,t;e=this.allowsCardCovers&&this.currentAttachment.get("previews").length>0,this.$(".js-cover-options").toggleClass("hide",!e),t=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-make-cover-box").toggleClass("hide",t),this.$(".js-remove-cover-box").toggleClass("hide",!t)},t.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment),this.renderToggleCover(),f("Attachment Viewer","Make Cover")},t.prototype.removeCover=function(){this.model.removeCover(null),this.renderToggleCover(),f("Attachment Viewer","Remove Cover")},t.prototype.close=function(){this.remove(),c.removeHandler(this),f("Attachment Viewer","Close Viewer")},t}(d)},{}],291:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(73),o=e(103),i=e(31),s=e("bluebird"),a=e(126),l=e(117),d=e("xtend"),u=e("underscore"),c=e(101),t.exports=function(){return{getAttachmentData:function(e){var t,n;return t=e.get("url"),n=e.getServiceKey(),i.interpret(t,e.modelCache).then(function(t){return function(t){var i;if(null!=t)return{isKnownService:!0,meta:t.name,previewClass:t.previewClass,name:t.text};switch(n){case"trello":return i=r.respectsCrossDomainDownloadAttribute(),{meta:o.bytes(e.get("bytes")),openText:c(i?"attachments.trello.download":"attachments.trello.open"),doDownload:i,openIconClass:i?"download":"external-link",isExternal:!1};case"gdrive":return{meta:l(["mime",e.get("mimeType")]),previewClass:"attachment-thumbnail-preview-google-drive-logo"};case"dropbox":return{previewClass:"attachment-thumbnail-preview-dropbox-logo"};case"onedrive":return{previewClass:"attachment-thumbnail-preview-one-drive-logo"};case"box":return{previewClass:"attachment-thumbnail-preview-box-logo"};case"other":return{ext:"LINK"}}}}(this)).then(function(r){var o,i;return o=d({doDownload:!1,isKnownService:!1,isExternal:!0,openIconClass:"external-link"},e.toJSON(),r),null==o.meta&&(o.meta=c(["attachments",n,"type"])),null==o.openText&&(o.openText=c(["attachments",n,"open"])),null==o.removeText&&(o.removeText=c(["attachments",n,"remove"])),null==o.ext&&(o.ext=null!=(i=a.fileExt(e.get("name")))?i:a.fileExt(t),null!=o.ext&&o.ext.length>6&&(o.ext=null)),o})},availableExts:function(){var e,t,n,r,o;if(null==this._availableExts){for(e=[],o=navigator.mimeTypes,t=0,n=o.length;n>t;t++)r=o[t],e=e.concat(r.suffixes.split(","));this._availableExts=u.compact(u.uniq(e))}return this._availableExts},imageExts:function(){return["bmp","gif","jpeg","jpg","png","svg","webp"]},getPlayableExts:function(e,t){var n;return n=document.createElement(t),u.chain(e).filter(function(e){var t;return t=e.types,u.any(t,function(e){return""!==n.canPlayType(e)})}).pluck("exts").flatten().value()},audioExts:function(){var e;return this._audioExts?this._audioExts:(e=[{exts:["m4a"],types:["audio/x-m4a;","audio/aac;"]},{exts:["mp3"],types:["audio/mpeg;"]},{exts:["opus"],types:['audio/ogg; codecs="opus"']},{exts:["ogg"],types:['audio/ogg; codecs="vorbis"']},{exts:["wav"],types:['audio/wav; codecs="1"']}],this._audioExts=this.getPlayableExts(e,"audio"))},videoExts:function(){var e;return this._videoExts?this._videoExts:(e=[{exts:["mp4"],types:['video/mp4; codecs="mp4v.20.8"']},{exts:["mov","h264"],types:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"']},{exts:["ogv"],types:['video/ogg; codecs="theora"']},{exts:["webm"],types:['video/webm; codecs="vp8, vorbis"']}],this._videoExts=this.getPlayableExts(e,"video"))},googleViewerableExts:function(){var e;return e=["doc","docx","ppt","pptx","rtf","xls","xlsx"],p.call(this.availableExts(),"pdf")>=0||e.push("pdf"),null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=e},iFrameableExts:function(){var e,t;return e=["css","js","txt"],t=["pdf"],null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=u.intersection(t,this.availableExts()).concat(e)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:(this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts()),this._viewerableExts)},isViewerable:function(e){return p.call(this.allViewerableExts(),e)>=0}}}()},{}],292:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(496),i=e(661),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=function(){return this.$el.html(i()),this},t}(o)},{}],293:[function(e,t,n){var r,o,i;r=e("react"),i=e(488)(),o=e(128),t.exports=r.createClass({displayName:"BoardListItemBadgeComponent",render:i.renderable(function(){var e,t,n,r,o;return n=this.props,e=n.icon,r=n.text,o=n.title,t=n.iconClass,i.span(".board-tile-badges-item",{title:o},function(){return i.icon(e,{class:["board-tile-badges-item-icon",t].join(" ")}),null!=r?i.span(".board-tile-badges-item-name",function(){return i.text(r)}):void 0})}),shouldComponentUpdate:o})},{}],294:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=[].slice;o=e(65),s=e(295),a=e(296),c=e(300),u=e(303),i=e(302),m=e(309),l=e(22),d=e("bluebird"),p=e("react"),h=e(104),f=e(126),_=e(488)("billing"),v=e(231),b=e(101),k=e(43),g=e("underscore"),C=e("xtend"),r=e("jquery"),w=e(110),y=e(90),t.exports=p.createClass({displayName:"BillingComponent",getInitialState:function(){return{processingReactivation:!1,reactivateDisabled:!1,reactivatingProduct:null}},render:_.renderable(function(){var e,t,n,r,o,i,a,u,c,l,d,p,h,m,f;return p=this.props,o=p.id,e=p.activeAccount,c=p.paidAccount,f=p.willExpire,u=p.nextChargeAmount,a=p.nextBillingDate,t=p.canSwitchToYearly,n=p.cancelledAccount,r=p.hasAccount,m=p.statementUrl,d=p.productName,h=this.state,i=h.justCancelled,l=h.processingReactivation,_.div(function(p){return function(){return p.renderStatusBanner(),e&&_.div(".window-module.u-text-align-center",function(){return _.div(".u-gutter",function(){return f?p.renderExpirationAndRenewButton():c.cardType?(u&&a&&p.renderNextCharge(),t()?p.renderUpgradeToYearly():void 0):p.renderCreditExpirationMessage()})}),n&&!l&&p.renderReactivateSection(),c.cardType&&(e&&p.renderPaymentMethod(),p.renderBillingContact(),p.renderAdditionalInvoiceDetails()),r&&_.createElement(s,{statementUrl:m,key:o}),e&&p.renderCancelFlow(f),i?_.div(".window-module",function(){return _.div(".u-gutter",function(){return _.p(function(){return _.strong(function(){return _.format("your-productname-subscription-has-been-cancelled",{productName:d})})}),_.p(function(){return _.format("well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:d})}),_.p(function(){return _.format("the-trello-team")})})}):void 0}}(this))}),renderNextCharge:function(){var e,t,n,r,o;return o=this.props,e=o.billingStrategy,n=o.nextChargeAmount,r=o.price,t=o.nextBillingDate,_.p(".next-charge",function(){return e.perUser?_.format("you-will-be-billed-nextchargeamount-price-per-billablemembercount-members-on-nextbillingdate",{nextChargeAmount:y(n),price:y(r),billableMemberCount:e.userCount,nextBillingDate:t}):_.format("you-will-be-billed-nextchargeamount-on-nextbillingdate",{nextChargeAmount:y(n),nextBillingDate:t})})},renderUpgradeToYearly:function(){var e,t,n,r,o,i;return n=this.props,o=n.yearlyEquivalentPrice,i=n.yearlyEquivalentTotalPrice,e=n.billingStrategy,r=n.yearlyDiscountPercent,t=n.onSwitchToYearly,_.p(function(){return _.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return _.format("switch-to-yearly-billing")})}),_.p(function(){return e.perUser?_.format("yearly-billing-will-be-totalyearlyprice-yearlyprice-per-member-per-year",{totalYearlyPrice:y(i),yearlyPrice:y(o)}):_.format("yearly-billing-will-be-yearlyprice-per-year",{yearlyPrice:y(o)}),_.br(),_.format("thats-percent-less-than-monthly-billing",{yearlyDiscountPercent:r})})},renderCreditExpirationMessage:function(){var e,t,n;return n=this.props,e=n.nextBillingDate,t=n.onClickChangeCC,_.p(".next-charge",function(){return _.format("your-credits-will-expire-on-nextbillingdate",{nextBillingDate:e})}),_.p(function(){return _.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return _.format("add-billing-information")})}),_.p(function(){return _.format("keep-using-trello-in-style-even-after-your-credits-expire")})},renderExpirationAndRenewButton:function(){var e,t,n,r;return r=this.props,n=r.productName,e=r.expirationDate,t=r.onRenewClick,_.p(".quiet",function(){return _.format("youve-cancelled-productname-but-you-can-use-the-premium-features-until-expirationdate",{productName:n,expirationDate:e})}),_.p(function(){return _.b(t,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return _.format("renew-your-subscription")})}),_.p(".quiet",function(){return _.format("when-you-renew-you-wont-be-charged-until-the-date-listed-above")})},renderReactivationForm:function(){var e,t,n,r,o,s,a;return a=this.props,r=a.paidAccount,o=a.paidAccountPoll,e=a.createPaidAccount,n=a.didntGetAuthStatus,t=a.didGetAuthStatus,s=this.state.reactivatingProduct,_.createElement(c,{onSubmit:e,doPoll:o,buttonKey:"continue",contentBuilders:[u,i,m].map(v.choke(1,w)),extraData:{billingContactFullName:r.contactFullName,billingContactEmail:r.contactEmail,billingContactLocale:r.contactLocale,products:[s.toString()]},didntGetAuthStatus:function(e){return function(){return e.setState({reactivatingProduct:null}),n()}}(this),didGetAuthStatus:function(e){return function(){return e.setState({reactivatingProduct:null}),t()}}(this)})},renderReactivationButtons:function(){var e,t,n,r,o,i,s;return s=this.props,e=s.current,n=s.productName,t=s.paidAccount,r=this.state.reactivateDisabled,null!=t.cardType?(o=v(this,"reactivate",e.monthly.productNumber),i=v(this,"reactivate",e.yearly.productNumber)):(o=v.choke(0,this,"setState",{reactivatingProduct:e.monthly.productNumber}),i=v.choke(0,this,"setState",{reactivatingProduct:e.yearly.productNumber})),_.div(".window-module",function(){return _.div(".window-module-title",function(){return _.h3(function(){return _.format("reactivate-productname",{productName:n})})}),_.div(".u-gutter",function(){return _.div(".billing-option-buttons.u-clearfix",function(){return _.b(o,{class:_.classify({disabled:r})},function(){return _.span(".name",function(){return _.format("charge-monthly")}),_.span(".price",function(){e.billingStrategy.perUser?_.format("totalmonthlyprice-monthlyprice-per-member",{totalMonthlyPrice:y(e.monthly.totalPrice),monthlyPrice:y(e.monthly.price)}):_.strong(function(){return _.format("monthlyprice",{monthlyPrice:y(e.monthly.price)})})})}),_.b(i,{class:_.classify({disabled:r})},function(){return _.span(".name",function(){return _.format("charge-yearly-save")}),_.span(".price",function(){e.billingStrategy.perUser?_.format("totalyearlyprice-yearlyprice-per-member",{totalYearlyPrice:y(e.yearly.totalPrice),yearlyPrice:y(e.yearly.price)}):_.strong(function(){return _.format("yearlyprice",{yearlyPrice:y(e.yearly.price)})})})})})})})},renderReactivateSection:function(){var e;return e=this.state.reactivatingProduct,null!=e?this.renderReactivationForm():this.renderReactivationButtons()},renderPaymentMethod:function(){var e,t,n,r,o;return o=this.props,e=o.accountStanding,t=o.accountStandingDisplay,r=o.paidAccount,n=o.onClickChangeCC,_.div(".window-module",function(o){return function(){return _.div(".window-module-title",function(){return _.h3(".u-inline",function(){return _.format("payment-method")})}),_.div(".u-gutter",function(){return _.p(function(){return"good"===e?_.format("your-account-is-in-good-standing"):_.format("account-standing-accountstandingdisplay",{accountStandingDisplay:t}),_.br(),_.format("credit-card-on-file"),_.text(" "),_.format("paidaccount-cardlast4",{paidAccount_cardLast4:r.cardLast4}),_.text(" "),_.b(n,".quiet",function(){return _.format("change")})})})}}(this))},renderCCChangeForm:function(){var e,t,n,r,o;return o=this.props,e=o.changeCreditCard,r=o.paidAccountPoll,n=o.didntGetAuthStatus,t=o.didGetAuthStatus,_.createElement(c,{onSubmit:e,doPoll:r,buttonKey:"continue",contentBuilders:[u,i,m].map(v.choke(1,w)),didntGetAuthStatus:function(e){return function(){return n()}}(this),didGetAuthStatus:function(e){return function(){return t()}}(this)})},reactivate:function(e){var t,n,r;r=this.props.reactivateProduct,n=this.state.reactivateDisabled,n||(t=l.isMonthly(e)?"Monthly":"Yearly",k("Organization View","Billing Page","Reactivate Business Class - "+t),this.setState({reactivateDisabled:!0}),r(e).then(function(e){return function(n){return k("Organization","Sucessfully Reactivate Business Class - "+t),e.setState({processingReactivation:!0,reactivateDisabled:!1})}}(this)).done())},renderBillingContact:function(){var e,t,n;return n=this.props,t=n.paidAccount,e=n.onChangeBillingContactClick,_.div(".window-module",function(){return _.div(".window-module-title",function(){return _.h3(function(){return _.format("billing-contact")})}),_.div(".u-gutter",function(){return _.p(function(){return _.format("paidaccount-contactfullname-paidaccount-contactemail",{paidAccount_contactFullName:t.contactFullName,paidAccount_contactEmail:t.contactEmail}),_.text(" "),_.b(e,".quiet",function(){return _.format("change")})})})})},renderAdditionalInvoiceDetails:function(){var e,t,n;return n=this.props,t=n.paidAccount,e=n.onChangeAdditionalDetailsClick,_.div(".window-module",function(){return _.div(".window-module-title",function(){return _.h3(function(){return _.format("additional-invoice-details")})}),_.div(".u-gutter",function(){return t.invoiceDetails?(_.raw(h.description.format(t.invoiceDetails).output),_.div(function(){return _.b(e,".quiet",function(){return _.format("change")})})):_.p(function(){return _.format("we-dont-have-any-additional-information-for-your-invoice"),_.text(" "),_.b(e,".quiet",function(){return _.format("change")})})})})},renderCancelFlow:function(e){var t,n,r;return r=this.props,n=r.productName,t=r.cancelProduct,_.createElement(a,{type:this.props.type,isModule:!0,productName:n,willExpire:e,id:this.props.id,product:this.props.paidAccount.product,cancelProduct:function(e){return function(){var n;return n=1<=arguments.length?x.call(arguments,0):[],t.apply(null,n).then(v.choke(0,v(e,"setState",{justCancelled:!0})))}}(this)})},renderStatusBanner:function(){var e,t,n,r,o,i,s,a,u,c,l;return l=this.props,e=l.activeAccount,i=l.problemAccount,s=l.processingAccount,u=l.productIconClass,n=l.detailsUrl,c=l.productName,t=l.cancelledAccount,r=l.needCC,o=l.onClickChangeCC,a=this.state.processingReactivation,_.div(".window-module.u-gutter",function(){return e&&(i?(_.p(".bc-active-status.error",function(){return _.format("theres-an-issue-with-productname",{productIconClass:u,detailsUrl:n,productName:c})}),_.b(o,".emphasis-button",function(){
return _.format("you-are-overdue-and-we-are-having-trouble-processing-your-credit-card-enter-a-credit-card-to-resolve-the-issue")})):(_.p({class:_.classify({"bc-active-status":!0,active:!0,warning:s})},function(){return _.span({class:"icon-lg icon-"+u}),s?_.format("productname-is-almost-active",{detailsUrl:n,productName:c}):_.format("productname-is-active",{detailsUrl:n,productName:c})}),s&&_.p(".quiet",{style:{marginLeft:"46px"}},function(){return _.format("your-credit-card-is-being-processed")}))),t&&(a?(_.p(".bc-active-status.warning",function(){return _.format("your-account-is-being-processed-for-reactivation",{productIconClass:u})}),_.p(".quiet.u-text-align-center",function(){return _.format("check-back-soon")})):_.p(".bc-active-status.error",function(){return _.format("productname-is-cancelled",{productIconClass:u,detailsUrl:n,productName:c})})),r?(_.p(".bc-active-status.error",function(){return _.format("productname-is-not-active",{productIconClass:u,detailsUrl:n,productName:c})}),_.b(o,".emphasis-button",function(){return _.format("enter-a-credit-card-to-activate-productname",{productName:c})})):void 0})}})},{}],295:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v;r=e(208),o=e(311),s=e("react"),f=e(488)("billing_statement"),i=e(109),p=e("moment"),u=e(89),d=e(39),v=e(117),a=e(231),m={return:["credited-return","credited-return-receipt"],credit:["paid-credit","paid-credit-receipt"],debit:["billed-debit","billed-debit-invoice"],refund:["refunded-refund","refunded-refund"]},h=function(e){var t,n,r,o;r=m[e.type],n=r[0],o=r[1],t={statementUrl:e.statementUrl},t[e.type]=u.money(e.amount),t.statementUrl?f.format(o,t):f.format(n,t)},g={startDate:function(e){return p(e).format("LL")},endDate:function(e){return p(e).format("LL")},taxRate:u.taxRate,discount:u.percentage},c=function(e){var t,n,r,o,i;o=function(e){return e.toString()},r={};for(t in e)i=e[t],r[t]=(null!=(n=g[t])?n:o)(i);return r},l=function(e){var t,n;return null==e.translationKey?e.fallbackText:(t=c(e.translationArgs),n=v(["billing",e.translationKey],t),null!=n?n:(d(new Error("Unknown statement row key "+e.translationKey)),e.fallbackText))},t.exports=s.createClass({displayName:"BillingHistoryComponent",mixins:[i],render:f.renderable(function(){var e,t,n;return t=this.state,e=t.errorText,n=t.statement,f.div(".window-module",function(){return f.div(".window-module-title",function(){return f.h3(function(){return f.format("billing-history")})}),f.div(".u-gutter",{id:"billing-statement"},function(){var t,r,o,i;if(null!=e)return f.text(e);if(null!=n){for(o=[],t=0,r=n.length;r>t;t++)i=n[t],f.div(function(){return f.p(function(){return f.format("date-item",{date:p(new Date(i.date)).format("l"),item:l(i)})}),f.p({style:{textAlign:"right"}},function(){return h(i)})}),o.push(f.hr());return o}return f.div(".spinner.loading")})})}),componentWillMount:function(){this.pollster=new o(a(r,{url:this.props.statementUrl}),10,5e3),this.pollster.start(),this.syncState(this.pollster.state)},componentWillUnmount:function(){this.pollster.stop()}})},{}],296:[function(e,n,r){var o,i,s,a,u,c,l,d;i=e("react"),l=e(488)("billing"),u=e(231),d=e(43),o=void 0,t(function(){return o=e(34)}),a=1,s=2,c=[["cancel-reason-missing-functionality","missing functionality"],["cancel-reason-not-using","not using it"],["cancel-reason-expensive","too expensive"],["cancel-reason-other","other"]],n.exports=i.createClass({displayName:"CancelFlowComponent",getInitialState:function(){return{isGold:"gold"===this.props.type,isCancelling:this.props.initialIsCancelling,cancellingStep:a,reason:null,details:"",features:[]}},componentDidMount:function(){return this.fetchFeatures(function(e){return function(t){return e.setState({features:t})}}(this))},fetchFeatures:function(e){var t,n,r;return t=this.props.id,r=this.props.product,n={dynamic:[function(e){var t,n;return n="dynamic-feature-unlimited-powerups",(t=e.boardList.filter(function(e){return e.powerUpsCount()>1}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-deactivate-users",(t=e.get("memberships").filter(function(e){return e.deactivated}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-observers",(t=e.boardList.filter(function(e){return e.get("memberships").some(function(e){return"observer"===e.memberType})}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return n="dynamic-feature-collections",(t=e.boardList.filter(function(e){return e.get("idTags").length}).length)?{key:n,data:{count:t}}:void 0},function(e){var t;return t="dynamic-feature-invitation-restrictions",e.boardList.some(function(e){return"members"!==e.getInvitePerm()})?{key:t}:void 0},function(e){var t;return t="dynamic-feature-visibility-restrictions",e.boardList.some(function(e){return"org"===e.getPermLevel()})?{key:t}:void 0},function(e){var t,n;return n="dynamic-feature-private-boards",(t=e.boardList.filter(function(e){return e.isPrivate()}).length)?{key:n,data:{count:t}}:void 0},function(e){var t,n;return t="dynamic-feature-bulk-export",(null!=(n=e.get("exports"))?n.length:void 0)?{key:t}:void 0}],static:["static-feature-unlimited-powerups","static-feature-bigger-attachments","static-feature-priority-email-support","static-feature-board-export"],gold:["gold-feature-powerups","gold-feature-bigger-attachments","gold-feature-custom-backgrounds","gold-feature-saved-searches"]},this.state.isGold?e(n.gold.map(function(e){return{key:e}})):o.loadBCFeatures(t).then(function(t){return e(n.dynamic.map(function(e){return e(t)}).filter(function(e){return e}).concat(n.static.map(function(e){return{key:e}})).slice(0,4))})},render:l.renderable(function(){var e,t,n,r,o,i,u,p,h,m,f,g,v,y,b,w,_,k,C,x,j;return w=this.props,y=w.product,b=w.productName,r=w.cancelProduct,v=w.isModule,f=w.isDeleting,j=w.willExpire,_=this.state,m=_.isCancelling,o=_.cancellingStep,n=_.cancelInProgress,u=_.details,p=_.features,g=_.isGold,C=function(e){return function(){return d("Organization View","Billing Page","Open Cancel Business Class Dialog"),e.setState({isCancelling:!0})}}(this),e=function(e){return function(){return f||e.setState({cancellingStep:s}),r()}}(this),t=function(e){return function(){return e.setState({cancellingStep:a,isCancelling:!1})}}(this),x=function(e){return e.stopPropagation()},h=function(e){return function(){var t;return e.setState({cancelInProgress:!0}),t={reason:e.state.reason,details:e.state.details},r(t).then(function(){return f?void 0:e.setState({cancelInProgress:!1,isCancelling:!1})}).done()}}(this),i=l.radio.bind(l,this),k=function(e){return function(t){return e.setState({details:t})}}(this),l.div({class:l.classify({"window-module":v,".u-gutter":v})},function(){if(!m&&f){if(!j)return l.b(C,".quiet.dark-hover",function(){return l.format("delete-this-organization")})}else{if(m)return l.div(function(){return l.div(".cancel-flow-overlay",{onClick:t},function(){return l.div(".cancel-flow-dialog-wrapper",function(){return l.div(g?".cancel-flow-dialog.gold":".cancel-flow-dialog",{onClick:x},function(){return l.span(".icon-lg.icon-close.cancel-flow-overlay-close-icon",{onClick:t}),l.img(".cancel-flow-logo",{src:g?"https://a.trellocdn.com/images/4aed30c34bf90d579f738a89fbd276f7/trello-gold-logo-gold%402x.png":"https://a.trellocdn.com/images/5ccffc76fe9c9220a251715c59d17ac5/business-class-logo-white%402x.png"}),l.div(".cancel-flow-content",function(){return o===a?(l.p(".cancel-flow-bold",function(){return l.text(" "),l.format("cancel-pre-features",{productName:b})}),l.ul(function(){return p.map(function(e){var t,n;return n=e.key,t=e.data,l.li(function(){return l.format(n,t)})})}),l.p(function(){return l.format("cancel-post-features")}),l.div(".cancel-flow-buttons",function(){return l.button(".button.primary.cancel-flow-keep",{onClick:t},function(){return l.format(f?"cancel-delete-keep":"cancel-keep",{productName:b})}),l.button(".button.cancel-flow-confirm",{onClick:e},function(){return l.format(f?"cancel-delete-switch":"cancel-switch")})})):2===o?(l.p(".cancel-flow-bold",function(){return l.format("cancel-pre-reason")}),l.div(".u-clearfix",function(){var e,t,n,r,o,s;for(o=[],t=0,n=c.length;n>t;t++)r=c[t],e=r[0],s=r[1],o.push(l.label(function(){return i("reason",s),l.text(" "),l.format(e,{productName:b})}));return o}),l.p(function(){return l.format("cancel-reason-feedback",{productName:b})}),l.textarea({placeholder:l.l("tell-us-more-ellipsis"),value:u,onChange:function(e){return k(e.target.value)}}),l.div(function(){return l.button(".button.primary",{onClick:h,disabled:n,class:l.classify({disabled:n})},function(){return l.format("cancel-submit")})})):void 0})})})})});if(!j)return l.b(C,".quiet.dark-hover",function(){return l.icon("close"),l.text(" "),l.format("cancel-productname-ellipsis",{productName:b})})}})})})},{}],297:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(216),s=e(513),a=e("react"),u=e("react-dom"),c=e(487),l=e(496),r=e(301),d=e(488)("credit_card"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="change additional details",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return a.createElement(c,{},this.getFormComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getFormComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(r,{initialValue:e.model.get("paidAccount").invoiceDetails,onSubmit:function(t){return i.changeInvoiceDetails(e.model,t).then(function(t){return e.model.set(t),s.hide()}).done()}})})}}(this))},t}(l)},{}],298:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(210),o=e(29),s=e(513),a=e(126),u=e(496),c=e(667),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="change billing contact",t.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"},t.prototype.render=function(){var e,t;return t=this.model.get("paidAccount"),e=t?{fullName:t.contactFullName,email:t.contactEmail,locale:t.contactLocale}:{fullName:o.me().get("fullName"),email:o.me().get("email"),locale:o.me().getLocale()},null==e.locale&&(e.locale="en-US"),this.$el.html(c(e)),this},t.prototype.changeBillingContact=function(e){var t,n,o,i,u;for(a.stop(e),t={},t.billingContactFullName=this.$("input#billingContactFullName").val(),t.billingContactEmail=this.$("input#billingContactEmail").val(),t.billingContactLocale=this.$("select#billingContactLocale").val(),this.$(".js-submit").attr("disabled","disabled"),u=["billingContactFullName","billingContactEmail","billingContactLocale"],o=0,i=u.length;i>o;o++)n=u[o],this.$("#"+n).removeClass("input-error");return r({url:this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:t,type:"POST",success:function(e){return function(t){return e.model.set(t),s.hide()}}(this),error:function(e){return function(t){var n,r;return n=null!=(r=t.responseText)?r:"error",e.$(".js-submit").removeAttr("disabled","disabled"),/billingContactFullName/.test(n)?void e.$("#billingContactFullName").addClass("input-error"):/email/.test(n)?void e.$("#billingContactEmail").addClass("input-error"):/locale/.test(n)?void e.$("#billingContactLocale").addClass("input-error"):e.$(".error").text(n).show()}}(this)})},t}(u)},{}],299:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(211),i=e(312),a=e(216),u=e(513),c=e("react"),l=e("react-dom"),d=e(487),p=e(496),s=e(304),h=e(488)("credit_card"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="change credit card",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return c.createElement(d,{},this.getFormComponent())},t.prototype.renderReactSection=function(){return l.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getFormComponent=function(){return h.render(function(e){return function(){return h.div(function(){return h.createElement(s,{onSubmit:function(t){return a.changeCreditCard(e.model,t).catch(r.BadRequest,function(e){var t,n,r,o;for(o=["country","zipCode"],n=0,r=o.length;r>n;n++)if(t=o[n],e.message.trim()==="invalid value for "+t)throw i.InvalidField("",{field:t});throw i.PostError(e.message)}).then(function(t){return e.model.set(t),u.hide()})}})})}}(this))},t}(p)},{}],300:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p;r=e(312),o=e("bluebird"),i=e("react"),l=e(488)("credit_card"),s=e("underscore"),a=e(231),u=e(101),d=e(43),p=e("xtend"),c=e(317),t.exports=i.createClass({displayName:"CreditCardFormComponent",getInitialState:function(){return{errorField:null,unknownError:null,waitingForCCAuth:!1}},getData:function(){return this.props.extraData},render:l.renderable(function(){var e,t,n,r,i,s,c,d,h;return s=this.props,n=s.contentBuilders,e=s.buttonKey,c=this.state,r=c.errorField,d=c.unknownError,h=c.waitingForCCAuth,t=[],i=function(e){return function(){var n;n=o.map(t.concat([e]),a.method("getData")).then(function(e){return p.apply(null,e)}),e.submit(n)}}(this),l.div(l.classify({".credit-card-form":!0,".bc-billing-wrap":!0}),function(){return l.p({class:l.classify({"u-gutter":!0,"u-form-error":!0,hide:!d})},function(){return l.text(null!=d?d:"")}),n.map(function(e){return e({ref:a(t,"push"),errorField:r})}).forEach(a(l,"addElement")),l.hr(".u-gutter"),l.p({class:l.classify({"u-gutter":!0,"u-form-info":!0,hide:!h})},function(){return l.text(u(["alerts","authorizing"]))}),l.div({class:l.classify({"u-gutter":!0,hide:h})},function(){return l.input({type:"button",value:l.l(e),class:"primary",onClick:i})})})}),componentWillUnmount:function(){var e;return null!=(e=this._submitPromise)?e.cancel():void 0},submit:function(e){var t,n,i;if(null!=this._submitPromise)throw Error("Submission already in progress!");return i=this.props,n=i.onSubmit,t=i.doPoll,this.setState({errorField:null,unknownError:null,waitingForCCAuth:!0}),this._submitPromise=e.then(function(e){return function(e){return null==e.acceptTOS||e.acceptTOS?c(a(n,e),t,e):o.reject(r.InvalidField("",{field:"acceptTOS"}))}}(this)).then(function(e){return function(){e.props.didGetAuthStatus(),d("Business Class","Purchase","yearly price")}}(this)).catch(r.InvalidField,function(e){return function(t){var n;n=t.field,e.setState({errorField:n})}}(this)).catch(r.PostError,function(e){return function(t){var n,r;n=t.err,e.setState({unknownError:null!=(r=n.message)?r:"error"})}}(this)).catch(r.PollError,function(e){return function(t){var n;n=t.err,e.props.didntGetAuthStatus()}}(this)).catch(o.CancellationError,function(){}).finally(function(e){return function(){e.isMounted()&&e.setState({waitingForCCAuth:!1}),delete e._submitPromise}}(this)).done()}})},{}],301:[function(e,t,n){var r,o,i,s,a,u,c,l;i=e("react"),r=e(307),c=e(488)("credit_card"),s=e("underscore"),l=e("xtend"),c=e(488)("credit_card"),a=e(231),o=e(307),u=function(e){var t,n;return n=e[0],t=e[1],[n,c.l(["countries",t])]},t.exports=i.createClass({displayName:"AdditionalDetailsComponent",formFields:["invoiceDetails"],requiredFields:{},mixins:[r],getInitialState:function(){return{invoiceDetails:this.props.initialValue}},render:c.renderable(function(){var e,t,n,r;return r=this.state.submitting,e=this.props.onSubmit,t=function(t){return function(n){return t.setState({submitting:!0}),t.getData().then(e).done()}}(this),n=this.controlledOpts("invoiceDetails"),c.div(".u-clearfix",function(){return c.form({onSubmit:e,ref:"form"},function(){return c.div(".additional-details-section.u-clearfix",function(){return c.div(".invoice-details",function(){return c.label(function(){return c.textarea(".invoice-details-textarea",l(n,{readOnly:r,maxLength:1024,placeholder:c.l("additional-details-placeholder")}))})})})}),c.div(function(){return c.button(".primary",{onClick:t,disabled:r,class:c.classify({disabled:r})},function(){return c.format("save")})})})})})},{}],302:[function(e,t,n){var r,o,i,s,a,u,c,l;o=e("react"),c=e(488)("credit_card"),i=e("underscore"),l=e("xtend"),a=e(231),s=e(306),r=e(307),u=function(e){var t,n;return n=e[0],t=e[1],[n,c.l(["countries",t])]},t.exports=o.createClass({displayName:"AddressComponent",formFields:["zipCode","country"],requiredFields:{country:/\S/,zipCode:function(e,t){var n,r;return n=t.country,"US"!==n||5===(r=e.replace(/\D/g,"").length)||9===r}},mixins:[r],getInitialState:function(){return l(this.defaultInitialState(),{country:s.special[0][0]})},render:c.renderable(function(){var e,t,n,r,o;return n=this.props.errorField,t=this.state.country,o=this.getLocalizedCountries(),e=a(this,"controlledOpts"),r=function(t,r,o,i){var s;return s=t===n,c.label(function(){return c.format(r),c.input(l(i,e(t),{class:c.classify({text:!0,"input-error":s}),type:"text"})),s?c.span(".u-form-error",function(){return c.format(o)}):void 0})},c.div(".u-clearfix",function(){return c.form(function(){return c.div(".u-gutter.credit-card-form-section",function(){return c.div(".credit-card-country",function(){return c.label(function(){return c.format("country"),c.text(" ")}),c.select(l(e("country"),{autoComplete:"country"}),function(){var e,t,n,r,i;for(e=0,t=o.length;t>e;e++)r=o[e],i=r[0],n=r[1],c.option({value:i},function(){return c.text(n)})})}),"US"===t?c.div(".credit-card-zip-code",function(){return r("zipCode","zip-postal-code","us-addresses-require-a-zip-code",{maxLength:"10",size:"10",autoComplete:"postal-code"})}):void 0})})})}),getLocalizedCountries:function(){var e,t;return e=s.special.map(u),t=s.unloved.map(u).sort(function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],r.localeCompare(i)}),e.concat(t)}})},{}],303:[function(e,t,n){var r,o,i,s,a,u,c,l;o=e(312),a=e("react"),i=e(307),r=e(305),s=e("bluebird"),c=e(488)("credit_card"),u=e(231),l=e("xtend"),t.exports=a.createClass({displayName:"CreditCardComponent",formFields:[],requiredFields:{},mixins:[i,r],getInitialState:function(){return l(this.defaultInitialState(),this.gatewayInitialState())},render:c.renderable(function(){var e,t,n,r,o,i,s,a,l;return t=this.props.errorField,l=this.state,i=l.gatewayLoaded,n=l.gatewayErrorField,o=l.gatewayFocusField,r=l.gatewayFieldStatus,s="name"===t,e=u(this,"controlledOpts"),a=function(e){return function(e){return e.preventDefault()}}(this),c.div(".u-clearfix",function(){return c.form({onSubmit:a,ref:"form"},function(){return c.div(".window-module-title",function(){return c.h4(function(){return c.format("credit-card-for-account")})}),c.div(".u-gutter.credit-card-form-section",function(){var e;return e=function(e){var t,n,s,a,u;return u=e.selector,a=e.labelKey,n=e.fieldType,t=e.errorKey,s="invalid"===r[n],c.label(function(){return c.format(a),c.div(".iframe-input"+u,{class:c.classify({disabled:!i,focus:o===n,"input-error":s})}),null!=t&&s?c.span(".u-form-error",function(){return c.format(t)}):void 0})},c.div(".u-clearfix",function(){return c.div(".credit-card-form-number",function(){return e({selector:".js-card-number",labelKey:"card-number",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),c.div(".credit-card-form-cvv",function(){return e({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv"})}),c.div(".credit-card-expiration-date",function(){return e({selector:".js-expiration-date",labelKey:"expiration-date",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})})})})})})})})},{}],304:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p;o=e(312),a=e("react"),i=e(307),r=e(305),s=e("bluebird"),d=e(488)("credit_card"),c=e(231),p=e("xtend"),u=e(306),l=function(e){var t,n;return n=e[0],t=e[1],[n,d.l(["countries",t])]},t.exports=a.createClass({displayName:"CreditCardUpdateComponent",formFields:["country","zipCode"],requiredFields:{country:/\S/,zipCode:function(e,t){var n,r;return n=t.country,"US"!==n||5===(r=e.replace(/\D/g,"").length)||9===r}},mixins:[i,r],getInitialState:function(){return p(this.defaultInitialState(),this.gatewayInitialState(),{country:u.special[0][0]})},render:d.renderable(function(){var e,t,n,r,i,s,a,u,l,h,m,f,g,v,y,b;return m=this.props.onSubmit,v=this.state,y=v.submitting,n=v.errorField,u=v.gatewayLoaded,i=v.gatewayErrorField,a=v.gatewayFocusField,s=v.gatewayFieldStatus,t=v.country,b=v.unknownError,h=this.getLocalizedCountries(),e=c(this,"controlledOpts"),l="name"===n,f=function(e){return function(t){return e.setState({submitting:!0}),e.getData().then(m).catch(o.InvalidField,function(t){var n;return n=t.field,e.setState({errorField:n,submitting:!1})}).catch(o.PostError,function(t){var n;return n=t.message,e.setState({unknownError:null!=n?n:"error",submitting:!1})}).done()}}(this),g=function(e){return e.preventDefault()},r=function(t,r,o,i){var s;return s=t===n,d.label(function(){return d.format(r),d.input(p(i,e(t),{class:d.classify({text:!0,"input-error":s}),type:"text"})),s?d.span(".u-form-error",function(){return d.format(o)}):void 0})},d.div(".u-clearfix",function(){return b&&d.p(".u-form-error",function(){return d.text(b)}),d.form({onSubmit:g,ref:"form",key:"credit-card-update-form"},function(){return d.div(".credit-card-update-section.u-clearfix",function(){var o;return o=function(e){var t,r,o,i,c;return c=e.selector,i=e.labelKey,r=e.fieldType,t=e.errorKey,o="invalid"===s[r]||n===r,d.label(function(){return d.format(i),d.div(".iframe-input"+c,{class:d.classify({disabled:!u,focus:a===r,"input-error":o})}),null!=t&&o?d.span(".u-form-error",function(){return d.format(t)}):void 0})},d.div(".u-clearfix",function(){return d.div(".credit-card-form-number",function(){return o({selector:".js-card-number",labelKey:"card-number",fieldType:"number",errorKey:"please-provide-your-full-card-number-for-credit-card-verification"})}),d.div(".credit-card-expiration-date",function(){return o({selector:".js-expiration-date",labelKey:"expiration",fieldType:"expirationDate",errorKey:"please-provide-a-valid-expiration-date"})}),d.div(".credit-card-form-cvv",function(){return o({selector:".js-cvv",labelKey:"cvv",fieldType:"cvv"})})}),d.div(".credit-card-country",function(){return d.label(function(){return d.format("country"),d.text(" ")}),d.select(p(e("country"),{autoComplete:"country"}),function(){var e,t,n,r,o;for(e=0,t=h.length;t>e;e++)r=h[e],o=r[0],n=r[1],d.option({value:o},function(){return d.text(n)})})}),"US"===t?d.div(".credit-card-zip-code",function(){return r("zipCode","zip-postal-code","us-addresses-require-a-zip-code",{maxLength:"10",size:"10",autoComplete:"postal-code"})}):void 0})}),d.div(function(){return d.button(".primary",{onClick:f,disabled:y,class:d.classify({disabled:y})},function(){return d.format("save")})})})}),getLocalizedCountries:function(){var e,t;return e=u.special.map(l),t=u.unloved.map(l).sort(function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],r.localeCompare(i)}),e.concat(t)}})},{}],305:[function(e,t,n){var r,o,i,s,a;r=e(312),o=e(123),i=e("bluebird"),s=e("underscore"),a=e(101),t.exports={gatewayFields:["number","cvv","expirationDate"],gatewayInitialState:function(){var e;return e=s.chain(this.gatewayFields).map(function(e){return[e,"empty"]}).object().value(),{gatewayLoaded:!1,gatewayFieldStatus:e,gatewayFocusField:null}},componentDidMount:function(){var e;if(null==this.refs.form)throw Error("expected to be mixed into something with a ref to a form");return e={id:this.refs.form,enableCORS:!0,onPaymentMethodReceived:function(e){return function(t){return e._resolve({nonce:t.nonce})}}(this),onError:function(e){return function(t){var n,o,i,a;if("VALIDATION"===t.type){if(null==(o=t.details.invalidFieldKeys)||s.isEmpty(o))e.setFieldStatus("number","invalid");else for(n=0,a=o.length;a>n;n++)i=o[n],e.setFieldStatus(i,"invalid");e._reject(new r.InvalidField(t.message))}else e._reject(new r.PostError(t.message))}}(this),hostedFields:{onFieldEvent:function(e){return function(t){var n,r;switch(n=t.target.fieldKey,t.type){case"focus":return e.setState({gatewayFocusField:n});case"blur":return e.setState({gatewayFocusField:null}),n===e.state.errorField&&e.setState({errorField:null}),r=t.isEmpty?"empty":t.isValid?"valid":"invalid",e.setFieldStatus(n,r);case"fieldStateChange":return r=t.isEmpty?"empty":t.isPotentiallyValid?"valid":"invalid",e.setFieldStatus(n,r)}}}(this),styles:{input:{"font-size":"14px","font-family":'"Helvetica Neue", Arial, Helvetica, sans-serif'}},number:{selector:".js-card-number"},cvv:{selector:".js-cvv"},expirationDate:{selector:".js-expiration-date",placeholder:a("month/year abbreviation")}}},this._loadGateway().then(function(t){return function(){return t.setState({gatewayLoaded:!0}),window.braintree.setup(window.braintreeClientToken,"custom",e)}}(this))},componentWillUnmount:function(){var e;return null!=(e=this._asyncDataPromise)?e.cancel():void 0},componentWillReceiveProps:function(e){var t;return t=function(){switch(e.errorField){case"credit card number":return"number";case"expYear":return"expirationDate";default:return e.errorField}}(),this.setFieldStatus(t,"invalid")},_awaitData:function(){return null!=this._awaiting&&this._reject(new Error("submitting form again")),new i(function(e){return function(t,n){return e._awaiting={resolve:t,reject:n}}}(this)).finally(function(e){return function(){return e._awaiting=null}}(this))},_resolve:function(e){var t;return null!=(t=this._awaiting)?t.resolve(e):void 0},_reject:function(e){var t;return null!=(t=this._awaiting)?t.reject(e):void 0},getAsyncData:function(){var e,t,n,s,a;for(s=this.gatewayFields,t=0,n=s.length;n>t;t++)if(e=s[t],"valid"!==this.state.gatewayFieldStatus[e])return i.reject(r.InvalidField("",{field:e}));return null!=(a=this._asyncDataPromise)&&a.cancel(),this._asyncDataPromise=this._awaitData().cancellable(),this.refs.form.dispatchEvent(new o("submit",{cancelable:!0})),this._asyncDataPromise},_loadGateway:function(){return null!=this._loadGatewayPromise?this._loadGatewayPromise:this._loadGatewayPromise=i.try(function(){return null==window.braintree?new i(function(e){var t;return t=document.createElement("script"),t.src="https://js.braintreegateway.com/js/braintree-2.21.0.min.js",t.onload=e,document.querySelector("head").appendChild(t)}):void 0}).return()},setFieldStatus:function(e,t){var n;return n=s.clone(this.state.gatewayFieldStatus),n[e]=t,this.setState({gatewayFieldStatus:n})}}},{}],306:[function(e,t,n){t.exports={special:[["US","united-states"],["GB","united-kingdom"],["CA","canada"],["AU","australia"],["DE","germany"],["NL","netherlands"]],unloved:[["AF","afghanistan"],["AL","albania"],["DZ","algeria"],["AS","american-samoa"],["AD","andorra"],["AI","anguilla"],["AG","antiqua-and-barbuda"],["AR","argentina"],["AM","armenia"],["AW","aruba"],["AU","australia"],["AT","austria"],["AZ","azerbaijan"],["BS","bahamas"],["BH","bahrain"],["BD","bangladesh"],["BB","barbados"],["BY","belarus"],["BE","belgium"],["BZ","belize"],["BJ","benin"],["BM","bermuda"],["BT","bhutan"],["BO","bolivia"],["BA","bosnia-herzegovina"],["BV","bouvet-islands"],["BR","brazil"],["IO","british-indian-ocean-territory"],["VI","british-virgin-islands"],["BN","brunei"],["BG","bulgaria"],["BF","burkina-faso"],["BI","burundi"],["KH","cambodia"],["CM","cameroon"],["CA","canada"],["CV","cape-verde"],["KY","cayman-islands"],["CF","central-african-republic"],["TD","chad"],["CL","chile"],["CN","china"],["CO","colombia"],["KM","comoros"],["CG","congo"],["CR","costa-rica"],["CI","cote-d-ivoire"],["HR","croatia"],["CY","cyprus"],["CZ","czech-republic"],["DK","denmark"],["DJ","djibouti"],["DM","dominica"],["DO","dominican-republic"],["EG","egypt"],["SV","el-salvador"],["EC","equador"],["GQ","equatorial-guinea"],["ER","eritrea"],["EE","estonia"],["ET","ethiopia"],["FK","falkland-islands"],["FO","faroe-islands"],["FM","federated-states-of-micronesia"],["FJ","fiji"],["FI","finland"],["FR","france"],["GF","french-guiana"],["PF","french-polynesia"],["GA","gabon"],["GM","gambia"],["GE","georgia"],["DE","germany"],["GH","ghana"],["GI","gibraltar"],["GR","greece"],["GL","greenland"],["GD","grenada"],["GP","guadeloupe"],["GU","guam"],["GT","guatemala"],["GN","guinea"],["GW","guinea-bissau"],["GY","guyana"],["HT","haiti"],["HN","honduras"],["HK","hong-kong"],["HU","hungary"],["IS","iceland"],["IN","india"],["ID","indonesia"],["IE","ireland"],["IL","israel"],["IT","italy"],["JM","jamaica"],["JP","japan"],["JO","jordan"],["KZ","kazakhstan"],["KE","kenya"],["KI","kiribati"],["KW","kuwait"],["KG","kyrgyzstan"],["LA","laos"],["LV","latvia"],["LB","lebanon"],["LS","lesotho"],["LR","liberia"],["LI","liechtenstein"],["LT","lithuania"],["LU","luxembourg"],["MO","macau"],["MG","madagascar"],["MW","malawi"],["MY","malaysia"],["MV","maldives"],["ML","mali"],["MT","malta"],["MH","marshall-islands"],["MQ","martinique"],["MR","mauritania"],["MU","mauritius"],["YT","mayotte"],["FX","metropolitan-france"],["MX","mexico"],["MD","moldova"],["MN","mongolia"],["ME","montenegro"],["MA","morocco"],["MZ","mozambique"],["NA","namibia"],["NR","nauru"],["NP","nepal"],["AN","netherlands-antilles"],["NL","netherlands"],["NC","new-caledonia"],["NZ","new-zealand"],["NI","nicaragua"],["NE","niger"],["NG","nigeria"],["MP","northern-mariana-islands"],["NO","norway"],["OM","oman"],["PK","pakistan"],["PW","palau"],["PA","panama"],["PG","papua-new-guinea"],["PY","paraguay"],["PE","peru"],["PE","peru"],["PH","philippines"],["PN","pitcairn"],["PL","poland"],["PT","portugal"],["PR","puerto-rico"],["QA","qatar"],["KR","republic-of-korea"],["RE","reunion"],["RO","romania"],["RU","russia"],["ST","sao-tome-and-principe"],["SA","saudi-arabia"],["SN","senegal"],["RS","serbia"],["SC","seychelles"],["SL","sierra-leone"],["SG","singapore"],["SK","slovakia"],["SI","slovenia"],["SB","solomon-islands"],["SO","somalia"],["ZA","south-africa"],["ES","spain"],["LK","sri-lanka"],["SH","st-helena"],["KN","st-kitts-and-nevis"],["LC","st-lucia"],["VC","st-vincent-and-the-grenadines"],["SD","sudan"],["SR","suriname"],["SJ","svalbard-and-jan-mayen-islands"],["SZ","swaziland"],["SE","sweden"],["CH","switzerland"],["SY","syria"],["TW","taiwan"],["TJ","tajikistan"],["TZ","tanzania"],["TH","thailand"],["MK","the-former-yugoslav-republic-of-macedonia"],["TG","togo"],["TO","tonga"],["TT","trinidad-and-tobago"],["TR","turkey"],["TM","turkmenistan"],["TC","turks-and-caicos-islands"],["TV","tuvalu"],["UG","uganda"],["UA","ukraine"],["AE","united-arab-emirates"],["GB","united-kingdom"],["US","united-states"],["UY","uruguay"],["UZ","uzbekistan"],["VU","vanuatu"],["VA","vatican-city"],["VE","venezuela"],["VN","vietnam"],["EH","western-sahara"],["YE","yemen"],["ZR","zaire"],["ZM","zambia"],["ZW","zimbabwe"]]}},{}],307:[function(e,t,n){var r,o,i,s;i=e("underscore"),r=e(312),o=e("bluebird"),s=e("xtend"),t.exports={defaultInitialState:function(){return i.object(this.formFields.map(function(e){return[e,""]}))},getData:function(){var e,t,n,a,u,c;n=null!=(t=this.requiredFields)?t:{};for(e in n)if(u=n[e],c=this.state[e],a=i.isRegExp(u)?u.test(c):i.isFunction(u)?u(c,this.state):i.isEqual(u,c),!a)return o.reject(r.InvalidField("",{field:e}));return o.resolve("function"==typeof this.getAsyncData?this.getAsyncData():void 0).then(function(e){return function(t){return s(t,i.object(e.formFields.map(function(t){return[t,e.state[t]]})))}}(this))},controlledOpts:function(e){return{onChange:function(t){return function(n){var r;return r={},r[e]=n.target.value,t.setState(r)}}(this),value:this.state[e]}}}},{}],
308:[function(e,t,n){var r,o,i,s,a,u,c,l,d;r=e(307),o=e("react"),l=e(488)("credit_card"),i=e("underscore"),d=e("xtend"),s=e(231),a=e(90),u=e(91),c=e(85),t.exports=o.createClass({displayName:"ProductsComponent",formFields:["products"],mixins:[r],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:l.renderable(function(){var e,t,n,r,o,i,d,p;return o=this.props,r=o.productName,n=o.monthlyProduct,p=o.yearlyProduct,e=o.billingStrategy,t=s(l,"radio",this),d=null!=(i=c("bcAnnualPricingV1"))?i.get("showPerUserSavings"):void 0,l.div(function(){return l.h1(".business-class-new-intro-header-title.bc-billing-title",function(){return l.format("subscribing-to-productname",{productName:r})}),l.div(".window-module",function(){return l.div(".window-module-title",function(){return l.h3(function(){return l.format("billing")})}),l.div(".u-gutter.u-clearfix.credit-card-form-section",function(){return e.perActiveUser&&l.p(".u-quiet",function(){return l.format("smart billing explanation recently active")}),l.div(".radio-div.u-clearfix",function(){return l.label(function(){t("products",[n.productNumber.toString()]),e.perUser?l.format("monthly-totalperuserprice-per-month-price-per-member-per-month",{totalPerUserPrice:a(n.totalPrice),price:a(n.price),billableMemberCount:e.userCount}):l.format("monthly-price-per-month",{price:a(n.price)})})}),l.div(".radio-div.u-clearfix",function(){return l.label(function(){t("products",[p.productNumber.toString()]),e.perUser?d?l.text("Yearly - $"+a(p.totalPrice)+" per year ($"+a(p.price/12)+" per member per month, paid annually. Save "+u(p.savePercent)+"%!)"):l.format("yearly-totalperuserprice-per-year-price-per-member-per-year-save-savepercent",{totalPerUserPrice:a(p.totalPrice),price:a(p.price),billableMemberCount:e.userCount,savePercent:u(p.savePercent)}):l.format("yearly-price-per-year-save-savepercent",{price:a(p.price),savePercent:u(p.savePercent)})})})})})})})})},{}],309:[function(e,t,n){var r,o,i;r=e(307),o=e("react"),i=e(488)("credit_card"),t.exports=o.createClass({displayName:"TermsOfServiceComponent",formFields:["acceptTOS"],requiredFields:{acceptTOS:!0},mixins:[r],getInitialState:function(){return{acceptTOS:!1}},render:i.renderable(function(){var e,t,n,r;return t=this.props.errorField,n="acceptTOS"===t,r=function(e){return function(t){return e.setState({acceptTOS:t.target.checked})}}(this),e=this.state.acceptTOS,i.div(".u-gutter",{id:"divAcceptTOS"},function(){return n&&i.p(".u-form-error.error",function(){return i.format("you-must-accept-the-terms-of-service-and-privacy-policy")}),i.div(".check-div.u-clearfix",function(){return i.label(function(){return i.input({class:i.classify({"input-error":n}),type:"checkbox",checked:e,onChange:r}),i.format("i-accept-the-terms-of-service-and-the-privacy-policy")})})})})})},{}],310:[function(e,t,n){var r,o,i,s,a;r=e(65),i=e(101),s=e("moment"),o=e(231),a=e("xtend"),t.exports=function(e,t,n){var o,u,c,l,d,p,h,m,f,g,v,y;return c={},c.paidAccount=e.get("paidAccount"),c.key=c.id=e.id,c.statementUrl=e.urlRoot+"/"+e.id+"/paidAccount/statement",u=null!=(d=c.paidAccount)&&null!=(p=d.products)?p[0]:void 0,y=t.getYearlyEquivalent(u),null!=u&&(l=null!=(h=c.paidAccount.billingDates)?h[u]:void 0)&&(c.nextBillingDate=s(new Date(l)).format("LL")),c.yearlyEquivalent=y,c.yearlyEquivalentPrice=t.getPrice(y),c.yearlyEquivalentTotalPrice="function"==typeof e.totalPerUserPrice?e.totalPerUserPrice(y):void 0,c.yearlyDiscountPercent=t.getYearlyDiscountPercent(y,u),c.price=t.getPrice(u),c.billingStrategy=e.getBillingStrategy(u),t.isPerUser(u)?c.nextChargeAmount=e.totalPerUserPrice(u):c.nextChargeAmount=t.getPrice(u),c.current=t.currentPriceObjectForModel(e),c.canSwitchToYearly=function(){return!t.isUpgrade(u)&&null!=t.getYearlyEquivalent(u)},c.activeAccount=r.isActive(c.paidAccount),v=null!=(m=c.paidAccount)?m.standing:void 0,c.hasAccount=r.hasAccount(v),c.processingAccount=r.isProcessing(v),c.problemAccount=r.isProblem(v),c.willExpire=r.willExpire(c.paidAccount),c.willExpire&&null!=u&&(l=c.paidAccount.expirationDates[u])&&(c.expirationDate=s(l).format("LL")),null!=(o=r.standingName(null!=(f=e.get("paidAccount"))?f.standing:void 0))&&(c.accountStanding=o,c.accountStandingDisplay=i(["account standing",o])),c.cancelledAccount=r.isCancelled(c.paidAccount),c.needCC=r.needsCC(null!=(g=c.paidAccount)?g.standing:void 0),a(c,n)}},{}],311:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(316),i=e("moment"),a=e(246),u=function(e,t){if("string"!=typeof e)throw Error("Not a string!");return 0===e.indexOf(t)},s=function(e){return{date:e.date,statementUrl:e.statementUrl,fallbackText:e.item,translationKey:e.translationKey,translationArgs:e.translationSubstitutions,amount:Math.abs(e.amount),type:function(){if(u(e.item,"Credit."))return"return";if(u(e.item,"Refund to your"))return"refund";if(e.amount>0)return"credit";if(e.amount<0)return"debit";throw new Error("Cannot format a row with 0 amount!")}()}},c=function(e){var t,n;return n=(null!=(t=e.statement)?t:[]).filter(function(e){return 0!==e.amount}).map(s).reverse(),{statement:n}},t.exports=r=function(e){function t(){var e;t.__super__.constructor.apply(this,arguments),e=null,this.state=this._protectedState.map(a(function(t){return t([{value:a.Any}],function(t){var n;return n=t.value,e=c(n)}),t([{error:a.Any}],function(e){var t;return t=e.error,{errorText:t.message}}),t([{timeout:!0}],function(){return e}),t([{}],function(){return{}})}))}return l(t,e),t}(o)},{}],312:[function(e,t,n){var r;r=e(102),t.exports=r("CreditCardForm",["InvalidField","PostError","PollError"])},{}],313:[function(e,t,n){var r,o,i,s;s=e(65),r=s.isActive,o=s.isProcessing,i=s.needsCC,t.exports=function(e){return i(null!=e?e.standing:void 0)||r(e)&&!o(null!=e?e.standing:void 0)}},{}],314:[function(e,t,n){var r;r=e(239),t.exports=r("PollTimeoutError")},{}],315:[function(e,t,n){var r,o;o=e("bluebird"),r=e(314),t.exports=function(e,t){var n,i;return i=null,n=new o(function(n,o){i=e.state.subscribe(function(e){"error"in e?o(e.error):"timeout"in e?o(r()):"value"in e&&t(e.value)&&n(e.value)})}),e.start(),e.finished.then(function(){return i()}),n.finally(function(){return e.stop()})}},{}],316:[function(e,t,n){var r,o,i,s,a,u,c,l,d;r=e(211),o=e("hearsay"),a=e("bluebird"),d=e("moment"),l=e(231),u=e(70),c=e(239),i=c("PollingError"),t.exports=s=function(){function e(e,t,n){var r;this.pollFx=e,this.minutesToPoll=t,this.intervalMs=n,this._protectedState=new o.Slot({}),this.state=this._protectedState,this.finished=new a(function(e){return function(t){return e._resolveFinished=t}}(this)),r=this._protectedState.use(),this.finished.finally(r)}return e.prototype._started=!1,e.prototype.start=function(){u(!this._started,"Cannot start more than once!"),u(!this._isComplete(),"Cannot start after stopping!"),this._started=!0,this._dateToStopPolling=d().add(this.minutesToPoll,"minutes").toDate(),this._poll()},e.prototype._done=function(){return u(!this._isComplete(),"Pollster cannot complete more than once!"),this._resolveFinished(this.state.get())},e.prototype._isComplete=function(){return this.finished.isFulfilled()},e.prototype.stop=function(){this._isComplete()||(null!=this._currentTimeout&&(clearTimeout(this._currentTimeout),delete this._currentTimeout),this._done())},e.prototype._poll=function(){return a.try(this.pollFx).catch(function(e){return a.reject(i("",{innerError:e}))}).then(function(e){return function(t){e._isComplete()||(e._protectedState.set({value:t}),d().isBefore(e._dateToStopPolling)?e._currentTimeout=setTimeout(l(e,"_poll"),e.intervalMs):(e._protectedState.set({timeout:!0}),delete e._currentTimeout,e._done()))}}(this)).catch(i,function(e){return function(t){var n;return n=t.innerError,e._protectedState.set({error:n}),e._done()}}(this)).done()},e}()},{}],317:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h;r=e(211),o=e(212),s=e(316),a=e("bluebird"),d=e(315),u=e(313),i=e(312),c=function(e){return u(e.paidAccount)},h="U.S. addresses require a 5 or 9 digit zip code. Canadian addresses require a Postal Code.",l=function(e){return e instanceof r.BadRequest&&(/^invalid value for /.test(e.message)||e.message.trim()===h)},p=function(e){return a.resolve(e).disposer(function(e){return e.stop()})},t.exports=function(e,t,n){return a.using(p(new s(t,1,1e3)),function(t){return e().cancellable().catch(l,function(e){var t,n;return n=e.message,t=n.trim()===h?"zipCode":n.replace("invalid value for ","").trim(),a.reject(i.InvalidField("",{field:t}))}).catch(r,function(e){return a.reject(i.PostError("",{err:e}))}).then(function(e){return c(e)?e:d(t,c).catch(function(e){return a.reject(i.PollError("",{err:e}))})})})}},{}],318:[function(e,t,n){var r,o,i,s,a,u,c;r=e(73),s=e(231),a=e(128),o=e("react"),u=e(488)(),i=e(104),c=e(43),t.exports=o.createClass({displayName:"BoardListAnnouncementComponent",render:u.renderable(function(){var e,t,n,r,o;return o=this.props,e=o.icon,t=o.message,n=o.onClick,r=o.onDismiss,u.div(".boards-page-announcement-container",{onClick:n},function(){return u.div(".boards-page-announcement",function(){return u.icon(e),u.text(" "),u.raw(i.description.formatInline(t)),u.div(".boards-page-announcement-dismiss",{onClick:r},function(){return u.icon("close")})})})}),shouldComponentUpdate:a})},{}],319:[function(e,t,n){var r,o;r=e("react"),o=e(488)("board_list_item_add"),t.exports=r.createClass({displayName:"BoardListItemAddComponent",render:o.renderable(function(){var e;return e=this.props.newBoard,o.li(".boards-page-board-section-list-item",function(){return o.b(e,".board-tile.mod-add",function(){return o.format("create-new-board-ellipsis")})})})})},{}],320:[function(e,t,n){var r,o,i,s,a,u,c;r=e(73),i=e(231),a=e(128),o=e("react"),u=e(488)("board_list_item"),c=e(43),s=function(e){var t;return t=r.browserStr,"safari"===t&&0===e.button},t.exports=o.createClass({displayName:"BoardListItemComponent",render:u.renderable(function(){var e,t,n,r,o,a,l,d,p,h,m,f,g,v,y,b,w,_,k;return v=this.props,h=v.isStarred,y=v.background,r=y.color,d=y.image,k=y.tiled,n=y.brightness,b=v.relUrl,g=v.orgname,m=v.name,w=v.showOptions,l=v.id,f=v.onStarClick,t=v.badgeComponents,_=v.tagComponents,a=v.hidden,o=v.hasUnseenActivity,p=v.isDraggable,e=this.getBackgroundStyle(),u.li({class:u.classify({hide:a,"boards-page-board-section-list-item":!0,"js-draggable":p})},function(){var a,d,p,v;if(a={"board-tile":!0,tile:k},!r)switch(n){case"unknown":a["mod-unknown-background"]=!0;break;case"light":a["mod-light-background"]=!0}return p=function(e){var t;return s(e)?(t=e.currentTarget,t.removeAttribute("href")):void 0},v=function(e){var t;return t=e.currentTarget,t.setAttribute("href",b)},d=function(){return c("Organization View","Boards Page","Click on Board")},u.link(b,{onMouseDown:p,onMouseUp:v,onClick:d,class:u.classify(a),style:e},function(){var e;return u.span(".board-tile-fade"),e={"board-tile-details":!0,"is-badged":!0,"is-sub-named":g},u.span({class:u.classify(e)},function(){u.span(".board-tile-details-name",{title:m,dir:"auto"},function(){return u.text(m)}),g&&u.span(".board-tile-details-sub-name",{title:g,dir:"auto"},function(){return u.text(g)})}),w&&u.span(".board-tile-options",function(){return o&&u.span(".board-tile-options-unread-indicator",{title:u.l("there-is-new-activity-on-this-board")}),u.icon("star",{class:u.classify({"is-starred":h,"board-tile-options-star-icon":!0}),title:u.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list"),onClick:function(e){return e.preventDefault(),e.stopPropagation(),f(l)}})}),u.span(".board-tile-badges",function(){return t.forEach(i(u,"addElement"))})}),u.div(".board-tags.u-clearfix",function(){return _.forEach(i(u,"addElement"))})})}),getBackgroundStyle:function(){var e,t,n,r,o;return r=this.props.background,t=r.color,n=r.image,o=r.tiled,e=r.brightness,t?{backgroundColor:t}:{backgroundImage:u.urlify(n)}},shouldComponentUpdate:a})},{}],321:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m;r=e(320),p=e(231),o=e("react"),s=e("react-dnd"),i=e("react-dom"),h=e("recup"),m=e("xtend"),a=o.createClass({displayName:"BoardListItemDndComponent",render:function(){var e,t,n,s,a;return a=this.props,t=a.connectDropTarget,e=a.connectDragSource,n=a.isDragging,n?h.render(function(){return h.li(".boards-page-board-section-list-item.mod-placeholder")}):(s=m(this.props,{ref:function(n){return t(i.findDOMNode(n)),e(i.findDOMNode(n))}}),o.createElement(r,s))}}),d={canDrop:function(){return!1},hover:function(e,t){return e.id!==t.getItem().id?e.onDragHover(t.getItem().id):void 0}},l=function(e,t){return{connectDropTarget:e.dropTarget()}},c={beginDrag:function(e){return{id:e.id}},endDrag:function(e){return e.onDragEnd()}},u=function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}},t.exports=s.DragSource("BoardTile",c,u)(s.DropTarget("BoardTile",d,l)(a))},{}],322:[function(e,t,n){var r,o,i;r=e("react"),i=e(488)("org_filtering"),o=e(128),t.exports=r.createClass({displayName:"BoardListItemTagAddComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.b(e,{class:"board-tags-item mod-add"},function(){return i.icon("add",{class:"board-tags-item-icon"})})}),shouldComponentUpdate:o})},{}],323:[function(e,t,n){var r,o,i;r=e("react"),i=e(488)(),o=e(128),t.exports=r.createClass({displayName:"BoardListItemTagComponent",render:i.renderable(function(){var e,t,n,r;return t=this.props,r=t.text,e=t.onClick,n=t.selected,i.b(e,{class:i.classify({"board-tags-item":!0,"mod-selected":n})},function(){return i.text(r)})}),shouldComponentUpdate:o})},{}],324:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(369),s=e(43),a=e("xtend"),r=e(29),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.events={mouseenter:"select",mouseleave:"deselect"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,a(i.prototype.events,e||this.events))},t.prototype.select=function(){return this.$el.addClass("selected")},t.prototype.deselect=function(){return this.$el.removeClass("selected")},t.prototype.trackBoardClick=function(){var e;return e=this.model.isMember(r.me())?"Board (Member of)":"Board (Not a Member)",s("Search","Select Item",e)},t}(i)},{}],325:[function(e,t,n){var r,o,i;r=e("react"),i=e(488)("board_list"),o=e("underscore"),t.exports=r.createClass({displayName:"BoardListSectionComponent",getInitialState:function(){return{collapsed:!0}},render:i.renderable(function(){var e,t,n,r,s,a,u,c,l,d,p,h;return h=this.props,c=h.items,a=h.header,p=h.noSidebarMod,r=h.createNewItem,d=h.mayBeSorted,u=h.isStarredSection,n=this.state.collapsed,e=c.length,s=d?o.chain(c).sortBy(function(e){return-e.props.dateLastActivity}).filter(function(e,t){return!n||10>=t||!e.props.isLessActive}).sortBy(function(e){return e.props.name.toLowerCase()}).value():c,l=e-s.length,t=i.classify({"boards-page-board-section":!0,"mod-no-sidebar":p}),i.div({class:t},function(e){return function(){var t;return a&&i.addElement(a),i.ul(".boards-page-board-section-list",function(){var e,t,n;for(e=0,n=s.length;n>e;e++)t=s[e],i.addElement(t);r&&i.addElement(r)}),t=function(){return e.setState({collapsed:!1})},s.length<c.length?i.b(t,".boards-page-show-all-boards.quiet-button",function(){return i.format("show-less-active-boards-count",{lessActiveCount:l})}):void 0}}(this))})})},{}],326:[function(e,t,n){var r,o,i,s,a,u;r=e(325),i=e("react-dnd"),o=e("react"),s=o.createClass({displayName:"BoardListSectionDndComponent",render:function(){var e;return(e=this.props.connectDropTarget)(o.createElement("div",{},o.createElement(r,this.props)))}}),u={drop:function(){}},a=function(e,t){return{connectDropTarget:e.dropTarget()}},t.exports=i.DropTarget("BoardTile",u,a)(s)},{}],327:[function(e,t,n){var r,o;r=e("react"),o=e(488)("board_list"),t.exports=r.createClass({displayName:"BoardListSectionHeaderComponent",render:o.renderable(function(){var e,t,n,r,i,s,a,u,c;return s=this.props,n=s.logoHash,c=s.title,e=s.iconClass,a=s.smallIconClass,u=s.smallIconTitleKey,t=s.linkElements,n&&(r=window.logoDomain+"/"+n+"/30.png",i=window.logoDomain+"/"+n+"/170.png"),o.div(".boards-page-board-section-header",function(){return o.div(".boards-page-board-section-header-icon",function(){return n?o.img({class:"boards-page-board-section-header-icon-image",src:r,srcSet:r+" 1x, "+i+" 2x",alt:c+" logo"}):o.span({class:"icon-lg icon-"+e})}),o.h3(".boards-page-board-section-header-name",function(){return o.text(c)}),a&&o.span(".boards-page-board-section-header-small-icon",function(){return o.icon(a,{title:o.l(u)})}),t?o.div(".boards-page-board-section-header-options",function(){var e,n,r,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(o.addElement(r));return i}):void 0})})})},{}],328:[function(e,t,n){var r,o;r=e("react"),o=e(488)("board_list"),t.exports=r.createClass({displayName:"BoardlistSectionHeaderLinkComponent",render:o.renderable(function(){var e,t,n,r;return t=this.props,r=t.url,e=t.iconClass,n=t.titleKey,o.link(r,".boards-page-board-section-header-options-item.dark-hover",function(){return o.icon(e,{class:"boards-page-board-section-header-options-item-icon"}),o.span(".boards-page-board-section-header-options-item-name",function(){return o.format(n)})})})})},{}],329:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),s=e(496),i=e(126),u=e(491)("bc_upsell_ad"),l=e(43),a=e("underscore"),c=u.renderable(function(){return u.div(".power-ups-pane-upsell-ad-icon",function(){return u.img(".power-ups-pane-upsell-ad-icon-image",{src:"https://a.trellocdn.com/images/206e08d8125909718f3de89595bf7478/business-class-logo-mark-blue.svg"})}),u.div(".power-ups-pane-upsell-ad-details",function(){return u.h4(".power-ups-pane-upsell-ad-details-header",function(){return u.format("name")}),u.p(function(){return u.format("description")}),u.p(function(){return u.a(".quiet.js-show-details",{href:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=power-ups-menu&utm_campaign=bc-upgrade",target:"_blank"},function(){return u.format("show-details")})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="power-ups-pane-upsell-ad",t.prototype.events={"click .js-show-details":function(){return l("Power-Ups","BC Upsell Ad")}},t.prototype.renderOnce=function(){return this.$el.html(c())},t}(s)},{}],330:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(505),i=e(496),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){var e;return e=this.subview(o,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:function(t){return e.editLabel(t)}}),e.render().el},t}(i)},{}],331:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)L.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},L={}.hasOwnProperty;r=e("jquery"),o=e(210),i=e(29),s=e(523),u=e(334),c=e(507),l=e(6),d=e(498),p=e(194),h=e(97),m=e(18),S=e(775),f=e(198),g=e(538),v=e(643),y=e(34),b=e(513),w=e(564),_=e(126),k=e(496),C=e("underscore"),T=e(106),M=e(493),x=e(765),B=e(43),j=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),T(v,g,d,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),null!=e&&this.listenTo(e,"change:prefs",this.frameDebounce(this.render)),this.savedSearch=""},t.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"didClickAddOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"didClickAddOrgMember","click .js-org-members .js-add-all-org-members":"didClickAddAllOrgMembers","click .js-org-members .js-more-org-members":"didClickViewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t;return e={},e.placeholder=j("add member placeholder"),e.canAddMembers=this.model.canInviteMembers(),t=this.model.getOrganization(),null!=t&&(e.orgName=t.get("displayName")),e.canInviteMembers=e.canAddMembers&&!(null!=t?t.externalMembersDisabled():void 0),e.disableAddingExternalMembers=this.model.isMember(i.me())&&(null!=t?t.externalMembersDisabled():void 0),e.isBCOrgAdmin=null!=t?t.isPremOrgAdmin(i.me()):void 0,e.orgSettingsURL=null!=t?l.getOrganizationAccountUrl(t):"",e.editable=this.model.editable(),this.$el.html(S(e)),e.canAddMembers?this.setTimeout(function(e){return function(){return e.renderOrgMembers(),e.input=e.$(".js-search-input"),e.input.click(function(e){return _.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10):this.setTimeout(function(e){return function(){return e.renderBoardMembers()}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.loadOrgData=function(){var e;e=this.model.getOrganization(),null!=e&&this.model.editable()&&y.loadOrganizationMembersMinimal(e.id).then(function(e){return function(){e.renderOrgMembers()}}(this)).done()},t.prototype.renderBoardMembers=function(){var e,t,n,r,o,i;for(t=this.$(".js-board-members").hide(),e=t.find(".js-list").empty(),this.model.memberList.models.length>7&&e.addClass("collapsed"),i=this.model.memberList.models,n=0,r=i.length;r>n;n++)o=i[n],this.appendSubview(this.subview(w,o),e);t.show()},t.prototype.renderOrgMembers=function(){var e,t,n,r,o,i,s,a,u;n=this.$(".js-org-members").hide(),t=n.find(".js-list").empty(),e=n.find(".js-add-all-org-members").empty(),r=n.find(".js-more-org-members").addClass("hide"),a=this.model.getOrganization(),null!=a&&(i=this.model.orgMembersAvailable(),i.length>0&&(u=!1,i.length>7&&(u=!0,r.removeClass("hide")),s=i.slice(0,7),C.each(s,function(e){return function(e){var n;return n=e.toJSON(),(null!=a?a.isPremOrgAdmin(e):void 0)&&(n.className="no-option"),t.append(M.fill("select_member",n,{},{member:M.member}))}}(this)),o={count:i.length.toString()},e.text(j("add all org members",o)),n.show()))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r,o,i,s;return o=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=C.compact(_.removeDomainFromEmailAddress(e.email).split(o)).join(" ").replace(r,""),e.fullName=_.toTitleCase(n),e.canAddAsObserver=null!=(i=this.model.getOrganization())?i.isFeatureEnabled("observers"):void 0,e.modelType="Board",t=null!=(s=this.model.getOrganization())?s.get("prefs").externalMembersDisabled:void 0,this.$(".js-no-results").toggleClass("hide",!t),t?void 0:this.$(".js-uninvited-search-results").append(x(e)).show()},t.prototype.showMemberMenu=function(e){var t,n;_.stop(e),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),b.pushView({view:new s({model:n,board:this.model,modelCache:this.modelCache})})},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t,n,r;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),r=this.input.val().toLowerCase().trim(),""===r)return void this.clearSearchResults();this.loadingEl.show(),t=this.model.getOrganization(),r.length>2?o({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:r,idOrganization:null!=t?t.id:void 0,onlyOrgMembers:null!=t?t.externalMembersDisabled():void 0},dataType:"json",success:function(e){return function(t){return e.renderSearchResults(r,t)}}(this)}):null!=t?(n=t.memberList.chain().filter(function(e){return C.any(_.getMemNameArray(e),function(e){return 0===e.indexOf(r)})}).map(function(e){return function(t){return C.extend(t.toJSON(),{active:!0,similarity:0,joined:e.model.hasActiveMembership(t)})}}(this)).value(),this.renderSearchResults(r,n)):this.renderSearchResults(r,[])}},t.prototype.keydownEvent=function(e){var t;t=h.getKey(e),t===m.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(_.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(_.stop(e),this.$(".email-invite:first").click()):(t===m.ArrowUp||t===m.ArrowDown)&&(_.stop(e),_.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-search-results").hide(),this.$(".js-uninvited-search-results").empty().hide(),this.renderOrgMembers()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),p.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return B("Invitations","Delete Board Invite"),e.search}}(this)}),_.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===i.myId()||this.model.owned()},t.prototype.sendEmailInvite=function(e){var t,n,i,s;if(_.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),s=t.val().trim(),!_.validName(s))return _.setCaretAtEnd(t),void r(".js-name-error").show();i={fullName:s,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(i.type="observer"),n.attr("disabled","disabled"),o({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:i,success:function(e){return function(t){var r;return r=new f(t,{modelCache:e.modelCache}),e.renderOrgMembers(),B("Invitations","Send Email Board Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),b.hide()}}(this),error:function(e){return function(t,o){r(".manage-member-section.js-error").removeClass("hide").find(".error").html(t.responseText),e.$(".js-uninvited-search-results").empty().hide(),n.removeAttr("disabled"),e.input.focus().select(),B("Invitations","Error",t.responseText)}}(this)})}},t.prototype.addMember=function(e){var t;t=this.modelCache.get("Member",e),this.model.addMember(t),this.renderOrgMembers()},t.prototype.didClickAddOtherMember=function(e){var t,n,o;return _.stop(e),r(e.target).closest(".item.disabled").length>0?void 0:(t=r(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),o=this.model.getOrganization(),n=this.modelCache.get("Member",t),n&&(null!=o?o.isMember(n):void 0)?B("Invitations","Add Org Member to Board","Role: Member"):B("Invitations","Add Other Member to Board","Role: Member"),this.addMember(t))},t.prototype.didClickAddOrgMember=function(e){var t;return _.stop(e),B("Invitations","Add Org Member to Board (via List)","Role: Member"),t=r(null!=e?e.target:void 0).closest(".js-select-member").attr("idMember"),this.addMember(t)},t.prototype.didClickAddAllOrgMembers=function(e){var t,n;return _.stop(e),B("Invitations","Add All Org Members to Board"),n=this.model.orgMembersAvailable(),t=n.length.toString(),c.pushView("add all org members",{model:this.model,html:j("confirm.add all org members.text",{memberCount:t}),confirmBtnClass:"primary",fxConfirm:function(e){return function(t){var r,o,i,s;for(s=[],r=0,o=n.length;o>r;r++)i=n[r],s.push(e.model.addMember(i));return s}}(this)})},t.prototype.didClickViewMoreOrgMembers=function(e){_.stop(e),B("Invitations","View More Org Members"),b.pushView({view:new u({model:this.model,modelCache:this.modelCache})})},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(k)},{}],332:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(160),o=e(271),s=e(217),u=e(495),a=e(496),c=e(106),l=e(493),d=e(43),c(u,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="activity",t.prototype.initialize=function(){this.mode="all",this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(o,new r(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderMoreActionsLinkDebounced()}}(this)),this.loadMoreActions()},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"},t.prototype.render=function(){return this.$el.html(l.fill("board_menu_activity",this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this},t.prototype.renderActions=function(){return this.actionListView.render(),this.renderMoreActionsLink()},t.prototype.renderMoreActionsLink=function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.renderMode=function(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this},t.prototype.showAll=function(e){this.mode="all",this.renderMode(),d("Board Menu","Activity","Show All")},t.prototype.showComments=function(e){this.mode="comments",this.renderMode(),d("Board Menu","Activity","Show Comments Only")},t}(a)),t.exports=i},{}],333:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(464),l=e(513),p=e(126),h=e(496),a=e(507),d=e(368),c=e(355),u=e(366),m=e(146),f=e("underscore"),v=e(493),y=e(43),g=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.viewTitleKey="more",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState})},t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels",
"click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","submit form":"cancel"},t.prototype.render=function(e){var t,n,r;return n=o.me(),t=this.model.toJSON(),t.canJoin=this.model.canJoin(),t.canInviteMembers=this.model.canInviteMembers(),t.confirmed=n.get("confirmed"),r=this.model.getOrganization(),t.canCloseBoard=this.model.owned()||(null!=r?r.isFeatureEnabled("superAdmins"):void 0)&&(null!=r?r.owned():void 0),t.editableByMember=this.model.editableByMember(n),t.canLeaveBoard=(this.model.isMemberObserver(n)||this.model.editableByMember(n))&&n.getMembershipData(this.model).canRemove,t.canCloseOrLeave=t.canLeaveBoard||t.canCloseBoard,t.pLevelClass=i.getPermLevelIconClassForBoard(this.model),t.pLevelAltText=i.getPermLevelAltTextForBoard(this.model),t.helperText=g(["board perms",this.model.getPermLevel(),"short summary"]),this.$el.html(v.fill("board_menu_more",t)),this.renderSubscribeState(),this},t.prototype.renderSubscribeState=function(){var e;e=this.model.toJSON(),this.$(".js-subscribed-state").html(v.fill("board_menu_subscribed_state",e))},t.prototype.openSettings=function(e){p.stop(e),this.sidebarView.pushView("settings"),y("Board Menu","Open Settings")},t.prototype.openLabels=function(e){p.stop(e),this.sidebarView.pushView("labels"),y("Board Menu","Open Labels")},t.prototype.openStickers=function(e){p.stop(e),this.sidebarView.pushView("stickers"),y("Board Menu","Open Stickers","Via More Menu")},t.prototype.openArchivedItems=function(e){p.stop(e),this.sidebarView.pushView("archive"),y("Board Menu","Open Archived Items")},t.prototype.shareBoard=function(e){p.stop(e),l.toggle({elem:this.$(e.target).closest(".js-share"),view:new d({model:this.model,modelCache:this.modelCache})}),y("Board Menu","Open Share, Print, and Export Menu")},t.prototype.openEmailSettings=function(e){p.stop(e),l.toggle({elem:this.$(e.target).closest(".js-email"),view:new c({model:this.model,modelCache:this.modelCache})}),y("Board Menu","Open Email Settings - Menu")},t.prototype.copyBoard=function(e){p.stop(e),r(e.target).hasClass("disabled")||(y("Board Menu","Open Copy Board"),l.toggle({elem:this.$(e.target).closest(".js-copy-board"),view:new u({model:this.model,copyBoard:!0,modelCache:this.modelCache})}))},t.prototype.toggleSubscribe=function(e){p.preventDefault(e),r(e.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),y("Board Menu","Subscribe/Unsubscribe"))},t.prototype.closeConfirm=function(e){p.stop(e),y("Board Menu","Open Close Menu"),a.toggle("close board",{elem:r(e.target).closest("a"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.close(),y("Board","Close Board")}}(this)})},t.prototype.leaveConfirm=function(e){var t,n;p.stop(e),y("Board Menu","Open Leave Menu"),n=o.me(),t=n.removeMembershipConfirmationKey(this.model),a.toggle(t,{elem:r(e.target).closest("a"),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.removeMember(n),y("Board","Leave Board")}}(this)})},t.prototype.selectUrl=function(e){return this.$(".js-short-url").focus().select()},t.prototype.cancel=function(e){return p.stop(e),!1},t}(h)},{}],334:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),i=e(97),s=e(18),h=e(775),a=e(538),u=e(513),c=e(126),l=e(496),d=e("underscore"),m=e(106),f=e(493),p=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),m(a,t),t.prototype.viewTitleKey="organization members",t.prototype.initialize=function(){var e;e=this.model.getOrganization(),null!=e&&this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render))},t.prototype.events={"click .js-board-members .js-select-member":"didClickAddOrgMember",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},t.prototype.renderOrgMembers=function(e){var t,n,r,o,i,s;for(i=[],i=e?this.modelCache.get("Member",e):this.model.orgMembersAvailable(),s=this.$(".js-board-members .js-list").empty().show(),n=0,r=i.length;r>n;n++)o=i[n],t=o.toJSON(),s.append(f.fill("select_member",t,{},{member:f.member}));this.$(".js-board-members .js-num-org-mem").empty().text(i.length)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.orgName=null!=(t=this.model.getOrganization())?t.get("displayName"):void 0,e.canInvite=!0,e.editable=this.model.editable(),this.$el.html(h(e)),this.renderOrgMembers(),this.$(".js-board-members").removeClass("hide"),this},t.prototype.keyupEvent=function(e){var t,n,o,a,l;n=i.getKey(e),l=r(".js-search-input").val().trim(),n===s.Enter?(c.stop(e),this.$(".js-org-members .js-list .selected").length>0&&(t=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),o=this.modelCache.get("Member",t),this.model.addMember(o),this.$(".js-search-input").focus().select())):n===s.ArrowUp||n===s.ArrowDown?(c.stop(e),c.navMenuList(r(null!=(a=u.view)?a.el:void 0).find(".js-org-members .js-list"),".item",n)):l.length>0?(this.filterAndFillMembers(l),r(".js-org-members .js-list").removeClass("collapsed"),r(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),r(".js-org-members .js-list").addClass("collapsed"),r(".js-add-all-org-members").removeClass("hide"))},t.prototype.filterAndFillMembers=function(e){var t,n,r;n=d.pluck(this.model.orgMembersAvailable(),"id"),r=c.filterMembers(this.modelCache,e,n),r=r.slice(0,7),r.length>0?(this.renderOrgMembers(r),t=this.$(".js-org-members .js-list .item:first"),c.selectMenuItem(this.$(".js-org-members .js-list"),".item",t)):this.$(".js-org-members .js-list").html('<li><p class="empty"></p></li>').find("p").text(p("no matched memebers"))},t.prototype.didClickAddOrgMember=function(e){var t,n;return c.stop(e),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),this.model.addMember(n),this.render()},t}(l)},{}],335:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(464),s=e(6),a=e(513),u=e(126),c=e(496),p=e(493),d=e(101),l=e(687),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change visibility",t.prototype.tagName="ul",t.prototype.events={"click .js-select":"selectVis"},t.prototype.className="pop-over-list",t.prototype.render=function(){var e,t,n;return n=this.options.organization,n.canSetVisibility("private")||n.canSetVisibility("org")||n.canSetVisibility("public")?(e=this.model.getPref("permissionLevel"),this.$el.html(l({current:e,canChange:!0,mustChange:!n.canSetVisibility(e),hasSuperAdmins:n.isFeatureEnabled("superAdmins"),hasOrg:!0,orgName:n.get("displayName"),privateRestricted:!n.canSetVisibility("private"),orgRestricted:!n.canSetVisibility("org"),publicRestricted:!n.canSetVisibility("public")}))):(t={isOrgAdmin:n.owned(),orgSettingsUrl:s.getOrganizationAccountUrl(n),organization:n.toJSON()},this.$el.html(p.fill("cant_add_board_to_org",t))),this},t.prototype.selectVis=function(e){var t,n,o;return u.stop(e),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length?void 0:(o=t.attr("name"),this.options.idOrganizationSource&&null!=(n=this.modelCache.get("Organization",this.options.idOrganizationSource))&&n.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":o}),this.options.organization.boardList.add(this.model),a.hide())},t}(c)},{}],336:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B=function(e,t){function n(){this.constructor=e}for(var r in t)O.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},O={}.hasOwnProperty;r=e("jquery"),w=e("underscore"),o=e(29),s=e(337),a=e(507),u=e(6),k=e(231),C=e(101),c=e(21),x=e(254),p=e(479),h=e(478),l=e(356),d=e(627),m=e(483),j=e(484),f=e(513),g=e("bluebird"),v=e("react"),S=e(491)("plugin_item"),y=e(126),b=e(496),M=e("xtend"),T=S.renderable(function(e){var t,n,r,o,i,s,a,u,c,l,d;return s=e.loading,a=e.name,i=e.iconUrl,r=e.desc,u=e.source,t=e.canEnable,l=e.supportsSettings,c=e.supportsAuth,o=e.hasPersonalSettings,d=e.upgradeUrl,n=e.canReadManifest,S.div(".power-up-item-icon",function(){return i&&S.img(".power-up-item-icon-image.plugin-item-icon",{src:i,alt:a}),S.icon("check",{class:"power-up-item-enabled-icon"}),S.span(".power-up-item-new-icon",function(){return S.format("new")})}),S.div(".power-up-item-details",function(){return S.h4(".power-up-item-details-header",{class:S.classify({"js-show-details":n,quiet:!n})},function(){return s?S.format("loading"):a?S.text(a):S.format("unknown plugin"),n?S.icon("information",{class:"power-up-item-details-info-icon"}):void 0}),n?void 0:S.div(".quiet",function(){return S.format("unable-to-load-power-up")})}),S.div(".power-up-item-actions",function(){return t&&n?((o||l||c)&&S.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return S.icon("gear")}),d?S.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:d},function(){return S.format("upgrade")}):S.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",{href:"#"},function(){return S.format("upgrade")}),S.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return S.format("enable")}),S.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return S.format("disable")}),S.a(".power-up-item-actions-button.mod-fake-enable.button-link.js-fake-enable",{href:"#"},function(){return S.format("enable")})):void 0})}),_=function(e,t){return e.catch(p.Error.UnableToLoadManifest,function(){return t})},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return B(t,e),t.prototype.initialize=function(e){this.plugin=e.plugin,this.io=h.get(this.plugin),this.initialData={loading:!0,canEnable:this.model.editable(),upgradeUrl:this.model.hasOrganization()?u.getBoardPowerUpsUpgradeUrl(this.model):void 0},this.listenTo(this.model,"change:powerUps",this.frameDebounce(this.renderEnabledState)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.renderEnabledState)),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderEnabledState))},t.prototype.renderOnce=function(){return this.$el.html(T(this.initialData)),this.renderPluginData(),this.renderEnabledState(),this},t.prototype.renderPluginData=function(){return g.props({loading:!1,name:this.io.getName(),desc:_(this.io.getDescription(),this.io.manifestUrl),iconUrl:_(this.io.getIconUrl(),null),hasPersonalSettings:this.hasPersonalSettings(),supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),canReadManifest:this.io.canReadManifest()}).then(function(e){return function(t){return e.$el.html(T(M(e.initialData,t))),e.subscribe(e.model.boardPluginList.snoop(),e.renderEnabledState)}}(this)).done(),this},t.prototype.getEnabledState=function(){return this.model.isPluginEnabled(this.plugin.id)},t.prototype.renderEnabledState=function(){var e,t,n,r;return n=this.getEnabledState(),e=this.model.canEnableAdditionalPowerUps(),t=o.me().isDismissed("PowerUpsLimitFullAd"),r=c.hasOwnProperty(this.plugin.id)&&c[this.plugin.id]>Date.now()-12096e5,this.$el.toggleClass("is-enabled",n),this.$el.toggleClass("is-new",r),this.$el.toggleClass("needs-upgrade",!n&&!e&&t),this.$el.toggleClass("fake-enable",!n&&!e&&!t),this},t.prototype.hasPersonalSettings=function(){return w.any(this.model.getPluginData(this.io.id),function(e){var t;return t=e.private,null!=t})},t.prototype.enable=function(){this.model.enablePlugin(this.plugin.id)},t.prototype.disable=function(){this.model.disablePlugin(this.plugin.id)},t.prototype.showDetails=function(e){var t,n;t=this.model,n=h.get(this.plugin),f.toggle({elem:e,getViewTitle:k(n,"getName"),reactElement:v.createElement(d,{io:n,model:t,key:this.plugin.id})})},t.prototype.showSettings=function(e){var t;return t=h.get(this.plugin),f.toggledBy(e)?void f.hide():void g.props({supportsAuth:this.io.supports("show-authorization"),supportsSettings:this.io.supports("show-settings"),hasPersonalSettings:this.hasPersonalSettings()}).then(function(e){return function(t){return t.supportsAuth?m.one({timeout:1e3,plugin:e.plugin,command:"authorization-status",board:e.model}).then(function(e){return M(t,{authStatus:e})}):g.resolve(t)}}(this)).then(function(n){return function(r){var o;return o=function(t){return w.bind(t,n,e)},f.toggle({elem:e,getViewTitle:function(){return t.getName().then(function(e){return C(["view title","powerup settings"],{name:e})})},reactElement:v.createElement(l,M(r,{plugin:n.plugin,key:n.io.id,authorize:o(n.showAuthorization),removeData:o(n.clearData),showSettings:o(n.showPluginSettings)}))})}}(this))},t.prototype.showAuthorization=function(e){m.one({plugin:this.plugin,command:"show-authorization",board:this.model,el:e}).done()},t.prototype.showPluginSettings=function(e){m.one({plugin:this.plugin,command:"show-settings",board:this.model,el:e}).done()},t.prototype.clearData=function(e){a.pushView("clear plugin data",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.clearPluginData(e.io.id),e.renderPluginData(),e.io.supports("remove-data").then(function(t){return t?m.one({plugin:e.plugin,command:"remove-data"}):void 0}).done()}}(this)})},t}(s)},{}],337:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(29),s=e(507),a=e(6),d=e(496),u=e(513),l=e(126),c=e(357),h=e(484),m=e(493),f=e(43),p=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp,this.listenTo(this.model,"change:powerUps",this.frameDebounce(this.renderEnabledState)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.renderEnabledState)),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.renderEnabledState)),this.subscribe(h(this.model),function(e){return function(){return e.renderEnabledState()}}(this))},t.prototype.className="power-up-item",t.prototype.events={"click .js-enable":function(e){return l.stop(e),u.hide(),this.enable()},"click .js-disable":function(e){return l.stop(e),u.hide(),this.disable(e.currentTarget)},"click .js-show-details":function(e){return l.stop(e),this.showDetails(e.currentTarget)},"click .js-show-settings":function(e){return l.stop(e),this.showSettings(e.currentTarget)}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return e=p.clone(this.powerUp),e.canEnable=this.model.editable(),null==this.options.disableOnly&&this.model.hasOrganization()&&(e.upgradeUrl=a.getBoardPowerUpsUpgradeUrl(this.model)),this.$el.html(m.fill("power_up_item",e)),this.renderEnabledState(),this},t.prototype.getEnabledState=function(){return this.model.isPowerUpEnabled(this.powerUp.name)},t.prototype.renderEnabledState=function(){var e,t,n,r;return r=this.getEnabledState(),t=this.options.disableOnly,e=this.model.canEnableAdditionalPowerUps(),n=o.me().isDismissed("PowerUpsLimitFullAd"),this.$el.toggleClass("is-enabled",r),this.$el.toggleClass("needs-upgrade",!r&&!e&&n),this.$el.toggleClass("fake-enable",!r&&!e&&!n),this},t.prototype.enable=function(){this.model.enablePlugin(this.powerUp.idPlugin),f("Power-Ups",this.powerUp.displayName,"Enable")},t.prototype.isGrandfathered=function(){var e;return e=this.powerUp.name,y.call(this.model.get("powerUps"),e)>=0},t.prototype.disable=function(e){var t,n;this.isGrandfathered()?(n=function(e){return function(){return e.model.pull("powerUps",e.powerUp.name),f("Power-Ups",e.powerUp.displayName,"Disable")}}(this),(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("plugins"):void 0)?n():s.toggle("disable power up",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:n})):(this.model.disablePlugin(this.powerUp.idPlugin),f("Power-Ups",this.powerUp.displayName,"Disable"))},t.prototype.showDetails=function(e){return u.toggle({elem:e,view:new c({powerUp:this.powerUp,isGrandfathered:this.isGrandfathered()}),autoPosition:!0}),f("Power-Ups",this.powerUp.displayName,"Show Details")},t.prototype.showSettings=function(e){return u.toggle({elem:e,view:this.powerUp.settingsView(this.model,this.isGrandfathered()),autoPosition:!0}),f("Power-Ups",this.powerUp.displayName,"Show Details")},t}(d)},{}],338:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V,$,z,R,F=function(e,t){function n(){this.constructor=e}for(var r in t)U.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},U={}.hasOwnProperty,q=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),P=e("underscore"),o=e(29),s=e(336),a=e(337),l=e(637),d=e(638),i=e(329),p=e(6),A=e(99),h=e(19),m=e(34),f=e(479),g=e(478),I=e(867),M=e("bluebird"),B=e(126),O=e(496),L=e(639),E=e(101),$=e(491)("board_power_ups"),R=e("xtend"),N=e(85),z=e(43),D=[{name:"voting",iconSrc:"https://a.trellocdn.com/images/powerups/7a64373ca0f3e1858b4a9a3928d561d3/voting-icon.svg",aboutTemplate:"power_ups_about_voting",settingsView:function(e){return new L({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/voting/screenshots/de063c1421497f609fef2e5b37797cff/2015-3-23-screenshot1.png"],idPlugin:"55a5d917446f517774210013"},{name:"cardAging",iconSrc:"https://a.trellocdn.com/images/powerups/d33d5c107f425c21f7f3a19f602871ec/card-aging-icon.svg",aboutTemplate:"power_ups_about_card_aging",settingsView:function(e){return new d({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/card-aging/screenshots/27972dcff7cab11886b671d6fcfc11ae/2015-3-23-screenshot1.png"],idPlugin:"55a5d917446f517774210012"},{name:"calendar",iconSrc:"https://a.trellocdn.com/images/powerups/ff818ba7df38d8af7f68d26ae408f5eb/calendar-icon.svg",aboutTemplate:"power_ups_about_calendar",settingsView:function(e){return new l({model:e})},screenshots:["https://a.trellocdn.com/images/powerups/calendar/screenshots/e204a5ed5a8dc113760b185b4c7276c5/2015-3-23-screenshot1.png"],idPlugin:"55a5d917446f517774210011"}],b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.events={"click .js-close-explainer":"closeExplainer","click .power-ups-explainer-learn-more":"trackLearnMore"},t.prototype.className="power-ups-explainer",t.prototype.render=function(){var e;return e=$.render(function(){return $.p(".power-ups-explainer-text",E("power-up explainer")),$.a(".power-ups-explainer-learn-more",{href:"/power-ups",target:"_blank"},function(){return $.format("learn-more")}),$.span(".power-ups-explainer-close.js-close-explainer",function(){return $.icon("close")})}),this.$el.html(e),this},t.prototype.closeExplainer=function(e){this.remove(),o.me().dismiss("PowerUpsPaneExplainer"),z("Board Menu","Dismiss Power-Ups Explainer")},t.prototype.trackLearnMore=function(){return z("Board Menu","Explainer Ad","Learn More Click")},t}(O),V=$.renderable(function(){return $.div(function(){return $.div(".spinner.loading")})}),j=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.render=function(){return this.$el.html(V()),this},t}(O),v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.initialize=function(){var e;return e=o.me(),this.listenTo(e.organizationList,"add remove reset change",this.frameDebounce(this.render)),this.createNewTeam=0===e.organizationList.length},t.prototype.events=function(){return{"click .js-team":"clickTeam","click .js-create-team":"clickCreateTeam","click .js-create":"clickCreateNewTeam","click .js-cancel":"clickCancelNewTeam"}},t.prototype.render=function(){return this.$el.html($.render(function(e){return function(){var t,n;return e.createNewTeam?(t=e.model.memberList.length,$.div(".power-ups-create-team",function(){return $.p(function(){return $.format("first-create-your-business-class-team")}),$.p(function(){return $.label(function(){var e;return $.format("team-name"),e=1===t?{value:$.l("names-projects",{name:o.me().get("fullName")},{raw:!0})}:2===t?{placeholder:$.l("eg-names-projects",{name:o.me().get("fullName")},{raw:!0})}:{},$.input(".full.js-autofocus.js-name",e)}),t>1?$.label(".power-ups-create-team-add-members",function(e){return function(){return $.input(".js-add-members",{type:"checkbox",checked:!0}),$.format("add-the-members-of-this-board-to-the-team")}}(this)):void 0}),$.div(function(){return $.button(".primary.js-create",function(){return $.format("create")}),$.a(".power-ups-create-team-cancel.quiet-button.js-cancel",function(){return $.format("cancel")})}),$.hr()}),P.defer(function(){return e.$(".js-name").select().focus()})):(n=o.me().organizationList.sortBy(function(e){return e.get("displayName").toLowerCase()}),$.div(".power-ups-assign-to-team",function(){return $.p(function(){return $.format("this-board-is-not-in-a-team-yet"),$.text(" "),$.format("please-select-a-team-or-create-a-new-team-to-upgrade")})}),n.length>0&&$.ul(".power-ups-assign-to-team-list",function(){var t,r,o,i,s;for(s=[],r=0,o=n.length;o>r;r++)i=n[r],t=i.canAddBoard(e.model)?{class:"js-team","data-idOrganization":i.id}:{class:"disabled",title:$.l("team-restrictions-prevent-you-from-adding-this-board-to-this-team")},s.push($.li(".power-ups-assign-to-team-list-item",t,function(){return $.div(".power-ups-assign-to-team-list-item-content",function(){return $.div(".power-ups-assign-to-team-list-item-logo",function(){var e;return e=i.get("logoHash"),e?$.img({src:logoDomain+"/"+e+"/30.png"}):$.span(".icon.icon-lg.icon-organization")}),$.div(".power-ups-assign-to-team-list-item-details",function(){return $.div(".power-ups-assign-to-team-list-item-name",function(){return $.text(i.get("displayName")),i.isFeatureEnabled("plugins")?($.text(" "),$.icon("business-class",{class:"icon-business-class-color"})):void 0}),$.div(".power-ups-assign-to-team-list-item-member-count",function(){var e;return null!=(e=i.get("memberships"))?$.text(A("members",e.length)):void 0})})})}));return s}),$.div(".power-ups-assign-to-team-create.js-create-team",function(){return $.div(".power-ups-assign-to-team-create-content",function(){return $.format("create-a-new-team")})}))}}(this))),this},t.prototype.clickTeam=function(e){var t;return t=this.$(e.currentTarget).attr("data-idOrganization"),this.model.trigger("added-to-team"),M.fromNode(function(e){return function(n){return e.model.update("idOrganization",t,{waitForServer:!0},n)}}(this)).then(function(e){return function(){return p.navigate(p.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}}(this)).done()},t.prototype.clickCreateTeam=function(e){return this.createNewTeam=!0,this.render()},t.prototype.clickCancelNewTeam=function(e){return B.stop(e),this.model.trigger("cancel-add-to-team")},t.prototype.clickCreateNewTeam=function(e){var t,n;return n=this.$(".js-name").val(),/\S/.test(n)?(t={displayName:n},this.$(".js-create,.js-cancel").prop("disabled",!0).addClass("disabled"),o.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){var n;return n=t.id,e.model.trigger("added-to-team"),e.model.update("idOrganization",n,{waitForServer:!0}),m.loadOrganizationMembersMinimal(n).then(function(){var n;return e.$(".js-add-members").prop("checked")?(n=e.model.getOrganization(),z("New Org","Create","Power-Ups Sidebar (with members)",t.id),M.map(e.model.memberList.models,function(e){return n.isMember(e)?void 0:n.changeMemberRole(e,{type:"normal"})},{concurrency:3})):z("New Org","Create","Power-Ups Sidebar (without members)",t.id)}).then(function(){return p.navigate(p.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}).done()}}(this)})):void 0},t}(O),S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html($.render(function(e){return function(){return $.div(".power-ups-count-explanation",function(){return $.p(function(){return $.format("board-has-been-added-to-the-team",{boardName:e.model.get("name"),teamName:e.model.getOrganization().get("displayName")})}),$.p(function(){return $.format("team-has-business-class-so-this-board-has-unlimited-access-to-power-ups",{teamName:e.model.getOrganization().get("displayName")})})})}}(this)))},t}(O),C=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html($.render(function(e){return function(){return $.div(".power-ups-count-explanation",function(){return $.p(function(){return $.format("board-has-been-added-to-the-team",{boardName:e.model.get("name"),teamName:e.model.getOrganization().get("displayName")})}),$.p(function(){return $.format("upgrade-to-business-class-for-unlimited-power-ups-and-moreupgrade-to-business-class")})})}}(this)))},t}(O),w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html($.render(function(e){return function(){return $.div(".power-ups-count-explanation",function(){return $.p(function(){return $.format("only-team-members-can-enable-power-ups")})})}}(this)))},t}(O),y=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html($.render(function(e){return function(){return $.div(".power-ups-count-explanation",function(){return $.p(function(){return $.format("ask-an-admin-to-add-this-board-to-a-team")})}),$.div(".power-ups-board-admins",function(){return $.b(function(){return $.format("board-admins")}),$.ul(".power-ups-admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return $.li(".power-ups-admin-list-item",function(){return $.div(".power-ups-admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?$.img({src:avatarDomain+"/"+t+"/30.png"}):$.span(".icon.icon-lg.icon-member")}),$.div(".power-ups-admin-list-item-details",function(){return $.div(".power-ups-admin-list-item-name",function(){return $.text(e.get("fullName"))}),$.div(".power-ups-admin-list-item-username",function(){return $.text("@"+e.get("username"))})})})})})})}}(this)))},t}(O),k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.className="power-ups-explainer power-ups-limit-reached",t.prototype.events={"click .js-ad":function(e){return z("Power-Ups Menu","Banner Ad","Get More Power-Ups Button")},"click .power-ups-limit-reached-learn-more":function(){return z("Power-Ups Menu","Banner Ad","Learn More Link")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=p.getBoardPowerUpsUpgradeUrl(this.model),e=o.me(),this.$el.html($.render(function(e){return function(){return $.p(".power-ups-limit-reached-message",function(){return $.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),$.p(".power-ups-limit-reached-button",function(){return e.model.hasOrganization()?$.a(".button.primary.js-ad",{href:t},function(){return $.format("get-more-power-ups")}):$.a(".button.primary.js-add-to-team",{href:"#"},function(){return $.format("get-more-power-ups")})}),$.a(".power-ups-limit-reached-learn-more",{href:"/business-class",target:"_blank"},function(){return $.format("learn-more")})}}(this)))},t}(O),_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.className="power-ups-explainer power-ups-limit-reached-full",t.prototype.events={"click .js-no-thanks":function(e){return o.me().dismiss("PowerUpsLimitFullAd")},"click .js-ad":function(e){return z("Power-Ups Menu","Full-Menu Ad","Get More Power-Ups Button")},'click a[href="/business-class"]':function(){return z("Power-Ups Menu","Full-Menu Ad","Business Class Link")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t,n;return n=p.getBoardPowerUpsUpgradeUrl(this.model),e=o.me(),t=e.isInAnyBCOrganization(),this.$el.html($.render(function(r){return function(){return $.div(".power-ups-limit-reached-full-content",function(){return $.p(".power-ups-limit-reached-message",function(){return $.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),$.p(".power-ups-limit-reached-sub",function(){return e.isFeatureEnabled("threePlugins")?($.format("as-a-trello-gold-member-you-can-turn-on-three-power-ups-per-board"),$.text(" "),$.format("business-class-teams-get-unlimited-power-ups")):t?$.format("with-the-legacy-version-of-business-class-you-can-turn-on-one-power-up-per-board"):r.model.hasOrganization()?$.format("business-class-teams-get-unlimited-power-ups"):($.format("as-a-free-member-you-can-turn-on-one-power-up-per-board"),$.text(" "),$.format("business-class-teams-get-unlimited-power-ups"))}),$.p(".power-ups-limit-reached-sub",{style:"margin: 8px 40px"},function(){return t?$.format("to-unlock-more-upgrade-your-team-to-the-latest-version-of-business-class-today"):$.format("to-unlock-more-upgrade-to-business-class-today")}),$.p(".power-ups-limit-reached-button",function(){return r.model.hasOrganization()?$.a(".button.primary.js-ad",{href:n},function(){return $.format("lets-do-this")}):$.a(".button.primary.js-add-to-team",{href:"#"},function(){return $.format("lets-do-this")})}),$.div(".power-ups-limit-reached-no-thanks.js-no-thanks",function(){return $.format("no-thanks")})})}}(this)))},t}(O),x=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.events={"click .power-ups-request-let-us-know":function(e){return z("Board Menu","Request a Power-Up","Let Us Know Click")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return e="https://trello.typeform.com/to/DLUonY?source=app&member="+o.myId(),this.$el.html($.render(function(t){return function(){return $.div(".power-ups-request",function(){return $.p(".quiet",function(){return $.format("dont-see-what-youre-looking-for-let-us-know",{url:e})})})}}(this)))},t}(O),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.initialize=function(){},t.prototype.className="power-up-items",t.prototype.render=function(){return this.appendSubview(this.subview(j,this.model)),M.all([P.map(D,function(e){return function(t){var n,r;return r=t.name,n=R(t,{displayName:E(["power ups",r,"name"]),description:E(["power ups",r,"description"])}),{displayName:n.displayName,view:e.subview(a,e.model,{powerUp:n},r)}}}(this)),M.try(function(e){return function(){var t;return t=P.pluck(D,"idPlugin"),m.loadBoardAvailablePlugins(e.model.id).filter(function(e){var n;return n=e.id,q.call(t,n)<0}).map(function(t){return g.get(t).getName().catch(f.Error.UnableToLoadManifest,function(){return t.get("url")}).then(function(n){return{displayName:n,view:e.subview(s,e.model,{plugin:t},t.id)}})})}}(this))]).spread(function(e){return function(t,n){var r,o;return o=P.chain([t,n]).flatten().sortBy(function(e){return e.displayName.toLowerCase()}).pluck("view").value(),e.ensureSubviews(o),(null!=(r=N("powerUpRequestCTAV1"))?r.get("showCTA"):void 0)?e.appendSubview(e.subview(x,e.model)):void 0;
}}(this)).done(),this},t}(O),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.className="power-ups-upgrade",t.prototype.initialize=function(){},t.prototype.events={"click .js-go-back":function(e){return z("Board Menu","Open Power-Ups","Dismiss Upsell"),this.model.trigger("cancel-upgrade")},"click .js-upgrade":function(e){return this.model.trigger("add-to-team")}},t.prototype.render=function(){var e,t,n,r;return t=o.me(),n=this.model.hasOrganization(),r=p.getBoardPowerUpsUpgradeUrl(this.model),e=t.isFeatureEnabled("threePlugins"),this.$el.html(I({partOfTeam:n,upgradeUrl:r,hasGold:e})),this},t}(O),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return F(t,e),t.prototype.viewTitleKey="power ups",t.prototype.noPadding=!0,t.prototype.className="board-menu-content-frame power-ups-list",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idOrganization change:powerUps",this.frameDebounce(this.render)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"cancel-upgrade",function(e){return function(){return e.initialViewState=null,e.render()}}(this)),this.listenTo(this.model,"add-to-team",function(e){return function(){return e.initialViewState=null,e.addToTeam=!0,e.render()}}(this)),this.listenTo(this.model.boardPluginList,"add remove reset",this.frameDebounce(this.render)),this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.render)),this.initialViewState=this.options.viewState,this.explainLimits=!1,this.redirecting=!1,this.upgradeToBC=!1,this.useFullAd=!1},t.prototype.events=function(){return{"click .js-fake-enable":function(e){return B.stop(e),this.useFullAd=!0,this.render()},"click .js-add-to-team":function(e){return B.stop(e),this.addToTeam=!0,this.render()}}},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.empty().removeClass("full-page-ad"),"upsell"===this.initialViewState?(this.renderUpgradeView(),this):(this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():this.renderPowerUpsList(),this)},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(j,this.model)),this},t.prototype.renderUpgradeView=function(){return this.appendSubview(this.subview(T,this.model))},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(w,this.model)),this):(this.explainLimits=!0,this.model.owned()?(m.loadMyOrganizations(),this.appendSubview(this.subview(v,this.model))):(this.appendSubview(this.subview(y,this.model)),this))},t.prototype.renderPowerUpsList=function(){var e;if(this.model.canEnableAdditionalPowerUps())o.me().isDismissed("PowerUpsPaneExplainer")||this.appendSubview(this.subview(b,this.model)),this.explainLimits&&(e=this.model.getOrganization(),(null!=e?e.isFeatureEnabled("plugins"):void 0)?this.appendSubview(this.subview(S,this.model)):this.appendSubview(this.subview(C,this.model)));else if(o.me().isDismissed("PowerUpsLimitFullAd"))this.appendSubview(this.subview(k,this.model));else{if(this.useFullAd)return this.appendSubview(this.subview(_,this.model)),this.$el.addClass("full-page-ad"),this;o.me().isDismissed("PowerUpsPaneExplainer")||this.appendSubview(this.subview(b,this.model))}return this.appendSubview(this.subview(u,this.model))},t}(O)},{}],339:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(335),i=e(340),s=e(513),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.disableNone=null!=e?e.disableNone:void 0,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled","disabled"),this},t.prototype.showOrgBoardVisPerms=function(e,t){return s.pushView({view:new r({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.submit=function(e){return t.__super__.submit.apply(this,arguments)},t.prototype.canAddToOrg=function(e){return!e.isFeatureEnabled("restrictVis")||e.canSetVisibility("org")},t.prototype.updateModel=function(e){return this.model.update({idOrganization:e,"prefs/permissionLevel":"org"})},t.prototype.orgSelected=function(){return t.__super__.orgSelected.apply(this,arguments),this.disableNone?""===this.$(".js-org").val()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled"):void 0},t}(i)},{}],340:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(29),o=e(335),s=e(507),a=e(34),u=e(513),c=e("bluebird"),l=e(126),d=e(496),h=e(493),m=e(43),p=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="change organization",t.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected"},t.prototype.render=function(){var e,t,n,o,i,s;if(e=this.model.toJSON({org:!0}),i=this.model.owned()?r.me().organizationList.models:[],e.orgs=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)o=i[e],n.push(o.toJSON());return n}(),e.hasOrgs=0!==e.orgs.length,e.idOrganization)for(s=e.orgs,t=0,n=s.length;n>t;t++)o=s[t],o.id===e.idOrganization&&(o.select=!0);return e.isPrivate=this.model.isPrivate(),e.allowsSelfJoin=this.model.allowsSelfJoin(),this.$el.html(h.fill("popover_change_board_org",e)),this.updateOrgOptions(),this},t.prototype.showOrgBoardVisPerms=function(e,t){return u.pushView({view:new o({model:this.model,organization:e,idOrganizationSource:t,modelCache:this.modelCache})})},t.prototype.changeOrg=function(e,t){var n,r,o;return n=e!==t,n&&t&&null!=(r=this.modelCache.get("Organization",t))&&r.boardList.remove(this.model),o={},n&&(o.idOrganization=e),e&&(this.$(".js-make-org-visible").is(":checked")&&(o["prefs/permissionLevel"]="org"),this.$(".js-make-org-joinable").is(":checked")&&(o["prefs/selfJoin"]=!0)),this.model.update(o),n&&e&&this.modelCache.get("Organization",e).boardList.add(this.model),u.hide()},t.prototype.canAddToOrg=function(e){return e.canAddBoard(this.model)},t.prototype.submit=function(e){var t,n,r;return this.$(".js-submit").prop("disabled",!0).toggleClass("disabled",!0),l.stop(e),m("Board","Change Org"),n=this.$(".js-org").val(),t=this.model.get("idOrganization"),r=this.modelCache.get("Organization",n),c.try(function(t){return function(){var o;return(o=r&&r.externalMembersDisabled())?a.loadOrganizationMembersData(n).then(function(){var n,o,i;return i=t.model.memberList.chain().filter(function(e){return!r.isMember(e)}).map(function(e){return e.get("fullName")}).value(),o=i.length,0!==o?(n=1===o?"external member not allowed":"external members not allowed",c.fromNode(function(a){return s.toggle(n,{elem:e.currentTarget,model:t.model,confirmBtnClass:"negate",templateData:{count:String(o),members:i.length>20?p.first(i,20).join(", ")+"":i.join(", "),team:r.get("displayName")},fxConfirm:function(){return a()},fxCancel:function(){return a(new Error("cancelled"))}})})):void 0}):void 0}}(this)).then(function(e){return function(){return(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?a.loadOrganizationMembersData(n).then(function(){e.canAddToOrg(r)?e.changeOrg(n,t):e.showOrgBoardVisPerms(r,t)}).done():e.changeOrg(n,t)}}(this)).error(function(){}).done()},t.prototype.updateOrgOptions=function(){var e;e=""!==this.$(".js-org").val(),this.$(".js-make-org-visible,.js-make-org-joinable").closest(".js-check-div").toggleClass("hide",!e)},t.prototype.orgSelected=function(e){return this.updateOrgOptions()},t}(d)},{}],341:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(340),s=e(345),a=e(351),u=e(513),c=e(126),l=e(496),p=e(493),h=e(43),d=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="settings",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"},t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0,url:!0,labels:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.orgDisplayName=null!=t?t.get("displayName"):void 0,e.hasOrg=null!=(null!=t?t.id:void 0),e.commentsDisplay=d(["board pref perms",this.model.getCommentPerm()]),e.invitationsDisplay=d(["board pref perms",this.model.getInvitePerm()]),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(p.fill("board_menu_settings",e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.changeOrg=function(e){var t,n;c.stop(e),this.model.owned()?(u.toggle({elem:r(e.target).closest("a"),view:o,options:{model:this.model,modelCache:this.modelCache}}),h("Board Menu","Settings","Change Org")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),u.hide(),h("Board Menu","Settings","Remove Org"))},t.prototype.toggleCovers=function(e,t){c.stop(e),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),h("Board Menu","Settings","Enable/Disable Cover Images")},t.prototype.changeCommentingPerms=function(e){c.stop(e),u.toggle({elem:r(e.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Commenting Permissions")},t.prototype.changeAddMemberPerms=function(e){c.stop(e),u.toggle({elem:r(e.target).closest("a"),view:new s({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Add Member Permissions")},t.prototype.toggleSelfJoin=function(e){c.stop(e),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),h("Board Menu","Settings","Toggle Allow Org Join")},t}(l)},{}],342:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O=function(e,t){function n(){this.constructor=e}for(var r in t)L.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},L={}.hasOwnProperty;r=e("jquery"),o=e(147),i=e(160),s=e(271),a=e(29),u=e(14),c=e(331),p=e(510),m=e(527),l=e(333),f=e(513),g=e(114),v=e(126),y=e(496),w=e(146),_=e("underscore"),M=e(493),k=e(680),T=e(484),B=e(43),x=e(99),C=e(91),j=e(39),S=e(106),b=e(495),h=e(19),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return O(t,e),S(b,t),t.prototype.viewTitleKey="menu",t.prototype.className="board-menu-content-frame",t.prototype.headerDisplayTypeClass="is-board-menu-default-view",t.prototype.initialize=function(e){return this.sidebarView=e.sidebarView,this.showAllMembers=!1,this.numActionsToShow=15,this.makeDebouncedMethods("render","renderMembers"),this.listenTo(this.model.memberList,{"change:status":this.renderMembersDebounced,"add remove reset":this.renderDebounced}),this.listenTo(this.model,{"change:datePluginDisable":this.renderPowerUpDisableTimer,"change:memberships":this.renderDebounced,"change:prefs:canInvite":this.renderDebounced,"change:prefs.selfJoin":this.renderDebounced,"change:prefs.invitations":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount,"change:idOrganization":this.renderMembersDebounced}),this.listenTo(this.model.boardPluginList,{"add remove reset":this.renderEnabledPowerUpCount}),this.subscribe(T(this.model),function(e){return function(){return e.renderEnabledPowerUpCount()}}(this)),this.actionListView=this.collectionSubview(s,new i([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:function(e){return function(t){return t.get("date")<e.model.get("dateLastView")}}(this),excludeTypes:["copyCommentCard"]}}),this.waitForId(this.model,function(e){return function(){return e.listenTo(e.modelCache,"add:Action:"+e.model.id+" remove:Action:"+e.model.id+" change:Action:"+e.model.id,e.frameDebounce(function(){return e.renderActionCount(),e.actionListView.collection.reset(e.getActions())})),e.actionListView.collection.reset(e.getActions())}}(this))},t.prototype.events={"click .js-open-manage-board-members":"openAddMembers","click .js-show-extra-members":"showExtraMembers","click .js-hide-extra-members":"hideExtraMembers","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-open-power-ups":"showPowerUps","click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore","click .js-power-up-disable-timer":"openPowerUpsLimitUpgrade"},t.prototype.render=function(){var e,t,n;return n=a.me(),this.showAllMembers=!1,t=this.model.editable(),e={canJoin:this.model.canJoin(),canInviteMembers:this.model.canInviteMembers(),canAssign:t,canChangeBackground:t,canEnablePowerUps:t,hasBCPowerUps:n.hasBCPowerUps(),hasGoldPowerUps:n.isFeatureEnabled("threePlugins"),selfJoin:this.model.allowsSelfJoin()},this.$el.html(k(e)),this.renderMembers(),this.actionListView.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount(),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this.renderPowerUpDisableTimer(),this},t.prototype.renderBackgroundPreview=function(){var e,t,n,r,o,i,s;return e=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""}),null!=(null!=(r=u[this.model.getPref("background")])?r.tile:void 0)?n=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?n=null!=(o=null!=(i=null!=(s=v.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?s.url:void 0)?i:this.model.get("fullSizeUrl"))?o:this.model.getPref("backgroundImage"):t=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue"),e.css({"background-image":"url("+n+")","background-color":t}),this},t.prototype.getDateLastViewedActionsStorageKey=function(){return this.model.id?"timeLastViewedActions-"+this.model.id:null},t.prototype.setDateLastViewedActions=function(e){var t;null!=(t=this.getDateLastViewedActionsStorageKey())&&g.set(t,e.toISOString())},t.prototype.setDateLastViewedActionsAsNow=function(){this.setDateLastViewedActions(new Date)},t.prototype.getDateLastViewedActions=function(){var e,t;return null!=(t=this.getDateLastViewedActionsStorageKey())&&null!=(e=g.get(t))?new Date(e):null},t.prototype.renderActionCount=function(){var e,t,n,r,o,i,s,u,c,l;for(this.$(".js-unread-activity-count").empty(),o=this.getDateLastViewedActions(),c=50,null==o&&(o=new Date,this.setDateLastViewedActions(o)),s=function(e){return function(e){var t,n;return t=new Date(e.get("date"))>o,n=e.get("idMemberCreator")!==a.me().id,t&&n}}(this),t=0,l=this.model.getActions(),i=0,u=l.length;u>i;i++)e=l[i],s(e)&&t++;return t>0&&t<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow(),n=t,t>=c&&(n=c+"+"),t>this.numActionsToShow&&this.$(".js-unread-activity-count").text(n),r={count:n,hasCount:t>this.numActionsToShow},this.$(".js-fill-activity-button").empty().append(M.fill("board_menu_more_activity_button",r)),this},t.prototype.renderPowerUpDisableTimer=function(){var e;return e=this.model.daysUntilPluginsDisable(),null!==e?this.$(".js-power-up-disable-timer").removeClass("hide").text(x("days remaining",e)):this.$(".js-power-up-disable-timer").addClass("hide")},t.prototype.getEnabledPowerUpCount=function(){return this.model.get("powerUps").length+this.model.boardPluginList.length},t.prototype.renderEnabledPowerUpCount=function(){var e,t,n;return t=a.me(),n=t&&h&&!t.isDismissed(h),n?(this.$(".js-enabled-power-up-count").text(""),this.$(".js-power-up-new").removeClass("hide")):(this.$(".js-power-up-new").addClass("hide"),e=this.getEnabledPowerUpCount(),e>0?this.$(".js-enabled-power-up-count").text(C(e)):this.$(".js-enabled-power-up-count").text("")),this},t.prototype.renderMembers=function(){var e,t,n,r,o,i,s,a,u,c,l,d,h,f,g,v,y,b,k,C,S,T;for(o=null!=this.model.get("idOrganization"),g=this.model.getOrganization(),T=this.model.orderedVisibleMembers(),_.any(T,function(e){return function(t){return e.model.ownedByMember(t)}}(this))||j(new Error("Board had no admins, id = "+this.model.id+", "+T.length+" visibleMembers")),r=_.groupBy(T,function(e){return function(t){var n;return n=e.model.getMembershipFor(t),e.model.isVirtual(t)?"invited":null==n?"other":n.deactivated?"deactivated":"observer"===n.memberType?"observer":null!=n.orgMemberType||null!=(null!=g?g.getMembershipFor(t):void 0)?"team":o?"other":"member"}}(this)),k=[{selector:".js-list-members",list:r.member},{selector:".js-list-team-members",list:r.team},{selector:".js-list-invited-members",list:r.invited},{selector:".js-list-non-team-members",list:r.other},{selector:".js-list-observers",list:r.observer},{selector:".js-deactivated-members",list:r.deactivated}],s=1===_.keys(r).length&&(null!=r.member||null!=r.team),y=9,w.fSmall&&(y=7),b=3,d=y*b,a=y*(b+1),i=0,u=0,l=k.length;l>u;u++)v=k[u],C=v.selector,h=v.list,null==h&&(h=[]),n=this.$(C),t=n.find(".js-list"),e=n.find(".js-heading"),n.toggleClass("is-hidden",0===h.length),e.toggleClass("is-hidden",s),n.toggleClass("is-partial-row",h.length<y),c=h.length>a,T=h,c&&!this.showAllMembers&&(i+=h.length-d,T=T.slice(0,d)),S=function(){var e,t,n;for(n=[],e=0,t=T.length;t>e;e++)f=T[e],n.push(this.subview(m,f,{board:this.model}));return n}.call(this),t.length&&this.ensureSubviews(S,t);return this.$(".js-show-extra-members").text(x("show more members",i)),this.$(".js-show-extra-members-button").toggleClass("is-shown",!this.showAllMembers&&i>0),this.$(".js-hide-extra-members-button").toggleClass("is-shown",this.showAllMembers),this.defer(function(){return p.refreshDraggableSidebarMembers()}),this},t.prototype.showExtraMembers=function(e){v.stop(e),this.showAllMembers=!0,this.renderMembers()},t.prototype.hideExtraMembers=function(e){v.stop(e),this.showAllMembers=!1,this.renderMembers()},t.prototype.renderActions=function(){return this.actionListView.render(),this},t.prototype.showPowerUps=function(e){var t,n;v.stop(e),n=a.me(),n&&h&&!n.isDismissed(h)&&n.dismiss(h),this.sidebarView.pushView("powerUps"),t=this.model.daysUntilPluginsDisable(),null!==t?B("Board Menu","Open Power-Ups","Power-Ups Timer Active"):B("Board Menu","Open Power-Ups")},t.prototype.showCardFilter=function(e){v.stop(e),this.sidebarView.pushView("filter"),B("Board Menu","Open Card Filter Menu")},t.prototype.openPowerUpsLimitUpgrade=function(e){v.stop(e),this.sidebarView.pushView("powerUps",{viewState:"upsell"}),B("Board Menu","Open Powerups Upsell")},t.prototype.openStickers=function(e){v.stop(e),this.sidebarView.pushView("stickers"),B("Board Menu","Open Stickers","Via Default Menu")},t.prototype.changeBackground=function(e){v.stop(e),this.sidebarView.pushView("background"),B("Board Menu","Open Change Background")},t.prototype.openActivity=function(e){v.stop(e),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow(),B("Board Menu","View All Board Activity")},t.prototype.openMore=function(e){v.stop(e),this.sidebarView.pushView("more"),B("Board Menu","More Menu")},t.prototype.joinBoard=function(e){v.stop(e),this.$(".js-join-board").remove(),this.model.joinBoard(),B("Board Menu","Join Board via Sidebar")},t.prototype.openAddMembers=function(e){var t;v.stop(e),B("Board Menu","Add Members via Sidebar Button"),t=new c({model:this.model,modelCache:this.modelCache}),t.loadOrgData(),f.toggle({elem:r(e.target).closest(".js-open-manage-board-members"),view:t})},t.prototype.remove=function(){return this.setDateLastViewedActionsAsNow(),t.__super__.remove.apply(this,arguments)},t}(y)},{}],343:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;r=e("jquery"),o=e(283),i=e(330),s=e(332),l=e(342),u=e(338),c=e(341),a=e(333),p=e(73),h=e(344),f=e(350),m=e(349),g=e(18),v=e(513),y=e(361),b=e(494),w=e(126),_=e(496),k=e("underscore"),C=e(493),x=e(43),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.initialize=function(){b.addHandler(this,{scope:"board_sidebar"}),this.defaultView=this.subview(l,this.model,{sidebarView:this}),this.viewStack=[["default",this.defaultView]]},t.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView",shortcut:"shortcut"},t.prototype.shortcut=function(e){switch(e){case g.F:return this.pushView("filter"),"F - Search and Filter Cards"}},t.prototype.className="board-menu-container",t.prototype.render=function(){return this.$el.html(C.fill("board_sidebar")),this.renderView(),this},t.prototype.sidebarSubviews=function(){return{default:l,filter:h,archive:o,stickers:y,labels:i,background:f,backgroundColors:m,backgroundPhotos:m,activity:s,powerUps:u,more:a,settings:c}},t.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],w.setCaretAtEnd(t)}},more:{didBecomeVisible:function(e){return e.selectUrl()}},archive:{didBecomeVisible:function(e){var t;return t=e.$(".js-autofocus")[0],w.setCaretAtEnd(t)}}},t.prototype.viewNamed=function(e,t){var n,r,o,i,s,a,u,c;for(s=this.viewStack,n=0,r=s.length;r>n;n++)if(a=s[n],i=a[0],c=a[1],e===i)return c;if(u=k.result(this,"sidebarSubviews")[e],null==u)throw new Error("Unknown sidebar view "+e);return o="filter"===e?this.model.filter:this.model,new u(k.extend({model:o,modelCache:this.modelCache,sidebarView:this,viewState:null!=t?t.viewState:void 0},t))},t.prototype.topSidebarView=function(){return k.last(this.viewStack)[1]},t.prototype.renderView=function(e,t){var n,o,i,s,a,u;return i=this.$(".js-board-menu-title"),s=this.$(".js-board-menu-title-text").empty(),o=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),u=this.topSidebarView(),o.toggleClass("no-padding",u.noPadding===!0),null!=u.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(u.headerDisplayTypeClass):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view"),n=u.render().$el,null!=e&&n.addClass(e),a=u.getViewTitle(),a?(i.addClass("is-in-frame"),s.append(a)):i.removeClass("is-in-frame"),o.append(n),null!=t&&r(".board-menu-content-frame").one("transitionend webkitTransitionEnd",function(e){return function(e){return t(u)}}(this)),this.defer(function(t){return function(){return null!=e?n.removeClass(e):void 0}}(this)),u.delegateEvents(),this},t.prototype.pushView=function(e,t){var n,o,i,s,a,u,c,l;l=this.viewNamed(e,t),o=null!=(a=null!=(u=this.hackySidebarLifetimeEvents)&&null!=(c=u[e])?c.didBecomeVisible:void 0)?a:function(){},i=l===this.topSidebarView(),s=this.model.viewState.get("showSidebar"),s?i?o(l):n=o:r(".board-menu").one("transitionend webkitTransitionEnd",function(e){return function(e){return o(l)}}(this)),s||this.model.viewState.setShowSidebar(!0),i||(this.viewStack.push([e,l]),this.renderView("is-right-of-frame",n),v.hide())},t.prototype.popView=function(){1!==this.viewStack.length&&(this.topSidebarView().remove(),this.viewStack.pop(),this.renderView("is-left-of-frame"),v.hide(),x("Board Menu","Go Back a View"))},t.prototype.hideSidebar=function(){this.model.viewState.setShowSidebar(!1)},t}(_)},{}],344:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(97),s=e(18),a=e(126),u=e(496),c=e("underscore"),d=e(493),l=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="filter cards",t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions),this.listenTo(this.model,"change",this.renderFilterOptions)},t.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-labels":"showAllLabels","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","click .js-mode-filter":"toggleModeFilter","mouseenter .js-filter-search-results li":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected","mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"},t.prototype.render=function(){var e;return this.isFiltering=!1,e=this.model.toJSON(),this.$el.html(d.fill("filter_cards",e)),this.renderFilterOptions(),this},t.prototype.renderFilterOptions=function(){var e,t,n,r,o,i,s;return e=this.model.toJSON({board:!0,expanded:!0}),n=!c.isEmpty(e.labels),r=!c.isEmpty(e.members),t=this.model.get("title")&&(n||r),t?(e.limitMembers=!1,e.limitLabels=!1):(o=6,(null!=(i=this.model.get("limitMembers"))?i:!0)&&(e.remainingMembers=Math.max(0,e.members.length-o),e.members=c.first(e.members,o),e.limitMembers=e.remainingMembers>0),(null!=(s=this.model.get("limitLabels"))?s:!0)&&(e.remainingLabels=Math.max(0,e.labels.length-o),e.labels=c.first(e.labels,o),e.limitLabels=e.remainingLabels>0)),c.extend(e,{filtering:t,showHelper:!t,showLabels:!t||n,showMembers:!t||r,showDueTimes:!t,showMatchMode:!t,isFiltering:this.model.isFiltering(),labels:e.labels.map(function(e){var t;return t=e.color?l(["labels",e.color]):"",c.extend({defaultColorName:t},e)})}),this.$(".js-filter-search-results").html(d.fill("filter_cards_search_results",e,{},{member:d.member,select_member:d.select_member})),null===this.model.get("title")&&this.$(".js-input").val(""),this},t.prototype.keyDownEvent=function(e){var t,n,r,o;r=i.getKey(e),(r===s.Enter||r===s.ArrowUp||r===s.ArrowDown)&&(a.stop(e),o=".item, .label-list-item",t=this.$(o),n=t.filter(".selected").first(),r===s.Enter?n.find("a").click():(r===s.ArrowUp||r===s.ArrowDown)&&(0===n.length?t.first().addClass("selected"):a.navMenuList(this.$el,o,r)))},t.prototype.keyUpEvent=function(e){var t;return t=i.getKey(e),t!==s.Escape&&t!==s.Enter&&t!==s.ArrowUp&&t!==s.ArrowDown?this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0}):void 0},t.prototype.showAllMembers=function(e){a.stop(e),this.model.save("limitMembers",!1)},t.prototype.showAllLabels=function(e){a.stop(e),this.model.save("limitLabels",!1)},t.prototype._clearAndFocusInput=function(){return this.model.save({title:""}),this.$(".js-input").val("").focus()},t.prototype.toggleLabelFilter=function(e){var t,n;return a.stop(e),n=r(e.target).closest("a").attr("data-idlabel"),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.labels)||this._clearAndFocusInput(),this.model.toggleIdLabel(n)},t.prototype.toggleMemberFilter=function(e){var t,n;return a.stop(e),n=r(e.target).closest("a").attr("idMember"),t=this.model.toJSON({expanded:!0}),c.isEmpty(t.members)||this._clearAndFocusInput(),a.stop(e),this.model.toggleMember(n)},t.prototype.toggleDateFilter=function(e){var t;return a.stop(e),t=r(e.target).closest("a").attr("time"),this.model.get("due")===t?this.model.save("due",null):this.model.save("due",t)},t.prototype.toggleModeFilter=function(e){var t;return a.stop(e),t=r(e.target).closest("a").attr("mode"),this.model.get("mode")!==t?this.model.save("mode",t):void 0},t.prototype.clearFilter=function(e){return this.model.clear()},t.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")},t.prototype.hoverSelect=function(e,t){return this.clearAllSelected(),a.selectMenuItem(r(e.currentTarget).closest("ul"),"li",r(e.currentTarget))},t}(u)},{}],345:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(352),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="add member permissions",t.prototype.getTemplate=function(){return"board_menu_invitations"},t.prototype.getPerm=function(){return"invitations"},t}(o)},{}],346:[function(e,n,r){var o,i,s,a,u,c,l,d,p;a=e("react"),u=e("underscore"),o=void 0,t(function(){return o=e(212)}),i=e(14),d=a.DOM.div,c=[];for(p in i)l=i[p],"default"===l.type&&(c=c.concat({key:p,name:p,color:l.color}));s=function(e){var t,n,r;return r=e.setBackgroundColor,n=e.name,t=e.color,d({onClick:function(){return r(n,t)},className:"board-backgrounds-section-tile"},d({className:"image",style:{backgroundColor:t}}))},n.exports=a.createClass({displayName:"ColorsView",render:function(){var e;return e=this.props.setBackgroundColor,d({},c.map(function(t){return a.createElement(s,u.extend({setBackgroundColor:e},t))}))}})},{}],347:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v;a=e("react"),p=a.DOM,c=p.div,l=p.input,m=p.span,d=e(101),u=e("underscore").debounce,h=e(226),v=h.unsplashApi,f=h.toJson,g=e(43),s=e(348),r=250,o=317099,i=function(){var e,t;return e=Math.ceil(screen.height/112*2),t=Math.ceil(1.5*e),t%2&&t++,t}(),t.exports=a.createClass({displayName:"PhotosView",getInitialState:function(){var e;return e=function(e){return{connectionError:!1,id:e,images:[],isLoading:!1,marker:null,maxPage:1,page:1}},{collections:[e(o),e("search")],defaultCollectionActive:!0,defaultCollectionShowTitle:!1,queueID:0,searchTerm:null}},componentWillMount:function(){return this.debouncedGetUnsplashBackgrounds=u(this.getUnsplashBackgrounds,r)},componentDidMount:function(){return g("Board Menu","Open Background Photos"),this.getUnsplashBackgrounds(o)},render:function(){var e,t,n,r,i,s;return i=this.state,e=i.boardId,t=i.collections,n=i.defaultCollectionActive,r=i.defaultCollectionShowTitle,s=i.searchTerm,c({className:"board-backgrounds-photos"},c({className:"search-photos"},l({onChange:this.onSearchInputChange,placeholder:d(["background photos","photos"])}),m({className:"icon-lg icon-search"})),c({className:"board-backgrounds-list-observer",ref:this.bindObserver},s?this.renderList("search"):void 0,r?c({className:"collection-title"},d(["background photos","top picks"])):void 0,n?this.renderList(o):void 0))},renderList:function(e){var t,n,r,o,i,u,c,l;return t=this.props.boardId,n=this.state.collections,l=n.filter(function(t){return t.id===e})[0],r=l.connectionError,o=l.images,i=l.isLoading,u=l.maxPage,c=l.page,a.createElement(s,{boardId:t,collectionID:e,connectionError:r,images:o,isLoading:i,maxPage:u,page:c,registerMarker:this.registerMarker(e)})},onSearchInputChange:function(e){var t,n;return t=this.state.collections,n=e.target.value.trim(),this.setState({collections:t.map(function(e){
return"search"===e.id&&(e.images=[],e.isLoading=!0),e}),defaultCollectionActive:!n,defaultCollectionShowTitle:!1,searchTerm:n}),n?this.debouncedGetUnsplashBackgrounds("search"):void 0},nextPage:function(e){var t,n;return t=this.state.collections,n=t.filter(function(t){return t.id===e})[0].page,this.getUnsplashBackgrounds(e,n+1)},updateCollection:function(e,t,n){var r,o,i;return r=this.state.collections.map(function(r){return r.id===e&&(r.connectionError=!1,r.images=r.images.concat(t),r.isLoading=!1,r.maxPage=n),r}),o=!0,i=!1,"search"===e&&(o=!r.filter(function(e){return"search"===e.id})[0].images.length,i=o),this.setState({collections:r,defaultCollectionActive:o,defaultCollectionShowTitle:i})},showErrorInCollection:function(e){return this.setState({collections:this.state.collections.map(function(t){return t.id===e&&(t.connectionError=!0,t.isLoading=!1),t})})},getUnsplashBackgrounds:function(e,t){var n,r,o,s;return null==t&&(t=1),o=this.state,n=o.collections,r=o.queueID,s=o.searchTerm,r++,this.setState({queueID:r,collections:n.map(function(n){return n.id===e&&(n.page=t,n.isLoading=!0),n})}),("search"===e?v.search.all(s,t,i).then(f).then(function(t){return function(n){var o;return o=n.photos,t.state.queueID===r?t.updateCollection(e,o.results,Math.ceil(o.total/i)):void 0}}(this)):v.collections.getCollectionPhotos(e,t,i,"latest").then(f).then(function(n){return function(r){var o;return o=t+1,r.length<i&&(o=t),n.updateCollection(e,r,o)}}(this))).catch(function(t){return function(){return t.showErrorInCollection(e)}}(this))},registerMarker:function(e){return function(t){return function(n){var r;if(n)return r=t.state.collections.map(function(t){return t.id===e&&(t.marker=n),t}),t.setState({collections:r}),t.observer?t.bindMarkers():void 0}}(this)},bindObserver:function(e){var t,n;if(!this.observer&&e)return n=this.state.collections,t=function(e){return function(t){var r,o,i,s,a,u;for(u=[],i=0,a=t.length;a>i;i++)o=t[i],s=o.isIntersecting||o.intersectionRatio,r=n.filter(function(e){return e.marker===o.target})[0],s&&!r.isLoading?u.push(e.nextPage(r.id)):u.push(void 0);return u}}(this),this.observer=new IntersectionObserver(t,{root:e}),this.bindMarkers()},bindMarkers:function(){var e,t,n,r,o;for(t=this.state.collections,this.observer.disconnect(),o=[],n=0,r=t.length;r>n;n++)e=t[n],e.marker?o.push(this.observer.observe(e.marker)):o.push(void 0);return o}})},{}],348:[function(e,n,r){var o,i,s,a,u,c,l,d,p,h,m;a=e("react"),p=a.DOM,c=p.a,l=p.div,h=p.span,d=e(101),i=void 0,t(function(){return i=e(212)}),m=e(43),s="?w=2560&h=2048&q=90",o="?utm_source=trello&utm_medium=referral&utm_campaign=api-credit",u=8,n.exports=a.createClass({displayName:"PhotosList",getInitialState:function(){return{uploadingImageID:null}},shouldComponentUpdate:function(e,t){var n,r,o,i;return o=this.props,n=o.images,r=o.isLoading,i=this.state.uploadingImageID,n.length!==e.images.length||r!==e.isLoading||i!==t.uploadingImageID},render:function(){var e,t,n,r,o,i,s,a,u,c,p;return u=this.props,e=u.boardId,t=u.collectionID,n=u.connectionError,r=u.images,o=u.isLoading,s=u.maxPage,a=u.page,c=s>a,i=o?"loading active":"loading",p=r.map(this.thumbMap),c&&(p=this.addMarker(p)),l({className:"board-backgrounds-list"},p.length?p:"search"!==t||o||n?void 0:l({className:"no-results"},d(["background photos","no results"])),n?l({className:"error"},d(["background photos","connection error unsplash"])):void 0,l({className:i}))},thumbMap:function(e,t){var n;return n=this.state.uploadingImageID,l({className:"board-background-select",key:["thumb",t,e.id].join(":"),onClick:this.setUnplashBackground(e)},h({className:"background-box",style:{backgroundImage:"url("+e.urls.thumb+")"}},n===e.id?l({className:"uploading"},h({className:"spinner small u-float-left"}),d(["templates","board_background_selection","uploading-ellipsis"])):c({className:"attribution",href:e.user.links.html.replace(/^http\:\/\//,"https://")+o,target:"_blank",title:e.user.name,onClick:function(e){return e.stopPropagation()}},e.user.name)))},setUnplashBackground:function(e){return function(t){return function(){var n;return n=t.props.boardId,m("Board Menu","Change Background","Photos","id","unsplash-"+e.id),t.setState({uploadingImageID:e.id}),i({url:"/1/boards/"+n+"/prefs/background",type:"post",data:{url:e.urls.raw+s}}).finally(function(){return t.setState({uploadingImageID:null})})}}(this)},addMarker:function(e){var t,n;return n=this.props.registerMarker,t=l({key:"marker",className:"scroll-marker",ref:n}),e.splice(-u,0,t),e}})},{}],349:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(346),s=e(347),a=e("react"),u=e("react-dom"),c=e(496),i={colors:o,photos:s},l=function(e){var t,n,r;n={};for(t in e)r=e[t],t.indexOf("background")>-1&&(n[t]=r);return n},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey=function(){return"colors"===this.options.component?"change background colors":"change background photos"},t.prototype.viewTitleArguments={unsplashUrl:"https://unsplash.com?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){this.listenTo(this.model,"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t;return t={boardId:this.model.id,backgroundPrefs:l(this.model.attributes.prefs)},"colors"===this.options.component&&(t.setBackgroundColor=function(e){return function(t,n){return e.model.set({prefs:{background:t,backgroundColor:n,backgroundImage:null,backgroundImageScaled:null}}).setPref("background",t)}}(this)),e=a.createElement(i[this.options.component],t),u.render(e,this.el),this},t}(c)},{}],350:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(506),o=e(29),i=e(14),s=e(152),u=e(34),c=e(359),l=e(360),d=e(126),p=e(496),h=e("underscore"),f=e(493),g=e(43),m=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change background",t.prototype.className="board-menu-content-frame",t.prototype.events={"click .js-bg-colors":"openBackgroundColors","click .js-bg-photos":"openBackgroundPhotos","change .js-upload-image":"setUploadImage",'click a[href="/business-class"]':function(){return g("Board Menu","Open Business Class Promo - via Change Background")}},t.prototype.initialize=function(e){var n;this.sidebarView=e.sidebarView,t.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(o.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),(o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(n=this.model.getOrganization())?n.isFeatureEnabled("customBoardBackgrounds"):void 0))&&u.loadMemberCustomBackgrounds(o.myId()).done()},t.prototype.fillBackgroundList=function(e,t,n){var r;null==n&&(n=c),e.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(function(){var e,o,i;for(i=[],e=0,o=t.length;o>e;e++)r=t[e],i.push(this.subview(n,r,{board:this.model}));return i}.call(this),e)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.enabled_additionalBackgrounds=o.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("additionalBoardBackgrounds"):void 0),e.enabled_customBoardBackgrounds=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(n=this.model.getOrganization())?n.isFeatureEnabled("customBoardBackgrounds"):void 0),e.idMember=o.myId(),this.$el.html(f.fill("board_change_background",e)),this.renderCustomBackgrounds(),this},t.prototype.renderCustomBackgrounds=function(){var e,t,n,r,i;return n=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(i=this.model.getOrganization())?i.isFeatureEnabled("customBoardBackgrounds"):void 0),e=this.$(".js-custom-list"),n?(r=this.modelCache.get("Member",o.myId()),t=r.boardBackgroundList.chain().filter(function(e){return"custom"===e.get("type")}).sortBy("id").reverse().value(),this.fillBackgroundList(e,t,l),e.find(".js-uploader").prependTo(e)):e.append(f.fill("product_promo_button")),this},t.prototype.uploadBackgroundsAndAddPreviews=function(e){var t,n,i,s,a;for(a=[],n=i=0,s=e.length;s>i;n=++i)t=e[n],a.push(function(e){return function(n){var i,s,a;return a=new FileReader,i={file:t},d.validFileSize(t)?(s=new FormData,s.append("token",o.myToken()),s.append("file",t),a.onload=function(t){return e.modelCache.get("Member",o.myId()).boardBackgroundList.create({type:"custom",fullSizeUrl:t.target.result},{data:s,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)},success:function(t){var n;return n=e.model,h.extend(n.attributes.prefs,{backgroundColor:t.get("color"),backgroundImage:t.get("fullSizeUrl"),backgroundImageScaled:t.get("scaled"),backgroundTile:t.get("tile"),backgroundBrightness:t.get("brightness")}),n.setPref("background",t.id)}})},a.readAsDataURL(t)):void r.flash("file too large","error")}}(this)(n));return a},t.prototype.setUploadImage=function(e){var t,n;return d.stop(e),t=this.$(".js-upload-image"),g("Board Menu","Upload Custom Background"),null==t.prop("files")&&t.val()?void d.uploadFile(o.myToken(),t,function(){}):(n=t[0].files,void(n.length>0&&this.uploadBackgroundsAndAddPreviews(n)))},t.prototype.openBackgroundColors=function(e){d.stop(e),this.sidebarView.pushView("backgroundColors",{component:"colors"}),g("Board Menu","Open Background Colors")},t.prototype.openBackgroundPhotos=function(e){d.stop(e),this.sidebarView.pushView("backgroundPhotos",{component:"photos"}),g("Board Menu","Open Background Photos")},t}(p)},{}],351:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(352),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="commenting permissions",t.prototype.getTemplate=function(){return"board_menu_commenting"},t.prototype.getPerm=function(){return"comments"},t}(o)},{}],352:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(464),s=e(513),a=e(126),u=e(496),c=e(493),l=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.events={"click .js-select":"selectPerm"},t.prototype.render=function(){var e,t,n,r;return e=this.model.toJSON({prefs:!0,url:!0}),e.cardCovers=e.prefs.cardCovers,t=this.model.getOrganization(),e.hasOrg=null!=(null!=t?t.id:void 0),e.orgCanSee=e.hasOrg&&("public"===(n=this.model.getPref("permissionLevel"))||"org"===n),e.premium=null!=t?t.isFeatureEnabled("observers"):void 0,e.voting_showObservers=(e.premium||e.voting_observers)&&e.hasOrg,e.comments_showObservers=(e.premium||e.comments_observers)&&e.hasOrg,e.pLevelClass=o.getPermLevelIconClassForBoard(this.model),(null!=t?t.owned():void 0)?(e.orgOwner=!0,e.orgName=t.get("displayName"),this.model.owned()||(e.setOrgNull=!0)):this.model.owned()||(e.noEditOrg=!0),r=this.getTemplate(),this.$el.html(c.fillMenu(r,e,{editable:this.model.editable(),owned:this.model.owned()})),this},t.prototype.selectPerm=function(e){var t,n,o;a.stop(e),l("Board","Change "+this.getPerm()),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||t.closest(".js-disabled").length||(n=this.getPerm(),o=t.attr("name"),this.model.setPref(n,o),this.model.save(),s.popView())},t}(u)},{}],353:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(464),i=e(339),a=e(513),u=e(126),c=e(496),p=e(493),h=e(43),d=e(101),l=e(687),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.model.owned()?"change visibility":"visibility"},t.prototype.tagName="ul",t.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)},t.prototype.className="pop-over-list",t.prototype.events={"click .js-select":"selectVis"},t.prototype.render=function(){var e;return e=this.model.getOrganization(),this.$el.html(l({canChange:this.model.owned(),current:this.model.getPref("permissionLevel"),hasSuperAdmins:null!=e?e.isFeatureEnabled("superAdmins"):void 0,hasOrg:null!=e,orgName:null!=e?e.get("displayName"):void 0,privateRestricted:null!=e&&!(null!=e?e.canSetVisibility("private"):void 0),orgRestricted:null!=e&&!(null!=e?e.canSetVisibility("org"):void 0),publicRestricted:null!=e&&!(null!=e?e.canSetVisibility("public"):void 0)})),this},t.prototype.selectVis=function(e){var t,n;if(u.stop(e),t=r(e.target).closest(".js-select"),!t.hasClass("disabled")&&!t.closest(".js-disabled").length){if(n=t.attr("name"),"org"===n&&!this.model.getOrganization())return void a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache,disableNone:!0}});this.model.setPref("permissionLevel",n),this.model.save(),h("Board","Change Board Visibility",n),a.popView()}},t}(c)},{}],354:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(507),s=e(126),a=e(496),u=e(493),c=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="background options",t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"},t.prototype.render=function(){var e,t;return t=this.model.toJSON(),t.tile=this.model.get("tile"),e=this.model.get("brightness"),t.brightnessLight="light"===e,t.brightnessDark="dark"===e,this.$el.html(u.fill("board_background_options",t)),this},t.prototype.selectOption=function(e){var t,n;t=r(e.target).closest(".js-select-option"),null!=t.attr("data-board-brightness")?this.model.update("brightness",t.attr("data-board-brightness")):null!=t.attr("data-background-display-type")&&(n=t.attr("data-background-display-type"),this.model.update("tile","tile"===n))},t.prototype.deleteBackground=function(e){return s.stop(e),o.pushView("delete background",{elem:r(e.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy(),e.remove(),c("Board Menu","Change Background","Delete Uploaded Background")}}(this)})},t}(a)},{}],355:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),d=e("underscore"),o=e(506),i=e(29),s=e(507),u=e(34),c=e(126),l=e(496),h=e(681),p=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="add cards via email",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.frameDebounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.frameDebounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey")?this.model.generateEmailKey():void 0},t.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"},t.prototype.render=function(){var e,t,n,r,o,s;return this.model.canComment(i.me())?(t=this.model.getPref("idEmailList"),r=this.model.listList.models.map(function(e){return{id:e.id,name:e.get("name")}}),s=null!=(n=d.findWhere(r,{id:t}))?n.name:null!=(n=this.modelCache.get("List",t))&&n.get("closed")?(e=p("archived list",{listName:n.get("name")}),r.unshift({id:n.id,name:e}),e):(null!=t?u.loadArchivedLists(this.model.id).then(function(e){return function(){return null!=e.modelCache.get("List",t)?e.render():void 0}}(this)):void 0,p("unknown list placeholder")),this.$el.html(h({commentsEnabled:!0,email:null!=(o=this.model.getPref("fullEmail"))?o:"",lists:r.map(function(e){return{id:e.id,name:e.name,selected:e.id===t}}),listName:s,positionName:p(["email position",this.model.getPref("emailPosition")]),position:this.model.getPref("emailPosition")}))):this.$el.html(h({commentsEnabled:!1})),this},t.prototype.focusInput=function(e){r(e.target).focus().select()},t.prototype.updateValue=function(e,t){var n;return n=this.$el.find(e).val(),null!=n&&n!==this.model.getPref(t)?this.model.setPref(t,n):void 0},t.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")},t.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0},t.prototype.generateAddress=function(e){c.stop(e),s.pushView("regenerate email address",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(t){return e.model.set({"myPrefs/emailKey":null}),e.allowEmail=!0,e.model.generateEmailKey()}}(this)})},t.prototype.sendAddressEmail=function(e){c.stop(e),this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},function(e){return function(e){return e?o.show("could not send email","error","email",5e3):o.flash("email sent","confirm")}}(this)))},t}(l)},{}],356:[function(e,t,n){var r,o,i,s,a,u;r=e(483),o=e("react"),s=e(488)("plugin_auth"),u=e("xtend"),i=e("underscore"),a=s.renderable(function(e){var t,n,r,o,i,a,u,c;return o=null!=e?e:{},c=o.supportsSettings,u=o.supportsAuth,r=o.hasPersonalSettings,t=o.authStatus,n=o.authorize,i=o.removeData,a=o.showSettings,s.ul(".pop-over-list",function(){return!u||t&&t.authorized?(c&&s.li({onClick:a},function(){return s.a(function(){return s.format("edit-power-up-settings")})}),r?s.li({onClick:i},function(){return s.a(function(){return s.format("remove-personal-settings")})}):void 0):s.li({onClick:n},function(){return s.a(function(){return s.format("authorize-account")})})})}),t.exports=o.createClass({displayName:"PluginSettings",render:function(){return a(this.props)}})},{}],357:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e(496),a=e(493),s=e(32).locales,r=e(98),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){this.powerUp=e.powerUp,this.isGrandfathered=e.isGrandfathered},t.prototype.getViewTitle=function(){return this.powerUp.displayName},t.prototype.render=function(){var e;return e={about:a.fill(this.powerUp.aboutTemplate),showScreenshots:r.matches(s[0],"en"),screenshots:this.powerUp.screenshots,displayName:this.powerUp.displayName,isGrandfathered:this.isGrandfathered},this.$el.html(a.fill("power_up_item_details",e)),this},t}(i)},{}],358:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(513),i=e(126),s=e(496),a=e(493),u=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="rename board",t.prototype.events={"click .js-rename-board":"rename","submit form":"rename"},t.prototype.render=function(e){var t;return t={},t.boardName=this.model.get("name"),this.$el.html(a.fill("popover_rename_board",t)),this},t.prototype.rename=function(e){var t,n;return i.stop(e),t=this.$(".js-board-name"),n=t.val().trim(),""===n?void t.focus().select():(u("Board","Successfully Rename Board"),this.model.update("name",n),void r.hide())},t}(s)},{}],359:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(126),i=e(496),s=e("underscore"),a=e(493),u=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:error",this.render)},t.prototype.className="board-background-select js-select-background",t.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.pending=null==this.getId()&&null==e.error,null==e.color&&(e.backgroundImageThumbnail=null!=(t=null!=(n=o.previewBetween(this.model.get("scaled"),90,60,600,400))?n.url:void 0)?t:this.model.get("fullSizeUrl")),this.$el.html(a.fill("board_background_selection",e)),this.$el.toggleClass("is-still-uploading-background",e.pending),this},t.prototype.clickAttribution=function(e){return e.stopPropagation(),u("Board Menu","Change Background","Clicked Attribution")},t.prototype.getId=function(){return this.model.get("name")},t.prototype.selectBackground=function(e){var t,n,r;o.stop(e),null!=this.getId()&&(t=this.options.board,s.extend(t.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(n=this.model.get("tile"))?n:!1,backgroundBrightness:null!=(r=this.model.get("brightness"))?r:"unknown"}),t.setPref("background",this.getId()),u("Board Menu","Change Background",this.getId()))},t}(i)},{}],360:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(354),o=e(513),i=e(359),a=e(126),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:id",this.render)},t.prototype.events={"click .js-options":"openOptions",click:"selectBackground"},t.prototype.openOptions=function(e){return a.stop(e),o.toggle({elem:this.$(".js-options"),view:new r({model:this.model,modelCache:this.modelCache})})},t.prototype.getId=function(){return this.model.id},t}(i)},{}],361:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(29),s=e(647),a=e(510),u=e(34),c=e("bluebird"),l=e(206),h=e(26),p=e(649),m=e(126),f=e(496),g=e("underscore"),b=e(493),w=e(43),y=e(101),v=e(70),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.viewTitleKey="stickers",t.prototype.className="board-menu-content-frame",t.prototype.initialize=function(){return v(i.isLoggedIn(),"Can't show the StickerPickerView when not logged in!"),this.me=i.me(),u.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers)},t.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/business-class"]':function(){return w("Board Menu","Open Business Class Promo - via Sticker Picker")}},t.prototype.render=function(){return this.$el.html(b.fill("sticker_select")),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer(function(){return a.refreshDraggableStickers()}),this},t.prototype._getStickers=function(e){var t;return t=h[e].premium,h[e].stickers.map(function(e){return new l(g.extend({premium:t},e),{modelCache:this.modelCache})})},t.prototype._loadStickers=function(e){var t,n,o;return o="sticker-list-loading",e.addClass(o),n=e.find(".sticker-select-image").get(),t=n.map(function(e){var t;return t=r(e),new c(function(e){return t.load(e),t.error(e)})}),c.all(t).then(function(){return e.removeClass(o)}).done()},t.prototype.renderStandardStickers=function(){var e,t;return e=this.$(".js-standard-sticker-list"),t=this._getStickers("standard").map(function(e){return function(t){return e.subview(p,t)}}(this)),this.appendSubviews(t,e),this._loadStickers(e),this},t.prototype.renderPremiumStickers=function(){var e,t,n,o,i,s,a,u,c;i=null!=(u=this.model.getOrganization())?u:null,e=this.$(".js-premium-stickers"),o=this.me.isFeatureEnabled("additionalStickers")||(null!=i?i.isFeatureEnabled("additionalStickers"):void 0);for(s in h)a=h[s].premium,a&&(t=r(b.fill("sticker_pack_selection_list",{displayName:y(["sticker packs",s])})),n=t.filter(".js-sticker-list"),c=this._getStickers(s).map(function(e){return function(t){return e.subview(p,t,{org:i})}}(this)),this.appendSubviews(c,n),this._loadStickers(n),e.append(t),o||n.append(b.fill("product_promo_button")));return this},t.prototype.renderCustomStickers=function(){var e,t,n,r,o;return n=null!=(r=this.model.getOrganization())?r:null,e=this.$(".js-custom-sticker-list"),e.children().detach(),t=this.me.isFeatureEnabled("customStickers")||(null!=n?n.isFeatureEnabled("customStickers"):void 0),t?(o=this.me.customStickerList.map(function(e){return function(t){return e.subview(s,t,{org:n})}}(this)),this.appendSubviews(o,e)):e.append(b.fill("product_promo_button")),e.append(b.fill("sticker_select_item_upload",{id:this.me.id})),this.defer(function(){return a.refreshDraggableStickers()}),this},t.prototype.setUploadImage=function(e){var t,n;return m.stop(e),t=this.$(".js-upload-image"),null==t.prop("files")&&t.val()?void m.uploadFile(i.myToken(),t,function(){}):(n=t[0].files,void(n.length>0&&this.uploadStickers(n)))},t.prototype.uploadStickers=function(e){g.each(e,function(e){return function(t){var n,r,s;return s=new FileReader,n={file:t},m.validFileSize(t)?(r=new FormData,r.append("token",i.myToken()),r.append("file",t),s.onload=function(t){var n;return n=t.target.result,e.me.customStickerList.create({url:n},{data:r,processData:!1,contentType:!1,error:function(t){return t.set("error","Failed"),e.setTimeout(function(){return t.destroy()},5e3)}})},s.readAsDataURL(t)):void o.flash("file too large","error")}}(this))},t}(f)},{}],362:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),i=e(513),s=e(126),a=e(496),u=e("underscore"),c=e(493),l=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="add list",t.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"},t.prototype.initialize=function(e){return this.didAddList=e.didAddList,t.__super__.initialize.apply(this,arguments)},t.prototype.getLists=function(){return this.lists=this.model.listList,this.listsLength=this.lists.length+1},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_add_list")),this.setTimeout(function(e){return function(){return e.getClosestListPos(),e.getLists(),e.updateListList()}}(this),10),this},t.prototype.getClosestListPos=function(){var e,t,n;return t=r(".js-list"),n=[],this.closestListIdx=0,t.each(function(e){return function(o){var i;return i=parseInt(Math.abs(r(t[o]).offset().left+r(t[o]).width()/2-e.$el.offset().left),10),n.push(i)}}(this)),this.closestListIdx=u.indexOf(n,u.min(n)),e=r(t[this.closestListIdx]),e.length>0&&this.$el.offset().left>e.offset().left+e.width()/2&&this.closestListIdx<t.length?this.closestListIdx+=1:void 0},t.prototype.updateListList=function(){var e,t,n,o,i,s,a;for(a=this,e=r(a.el),n=e.find(".js-select-list-pos"),o=i=0,s=this.listsLength;s>=0?s>i:i>s;o=s>=0?++i:--i)r("<option>").val(o).text(o+1).appendTo(n);return t=n.find("option:last"),t=n.find("option:eq("+this.closestListIdx+")"),t.attr("selected","selected"),this.renderValue()},t.prototype.renderValue=function(){var e;e=parseInt(this.$(".js-select-list-pos").val(),10)+1,r(".js-pos-value").text(e.toString())},t.prototype.addList=function(e){var t,n,r,o,a;return s.stop(e),o=this.$(".js-list-name").val().trim(),""===o?void this.$(".js-list-name").focus().select():(t=this.$(".js-select-list-pos"),a=parseInt(t.find("option:selected").val(),10),r=a===this.listsLength-1?!1:!0,n="List"===o?!1:!0,i.hide(),void this.model.listList.create({name:o,pos:this.model.calcPos(a),closed:!1},{success:function(e){return function(t){return n&&r?l("Board","Add List","Successfully Add List - Changed Name, Changed Position"):n?l("Board","Add List","Successfully Add List - Changed Name, Default Position"):r?l("Board","Add List","Successfully Add List - Default Name, Changed Position"):l("Board","Add List","Successfully Add List - Default Name, Default Position"),e.didAddList(t)}}(this)}))},t.prototype.cancel=function(e){s.stop(e),i.hide(),l("Board Menu","Add List Menu","Click Cancel Button")},t}(a)},{}],363:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(470),s=e(103),a=e(126),u=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:name change:desc",this.renderDebounced)},t.prototype.events={"click .js-edit-desc":"editDesc"},t.prototype.render=function(){var e,t,n;return t=this.model.get("desc"),n=this.model.get("descData"),e={hasDesc:!!t},this.$el.html(u.fillFromModel("board_desc",this.model,e)),e.hasDesc&&r(this.el).find(".board-description>div.current").html(s.markdownAsHtml(t,{textData:n})),this},t.prototype.editDesc=function(e){a.stop(e),this.edit("desc")},t}(i)},{}],364:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(340),i=e(513),s=e(126),a=e(496),u=e(493),c=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.getViewTitle=function(){return this.model.getOrganization().get("displayName")},t.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg"},t.prototype.render=function(){var e,t;return t=this.model.getOrganization(),e=t.toJSON(),e.canChangeOrg=(null!=t?t.owned():void 0)||this.model.owned(),(null!=t?t.owned():void 0)&&!this.model.owned()&&(e.setOrgNull=!0),this.$el.html(u.fill("popover_board_header_org_menu",e)),
this},t.prototype.openChangeOrg=function(e){var t,n;s.stop(e),this.model.owned()?(i.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}}),c("Board Header","Change Org from Board Header Org Menu")):(t=this.model.get("idOrganization"),null!=(n=this.modelCache.get("Organization",t))&&n.boardList.remove(this.model),this.model.update("idOrganization",""),i.hide(),c("Board Header","Remove Org from Board Header Org Menu"))},t.prototype.viewOrg=function(){return c("Board Header","View Org From Board Header Org Menu")},t}(a)},{}],365:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V,$,z,R,F,U,q,H,K,W=function(e,t){function n(){this.constructor=e}for(var r in t)G.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},G={}.hasOwnProperty;r=e("jquery"),o=e(362),i=e(29),s=e(14),a=e(363),u=e(464),c=e(364),l=e(343),p=e(382),h=e(157),m=e(403),f=e(408),g=e(353),v=e(507),y=e(6),b=e(509),w=e(510),_=e(86),k=e(30),C=e(18),x=e(511),j=e(518),S=e(521),T=e(542),M=e(34),B=e(217),O=e(630),L=e(513),P=e(358),E=e(494),A=e(126),D=e(496),I=e(146),N=e("underscore"),V=e(673),R=e(40),F=e(129),H=e(493),$=e(675),U=e(676),K=e(43),z=e(101),q=e(484),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return W(t,e),t.prototype.className="board-wrapper",t.prototype.events={sortcommit:"sortCommit","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc","click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","dblclick #board":"dblClickAddListMenu","click .js-reopen":"reopen","click .js-delete":"delete",shortcut:"shortcut","prevent-scroll-selection":"preventScrollSelection"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.sidebarView=this.subview(l,this.model),this.makeDebouncedMethods("refreshOrganization","render","renderBoardBackground","renderBoardHeader","renderBoardHeaderCalendar","renderBoardHeaderDescription","renderBoardHeaderSubscribed","renderLists","renderPermissionLevel","updateControllerTitle"),this.listenTo(this.model,{"change:closed deleting":this.renderDebounced,"change:desc":this.renderBoardHeaderDescriptionDebounced,"change:idOrganization":this.refreshOrganizationDebounced,"change:memberships":this.renderPermissionLevelDebounced,"change:name":function(e){return function(){return e.renderBoardHeaderDebounced(),e.updateControllerTitleDebounced()}}(this),"change:powerUps":function(){return this.renderBoardHeaderCalendarDebounced(),this.model.isPowerUpEnabled("calendar")?void 0:this.closeCalendar()},"change:prefs.cardCovers":this.renderListsDebounced,"change:prefs.permissionLevel":function(e){return function(){return e.renderListsDebounced(),e.renderPermissionLevelDebounced()}}(this),"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness":function(e){return function(){return e.renderBoardBackgroundDebounced(!0)}}(this),"change:subscribed":this.renderBoardHeaderSubscribedDebounced,permChange:this.permChange,ownedChange:this.renderBoardHeaderDebounced,destroy:function(e){return function(){return y.displayErrorPage({errorType:"boardNotFound"})}}(this)}),this.subscribe(q(this.model),function(e){return function(){return e.renderBoardHeaderCalendarDebounced(),e.model.isPowerUpEnabled("calendar")?void 0:e.closeCalendar()}}(this)),this.listenTo(this.model.viewState,{"change:showSidebar":this.renderSidebarState,"change:sidebarDisplayType":this.renderSidebarDisplayType}),this.listenTo(i.me().boardStarList,"add remove reset",function(e){return function(){return e.renderBoardHeaderStarred()}}(this)),this.memberTypeMe=this.model.getMemberType(i.me()),this.refreshOrganization(),this.listScrollLeft=null,this.savingScroll=!1,this.calcState={},this.listenTo(this.model.filter,"change",this.renderFilteringStatus),E.addHandler(this,{scope:"board"}),this.listListView=this.collectionSubview(j,this.model.listList,{id:"board",model:this.model,className:"u-fancy-scrollbar js-no-higher-edits",resetCallback:function(e){return function(){return e.postListListRender()}}(this)}),this.listenTo(this.listListView,{mouseMoveCardView:function(e,t){return this.ignoreMouseCardSelects||L.isVisible||w.sorting?void 0:this.model.viewState.selectCard(t.model)},mouseLeaveCardView:function(e,t){return this.ignoreMouseCardSelects||L.isVisible||w.sorting?void 0:this.model.viewState.selectCard(null)},moveCard:this.moveCardRequested,copyCard:this.copyCardRequested}),this._applySettings()},t.prototype._applySettings=function(){var e,t,n;if(null!=this.options.settings){switch(n=this.options.settings,t=n.menu,e=n.filter,t){case"closed":this.model.viewState.setShowSidebar(!1);break;case"filter":case"activity":this.setSidebarShow(),this.sidebarView.pushView(t);break;case"power-ups":this.model.editable()&&(this.setSidebarShow(),this.openPowerUps())}return e?this.model.filter.fromQueryString(e):void 0}},t.prototype.permChange=function(e){"none"===e?y.memberBoardsView():(this.render(),this.model.editable()||this.model.composer.save("vis",!1))},t.prototype.shortcut=function(e){var t,n,o,s,a;switch(n=this.model.editable(),s=i.isLoggedIn(),e){case C.Q:if(s)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case C.X:return this.model.filter.clear(),"X - Clear All Filters";case C.W:return this.toggleSidebar(),"W - Toggle Board Sidebar";case C.ArrowDown:case C.J:return this.moveCard("down"),["Keyboard Nav","Down"];case C.ArrowUp:case C.K:return this.moveCard("up"),["Keyboard Nav","Up"];case C.ArrowRight:return this.moveCard("right"),["Keyboard Nav","Right"];case C.ArrowLeft:return this.moveCard("left"),["Keyboard Nav","Left"];case C.N:if(n&&(a=this.model.viewState.getList(),t=this.model.viewState.getCard(),null!=a&&null!=t))return o=a.openCards().indexOf(t),this.model.composer.save({list:a,index:o+1,vis:!0}),"N - Insert Card";break;case C.Escape:if(n)return w.sorting?w.abort():x.isEditing()||L.isVisible||b.isVisible||(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",!1):this.sidebarView.popView()),y.showingCalendar(this)&&r(".calendar-day.active").removeClass("active"),!0}},t.prototype.openListComposer=function(){return this.model.viewState.openListComposer()},t.prototype.scrollToList=function(e){A.scrollElementIntoView(this.$("#board")[0],this.viewForList(e).el,{horizontal:!0,animated:!0})},t.prototype.viewForList=function(e){return this.listListView.viewForModel(e)},t.prototype.scrollToCard=function(e){var t;return t=e.getList(),this.scrollToList(t),this.viewForList(t).scrollToCard(e)},t.prototype.preventScrollSelection=function(){var e,t;this.ignoreMouseCardSelects||(t=function(e){var t,n,r;return t=e.originalEvent,n=t.movementX,r=t.movementY,0!==n||0!==r},this.ignoreMouseCardSelects=!0,(e=function(n){return function(){return r(document).one("mousemove",function(r){t(r)?n.ignoreMouseCardSelects=!1:e()})}}(this))())},t.prototype.moveCard=function(e){var t,n,r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_;if(this.preventScrollSelection(),w=this.model.viewState.getCard(),null==w)return l=this.model.listList.find(function(e){return!e.openCards().isEmpty()}),void(null!=l&&l.selectFirstCardInList());if(_=w.getList(),g=_.openCards(),n=g.indexOf(w),o=function(e){return function(t,n,r,o){var i;if(i=t+n,e.model.filter.isFiltering)for(;i>=0&&r>i&&!o(i);)i+=n;return i}}(this),"up"===e||"down"===e){if(s="up"===e?-1:1,d=o(n,s,g.length,function(e){return function(t){return e.model.filter.satisfiesFilter(g.at(t))}}(this)),d>=0&&d<g.length)return t=g.at(d),this.scrollToCard(t),this.model.viewState.selectCard(t)}else if(("left"===e||"right"===e)&&(v=this.model.listList,u=v.indexOf(_),c="left"===e?-1:1,m=o(u,c,v.length,function(e){return function(t){return v.at(t).openCards().any(function(t){return e.model.filter.satisfiesFilter(t)})}}(this)),m>=0&&m<v.length)){for(h=v.at(m),f=h.openCards(),p=Math.min(n,f.length-1),y=[1,-1],b=[],i=0,a=y.length;a>i;i++){if(r=y[i],d=o(p-r,r,f.length,function(e){return function(t){return e.model.filter.satisfiesFilter(f.at(t))}}(this)),d>=0&&d<f.length){t=f.at(d),this.model.viewState.selectCard(t),this.scrollToCard(t);break}b.push(void 0)}return b}},t.prototype.renderClosed=function(){this.$el.html(V({name:this.model.get("name"),canReopen:this.model.owned(),canDelete:this.model.owned(),deleting:this.model.isDeleting()})),this.defaultBoardBackground()},t.prototype.renderOpen=function(){var e,t,n,o,s;for(e={},e.url=y.getBoardUrl(this.model),s=this.model.prefNames.concat(this.model.myPrefNames),t=0,n=s.length;n>t;t++)o=s[t],e[o+"_"+this.model.getPref(o)]=!0;e.canJoin=this.model.canJoin(),e.canInviteMembers=this.model.canInviteMembers(),e.confirmed=i.me().get("confirmed"),this.listListView.$el.detach(),this.$el.html(H.fillFromModel("board",this.model)),this.renderBoardHeader(),this.renderBoardBackground(),this.model.viewState.get("showSidebar")&&this.$el.addClass("is-show-menu"),this.appendSubview(this.sidebarView,this.$(".js-fill-board-menu")),this.renderSidebarState(),this.renderLists(),y.setLocation({title:e.name}),this.defer(function(e){return function(){return e.$("#board").unbind("mousedown.dragscrollable").dragscrollable({fxIgnore:function(e){var t,n,o,i;return t=r(e.target).closest("#board"),i=e.offsetY>t.height()-11,n=r(e.target).closest(".js-list-content").length>0,o=r(e.target).closest(".js-add-list").length>0,i||n||o}}),w.refreshListSortable()}}(this))},t.prototype.render=function(){return this.model.get("closed")?this.renderClosed():this.renderOpen(),this},t.prototype.renderFilteringStatus=function(){var e,t;return e=this.model.filter.isFiltering(),this.$(".js-filter-cards-indicator").toggleClass("hide",!e),this.$(".js-num-cards").toggleClass("hide",!e),this.$("#board").toggleClass("filtering",e),t=this.model.filter.toQueryString(),history.replaceState(null,null,location.pathname+t)},t.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")},t.prototype.renderSidebarDisplayType=function(){var e;e=this.model.viewState.getSidebarDisplayType(),this.$el.addClass(e)},t.prototype.renderSidebarState=function(){this.renderSidebarDisplayType(),this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()},t.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))},t.prototype.setSidebarShow=function(){this.model.viewState.setShowSidebar(!0)},t.prototype.showSidebar=function(){this.renderSidebarDisplayType(),clearTimeout(this._sidebarHideTimeout),this.$(".js-fill-board-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$el.addClass("is-show-menu")}}(this))},t.prototype.hideSidebar=function(){this.$el.removeClass("is-show-menu"),clearTimeout(this._sidebarHideTimeout),this._sidebarHideTimeout=this.setTimeout(function(e){return function(){return e.$(".js-fill-board-menu").addClass("hide")}}(this),250)},t.prototype.refreshOrganization=function(){var e,t,n,r,o,i;if(n=this.modelCache.get("Organization",this.model.previous("idOrganization")),r=this.model.getOrganization(),null!=n&&this.stopListening(n),null!=r)for(i=["name","logoHash","displayName"],e=0,t=i.length;t>e;e++)o=i[e],this.listenTo(r,"change:"+o,this.frameDebounce(this.renderBoardHeader));return this.renderBoardHeader()},t.prototype.renderBoardHeader=function(){var e,t,n,r;return n=this.model.isPremOrgAdmin(i.me()),t={name:this.model.get("name"),canRename:n||this.model.owned(),isLoggedIn:i.isLoggedIn()},r=this.model.getOrganization(),null!=r&&(t.orgDisplayName=r.get("displayName"),t.orgName=r.get("name"),e=r.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png",t.orgLogoUrl2x=logoDomain+"/"+e+"/170.png"),t.hasBusinessClass=r.isPremium()),this.$(".js-board-header").html($(t)),this.renderPermissionLevel(),this.renderBoardHeaderDescription(),this.renderBoardHeaderCalendar(),this.renderBoardHeaderSubscribed(),this.renderFilteringStatus(),this.renderBoardHeaderStarred(),this.renderPluginButtons(),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(O,this.model),this.appendSubview(e,this.$(".js-plugin-header-btns")),this},t.prototype.renderBoardHeaderStarred=function(){return this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred()),this},t.prototype.toggleStarred=function(){var e;return e=i.me().boardStarList,null!=e.getBoardStar(this.model.id)?(e.unstarBoard(this.model.id),K("Board Header","Unstar Board")):(e.starBoard(this.model.id),K("Board Header","Star Board")),this},t.prototype.renderBoardHeaderCalendar=function(){var e;return e=this.model.isPowerUpEnabled("calendar"),this.$(".js-calendar").toggleClass("hide",!e),this},t.prototype.getAllBackgroundClasses=function(){return["body-custom-board-background","body-custom-board-background-tiled","body-light-board-background","body-dark-board-background","body-default-header"].join(" ")},t.prototype.defaultBoardBackground=function(){this.clearBoardBackground(),r("body").addClass("body-default-header")},t.prototype.clearBoardBackground=function(){var e,t;t=this.model.get("prefs"),e=this.getAllBackgroundClasses(),r("body").removeClass(e).css({"background-image":"","background-color":""})},t.prototype.renderBoardBackground=function(e){var t,n,o,i,a,u,c,l,d,p;return null==e&&(e=!1),this.clearBoardBackground(),i=this.model.get("prefs"),t=r("body"),null!=i.backgroundColor?(o=this.model.getClientBackgroundColor(i.background),t.css({"background-color":o}),_.setBackground({color:o})):(p=s.hasOwnProperty(i.background)&&null!=(a=null!=(u=A.smallestPreviewBiggerThan(i.backgroundImageScaled,640,480))?u.url:void 0)?a:i.backgroundImage,d=i.backgroundTile?p:null!=(c=null!=(l=A.smallestPreviewBiggerThan(i.backgroundImageScaled,64,64))?l.url:void 0)?c:i.backgroundImage,n=function(e){return function(){var e;switch(t.addClass("body-custom-board-background"),i.backgroundTile&&t.addClass("body-custom-board-background-tiled"),e=i.backgroundBrightness){case"light":t.addClass("body-light-board-background");break;case"dark":t.addClass("body-dark-board-background")}return t.css({"background-image":'url("'+p+'")'}),_.setBackground({url:d,tiled:i.backgroundTile})}}(this),e?A.waitForImageLoad(p,n):n())},t.prototype.renderBoardHeaderSubscribed=function(){var e;return e=this.model.get("subscribed"),this.$(".js-board-header-subscribed").toggleClass("hide",!e),this},t.prototype.renderBoardHeaderDescription=function(){var e,t,n;return e=this.$(".js-fill-desc"),(t=this.model.get("desc"))?(t?n=t:this.model.editable()&&(n=z("click to add a description")),e.attr("title",n),e.removeClass("hide"),this):(e.addClass("hide"),this)},t.prototype.renameBoard=function(e){A.stop(e),K("Board Header","Open Rename Board From Title"),L.toggle({elem:r(e.target).closest("a"),view:new P({model:this.model,modelCache:this.modelCache})})},t.prototype.openOrgMenu=function(e){A.stop(e),K("Board Header","Open Org Menu"),L.toggle({elem:r(e.target).closest("a"),view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.renderPermissionLevel=function(){var e,t,n;return e=this.$("#permission-level"),n={permIconClass:u.getPermLevelIconClassForBoard(this.model),permText:z(["board perms",this.model.getPermLevel(),"name"])},e.html(U(n)),e.attr("title",u.getPermLevelAltTextForBoard(this.model)),t=this.model.canInvite(i.me()),this.$(".js-manage-board-members").toggle(t),this},t.prototype.postListListRender=function(){return R("render","rendering inline composer and calculating list layout"),this.renderFilteringStatus(),w.refreshListCardSortable()},t.prototype.renderLists=function(){return this.listListView.$el.toggleClass("js-list-sortable",this.model.editable()),this.$(".board-canvas").append(this.listListView.el),this.listListView.render(),this},t.prototype.sortCommit=function(e,t){return t.item.trigger("movelist",t)},t.prototype.changeVis=function(e){A.stop(e),K("Board Header","Open Change Visibilty via Header"),L.toggle({elem:this.$(".js-change-vis"),view:g,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openDesc=function(e){A.stop(e),K("Board Header","Edit Description Button via Header"),b.show({view:new a({model:this.model,modelCache:this.modelCache}),maxWidth:500})},t.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoardEvent():this.navigateToCalendarEvent()},t.prototype.navigateToCalendarEvent=function(){return K("Board Header","Open Calendar View via Header"),this.navigateToCalendar()},t.prototype.navigateToCalendar=function(){var e;return e=y.getBoardUrl(this.model.id,"calendar"),y.navigate(e,{trigger:!0})},t.prototype.navigateToBoardEvent=function(){return K("Board Header","Close Calendar View via Header"),this.navigateToBoard()},t.prototype.navigateToBoard=function(){var e;return e=y.getBoardUrl(this.model.id),y.navigate(e,{trigger:!0})},t.prototype.isShowingCalendar=function(){return null!=this.calendarView},t.prototype.showMemberProfile=function(e){y.saveMemberBoardProfileLocation(e,this.model.id),b.show({view:new T({model:e,board:this.model,modelCache:this.modelCache}),maxWidth:500,hide:function(e){return function(){return y.setBoardLocation(e.model.id)}}(this)})},t.prototype.showCalendar=function(e){return this.model.isPowerUpEnabled("calendar")&&!this.isShowingCalendar()?(this.$(".calendar-btn").addClass("board-header-btn-enabled"),this.$("#board").addClass("hide"),this.calendarView=new p({model:this.model,modelCache:this.modelCache}),this.$(".board-canvas").append(this.calendarView.render(e).el),this.calendarView.addedToDOM()):void 0},t.prototype.closeDetailView=function(){b.hide(!0),this.closeCalendar()},t.prototype.closeCalendar=function(){null!=this.calendarView&&(this.calendarView.remove(),this.calendarView=null,this.navigateToBoard(),this.$(".calendar-btn").removeClass("board-header-btn-enabled"),this.$("#board").removeClass("hide"))},t.prototype.openFilter=function(e){A.stop(e),K("Board Header","Open Filtering via Header"),this.sidebarView.pushView("filter")},t.prototype.openPowerUps=function(e){return this.sidebarView.pushView("powerUps")},t.prototype.clearFilters=function(e){A.stop(e),K("Board Header","Clear Filtering via Header"),this.model.filter.clear()},t.prototype.openUnsubscribe=function(e){A.stop(e),v.toggle("unsubscribe",{elem:r(e.target).closest(".js-board-header-subscribed")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return K("Board Header","Unsubscribe"),e.model.subscribe(!1)}}(this)})},t.prototype.dblClickAddListMenu=function(e){A.stop(e),!this.model.viewState.get("listComposerOpen")&&this.model.isMember(i.me())&&0===r(e.target).closest(".js-list-content").length&&(K("Board View","Open Add List Menu via Double Click"),L.show({clientx:e.clientX,clienty:e.clientY,view:new o({model:this.model,modelCache:this.modelCache,didAddList:function(e){return function(t){return e.scrollToList(t)}}(this)})}))},t.prototype.reopen=function(e){return A.stop(e),this.model.reopen()},t.prototype.delete=function(e){return A.stop(e),v.toggle("delete board",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.startDelete().then(function(){return K("Board","Delete","Via Closed Board")}).done()}}(this)})},t.prototype.updateControllerTitle=function(){return y.title(this.model.get("name"))},t.prototype._insertCardPosition=function(e){var t;return t=this.model.viewState.getCard(),null!=t?{idList:t.get("idList"),index:t.getIndexInList()}:{idList:e,index:this.model.listList.get(e).cardList.length}},t.prototype.moveCardRequested=function(e,t){var n,r,o,i,s,a;return a=t.shortLink,r=t.idList,i=this._insertCardPosition(r),r=i.idList,o=i.index,n=null!=(s=k.getId("Card",a))?s:a,h.load(n,B.cardMinimal,this.modelCache).then(function(e){return function(t){return t.moveToList(e.model.listList.get(r),o)}}(this)).done()},t.prototype.copyCardRequested=function(e,t){var n,r,o,i,s,a;return a=t.shortLink,r=t.idList,i=this._insertCardPosition(r),r=i.idList,o=i.index,n=null!=(s=k.getId("Card",a))?s:a,h.load(n,B.cardMinimal,this.modelCache).then(function(e){return function(t){return t.copyTo({idList:r,pos:e.model.listList.get(r).calcPos(o,t)})}}(this)).done()},t}(D)},{}],366:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty,M=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(506),i=e(29),s=e(14),a=e(464),u=e(6),l=e(582),p=e(98),h=e(34),f=e(367),g=e(513),v=e("bluebird"),y=e(114),b=e(126),w=e(496),_=e("underscore"),x=e(493),j=e(43),C=e(101),k=e(687),d="idLastOrganization",m="none",t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.viewTitleKey=function(){return this.options.copyBoard?"copy board":"create board"},t.prototype.events={'change select[name="org-id"]':"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"},t.prototype.getOrganization=function(){switch(this.model.typeName){case"Organization":return this.model;case"Board":return this.model.getOrganization();case"Member":return null}},t.prototype.getDefaultIdOrganization=function(e){var t,n,r,o,i,s;if(0===e.length)return null;if(this.options.useLastOrganization){if(1===e.length)return e[0];if(r=y.get(d,null),r===m)return null;if(null!=r&&M.call(e,r)>=0)return r;for(o=null,t=0,i=e.length;i>t;t++)n=e[t],(null==o||n>o)&&(o=n);return o}return null!=(o=null!=(s=this.getOrganization())?s.id:void 0)?o:null},t.prototype.render=function(){var e,t,n,r,o,s,a;return r=i.me(),n=this.getDefaultIdOrganization(r.organizationList.pluck("id")),o=r.organizationList.map(function(e){return _.extend(e.toJSON(),{selectOrg:e.id===n})}),t=null!=n,e={orgs:o,hasOrg:t,canAddToOrgs:0!==o.length,isCopyBoard:this.options.copyBoard,willRemovePowerUps:this.options.copyBoard&&this.model.powerUpsCount()>r.getPowerUpsLimit()},s=Math.floor(13*Math.random()).toString(),e.placeholder=C(["board name placeholder",s]),this.options.term&&(e.name=this.options.term),e.pLevel="private",this.options.copyBoard&&this.model.owned()?e.pLevel=this.model.get("prefs").permissionLevel:t&&(e.pLevel="org"),(null!=(a=this.options)?a.newOrgBoard:void 0)&&(e.hideOrg=!0),this.$el.html(x.fill("board_new",e)),this.renderBoardVisChooser(),this},t.prototype.renderBoardVisChooser=function(e){var t,n;return t=this.$('select[name="org-id"]').val(),n={isNewBoard:!0,canChange:!0},this.disableSubmit(),v.try(function(e){return function(){var n,r;return n=function(e){return"<p>"+C(e)+"</p>"},e.$(".js-vis-display").html(n("checking visibility permissions")),t?(r=e.modelCache.get("Organization",t),null!=r&&null!=r.get("memberships")&&null!=r.get("products")&&(null!=r?r.isFeatureEnabled("restrictVis"):void 0)?r:h.loadOrganizationMinimal(t)):void 0}}(this)).then(function(t){return function(r){var o;return null!=r&&(t.canChangeOrg(r,e)||(e=null),_.extend(n,{hasOrg:!0,orgName:r.get("displayName"),hasSuperAdmins:r.isFeatureEnabled("superAdmins"),privateRestricted:!t.canChangeOrg(r,"private"),orgRestricted:!t.canChangeOrg(r,"org"),publicRestricted:!t.canChangeOrg(r,"public")})),o=null!=r&&t.canChangeOrg(r,"org")?"org":"private",n.current=null!=e?e:o,{org:r,visData:n}}}(this)).then(function(e){return function(t){var n,r,o,i;return o=t.org,i=t.visData,r=i.current,e.setPermissionLevel(r),e.$(".js-vis-chooser").html(k(i)),e.$(".js-vis-display").html(x.fill("board_new_vis",{visIconClass:a.getPermLevelIconClass(r),visDisplayText:C(["board perms",r,"name"])})),null!=o&&i.privateRestricted&&i.orgRestricted&&i.publicRestricted?(n=e.$(".js-no-valid-org-privs"),o.owned()?n.html(C("board create restriction admin",{urlSettings:"/"+o.get("name")+"/account"})):n.html(C("board create restriction not admin")),n.removeClass("hide"),e.$(".js-vis-chooser,.js-vis-display").addClass("hide")):e.enableSubmit()}}(this)).done(),this},t.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")},t.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")},t.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")},t.prototype.openChangeVis=function(e){b.stop(e),this.$(".js-vis-display").addClass("hide"),this.$(".js-vis-chooser").removeClass("hide")},t.prototype.selectVis=function(e){var t,n;b.stop(e),t=r(e.target).closest(".js-select"),t.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),n=t.attr("name"),this.renderBoardVisChooser(n),j("New Board","Change Visibility",n))},t.prototype.setPermissionLevel=function(e){return this.$('input[name="permissionLevel"]').val(e)},t.prototype.getPermissionLevel=function(){var e;return null!=(e=this.$('input[name="permissionLevel"]').val())?e:""},t.prototype.canChangeOrg=function(e,t){var n,r,o,s;return n=i.me(),(null!=e?e.isFeatureEnabled("restrictVis"):void 0)?(s=e.getMembershipFor(n).memberType,r=function(){switch(s){case"admin":return 2;case"normal":return 1}}(),o=function(){var n,r;switch(null!=(n=e.get("prefs"))&&null!=(r=n.boardVisibilityRestrict)?r[t]:void 0){case"none":return 3;case"admin":return 2;default:return 1}}(),r>=o):!0},t.prototype.changeOrg=function(e){return this.resetVisChooser(),this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),j("New Board","Change Org"),this.renderBoardVisChooser()},t.prototype.helperAddOrg=function(e){b.stop(e),g.pushView({view:new f({model:this.model,modelCache:this.modelCache})}),j("New Board","Open Add Org Helper")},t.prototype.defaultBackgroundColor=function(){var e,t,n;return p.is("en")&&(n=new Date,t=n.getMonth(),e=n.getDate(),2===t&&17===e)?"green":"blue"},t.prototype.submit=function(e){var t,n,r,s,a,c,l,p,h,f;return b.stop(e),this.$(".js-submit").hasClass("disabled")?void 0:(t=this.$('input[name="name"]'),a=t.val().trim(),""===a?void t.focus().select():(r=null!=(p=this.$('select[name="org-id"]').val())?p:"",y.set(d,r?r:m),s={name:a,idOrganization:r},l=this.$('input[name="permissionLevel"]').val(),this.options.copyBoard||(f=""!==r&&"private"!==l),n=this.defaultBackgroundColor(),h=_.extend({prefs_permissionLevel:l,prefs_selfJoin:f,defaultLists:!1},s),this.options.copyBoard&&(h.idBoardSource=this.model.id,h.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.copyBoard?j("New Board","Copy"):j("New Board","New"),c=i.me().boardList.create(s,{modelCache:this.modelCache,requestData:h,success:function(e){return function(t){var n,r;e.options.copyBoard&&o.hide("copying"),r=t.id,M.call(n=i.me().get("idBoards"),r)<0&&i.me().set("idBoards",n.concat(t.id)),u.displayBoard({idBoard:t.id,openListComposer:!e.options.copyBoard}).done()}}(this),error:function(){return o.flash("could not create board","error","create error")}}),this.options.copyBoard&&o.show("copying","info","copying"),g.hide()))},t.prototype.newOrg=function(e){b.stop(e),g.pushView({view:new l({model:this.model,modelCache:this.modelCache})}),j("New Board","Open Create Org")},t}(w)},{}],367:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(582),i=e(513),s=e(126),a=e(496),u=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="add an organization",t.prototype.events={"click .js-create-org":"newOrg"},t.prototype.render=function(){var e;return e=this,this.$el.html(u.fill("popover_helper_new_board_add_org")),this},t.prototype.newOrg=function(e){return s.stop(e),i.pushView({view:new r({model:this.model,modelCache:this.modelCache})})},t}(a)},{}],368:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(513),i=e(126),s=e(496),a=e(493),u=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="print and export",t.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV",'click a[href="/business-class"]':"businessClass"},t.prototype.render=function(){var e,t,n;return n=this,t=this.model.getOrganization(),e=this.model.toJSON(),e.hasCsvExport=!1,null!=t&&(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.hasCsvExport=!0,e.csvURL="/b/"+this.model.get("shortLink")+".csv"),(null!=t?t.isPremium():void 0)&&!(null!=t?t.isFeatureEnabled("csvExport"):void 0)&&(e.needsUpgradeForCsv=!0,e.upgradeUrl="/"+t.get("name")+"/billing"),e.jsonURL="/b/"+this.model.get("shortLink")+".json",this.$el.html(a.fill("popover_share",e)),this},t.prototype.printModel=function(e){i.stop(e),u("Board Menu","Print and Export Menu","Print"),r.hide(),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return u("Board Menu","Print and Export Menu","Export JSON")},t.prototype.exportCSV=function(e){return u("Board Menu","Print and Export Menu","Export CSV")},t.prototype.businessClass=function(e){return u("Board Menu","Print and Export Menu","Click Business Class Link")},t}(s)},{}],369:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(29),i=e(6),s=e(270),a=e(126),u=e(496),d=e(43),c=e(491)("board_list_item"),l=c.renderable(function(e){var t,n,r,o,i,s,a,u,l,d;return s=e.isLoggedIn,a=e.name,u=e.orgname,d=e.url,i=e.current,l=e.recent,r=e.backgroundImageThumbnail,n=e.backgroundColor,t=e.backgroundBrightness,o=e.backgroundTile,c.div(".compact-board-tile-wrapper",function(){var e,p;return p={},r&&(p["background-image"]=c.urlify(r)),n&&(p["background-color"]=n),c.span({class:c.classify({"mod-tiled":o,"compact-board-tile-background":!0}),style:c.stylify(p)}),c.span(".compact-board-tile-fade"),e={"js-open-board":!0,current:i,"compact-board-tile-link":!0},t&&(e[t]=!0),c.a({class:c.classify(e),href:d},function(){return c.span(".compact-board-tile-link-thumbnail",{style:c.stylify(p)}),c.span({class:c.classify({"compact-board-tile-link-text":!0,details:!0,"has-sub-name":u})},function(){return c.span(".compact-board-tile-link-text-name",{title:a},function(){return c.text(a)}),u?c.span(".compact-board-tile-link-text-sub-name",{title:u},function(){return c.text(u)}):void 0}),s?c.span({class:"compact-board-tile-link-options"},function(){return c.span(".compact-board-tile-link-options-unread.js-unread",{title:c.l("there-is-new-activity-on-this-board")}),l&&c.icon("close",{class:"js-remove-board compact-board-tile-link-options-remove",title:c.l("click-to-remove-this-board-from-your-recent-boards")}),c.icon("star",{class:"compact-board-tile-link-options-star js-star-board",title:c.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list")})}):void 0})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.tagName="li",t.prototype.className="compact-board-tile",t.prototype.initialize=function(){
var e;return this.listenTo(this.model,"change:prefs change:name change:idOrganization",this.frameDebounce(this.render)),this.listenTo(r.me().boardStarList,"add remove reset",this.frameDebounce(this.renderStarred)),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderUnread)),(null!=(e=this.options)?e.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(e){return function(){var t;return t=e.modelCache.get("Organization",e.model.previous("idOrganization")),null!=t&&e.stopListening(t,"change:displayName"),e.listenToOrgNameChange(),e.render()}}(this)),this.listenToOrgNameChange()):void 0},t.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},t.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard","click .js-remove-board":"removeRecent",moveto:"moveTo"},t.prototype.render=function(){var e,t,n,o,s,u;return t=this.model.toJSON({prefs:!0}),t.url=i.getBoardUrl(this.model),this.model.getPref("backgroundTile")?(t.backgroundTile=!0,t.backgroundImageThumbnail=this.model.getPref("backgroundImage")):t.backgroundImageThumbnail=null!=(n=null!=(o=a.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?o.url:void 0)?n:this.model.getPref("backgroundImage"),null==t.backgroundImageThumbnail&&(t.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(e=this.model.getPref("background"),t.backgroundColor=this.model.getClientBackgroundColor(e)),t.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(s=this.options)?s.showOrgName:void 0)&&(t.orgname=null!=(u=this.model.getOrganization())?u.get("displayName"):void 0),t.isLoggedIn=r.isLoggedIn(),t.recent=this.options.recent,this.$el.html(l(t)),this.renderStarred(),this.renderUnread(),this},t.prototype.trackBoardClick=function(){return d("Header","Boards Menu","Opened Board")},t.prototype.openBoard=function(e){return s.getPinSidebar()||s.hideSidebar(),this.trackBoardClick()},t.prototype.starBoard=function(e){var t,n;a.stop(e),n=this.model.id,t=r.me().boardStarList,null==t.getBoardStar(n)?t.starBoard(n):t.unstarBoard(n)},t.prototype.removeRecent=function(e){return a.stop(e),s.pullBoard(this.model.id)},t.prototype.renderUnread=function(){var e;return e=this.model.hasUnseenActivity()&&!i.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",e),this.$el.toggleClass("has-unread-activity",e),this},t.prototype.moveTo=function(e,t){var n,o;o=t.item.closest(".js-board-list").find("li"),n=o.index(t.item),r.me().boardStarList.updateStarBoard(this.model.id,n)},t.prototype.renderStarred=function(){return null!=r.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},t}(u)},{}],370:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;d=e("underscore"),r=e(29),i=e(372),s=e(374),a=e(375),u=e(376),c=e(379),l=e(34),p=e(694),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderBoardsSections))},t.prototype.renderOnce=function(){return this.$el.html(p()),this.renderBoardsSections(),this},t.prototype.renderBoardsSections=function(){return this.renderStarredBoardsSection(),this.renderRecentBoardsSection(),this.renderAllBoardsSection(),this},t.prototype.renderAllBoardsSection=function(){var e,t,n,o,i,u,c,l;if(e=this.$(".js-all-boards"),n=function(){var e,n,r,o;for(r=this.model.boardList.models,o=[],e=0,n=r.length;n>e;e++)t=r[e],t.isOpen()&&o.push(t);return o}.call(this),0===n.length)u=function(e){return function(){return e.stopListening(r.me().boardList,"add reset",u),e.renderAllBoardsSection()}}(this),this.listenTo(r.me().boardList,"add reset",u);else for(this.appendSubview(this.subview(s,r.me(),{},"my-boards"),e),l=this.model.getSortedOrgs(),o=0,i=l.length;i>o;o++)c=l[o],this.appendSubview(this.subview(a,r.me(),{org:c},"group-"+c.id),e);return this},t.prototype.renderStarredBoardsSection=function(){return this.appendSubview(this.subview(c,r.me(),{},"starred-boards"),this.$(".js-starred-boards")),this},t.prototype.renderRecentBoardsSection=function(){return l.waitFor("boardsData",function(e){return function(){return e.appendSubview(e.subview(u,r.me(),{},"recent-boards"),e.$(".js-recent-boards"))}}(this)),this},t}(i)},{}],371:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(29),i=e(288),s=e(366),a=e(509),u=e(34),c=e(513),l=e(270),d=e(126),p=e(496),h=e(695),m=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return this.listenTo(l,"change:pinBoardsListSidebar",function(){return this.updatePinned()})},t.prototype.events={"click .js-add-board":"addBoard","click .js-pin":"pinDrawer","click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards"},t.prototype.renderOnce=function(){return this.$el.html(h()),this.updatePinned(),this},t.prototype.addBoard=function(e){d.stop(e),m("Boards Drawer","Add Board"),c.toggle({elem:this.$(".js-add-board"),view:s,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.unpinDrawer=function(){return m("Boards Drawer","Unpin Drawer"),l.hidePinSidebar()},t.prototype.pinDrawer=function(){return m("Boards Drawer","Pin Drawer"),l.showPinSidebar()},t.prototype.updatePinned=function(){return this.$(".js-pin").toggleClass("hide",l.getPinSidebar()),this.$(".js-unpin").toggleClass("hide",!l.getPinSidebar())},t.prototype.openClosedBoards=function(e){d.stop(e),l.hideSidebar(),a.show({view:new i({model:r.me(),modelCache:this.modelCache})}),u.loadClosedBoards().done(),m("Boards Drawer","Open Closed Boards")},t}(p)},{}],372:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(97),s=e(513),a=e(126),u=e(496),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={"mouseenter .sidebar-boards-list li":"hoverItem","mouseleave .sidebar-boards-list":"deselectBoards"},t.prototype.hoverItem=function(e){var t;t=r(e.target).closest("li"),a.selectMenuItem(r(".sidebar-boards-list"),"li",t)},t.prototype.deselectBoards=function(e){var t;t=r(".sidebar-boards-list li").removeClass("selected")},t.prototype.arrowKeyEvent=function(e){var t;t=i.getKey(e),a.navMenuList(r(".sidebar-boards-list"),"li:visible",t)},t.prototype.enterKeyEvent=function(e){var t;t=r(".sidebar-boards-list li.selected:visible:first a"),t.length>0&&(t.click(),s.hide())},t}(u)},{}],373:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(369),o=e(372),s=e(270),a=e(126),u=e("underscore"),c=e(231),l=e(696),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.toLowerCase().trim()}),this.subscribe(this.searchText,this.renderResults),this.makeDebouncedMethods("renderResults"),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.renderResultsDebounced),this.listenTo(s,"change:idRecentBoards",this.renderResultsDebounced),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.renderResultsDebounced})},t.prototype.renderOnce=function(){return this.$el.html(l()),this.renderResults(),this},t.prototype.renderResults=function(){var e,t,n,o,i;for(e=this.$(".js-board-results"),e.empty(),i=this.getBoardsForTerm(this.searchText.get()),n=0,o=i.length;o>n;n++)t=i[n],this.appendSubview(this.subview(r,t,{showOrgName:!0}),e);return a.selectMenuItem(this.$(".sidebar-boards-list"),"li",this.$(".sidebar-boards-list li:first")),this},t.prototype.getBoardsForTerm=function(e){var t,n,r;return n=this.model.boardStarList.getBoardIds(),t=s.getRecentBoards(),r=a.buildFuzzyMatcher(e),u.chain(this.model.boardList.models).union(this.model.boardStarList.getBoards()).union(this.modelCache.get("Board",t)).compact().filter(function(e){return r(e.get("name"))}).filter(function(e){return e.isOpen()}).value().sort(function(e,r){var o,i,s,a,u,c,l,d;return o=e.id,h.call(n,o)>=0&&(i=r.id,h.call(n,i)<0)?-1:(s=r.id,h.call(n,s)>=0&&(a=e.id,h.call(n,a)<0)?1:(u=e.id,h.call(t,u)>=0&&(c=r.id,h.call(t,c)<0)?-1:(l=r.id,h.call(t,l)>=0&&(d=e.id,h.call(t,d)<0)?1:e.get("name")<r.get("name")?-1:e.get("name")>r.get("name")?1:0)))}).slice(0,7)},t}(o)},{}],374:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(378),i=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)},t.prototype.getBoards=function(){var e,t,n,r,o,i;for(n=function(e){return function(t){var n,r;return n=null!=(r=t.getOrganization())?r.id:void 0,null!=n&&u.call(e.model.get("idOrganizations"),n)>=0}}(this),o=this.model.boardList.models,i=[],t=0,r=o.length;r>t;t++)e=o[t],!n(e)&&e.isOpen()&&i.push(e);return i},t.prototype.sectionId=function(){return"my-boards"},t.prototype.doesTruncate=function(){return!0},t.prototype.getHeaderInfo=function(){return{title:this.getTitle(),iconClass:"board"}},t.prototype.getTitle=function(){return i("board section title.personal boards")},t}(o)},{}],375:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(378),i=e(6),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards),this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)},t.prototype.getOrg=function(){return this.options.org},t.prototype.sectionId=function(){return"org-"+this.getOrg().get("id")},t.prototype.doesTruncate=function(){return!0},t.prototype.getBoards=function(){var e,t,n,r,o,i;for(r=this.model.boardList.models,i=[],t=0,n=r.length;n>t;t++)e=r[t],(null!=(o=e.getOrganization())?o.id:void 0)===this.getOrg().id&&e.isOpen()&&i.push(e);return i},t.prototype.getHeaderInfo=function(){var e,t,n;return t={},n=this.getOrg(),null!=n&&(t=n.toJSON(),t.isOrg=!0,t.url=i.getOrganizationUrl(n.get("name")),e=n.get("logoHash"),e&&(t.orgLogoUrl=logoDomain+"/"+e+"/30.png")),t},t.prototype.postRenderBoardsEvent=function(){this.renderBCStatus()},t.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())},t.prototype.getTitle=function(){return this.getOrg().get("displayName")},t}(o)},{}],376:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(29),s=e(378),a=e(34),u=e(217),c=e("bluebird"),l=e(270),d=e("underscore"),p=e(101),h=e(129),r=e(211),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(l,"change:idRecentBoards",function(){return this.debouncedRenderBoards()}),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()}),this._idBoardsFetching=[]},t.prototype.sectionId=function(){return"recent-boards"},t.prototype.showOrgName=function(){return!0},t.prototype.isRecent=function(){return!0},t.prototype.getBoards=function(){var e;return e=o.me(),d.chain(l.getRecentBoards()).difference(this.model.boardStarList.getBoardIds()).tap(function(e){return function(t){return e.fetchUnknownBoards(t)}}(this)).map(function(e){return function(t){return e.modelCache.get("Board",t)}}(this)).compact().filter(function(t){return function(t){return t.isViewableBy(e)}}(this)).take(7).value()},t.prototype.fetchUnknownBoards=function(e){var t,n;return n=d.chain(e).difference(this._idBoardsFetching).reject(function(e){return function(t){return null!=e.modelCache.get("Board",t)}}(this)).value(),0!==n.length?(this._idBoardsFetching=this._idBoardsFetching.concat(n),t=n.map(function(e){return function(e){return a.loadBoardData(e,u.boardMinimal).catch(r.NotFound,r.Unauthorized,function(){return l.pullBoard(e)})}}(this)),c.all(t).then(function(e){return function(){e._idBoardsFetching=d.difference(e._idBoardsFetching,n),e.debouncedRenderBoards()}}(this)).done()):void 0},t.prototype.getHeaderInfo=function(){return{title:p("board section title.recent boards"),iconClass:"clock"}},t}(s)},{}],377:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(366),i=e(513),s=e(126),a=e(496),u=e(697),c=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(e){var t;return t=e.searchText,this.searchText=t.map(function(e){return e.trim()})},t.prototype.events={"click .js-add-board-with-name":"addBoardWithName"},t.prototype.renderOnce=function(){return this.$el.html(u()),this.subscribe(this.searchText,function(e){return this.$(".js-add-board-with-name").format("add board named",{boardName:e})}),this},t.prototype.addBoardWithName=function(e){var t;s.stop(e),c("Boards Drawer","Add Board - With Name"),t=this.searchText.get(),i.toggle({elem:this.$(".js-add-board-with-name"),view:o,options:{model:this.model,modelCache:this.modelCache,term:t}})},t}(a)},{}],378:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(369),i=e(270),a=e(496),u=e("underscore"),l=e(491)("boards_sidebar_section"),s=e(126),c=e(101),d=l.renderable(function(e){var t,n,r,o,i,s,a;return s=e.title,n=e.iconClass,a=e.url,r=e.isOrg,o=e.orgLogoUrl,t=e.displayName,i=e.sectionId,l.div(".sidebar-section-header.quiet.js-sidebar-section-header",function(){return null==r?s&&(n&&l.icon(n,{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title",function(){return l.text(s)})):l.a(".dark-hover",{href:a},function(){return o?l.img({class:"sidebar-section-header-icon",src:o,alt:t}):l.icon("organization",{class:"sidebar-section-header-icon"}),l.span(".sidebar-section-header-title.mod-clickable",function(){return l.text(t)}),l.icon("business-class",{class:"sidebar-section-header-bc-icon hide js-has-business-class"})}),i?(l.icon("remove",{class:"sidebar-section-header-toggle-icon dark-hover js-collapse-section hide"}),l.icon("add",{class:"sidebar-section-header-toggle-icon dark-hover js-expand-section hide"})):void 0}),l.div(".js-section-content",function(){return l.ul(".sidebar-boards-list.js-board-list"),l.div(function(){return l.a(".dark-hover.quiet-button.js-show-all-section-boards",{href:"#"})})})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection","click .js-show-all-section-boards":"showAllSectionBoards"},t.prototype.initialize=function(){return this.debouncedRenderBoards=this.debounce(this.renderBoards,10),this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.sectionId=this.sectionId(),this.initedSortable=!1,this.listenTo(i,"change:collapsedDrawerSections",function(){return this.renderCollapsed()}),this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards),this.truncated=this.doesTruncate()},t.prototype.render=function(){var e;return e=this.getHeaderInfo(),e.sectionId=this.sectionId,this.$el.html(d(e)),this.renderBoards(),this.renderCollapsed(),this},t.prototype.getBoards=function(){return[]},t.prototype.getHeaderInfo=function(){return"Boards"},t.prototype.sectionId=function(){return null},t.prototype.showOrgName=function(){return!1},t.prototype.isRecent=function(){return!1},t.prototype.doesTruncate=function(){return!1},t.prototype.postRenderBoardsEvent=function(){},t.prototype.showAllSectionBoards=function(){this.truncated=!1,this.renderBoards()},t.prototype.collapseSection=function(e){return i.collapseSection(this.sectionId)},t.prototype.expandSection=function(e){return i.expandSection(this.sectionId)},t.prototype.renderCollapsed=function(){var e;e=i.isCollapsed(this.sectionId),this.$(".js-collapse-section").toggleClass("hide",e),this.$(".js-expand-section").toggleClass("hide",!e),this.$(".js-section-content").toggleClass("hide",e),this.$(".js-sidebar-section-header").toggleClass("bold",!e)},t.prototype.renderSubviews=function(e){var t,n,o;t=this.$(".js-board-list"),o=function(){var t,o,i;for(i=[],t=0,o=e.length;o>t;t++)n=e[t],i.push(this.subview(r,n,{showOrgName:this.showOrgName(),recent:this.isRecent()},"board-"+n.id));return i}.call(this),this.ensureSubviews(o,t)},t.prototype.renderBoards=function(){var e,t,n;return e=u.filter(this.getBoards(),function(e){return null!=e?e.isOpen():void 0}),e.length>0?(n=this.doesTruncate()?u.chain(e).sortBy(function(e){var t;return-new Date(null!=(t=e.get("dateLastActivity"))?t:s.idToDate(e.id))}).filter(function(e){return function(t,n){return!e.truncated||10>=n||!t.isLessActive()}}(this)).sortBy(function(e){return e.get("name").toLowerCase()}).value():e,t=e.length-n.length,this.$el.removeClass("hide"),this.renderSubviews(n),this.$(".js-show-all-section-boards").toggleClass("hide",0===t).text(c(["templates","boards_sidebar_section","show-less-active-boards-count"],{countString:t.toString()}))):this.$el.addClass("hide"),this.debouncedPostRenderBoardsEvent(),this},t}(a)},{}],379:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(378),i=e(73),s=e(510),a=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})},t.prototype.getBoards=function(){return this.model.boardStarList.getBoards()},t.prototype.showOrgName=function(){return!0},t.prototype.sectionId=function(){return"starred-boards"},t.prototype.getHeaderInfo=function(){return{title:a("board section title.starred boards"),iconClass:"star"}},t.prototype.postRenderBoardsEvent=function(){var e;return i.isTouch()?void 0:(e=this.$(".js-board-list"),this.initedSortable?s.refreshIfInitialized(e):(this.initedSortable=!0,e.sortable({axis:"y",containment:"parent",delay:75,distance:7,forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,helper:"clone",stop:function(e){return function(t,n){e.defer(function(){return n.item.trigger("moveto",n)})}}(this),tolerance:"pointer"})))},t}(r)},{}],380:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(e,t){function n(){this.constructor=e}for(var r in t)T.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},T={}.hasOwnProperty;r=e("jquery"),o=e(29),s=e(371),i=e(370),a=e(373),u=e(377),l=e(6),d=e("hearsay"),p=e(97),h=e(18),m=e(34),f=e(107),g=e(217),v=e(513),y=e(270),b=e(494),w=e(126),_=e(496),k=e("underscore"),C=e(231),j=e(693),x=e(101),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return S(t,e),t.prototype.UNREAD_POLL_RATE_ACTIVE=w.getMs({minutes:5}),t.prototype.UNREAD_POLL_RATE_IDLE=w.getMs({minutes:60}),t.prototype.className=function(){return"boards-drawer"},t.prototype.initialize=function(){this.searchText=this.slot(""),this.isSearching=this.searchText.map(C.compose(C.not,k.isEmpty)).distinct(),Object.defineProperty(this,"$searchInput",{get:function(){return this.$(".js-search-boards")}}),this.listenTo(y,"change:showBoardsListSidebar",function(){return this.renderSidebarState(),this.ensureUnreadData(),y.getShowSidebar()||y.getPinSidebar()?this.defer(function(e){return function(){return e.focusInput()}}(this)):this.searchText.set("")}),this.listenTo(y,"change:pinBoardsListSidebar",function(){return this.renderSidebarState(),this.updatePinned(),this.updateHeight(),this.ensureUnreadData()}),b.addHandler(this,{scope:"header"}),this.ensureUnreadData(),this.filteredBoardsView=this.subview(a,this.model,{searchText:this.searchText}).render(),this.allBoardsView=this.subview(i,this.model).render(),this.activeBoardsSubview=d.if(this.isSearching,d.const(this.filteredBoardsView),d.const(this.allBoardsView)),this.searchingButtonsView=this.subview(u,this.model,{searchText:this.searchText}).render(),this.boardsButtonsView=this.subview(s,this.model).render(),this.activeButtonsSubview=d.if(this.isSearching,d.const(this.searchingButtonsView),d.const(this.boardsButtonsView)),this.subscribe(l.currentModel.distinct(),function(){return y.getPinSidebar()?void 0:y.hideSidebar()})},t.prototype.events={"keyup .js-search-boards":"keyEvent","input .js-search-boards":function(){return this.searchText.set(this.$searchInput.val())},shortcut:"shortcut"},t.prototype.renderOnce=function(){return this.$el.html(j()),this.renderSidebarState(),this.updatePinned(),r(window).bind(["resize",this.uniqueId()].join("."),this.debounce(function(e){return function(){return e.updateHeight()}}(this),300)),this.subscribeChanges(this.activeBoardsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-boards").append(e.el)}}),this.subscribeChanges(this.activeButtonsSubview,{out:function(e){return e.$el.detach()},in:function(e){return this.$(".js-board-drawer-buttons").append(e.el)}}),this},t.prototype.remove=function(){return r(window).unbind(["resize",this.uniqueId()].join(".")),t.__super__.remove.apply(this,arguments)},t.prototype.ensureUnreadData=function(){var e;if(e=function(e){return function(){return"active"===f.getStatus()?e.UNREAD_POLL_RATE_ACTIVE:e.UNREAD_POLL_RATE_IDLE}}(this),null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*e()&&(this.refreshUnreadData(),this._lastPoll=Date.now()),y.getShowSidebar()||y.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(e){return function(){return e.refreshUnreadData(),e._unreadTimeout=null,e._lastPoll=Date.now(),e.ensureUnreadData()}}(this),e())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null},t.prototype.shortcut=function(e){switch(e){case h.B:return y.getPinSidebar()?this.focusInput():y.getShowSidebar()?y.hideSidebar():y.showSidebar(),!0}},t.prototype.clearSearch=function(){this.$searchInput.val("")},t.prototype.focusInput=function(){return this.$searchInput.focus().select()},t.prototype.refreshUnreadData=function(){var e,t,n,r,i;for(m.loadMyBoardsUnreadData().done(),r=o.me(),i=y.getRecentBoards(),e=0,n=i.length;n>e;e++)t=i[e],r.boardList.get(t)||r.boardStarList.getBoardStar(t)||m.loadBoardData(t,g.boardUnread).done()},t.prototype.renderSidebarState=function(){return y.getShowSidebar()||y.getPinSidebar()?(this.$el.addClass("is-shown"),v.hide()):(this.$el.removeClass("is-shown"),this.clearSearch()),this},t.prototype.updateHeight=function(){var e;return e=y.getPinSidebar()?r(window).height()-50:r(window).height()-64,this.$(".board-drawer-content").css({"max-height":e})},t.prototype.updatePinned=function(){return this.$el.toggleClass("boards-drawer-pinned",y.getPinSidebar()),this.updateHeight()},t.prototype.keyEvent=function(e){var t;return t=p.getKey(e),t===h.ArrowUp||t===h.ArrowDown?(this.activeBoardsSubview.get().arrowKeyEvent(e),void this.focusInput()):void(t===h.Enter&&(this.activeBoardsSubview.get().enterKeyEvent(e),this.focusInput()))},t}(_)},{}],381:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(408),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.onCalendar=!0,t}(o)},{}],382:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty,y=[].slice;r=e("jquery"),o=e(392),s=e(385),a=e(263),u=e(388),c=e(74),l=e(513),d=e(126),p=e(496),h=e(146),f=e(493),m=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className="calendar-wrapper",t.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek","click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"},t.prototype.initialize=function(){return this.monthView=this.subview(s,this.model),this.weekView=this.subview(u,this.model),this.localState=new a({id:"calendar"+this.model.id}),this.localState.fetch(),this.model.viewState.clearSelectedCard()},t.prototype.render=function(e){var t;return null==e&&(e=new Date),t=c.getDaysOfWeek(e).map(function(e){return m(e).format("ddd")}),this.$el.html(f.fill("calendar_toolbar",{days:t})),this.localState.getMode()===u.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,e):this.showView(this.monthView,e),this},t.prototype.remove=function(){return this.stopSubscriptions(),this.model.viewState.clearSelectedCard(),t.__super__.remove.apply(this,arguments)},t.prototype.openComposer=function(e){var t,n,i;return d.stop(e),t=r(e.target).closest(".day-cell, .day-column"),i=new Date(parseInt(t.attr("name"))),n=new o({model:this.model.composer,modelCache:this.modelCache}),n.setDate(i),l.show({clientx:e.clientX,clienty:e.clientY,view:n})},t.prototype.showView=function(e,t){var n;return this.currentSubView=e,n=this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME),this.$(".calendar-content").empty().append(this.currentSubView.render(t).el),this.model.viewState.clearSelectedCard(),this.localState.setMode(this.currentSubView.VIEWSTATE_PREF_STR),this.currentSubView.delegateEvents(),this.currentSubView.updateRoute()},t.prototype.switchToWeekViewFromMonth=function(){return this.showView(this.weekView,this.monthView.currentCenterWeek),this.addedToDOM()},t.prototype.switchToMonthViewFromWeek=function(){return this.showView(this.monthView,this.weekView.currentWeek),this.addedToDOM()},t.prototype.setSubscriptions=function(){this.stopSubscriptions(),this.currentSubView===this.monthView?this.monthView.setSubscriptions():(r(h).on("windowClassChange."+this.uniqueId(),function(e){return function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],e.weekSmallWindowResizeCheck.apply(e,t)}}(this)),this.weekView.setSubscriptions())},t.prototype.stopSubscriptions=function(){return this.weekView.stopSubscriptions(),this.monthView.stopSubscriptions(),r(h).off("."+this.uniqueId())},t.prototype.delegateEvents=function(){var e;return t.__super__.delegateEvents.apply(this,arguments),null!=(e=this.currentSubView)?e.delegateEvents():void 0},t.prototype.addedToDOM=function(){return this.setSubscriptions(),this.currentSubView.addedToDOM()},t.prototype.navigateToday=function(){return this.currentSubView.navigateToday()},t.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()},t.prototype.navigateNext=function(){return this.currentSubView.navigateNext()},t.prototype.weekSmallWindowResizeCheck=function(e,t){return h.fSmall&&this.currentSubView===this.weekView?this.switchToMonthViewFromWeek():void 0},t}(p)},{}],383:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(74),s=e(510),a=e(513),u=e(126),c=e(496),l=e("underscore"),h=e(493),p=e("moment"),d=e(99),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"},t.prototype.initialize=function(e){return this.data=e.data,this.getCardView=e.getCardView,this.$el.attr("name",i.getMidnightInt(this.data.day)),this.cardsDue=this.data.cardsDueOnDate},t.prototype.remove=function(){return delete this.getCardView,t.__super__.remove.apply(this,arguments)},t.prototype.render=function(e){var t,n,r;return null==e&&(e={}),t=this.data.day,n=i.isFirstOfMonth(t)||i.isLastOfMonth(t),r={date:p(t).format(n?"llll":"D"),isToday:p().isSame(t,"day")},l.extend(e,r),this.$el.html(h.fill("calendar_day",e,{editable:this.model.editable()})),this.renderCardsAndHeaders(),this},t.prototype.renderCardsAndHeaders=function(){return this.updateHeader(),this.renderCardsAndListHeaders()},t.prototype.cardListMap=function(){return l.groupBy(this.cardsDue,function(e){return e.getList().id})},t.prototype.updateHeader=function(){var e;return e=this.cardsDue.length,this.$(".day-cards-header").empty(),e>0?this.$(".day-cards-header").text(d("cards",e)):void 0},t.prototype.renderCardsAndListHeaders=function(){var e,t,n,o,i,a,u,c,l,d,p,m;e=this.$(".calendar-day-list"),e.empty(),a=[],m=this.cardListMap();for(p in m)if(f.call(m,p))for(i=m[p],u={listID:p,listName:this.model.getList(p).get("name")},c=h.fill("calendar_day_list_header",u),a.push(c),l=0,d=i.length;d>l;l++)t=i[l],n=this.getCardView(t),n.$el.hasClass("ui-sortable-helper")||(o=n.render().el,r(o).attr("name",t.cid),n.delegateEvents(),a.push(o));return e.append(a),this.model.editable()?s.refreshIfInitialized(this.$(".js-calendar-sortable")):void 0},t.prototype.sortReceive=function(e,t){var n;return n=function(e){var t;return t=document.elementFromPoint(e.left,e.top),r(".calendar-drag-area")[0].contains(t)},n(t.offset)?t.item.trigger("moveToCalendarDay",[t,this]):(s.abort(),s.refreshIfInitialized(this.$(".js-calendar-sortable")))},t.prototype.sortStop=function(e,t){
return t.item.trigger("moveInCalendarDay",[t,this])},t.prototype.clickToggleDay=function(e){return this.$(".calendar-day").hasClass("active")?this.contract(e):this.expand(e)},t.prototype.expand=function(e){var t;return u.stop(e),s.sorting?void 0:(r(".calendar-day.active").removeClass("active"),t=this.$(".calendar-day").addClass("active"),a.hide())},t.prototype.contract=function(e){return u.stop(e),this.$(".calendar-day").removeClass("active"),a.hide()},t}(c)},{}],384:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(383),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.tagName="td",t.prototype.className="day-cell",t.prototype.initialize=function(e){return this.scrollIntoView=e.scrollIntoView,t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return t.__super__.render.call(this,{monthView:!0})},t.prototype.expand=function(){var e;return t.__super__.expand.apply(this,arguments),e=this.$(".calendar-day"),this.scrollIntoView({top:this.$el.prop("offsetTop"),height:e.outerHeight()})},t}(r)},{}],385:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),o=e(384),s=e(386),a=e(6),u=e(74),c=e(510),l=e(513),d=e(126),p=e(146),h=e("underscore"),f=e(493),m=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.className=d.extendParentClassName("calendar-month"),t.prototype.WEEK_WRAPPER_ELEMENT="tr",t.prototype.VIEWSTATE_PREF_STR="month",t.prototype.HEADER_CLASS_NAME="month-view",t.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5,t.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5,t.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=o,this.today=new Date,this.currentMonthCells=[],this.scrollLock=!1,this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM,this.makeDebouncedMethods("shadeDaysUpdateHeader")},t.prototype.render=function(e){var t;return null==e&&(e=this.today),this.$el.html(f.fill("calendar_month")),this.renderBaseWeek(e),this.currentCenterWeek=e,this.currentMonth=u.getFirstOfMonth(e),t=Math.floor(this.weeksKeptInDOM/2),this.renderWeeks(t),this.renderWeeks(-1*t),this.shadeDays(),this.setSubscriptions(),this},t.prototype.getDayView=function(e,n){return t.__super__.getDayView.call(this,e,h.extend({scrollIntoView:this.scrollIntoView.bind(this)},n))},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.calculateVariables(),this.windowResizeCheck(),this.updateHeader(),this.scrollToDay(this.currentCenterWeek)},t.prototype.updateRoute=function(){var e,t,n;return t=u.dateToObj(this.currentMonth),n=t.year,e=t.month,e=d.lpad(e,2,"0"),a.setBoardLocation(this.model.id,"calendar",[n,e],{replace:!0})},t.prototype.setSubscriptions=function(){return this.stopSubscriptions(),r(p).on("windowClassChange."+this.uniqueId(),this.windowClassChangeCheck.bind(this)),r(window).on("resize."+this.uniqueId(),function(e){return function(){return e.windowResizeCheck()}}(this)),r(".calendar-month").on("scroll."+this.uniqueId()+" ",function(e){return function(){return e.scrollCheck()}}(this))},t.prototype.stopSubscriptions=function(){return r(p).off("."+this.uniqueId()),r(window).off("."+this.uniqueId()),r(".calendar-month").off("."+this.uniqueId())},t.prototype.windowClassChangeCheck=function(e,t){var n;return p.fSmall?(r(".calendar-day.active").removeClass("active"),n=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(n)):void 0},t.prototype.calculateVariables=function(){var e;return this.tableSpacing=null!=(e=parseInt(this.$(".calendar-table").css("border-spacing")))?e:5,this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing},t.prototype.windowResizeCheck=function(){var e,t,n,o,i;i=r(window).outerHeight(),n=r("#header").outerHeight(),e=r("#board-header").outerHeight(),t=r(".calendar-header").outerHeight(),this.calendarContentHeight=i-(n+e+t),o=Math.ceil(this.calendarContentHeight/this.dayCellHeight),this.weeksKeptInDOM=Math.max(5*o,this.MINIMUM_WEEKS_KEPT_IN_DOM)},t.prototype.updateHeader=function(){var e;return e=""+m(this.currentMonth).format("MMMM YYYY"),r(".js-calendar-header").text(e)},t.prototype.renderBaseWeek=function(e){var t;return t=this.weekRowEl(e),r(".calendar-month").off("."+this.uniqueId()),this.$(".calendar-table").append(t),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.renderWeeks=function(e){var t,n;return e>0&&(t=m(this.lastRenderedSaturday).add(e,"weeks").toDate(),this.renderUpToDay(t)),0>e?(n=m(this.firstRenderedWeek).add(e,"weeks").toDate(),this.renderUpToDay(n)):void 0},t.prototype.renderUpToDay=function(e){var t,n,r,o,i;for(t=this.$(".calendar-table"),n=u.getEndOfWeek(e),o=[];this.lastRenderedSaturday<n;)this.lastRenderedSaturday=m(this.lastRenderedSaturday).add(1,"weeks").toDate(),o.push(this.weekRowEl(this.lastRenderedSaturday));for(t.append(o),r=u.getStartOfWeek(e),i=[];this.firstRenderedWeek>r;)this.firstRenderedWeek=m(this.firstRenderedWeek).subtract(1,"weeks").toDate(),i.unshift(this.weekRowEl(this.firstRenderedWeek));return t.prepend(i),this.scroll(this.dayCellHeight*i.length),this.deleteExcessWeeks(),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.deleteExcessWeeks=function(){var e,t,n,o,i,s,a,u,c,l,d,p,h;if(e=r(".week"),e.length>this.weeksKeptInDOM){if(h=this.$(".calendar-table").outerHeight(),p=r(".calendar-month").prop("scrollTop"),o=h/2>p){for(l=[],n=i=a=e.length-1,u=this.weeksKeptInDOM;u>=a?u>=i:i>=u;n=u>=a?++i:--i)l.push(r(e[n]).remove());return l}for(t=e.length-this.weeksKeptInDOM,this.scroll(-1*this.dayCellHeight*t),d=[],n=s=0,c=t;c>=0?c>s:s>c;n=c>=0?++s:--s)d.push(r(e[n]).remove());return d}},t.prototype.scrollToDay=function(e,t){var n,r,o,i,s,a,c,l;return this.scrollLock?void 0:(i=this.calendarContentHeight/2/this.dayCellHeight,l=m(e).startOf("week"),o=l.clone().subtract(Math.ceil(i),"weeks").toDate(),s=l.clone().add(Math.ceil(i),"weeks").toDate(),this.firstRenderedWeek<=o&&this.lastRenderedWeek>=s?(c=l.clone().subtract(Math.floor(i),"weeks").toDate(),r=u.getMidnightInt(c),n=this.$("[name='"+r+"']"),a=n.prop("offsetTop"),this.scrollTo(a-this.tableSpacing+1,t)):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute())},t.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()},t.prototype.scrollIntoView=function(e){var t,n,o,i,s,a;return a=e.top,o=e.height,n=a+o,t=r(".calendar-month"),s=t.scrollTop(),i=s+t.height(),s>a?this.scroll(a-s-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):n>i?this.scroll(n-i+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):void 0},t.prototype.scroll=function(e,t){var n,o;return n=r(".calendar-month"),o=n.prop("scrollTop"),this.scrollTo(o+e,t)},t.prototype.scrollTo=function(e,t){var n;return n=r(".calendar-month"),t?(this.scrollLock=!0,n.animate({scrollTop:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):n.scrollTop(e)},t.prototype.navigatePrevious=function(){return this.scrollMonth(-1)},t.prototype.navigateNext=function(){return this.scrollMonth(1)},t.prototype.scrollMonth=function(e){var t;return this.scrollLock?void 0:(t=m(this.currentMonth).add(e,"months").startOf("month").add(15,"days").toDate(),this.scrollToDay(t,this.SCROLL_ANIMATION_TIME))},t.prototype.enableRenderNewDays=function(){return this.checkRenderDays(),this.scrollLock=!1},t.prototype.scrollCheck=function(){var e,t,n,o,i,s,a,c,d,p,h,f;return l.hide(),e=r(".calendar-month"),n=e.outerHeight(),d=e.prop("scrollTop"),this.scrollLock||this.checkRenderDays(),o=n/2,f=Math.floor((d+o)/this.dayCellHeight),c=m(this.firstRenderedWeek).add(f,"weeks").toDate(),m(this.currentCenterWeek).isSame(c,"day")||(this.currentCenterWeek=c,i=u.getEndOfWeek(this.currentCenterWeek),(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==i)&&(i.getMonth()===this.today.getMonth()?this.currentMonth=u.getFirstOfMonth(i):this.currentMonth=u.getFirstOfMonth(this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced()),this.updateRoute()),p=u.getMidnightInt(this.today),t=this.$("[name='"+p+"']"),h=t.prop("offsetTop"),s=h<(a=o+d)&&a<h+this.dayCellHeight,r(".today-button").toggleClass("on-today",s)},t.prototype.shadeDaysUpdateHeader=function(){return this.updateHeader(),this.shadeDays()},t.prototype.checkRenderDays=function(){var e,t,n,o,i,s,a;return e=r(".calendar-month"),t=e.outerHeight(),s=e.prop("scrollTop"),a=this.$(".calendar-table").outerHeight(),n=a-t-s,i=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS,i>n&&(o=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),i>s&&(o=!0,this.renderWeeks(-1*this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),o&&this.model.editable()?this.defer(function(){return c.refreshCalendarCardSortable()}):void 0},t.prototype.shadeDays=function(){var e,t,n,o,i,s,a,u,c;for(e=this.$(".day-cell"),a=this.currentMonthCells,n=0,i=a.length;i>n;n++)t=a[n],r(t).removeClass("current-month");for(this.currentMonthCells=h.filter(e,this.cellInCurrentMonth,this),u=this.currentMonthCells,c=[],o=0,s=u.length;s>o;o++)t=u[o],c.push(r(t).addClass("current-month"));return c},t.prototype.cellInCurrentMonth=function(e){var t;return t=parseInt(r(e).attr("name")),new Date(t).getMonth()===this.currentMonth.getMonth()},t}(s)},{}],386:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(381),s=e(74),a=e(510),u=e(496),c=e("underscore"),l=e("moment"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.className="u-fancy-scrollbar calendar-drag-area",t.prototype.SCROLL_ANIMATION_TIME=400,t.prototype.initialize=function(){var e;return e=this.listenToListChanges.bind(this),this.model.listList.each(e),this.listenTo(this.model.listList,"add remove",e)},t.prototype.addedToDOM=function(){return this.model.editable()?this.defer(function(){return a.refreshCalendarCardSortable()}):void 0},t.prototype.delegateEvents=function(){var e,n,r,o,i;for(t.__super__.delegateEvents.apply(this,arguments),o=this.subviewsOfType(this.DAY_VIEW_TYPE),i=[],n=0,r=o.length;r>n;n++)e=o[n],i.push(e.delegateEvents());return i},t.prototype.setSubscriptions=function(){throw new Error("CalendarView::setSubscriptions is an abstract method")},t.prototype.stopSubscriptions=function(){throw new Error("CalendarView::stopSubscriptions is an abstract method")},t.prototype.listenToListChanges=function(e){return this.listenTo(e.cardList,"add remove",function(e){var t;return this.cardsWithDueDates([e]).length>0?(t=new Date(e.get("due")),this.renderCardsOnDates([t])):void 0}),this.listenTo(e.cardList,"change:due",function(e,t){var n,r,o,i,s;return s=e.previousAttributes().due,o=e.get("due"),i=new Date(null!=s?s:null),t=new Date(null!=o?o:null),l(i).isSame(t,"day")?void 0:(r=function(){var e,t,r,i;for(r=[s,o],i=[],e=0,t=r.length;t>e;e++)n=r[e],null!=n&&i.push(new Date(n));return i}(),this.renderCardsOnDates(r))}),this.listenTo(e.cardList,"reset",function(e,t){var n,r,o,i;return o=e.models,i=t.previousModels,r=c.difference(o,i).concat(c.difference(i,o)),this.renderCardsOnDates(function(){var e,t,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(new Date(n.get("due")));return o}())})},t.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)},t.prototype.getCardView=function(e){return this.subview(o,e,e.cid)},t.prototype.cardsWithDueDates=function(e){return e.filter(function(e){return null!=e.get("due")})},t.prototype.cardsDueOnDate=function(e,t){return this.cardsWithDueDates(e).filter(function(e){return l(e.get("due")).isSame(t,"day")})},t.prototype.cardSubviews=function(){var e,t,n;return n=this.subviewsOfType(this.DAY_VIEW_TYPE),e=c.flatten(function(){var e,r,i;for(i=[],e=0,r=n.length;r>e;e++)t=n[e],i.push(t.subviewsOfType(o));return i}())},t.prototype.calculateFirstAndLastWeeksFromDOM=function(){var e;return e=this.$(".week"),this.firstRenderedWeek=new Date(parseInt(e.first().attr("name"))),this.lastRenderedWeek=new Date(parseInt(e.last().attr("name"))),this.lastRenderedSaturday=s.getEndOfWeek(this.lastRenderedWeek)},t.prototype.renderCardsOnDates=function(e){var t,n,r,o,i,a,u;if(this.$(".week").length>0){for(u=[],i=0,a=e.length;a>i;i++)n=e[i],this.firstRenderedWeek<n&&n<this.lastRenderedSaturday&&(t=this.cardsDueOnDate(this.model.openCards(),n),r=s.getMidnightInt(n),o=this.existingSubview(this.DAY_VIEW_TYPE,this.model,r),o.cardsDue=t,u.push(o.renderCardsAndHeaders()));return u}},t.prototype.renderDayViews=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;r>n;n++)t=e[n],o.push(this.getDayView(t).render().el);return o},t.prototype.getDayView=function(e,t){var n;return n={day:e,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),e)},this.subview(this.DAY_VIEW_TYPE,this.model,c.extend({data:n,getCardView:this.getCardView.bind(this)},t),s.getMidnightInt(e))},t.prototype.weekRowEl=function(e){var t,n;return n=this.renderDayViews(s.getDaysOfWeek(e)),t=r(document.createElement(this.WEEK_WRAPPER_ELEMENT)),t.attr("name",s.getMidnightInt(s.getStartOfWeek(e))).addClass("week").append(n),t},t}(u)},{}],387:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(383),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="day-column",t}(r)},{}],388:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(386),i=e(387),a=e(6),u=e(74),c=e(510),l=e(126),p=e(493),d=e("moment"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className=l.extendParentClassName("calendar-week"),t.prototype.WEEK_WRAPPER_ELEMENT="div",t.prototype.VIEWSTATE_PREF_STR="week",t.prototype.HEADER_CLASS_NAME="week-view",t.prototype.WEEKS_KEPT_IN_DOM=5,t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=i,this.today=new Date,this.scrollLock=!1},t.prototype.render=function(e){return null==e&&(e=this.today),this.$el.html(p.fill("calendar_week")),this.currentWeek=u.getStartOfWeek(e),this.appendWeekEl(this.currentWeek),this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()),this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this},t.prototype.addedToDOM=function(){return t.__super__.addedToDOM.apply(this,arguments),this.weekWidth=r(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek),this.updateToolbar()},t.prototype.updateRoute=function(){var e,t,n,r;return n=u.dateToObj(this.currentWeek),r=n.year,t=n.month,e=n.day,t=l.lpad(t,2,"0"),e=l.lpad(e,2,"0"),a.setBoardLocation(this.model.id,"calendar",[r,t,e],{replace:!0})},t.prototype.setSubscriptions=function(){return r(window).on("resize."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this)),r(".board-menu").on("transitionend."+this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(e){return function(){return e.resizeCheck()}}(this))},t.prototype.stopSubscriptions=function(){return r(window).off("."+this.uniqueId()),r(".board-menu").off("."+this.uniqueId())},t.prototype.resizeCheck=function(){return this.weekWidth=r(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek)},t.prototype.resizeWeekCanvas=function(){var e;return e=this.$(".week").length,r(".week-horizontal-canvas").width(this.weekWidth*e),r(".week").width(this.weekWidth)},t.prototype.updateToolbar=function(){var e,t,n,o,i;return i=d(u.getEndOfWeek(this.currentWeek)),t=d(this.currentWeek),n=t.format("LL")+" - "+i.format("LL"),r(".js-calendar-header").text(n),e=r(".today-button"),o=d(this.today).isSame(this.currentWeek,"week"),e.toggleClass("on-today",o)},t.prototype.appendWeekEl=function(e){var t,n;return n=this.$(".week-horizontal-canvas"),n.append(this.weekRowEl(e)),this.resizeWeekCanvas(),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&(t.first().remove(),this.scrollLeft(-1*this.weekWidth)),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.prependWeekEl=function(e){var t,n;return n=this.$(".week-horizontal-canvas"),n.prepend(this.weekRowEl(e)),t=this.$(".week"),t.length>this.WEEKS_KEPT_IN_DOM&&t.last().remove(),this.resizeWeekCanvas(),this.scrollLeft(this.weekWidth),this.calculateFirstAndLastWeeksFromDOM()},t.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})},t.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})},t.prototype.navigateWeek=function(e){var t,n,r,o,i;return n=(null!=e?e:{}).backwards,this.scrollLock?void 0:(i=n?-1:1,t=n?this.$(".week").first():this.$(".week").last(),this.currentWeek=d(this.currentWeek).add(i,"weeks"),o=t.attr("name"),r=new Date(parseInt(o)),d(this.currentWeek).isSame(r,"day")&&(n?this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()):this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this.model.editable()&&this.defer(function(){return c.refreshCalendarCardSortable()})),this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME))},t.prototype.scrollLeft=function(e,t){var n,o;return n=r(".calendar-week"),o=n.prop("scrollLeft"),this.scrollLeftTo(o+e,t)},t.prototype.scrollLeftTo=function(e,t){var n;return n=r(".calendar-week"),t?(this.scrollLock=!0,n.animate({scrollLeft:e},{duration:t,complete:function(e){return function(){return e.completeAnimatedScroll()}}(this)})):n.scrollLeft(e)},t.prototype.scrollToDay=function(e,t){var n,r,o;return this.firstRenderedWeek<e&&e<this.lastRenderedSaturday?(o=u.getMidnightInt(u.getStartOfWeek(e)),n=this.$(".week[name='"+o+"']"),r=n.prop("offsetLeft"),this.scrollLeftTo(r,t),this.currentWeek=new Date(o),this.updateToolbar()):(this.render(e),this.addedToDOM(),this.delegateEvents()),this.updateRoute()},t.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1},t}(o)},{}],389:[function(e,t,n){var r,o,i;i=null!=(o=window.URL)?o:window.webkitURL,r=null!=navigator.getUserMedia?navigator.getUserMedia.bind(navigator):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia.bind(navigator):null,t.exports=new(function(){function e(){this.stream=null}return e.prototype.supportsGetUserMedia=function(){return null!=r},e.prototype.connected=function(){return null!=this.stream},e.prototype.getStream=function(){return this.stream},e.prototype.getStreamUrl=function(){return i.cre},e.prototype.getError=function(){return this.error},e.prototype.connect=function(e){var t,n;return null!=this.stream?e(null,this.stream):(this.error=null,t=function(t){return function(n){return t.error=n,t.stream=null,e("Could not connect")}}(this),n={video:!0},r(n,function(t){return function(n){return t._setRawStream(n),t.stream=i.createObjectURL(n),e(null,t.stream)}}(this),t))},e.prototype._setRawStream=function(e){return this.stop(),this.rawStream=e},e.prototype.stop=function(){var e,t,n,r;return null!=this.rawStream&&("function"==typeof(e=this.rawStream).stop&&e.stop(),"function"==typeof(t=this.rawStream).getTracks&&null!=(n=t.getTracks())&&null!=(r=n[0])&&"function"==typeof r.stop&&r.stop()),this.stream=null,this.rawStream=null},e}())},{}],390:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(513),s=e(496),a=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="crop photo",t.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}},t.prototype.setImage=function(e){return this.url=e},t.prototype.render=function(){return this.$el.html(a.fill("crop_photo")),this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(e){var t;return t=r(this).data("crop"),e.originalEvent.wheelDelta<0?t.zoomIn():t.zoomOut()}).on("crop",function(e){return function(t){return e.cropX=t.cropX,e.cropY=t.cropY,e.cropW=t.cropW,e.cropH=t.cropH}}(this)),this},t.prototype.done=function(){var e,t,n;return n=this.$(".crop-image")[0],e=r("<canvas>").attr({width:270,height:270}),t=e[0].getContext("2d"),t.drawImage(n,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270),this.options.savePhoto(e[0].toDataURL("image/png")),i.hide()},t.prototype.back=function(){return i.popView()},t}(s)},{}],391:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(389),i=e(390),s=e(513),u=e(496),l=e(493),c=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.events={"click .js-connect-camera":"connectCamera","click .js-snap":"snap"},t.prototype.willBePopped=function(){return o.stop()},t.prototype.viewTitleKey="take a photo",t.prototype.render=function(){var e,t,n;return e={connected:o.connected()},n=o.getError(),null!=n&&("PermissionDeniedError"===n.name?e.error=c(["member profile error","could not connect to camera"]):null!=n.name?e.error=n.name:e.error=n),this.$el.html(l.fill("take_photo",e)),o.connected()&&(t=this.$(".video")[0],t.src=o.getStream(),t.play()),this},t.prototype.getData=function(){return this.connectCamera()},t.prototype.connectCamera=function(){return o.connect(function(e){return function(t){return e.render()}}(this))},t.prototype.snap=function(){var e,t,n,a;return a=this.$(".video")[0],e=r("<canvas>").attr({width:640,height:480}),t=e[0].getContext("2d"),t.drawImage(a,0,0,640,480),n=new i({model:this.model,modelCache:this.modelCache,savePhoto:this.options.savePhoto}),n.setImage(e[0].toDataURL("image/png")),o.stop(),s.pushView({view:n,hardToClose:!0})},t}(u)},{}],392:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(97),s=e(18),a=e(513),u=e(126),c=e(496),l=e("underscore"),p=e(493),d=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="calendar-card-composer",t.prototype.initialize=function(){return this.board=this.model.getBoard()},t.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"},t.prototype.viewTitleKey="add card",t.prototype.setDate=function(e){return this.date=e,this.date.setHours(12)},t.prototype.remove=function(){var e;return e={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()},this.model.set(e).save(),t.__super__.remove.apply(this,arguments)},t.prototype.render=function(){var e;return e={title:this.model.get("title")},this.$el.html(p.fill("popover_card_from_calendar",e)),this.updateListList(),this.updatePositionList(),this.defer(function(e){return function(){return u.setCaretAtEnd(e.$(".js-card-title")[0])}}(this)),this},t.prototype.keydownEvent=function(e){i.getKey(e)===s.Enter&&this.addCard(e)},t.prototype.addCard=function(e){var t,n,o,i;return u.stop(e),(n=r.trim(this.$(".js-card-title").val()))?(a.hide(),this.model.clearItems(),this.model.set("pos","bottom"),o=this.selectedList(),i=parseInt(this.$(".js-select-position").val()),t={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:o.id,pos:o.calcPos(i),name:n},o.cardList.create(t)):void 0},t.prototype.updateListList=function(){var e,t;return e=this.$(".js-select-list"),e.empty(),t=this.board.listList.models,l.each(t,function(t){return r("<option>").val(t.id).text(t.get("name")).appendTo(e)}),e.val(this.model.get("idList")),e.val()||e.find("option").first().prop("selected",!0),this.renderValues()},t.prototype.updatePositionList=function(){var e,t,n,o,i;return e=this.$(".js-select-position"),n=this.selectedList(),e.empty(),null!=n&&(o=n.cardList.length,t=function(){i=[];for(var e=0;o>=0?o>=e:e>=o;o>=0?e++:e--)i.push(e);return i}.apply(this),l.each(t,function(n){var o;return o=function(){switch(n){case 0:return" (Top)";case t.length-1:return" (Bottom)";default:return""}}(),r("<option>").val(n).text(n+1+o).appendTo(e)}),e.val(this.model.get("pos")),e.val()||e.find("option").last().prop("selected",!0)),this.renderValues()},t.prototype.selectedList=function(){var e;return e=this.$(".js-select-list").val(),l.findWhere(this.board.listList.models,{id:e})},t.prototype.renderValues=function(){var e,t,n,o;n=this.selectedList(),e=this.$(".js-list-value"),t=this.$(".js-pos-value"),null!=n?(e.text(n.get("name")),o=parseInt(this.$(".js-select-position").val()),t.text(o+1)):(e.empty().append(r("<i></i>").text(d("no lists"))),t.empty().append(r("<i></i>").text(d("n/a")))),this.$(".js-add-card,.js-card-title").prop("disabled",null==n)},t}(c)},{}],393:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;r=e("jquery"),o=e(73),a=e(394),u=e(395),c=e(396),l=e(397),d=e(507),p=e(6),h=e(97),m=e(18),_=e(102),f=e(513),g=e("bluebird"),v=e(126),y=e(496),b=e("underscore"),C=e(493),x=e(43),w=e(101),k=e(777),i=_("CardComposer",["TooManyCards"]),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.className="card-composer",t.prototype.initialize=function(){return this.listenTo(this.model,"change:idLabels change:idMembers",this.renderSelectedItems),this.listenTo(this.model,"change:vis",this.frameDebounce(this.renderVisibility)),this.listenTo(this.model.labelList,"add remove reset change",this.frameDebounce(this.renderSelectedItems))},t.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"},t.prototype.render=function(e,t){var n,r;return r=this,n=this.model.toJSON({board:!0}),this.renderVisibility(),this.$el.html(C.fill("card_composer_inline",n)),this.renderSelectedItems(),this.defer(function(e){return function(){return v.setCaretAtEnd(e.$(".js-card-title")[0]),"function"==typeof t?t():void 0}}(this)),this.$(".js-card-title").autosize(),this},t.prototype.renderVisibility=function(){return this.$el.toggleClass("hide",!this.model.get("vis")),this},t.prototype.clearTextField=function(){return this.model.save("title",""),this.$(".js-card-title").val("").trigger("autosize.resize")},t.prototype.submitCard=function(e){var t,n,o,s;return e&&v.stop(e),f.hide(),s=r.trim(this.$(".js-card-title").val()),""===s?void this.$el.find(".js-card-title").focus().select():(t=b.compact(s.split(/\r\n|\r|\n/)),n=t.length,o=n.toString(),void g.try(function(t){return function(){if(n>100)throw new i.TooManyCards;return n>1?new g(function(t){return d.toggle("create many cards",{elem:r(e.target),html:w("confirm.create many cards.text",{count:o}),confirmText:w("confirm.create many cards.confirm",{count:o}),fxConfirm:function(e){return function(e){return t(!0)}}(this),fxCancel:function(e){return function(e){return t(!1)}}(this)})}):!1}}(this)).then(function(n){return function(r){var o;return n.clearTextField(),o=e.shiftKey===!0,r?n.createMultipleCards(t,o):n.createCard(s,{openCard:o,selectCard:!0,removeNewLines:!0}),n.clearItems()}}(this)).catch(i.TooManyCards,function(t){return function(){return d.toggle("too many cards",{elem:r(e.target),html:w("confirm.too many cards.text",{count:o}),fxConfirm:function(e){return f.hide()}})}}(this)).done())},t.prototype.createCard=function(e,t){var n,r,o,i,s,a,u,c,l,d;c=null!=t?t:{},u=c.openCard,d=c.selectCard,l=c.removeNewLines,e=e.trim(),this.$el.trigger("prevent-scroll-selection"),l&&(e=e.replace(/(\r\n|\n|\r)/gm," ")),s=b.clone(this.model.get("idMembers")),i=b.pluck(this.model.labelList.models,"id"),""!==e&&(a={name:e,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,idLabels:i,idMembers:s,dateLastActivity:Date.now()},this.model.moveToNext(),n=i.length>0,o=this.model.getList().cardList.create(a,{success:function(e){return function(e){n&&s.length>0?x("Card Composer","Card Added","With Members and Labels"):s.length>0?x("Card Composer","Card Added","With Members"):n?x("Card Composer","Card Added","With Labels"):x("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),r=this.model.getBoard(),r.filter.addNewCard(o),d&&r.viewState.selectCard(o),u&&p.showCardDetail(o))},t.prototype.createMultipleCards=function(e,t){var n,r,o,i,s;for(i=e.length,n=r=0,o=e.length;o>r;n=++r)s=e[n],e.length-1===n?this.createCard(s,{openCard:t,selectCard:!0}):this.createCard(s);x("Card Composer","Added Mulitple Cards",i)},t.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup().trigger("autosize.resize")},t.prototype.keydownEvent=function(e){var t,n,o,i,s,l,d,p;return s=h.getKey(e),t=this.$(".js-card-title"),i=r(e.target).closest(".js-card-title").hasClass("js-card-title"),o=r(e.target).closest(".js-add-card").hasClass("js-add-card"),!i&&!o||f.isVisible||s!==m.Enter?void((s===m.Tab||s===m.Enter)&&(t.focus(),p=v.getWordFromCaret(t[0]),l=r(null!=(d=f.view)?d.el:void 0),n=!1,f.view instanceof u?(l.find(".js-members-list .item.selected:first .js-select-member").first().click(),n=!0):f.view instanceof a?(l.find(".js-select-label.selected").first().click(),n=!0):f.view instanceof c?l.find(".js-pos-results").length>0&&(l.find(".js-pos-results li.selected:first a").first().click(),n=!0):s===m.Tab&&""===t.val()&&(v.stop(e),this.hide(),e.shiftKey?r(this.el).closest(".js-list").find(".editable:first .current").click():r(this.el).closest(".js-list").next().find(".editable:first .current").click()),n&&(v.stop(e),v.insertSelection(t,"",p.start,p.end),this.model.set("title",t.val())),this.renderSelectedItems(),f.hide())):(v.stop(e),void this.submitCard(e))},t.prototype.keyupEvent=function(e){var t,n,i,s,l,d,p,g,y,w,_,k,C,x,j;if(t=this.$(".js-card-title"),g=h.getKey(e),g!==m.Tab&&g!==m.Enter){if(g===m.Escape)return v.stop(e),f.hide(),void t.focus();if(h.isArrow(g))return v.stop(e),w=r(null!=(k=f.view)?k.el:void 0),void(f.view instanceof u?v.navMenuList(w.find(".js-members-list"),".item",g):f.view instanceof a?v.navMenuList(w,".js-select-label",g):f.view instanceof c&&w.find(".js-pos-results").length>0&&v.navMenuList(w.find(".js-pos-results"),"li",g));if(!o.isTouch()&&r(e.target).closest(".js-card-title").hasClass("js-card-title")){if(j=v.getWordFromCaret(t[0]),d=/^@\S/.test(j.str.substring(0,2)),l=/^\#\S/.test(j.str.substring(0,2)),p=/^\^\S/.test(j.str.substring(0,2)),C=j.str.substring(1).toLowerCase(),!(d||l||p))return this.model.set("title",this.$(".js-card-title").val()),f.hide();if(g===m.Shift||g===m.Alt||g===m.Control);else{if(d)return x=new u({model:this.model,modelCache:this.modelCache
}),i=b.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),s=v.filterMembers(this.modelCache,C,i),s.length>0?(x.populate(s,!0),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".js-members-list .item:first"),v.selectMenuItem(r(x.el).find(".js-members-list"),".item",n)):f.hide();if(l)return x=new a({model:this.model,modelCache:this.modelCache}),y=this.model.getBoard().filterLabels(C),y.length>0?(x.populate(y),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".edit-labels-pop-over .js-select-label:first"),v.selectMenuItem(r(x.el).find(".edit-labels-pop-over"),"li",n)):f.hide();if(p)return x=new c({model:this.model,modelCache:this.modelCache}),_=x.filterPos(C),_.hasData?(x.populateResults(_),f.show({elem:this.$(".js-cc-menu"),view:x}),t.focus(),n=r(x.el).find(".js-pos-results li:first"),v.selectMenuItem(r(x.el).find(".js-pos-results"),"li",n)):f.hide()}}}},t.prototype.renderSelectedItems=function(){var e,t,n,r,o,i,s,a,u,c,l,d,p,h;for(o=this.model.get("idMembers"),r=!b.isEmpty(o),t=this.$(".js-list-card-composer-members").empty(),p=this.modelCache.get("Member",o),i=0,c=p.length;c>i;i++)d=p[i],t.append("<div class='member js-remove-member' idMember='"+d+"'>"+k(d.toJSON())+"</div>");for(u=this.model.get("labels"),n=!b.isEmpty(u),e=this.$(".js-list-card-composer-labels").empty(),h=this.model.labelList.models,s=0,l=h.length;l>s;s++)a=h[s],b.isEmpty(a.get("color"))||e.append("<div class='card-label card-label-"+a.get("color")+" mod-card-front'></div>");this.$(".js-clear-all-items").toggle(n||r)},t.prototype.openMenu=function(e){return v.stop(e),x("Card Composer","Open Selector Menu"),f.toggle({elem:e.target,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.clearItems=function(e){return this.model.clearItems()},t.prototype.hide=function(e){this.model.save("vis",!1)},t.prototype.clearAndHide=function(e){return this.clearItems(),this.hide()},t.prototype.scrollIntoView=function(){var e,t;return t=this.$el.offset().top,e=this.$el.closest(".list-cards"),e.scrollTop(t+this.$el.height())},t}(y)},{}],394:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(126),s=e(496),a=e("underscore"),u=e(493),c=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="select labels",t.prototype.tagName="ul",t.prototype.className="edit-labels-pop-over",t.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"},t.prototype.populate=function(e){this.populatedLabelList=e},t.prototype.render=function(){var e,t,n,r,o,s,c,l;return l=this,s=[],e=this.model.getLabels(),o=null!=(c=this.populatedLabelList)?c:this.model.getBoard().getLabels(),s=function(){var t,i,s;for(s=[],t=0,i=o.length;i>t;t++)r=o[t],n=a.include(e,r),s.push({id:r.id,color:r.get("color"),name:r.get("name"),isActive:n});return s}(),t={labels:s},this.$el.html(u.fill("select_labels",t)),i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",this.$(".js-select-label").first()),this},t.prototype.hoverLabelSelect=function(e){return i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",r(e.target).closest(".js-select-label"))},t.prototype.addOrRemoveLabel=function(e){var t,n;i.stop(e),t=r(e.target).closest(".js-select-label"),t.toggleClass("active"),n=t.attr("data-idlabel"),this.model.toggleLabel(this.modelCache.get("Label",n))?c("Card Composer","Add Label"):c("Card Composer","Remove Label")},t}(s)},{}],395:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),i=e(97),s=e(18),a=e(562),u=e(126),c=e(496),l=e("underscore"),p=e(493),h=e(43),d=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="select members",t.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"},t.prototype.populate=function(e,t){return this.data={idMems:null!=e?e:l.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id")},this.data.showSearch=!(this.data.idMems.length<=5||t)},t.prototype.render=function(){var e;return e=this,this.$el.html(p.fill("popover_member_searcher",this.data)),this.fillMems(this.data.idMems),this.$(".js-filter-emoji").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-emoji").focus().select()}}(this),20),this.$(".js-filter-members").length>0&&this.setTimeout(function(e){return function(){return e.$(".js-filter-members").focus().select()}}(this),20),this},t.prototype.fillMems=function(e){var t,n,r,o,i,s;for(t=this.$(".js-members-list"),t.empty(),s=e.slice(0,5),n=0,o=s.length;o>n;n++)r=s[n],i=this.modelCache.get("Member",r),this.appendSubview(this.subview(a,i,{card:this.model}),t)},t.prototype.filterAndFillMembers=function(e){var t,n,r;n=l.pluck(this.model.getBoard().memberList.models,"id"),r=u.filterMembers(this.modelCache,e,n),r.length>0?(this.fillMems(r),t=this.$(".js-members-list .item:first"),u.selectMenuItem(this.$(".js-members-list"),".item",t)):this.$(".js-members-list").html('<li><p class="empty"></p></li>').find("p").text(d("no matched members"))},t.prototype.hoverMemberSelect=function(e){var t;return t=r(e.target).closest(".item"),u.selectMenuItem(this.$(".js-members-list"),".item",t)},t.prototype.keyupEvent=function(e){var t,n;n=i.getKey(e),t=r(".js-filter-members").val().trim().toLowerCase(),n===s.Tab||n===s.Enter?(u.stop(e),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):n===s.ArrowUp||n===s.ArrowDown?(u.stop(e),u.navMenuList(this.$(".js-members-list"),".item",n)):this.filterAndFillMembers(t)},t.prototype.addOrRemoveMember=function(e){var t,n,o;u.stop(e),o=r(e.target).closest(".item"),o.toggleClass("active"),n=o.find(".username").text(),t=o.find("[idMember]").attr("idMember"),this.model.toggle("idMembers",t)?h("Card Composer","Add Member"):h("Card Composer","Remove Member")},t}(c)},{}],396:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(513),s=e(126),a=e(496),u=e("underscore"),l=e(493),d=e(43),c=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="select position",t.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"},t.prototype.populateResults=function(e){return this.data={filtered:!0,keywordList:e.keywordList.map(function(e){return function(t){return{value:t,indexString:t,listName:e.model.get("list").get("name")}}}(this)),indexList:e.indexList.map(function(e){return function(t){return{value:t,indexString:String(t),listName:e.model.get("list").get("name")}}}(this)),listList:e.listList.map(function(e){return function(t){return{value:t.get("id"),indexString:String(e.model.get("index")+1),listName:t.get("name")}}}(this))}},t.prototype.render=function(){var e;return this.data?this.$el.html(l.fill("popover_filter_pos_results",this.data)):(e={hideBoard:!0},this.$el.html(l.fill("move_card_controls",e)),this.updateListList()),this},t.prototype.hoverPosResultsSelect=function(e){var t;return t=r(e.target).closest("li"),s.selectMenuItem(this.$(".js-pos-results"),"li",t)},t.prototype.selectPosResult=function(e){var t,n,o,a,u,c;s.stop(e),u=r(e.target).closest("a"),c=u.attr("name"),a=this.model.getList(),n=a.openCards().length,t=n+1,u.hasClass("js-select-pos-keyword")?"top"===c?(this.model.set("index",0),d("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===c&&(this.model.set("index",t),d("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):u.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(c,10)-1),d("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):u.hasClass("js-select-pos-list")&&(o=n===this.model.get("pos"),this.model.set("list",this.model.getBoard().getList(c)),o?(this.model.set("index",n),d("Card Composer","Select List by Autocomplete","Bottom")):d("Card Composer","Select List by Autocomplete","Not Bottom")),i.hide()},t.prototype.filterPos=function(e){var t,n,r,o,i,a,c,l,d,p,h;for(h=RegExp("^"+s.escapeForRegex(e)),l=RegExp("^"+s.escapeForRegex(e)+"$"),t=this.model.getList().openCards(),n={keywordList:function(){var e,t,n,r;for(n=["top","bottom"],r=[],e=0,t=n.length;t>e;e++)i=n[e],h.test(i)&&r.push(i);return r}(),indexList:function(){var e,n,o;for(o=[],r=e=1,n=t.length+1;n>=1?n>=e:e>=n;r=n>=1?++e:--e)l.test(String(r))&&o.push(r);return o}(),listList:[]},d=this.model.getBoard().listList.models,o=0,a=d.length;a>o;o++)c=d[o],p=u.compact(c.get("name").toLowerCase().split(/\s+/)),u.find(p,function(e){return h.test(e)})&&n.listList.push(c);return n.hasData=!u.isEmpty(n.keywordList)||!u.isEmpty(n.indexList)||!u.isEmpty(n.listList),n},t.prototype.updateListList=function(){var e,t,n,o,i,s,a,l,d,p;for(l=this.model.getList(),i=l.id,n=this.model.getBoard(),t=this.$(".js-select-list"),t.empty(),p=u.sortBy(n.listList.models,function(e){return e.get("pos")}),s=0,a=p.length;a>s;s++)l=p[s],d=l.get("name"),o=l.id===i?c("selected list",{listName:d}):d,e=r("<option>").val(l.id).text(o),t.append(e),l.id===i&&(e.attr("selected","selected"),this.$(".js-list-value").text(d));return this.updatePositionList()},t.prototype.updatePositionList=function(){var e,t,n,o,i,s,a,u,c,l,d;if(t=this.$(".js-select-list"),n=this.$(".js-select-position"),a=t.find("option:selected").val(),n.empty(),c=this.model.getList(),l=this.model.getBoard().listList.get(a),o=c.cardList,this.model.get("index")>o.length&&this.model.set("index",o.length),0===o.length)return e=r("<option>").val("0").text("1").appendTo(n),void this.$(".js-pos-value").text("1");for(s=u=0,d=o.length;d>=0?d>=u:u>=d;s=d>=0?++u:--u)i=String(s+1),e=r("<option>").val(s).text(i).appendTo(n),s===this.model.get("index")&&e.attr("selected","selected");this.$(".js-pos-value").text(this.model.get("index").toString())},t.prototype.changeList=function(){var e,t,n,r,o,s,a;r=this.model.get("index"),t=this.model.getList().openCards().length,o=t===r,e=this.$(".js-select-list"),n=e.find("option:selected").val(),a=this.model.getBoard().getList(n),this.model.set("list",a),s=a.openCards().length,o?(this.model.set("index",s),d("Card Composer","Change Position by Click","Change List - Bottom")):(this.model.set("index",Math.min(s,r)),d("Card Composer","Change Position by Click","Change List - Not Bottom")),i.hide()},t.prototype.changePosition=function(){var e,t;e=this.$(".js-select-position"),t=parseInt(e.find("option:selected").val(),10),this.model.set("index",t),d("Card Composer","Change Position by Click","Change Position in List"),i.hide()},t}(a)},{}],397:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(500),o=e(404),i=e(396),a=e(513),u=e(126),c=e(496),l=e(493),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"},t.prototype.render=function(){var e;return e=this,this.$el.html(l.fill("popover_selector_menu")),this},t.prototype.openMemSelector=function(e){return u.stop(e),a.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openLabelSelector=function(e){return u.stop(e),a.pushView({view:r,options:{model:this.model,modelCache:this.modelCache,hideOnSelect:!1}})},t.prototype.openPosSelector=function(e){return u.stop(e),a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}})},t}(c)},{}],398:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),c=e(254),s=e("bluebird"),i=e(513),a=e(126),u=e(496),l=e(704),d=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(e){var t;return t=e.links,this.links=t,this.listenTo(this.model.attachmentList,"add remove reset",this.render)},t.prototype.viewTitleKey="attach links",t.prototype.events={"click .js-attach:not([disabled])":"attach"},t.prototype.render=function(){var e,t;return e=function(){var e,n,r,o;for(r=this.links,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(d(t,{domain:c(t.url).host,attached:this.model.attachmentList.any(function(e){return e.get("url")===t.url})}));return o}.call(this),this.$el.html(l(e)),this},t.prototype.attach=function(e){var t,n,o;return t=r(e.currentTarget),o=t.attr("data-url"),n=t.attr("data-text"),t.attr("disabled","disabled"),this.model.uploadUrl({url:o,name:n})},t}(u)},{}],399:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T=function(e,t){function n(){this.constructor=e}for(var r in t)M.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},M={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(212),a=e(29),u=e(157),l=e(94),d=e(97),p=e(513),h=e("bluebird"),m=e(114),f=e(414),g=e(126),v=e(496),y=e("underscore"),x=e(491)("attachment_type_picker"),S=e(43),_=e(101),k=e(129),w=e(231),b=e(239),C=e(475),c=b("AttachmentTypePickerView::FileTooLarge"),j=x.renderable(function(e){var t,n,r,o,i,s;r=e.hasLargeAttachments,o=e.id,n=e.googleDriveReady,s=e.tipKey,i=e.tipData,t=e.defaultName,null==s&&(s="tip-you-can-drag-and-drop-files-and-links-onto-cards-to-upload-them"),null==i&&(i={}),x.div(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){r?x.format("that-file-size-exceeds-the-250mb-limit"):x.div(".gold-promo",function(){x.format("that-file-size-exceeds-the-10mb-limit-but-if-you-upgrade-to"),x.icon("trello-gold","trello-gold-you-can-upload-files-up-to-250mb")})}),x.ul(".pop-over-list",function(){x.li(".uploader",function(){return x.a(".fakefile",{href:"#"},function(){return x.format("computer")}),x.form(".realfile",{action:"/1/card/"+o+"/attachments",method:"post",enctype:"multipart/form-data"},function(){return x.input({type:"hidden",name:"token",value:""}),x.input({type:"hidden",name:"format",value:"http"}),x.input(".js-attach-file",{type:"file",name:"file",tabindex:"-1",multiple:""})})}),x.li(function(){return x.a(".js-google-drive-attachment",{href:"#",class:x.classify({disabled:!n})},function(){return x.format("google-drive")})}),x.li(function(){return x.a(".js-dropbox-attachment",{href:"#"},function(){return x.format("dropbox")})}),x.li(function(){return x.a(".js-box-attachment",{href:"#"},function(){return x.format("box")})}),x.li(function(){return x.a(".js-one-drive-attachment",{href:"#"},function(){return x.format("onedrive")})})}),x.hr(),x.label({for:"addLink"},function(){x.format("attach-a-link")}),x.input(".attachment-add-link-input.js-attachment-url.js-autofocus",{type:"text",id:"addLink",placeholder:x.l("paste-any-link-here-ellipsis")}),x.div(".js-name-link.hide",function(){return x.label({for:"nameLink"},function(){x.format("link-name")}),x.input(".attachment-add-link-input.js-attachment-name",{type:"text",id:"nameLink",value:t})}),x.input(".js-add-attachment-url",{style:"margin: 0;",type:"submit",value:x.l("attach")}),x.hr(),x.p(".quiet.u-bottom",function(){x.format(s,i)})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return T(t,e),t.prototype.viewTitleKey="attach from",t.prototype.initialize=function(){return this.listenTo(l,"loaded",this.render)},t.prototype.events={"click .js-google-drive-attachment:not(.disabled)":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker","click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","change .js-attach-file":"startUpload","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown","keydown .js-attachment-name":"keydown","input .js-attachment-url":function(e){return this.$(".js-name-link").toggleClass("hide",!/\S/.test(r(e.currentTarget).val()))},'click a[href^="/gold"]':function(){return S("Attachment","Open Trello Gold Promo - via Attachment Upload Limit")},'click a[href^="/business-class"]':function(){return S("Card Detail","Attachments BC Ad")}},t.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v7.0/OneDrive.js"},t.prototype.getCard=function(){return this.model instanceof u?this.model:this.model.getCard()},t.prototype.getData=function(){var e,t,n;t=this._scripts;for(e in t)n=t[e],this._loadOnce(n,function(){})},t.prototype.render=function(){var e,t,n,r;return t=null!=(n=this.getCard().getBoard())?n.getOrganization():void 0,e={id:this.getCard().id,hasLargeAttachments:(null!=(r=a.me())?r.isFeatureEnabled("largeAttachments"):void 0)||(null!=t?t.isFeatureEnabled("largeAttachments"):void 0),googleDriveReady:l.loaded,defaultName:this.options.defaultName},null!=t&&t.isFeatureEnabled("plugins")||(e.tipKey="tip-you-can-attach-other-things-with-power-ups",e.tipData={url:"/power-ups?utm_source=trello&utm_medium=inapp&utm_content=attachments-menu&utm_campaign=power-ups"}),this.$el.html(j(e)),this},t.prototype.startUpload=function(e){var t,n,i,s;return t=r(e.target),n=this.$(".js-file-too-large").hide(),i=y.toArray(t[0].files),s=i.length>0?y.any(i,function(e){return!a.me().canUploadAttachment(e)})?h.reject(c()):h.resolve(i).each(function(e){return function(t){var n;return n=t.name||C(),k(e.getCard(),"upload",t,n).then(function(t){return e.trigger("attach",{mimeType:t.mimeType,name:e.options.defaultName||n,url:t.url})})}}(this)):k(g,"uploadFile",a.myToken(),t),s.then(function(){return S("Card Detail","Upload Attachment Complete - Via Picker"),o.show("finished uploading","info","AjaxQueueUpload",2e3),p.hide()}).catch(c,function(){return n.show(),S("Card Detail","Attachment","Upload Error - File Too Large")}).done()},t.prototype._loadOnce=function(e,t){return null==window._loadedScripts&&(window._loadedScripts={}),window._loadedScripts[e]?t():r.getScript(e,function(n){return function(){return window._loadedScripts[e]=!0,t()}}(this))},t.prototype.attachLinks=function(e,t,n){return t?h.resolve(t).call("map",n).each(function(t){return function(n){var r;return r=y.pick(n,"url","mimeType","name"),t.trigger("attach",r),i({url:"/1/cards/"+t.getCard().id+"/attachments",type:"post",data:r}).then(function(){return S("Card Detail","Upload "+e)}).catch(function(){})}}(this)).then(function(){return p.hide()}).done():void 0},t.prototype.openGoogleDriveFilePicker=function(e){return g.stop(e),k(gapi,"load","picker").then(function(){var e;return e=l.validToken(),k(l,"authorize",e)}).then(function(e){return function(t){var n,o;return n=new google.picker.DocsView,n.setIncludeFolders(!0),o=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(n).setOAuthToken(t).setCallback(function(t){return e.attachLinks("Google drive file",t.docs,w.id)}).build(),o.setVisible(!0),r("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return r(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)).done()},t.prototype.openDropboxFilePicker=function(e){g.stop(e),this._loadOnce(this._scripts.dropbox,function(e){return function(){Dropbox.init({appKey:window.dropboxClientAppKey}),Dropbox.choose({linkType:"preview",iframe:!0,success:function(t){return e.attachLinks("Dropbox file",t,function(e){return{url:e.link,name:e.name}})}}),r('iframe[src^="https://www.dropbox.com/chooser"]').parent().css("overflow","auto")}}(this))},t.prototype.openOneDriveFilePicker=function(e){g.stop(e),this._loadOnce(this._scripts.oneDrive,function(e){return function(){h.try(function(){return new h(function(e,t){var n;return n=window.OneDrive,n.open({clientId:window.oneDriveClientId,action:"share",multiSelect:!0,openInNewWindow:!0,success:function(t){return e(t.value)},cancel:function(){return e([])},error:function(e){return t(e)},advanced:{redirectUri:siteDomain+"/onedrive_callback_7.html"}})})}).then(function(t){return e.attachLinks("OneDrive file",t,function(e){return{url:e.webUrl,name:e.name}})}).done()}}(this))},t.prototype.openBoxFilePicker=function(e){return g.stop(e),this._loadOnce(this._scripts.box,function(e){return function(){var t,n;return t=new BoxSelect({clientId:window.boxClientId,linkType:"shared",multiselect:!0}),n=function(r){return t.unregister(t.SUCCESS_EVENT_TYPE,n),e.attachLinks("Box file",r,w.id)},t.success(n),t.launchPopup()}}(this))},t.prototype.keydown=function(e){return d.isSubmitEvent(e)?this.addUrl():void 0},t.prototype.addUrl=function(e){var t,n;n=this.$(".js-attachment-url").val().split(/\s+/),t=this.$(".js-attachment-name").val(),/\S/.test(t)||(t=void 0),n=y.filter(n,function(e){return/\S/.test(e)}),!y.isEmpty(n)&&n.length<10&&(p.pushView({view:f}),this.attachLinks("link",n,function(e){return{url:e,name:t}}))},t}(v)},{}],400:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(29),i=e(6),s=e(97),a=e(18),u=e(34),c=e(513),l=e(413),d=e(126),p=e(496),m=e(106),g=e(493),v=e(43),f=e(254),h=e(231),t.exports=m(l,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="copy card",t.prototype.initialize=function(e){var t;return this.onCopy=null!=(t=e.onCopy)?t:function(){}},t.prototype.showCurrentPosition=!0,t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData",'keydown textarea[name="name"]':"keydownEvent","click .js-submit":"submit","submit form":"submit"},t.prototype.render=function(){var e,t,n,o,i,s,a,u,c,l,d,p;for(t=this.model.toJSON(),t.numChecklists=this.model.checklistList.length,t.numMembers=t.idMembers.length,t.numLabels=null!=(c=null!=(l=t.idLabels)?l.length:void 0)?c:0,t.numAttachments=t.badges.attachments,t.numComments=t.badges.comments,t.numStickers=t.stickers.length,t.hasChecklists=t.numChecklists>0,t.hasMembers=t.idMembers.length>0,t.hasLabels=t.numLabels>0,t.hasAttachments=t.badges.attachments>0,t.hasComments=t.badges.comments>0,t.hasStickers=t.stickers.length>0,t.hasStuff=t.numChecklists+t.idMembers.length+t.numLabels+t.badges.attachments+t.badges.comments+t.stickers.length>0,t.loading=this.loading,t.organizations=r.me().getOpenBoardsByOrg(!0),d=t.organizations,n=0,i=d.length;i>n;n++)for(a=d[n],p=a.boards,o=0,s=p.length;s>o;o++)e=p[o],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:g.move_card_controls},this.$el.html(g.fill("card_copy",t,{editable:this.model.editable()},u)),this.updateBoardData(),this},t.prototype.getData=function(){return this.loading=!0,u.loadCardCopyData(this.model.get("idBoard"),this.model.id).finally(function(e){return function(){return e.loading=!1,e.render()}}(this)).done()},t.prototype.keydownEvent=function(e){s.getKey(e)===a.Enter&&(d.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,n,r,o;return d.stop(e),r=this.$('textarea[name="name"]'),""===r.val().trim()?void r.focus().select():(n=["due"],o=this.$("input:checkbox:checked").get().map(h.get("name")),t=n.concat(o),void this.model.copyTo({name:r.val().trim(),idList:this.$(".js-select-list").find("option:selected").val(),pos:this.$(".js-select-position").find("option:selected").val(),keepFromSource:t}).then(function(e){return function(){return c.hide(),e.onCopy(),v("Card","Copy Card")}}(this)))},t}(p))},{}],401:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(464),o=e(400),s=e(507),a=e(74),u=e(509),c=e(513),l=e(126),d=e(496),h=e(493),m=e(43),p=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="more",t.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-short-url, .js-email":function(e){return this.focusUrl(e.currentTarget)},"click .js-print":"printModel","click .js-export-json":"exportJSON"},t.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",this.render)},t.prototype.copyCard=function(e){m("Card Detail","Card Copy Button","Via More Menu"),c.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.focusUrl=function(e){return this.$(e).focus().select()},t.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})},t.prototype.deleteCardConfirm=function(e){s.pushView("delete card",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return u.hide(),e.model.destroy(),m("Card","Delete")}}(this)})},t.prototype.render=function(){var e,t;return t={dateAdded:l.idToDate(this.model.id).toISOString(),jsonURL:"/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+l.makeSlug(this.model.get("name"))+".json"},e=this.model.getBoard(),null!=e&&p.extend(t,{pLevelClass:r.getPermLevelIconClassForBoard(e),pLevelAltText:r.getPermLevelAltTextForBoard(e)}),this.$el.html(h.fillFromModel("card_detail_more_menu",this.model,t,{meta:h.card_menu_meta})),this.getShortLinkData(),a.update(this.el),this.focusUrl(this.$(".js-autofocus")[0]),this},t.prototype.deleteCard=function(e){l.stop(e),m("Card Detail","Delete Button","Via More Menu"),this.deleteCardConfirm()},t.prototype.printModel=function(e){l.stop(e),c.hide(),m("Card Detail","Print","Via More Menu"),this.defer(function(){return window.print()})},t.prototype.exportJSON=function(e){return m("Card Detail","Export JSON")},t}(d)},{}],402:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V,$,z,R,F,U,q,H,K,W,G,J,Q,Y,X,Z,ee,te,ne,re,oe,ie,se,ae,ue,ce,le,de,pe,he,me,fe,ge,ve,ye,be,we,_e,ke,Ce,xe=function(e,t){function n(){this.constructor=e}for(var r in t)je.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},je={}.hasOwnProperty,Se=[].slice;r=e("jquery"),o=e(271),i=e(415),s=e(506),a=e(289),u=e(399),c=e(456),l=e(29),d=e(457),p=e(458),h=e(73),m=e(400),f=e(401),v=e(500),y=e(404),b=e(405),w=e(406),_=e(418),k=e(460),C=e(507),x=e(6),j=e(409),S=e(74),T=e(509),e(466),M=e(510),B=e(469),O=e(470),L=e(410),P=e("hearsay"),E=e(292),A=e(97),D=e(18),I=e(195),N=e(504),V=e(511),$=e(268),z=e(557),R=e(33),F=e(34),U=e(107),q=e(624),H=e(626),K=e(480),W=e(483),G=e(635),J=e(513),Q=e("bluebird"),Y=e(650),X=e(114),Z=e(104),ee=e(126),te=e(146),ne=e("underscore"),le=e(231),de=e(472),fe=e(40),ge=e(106),ke=e(43),ve=e("moment"),pe=e(101),me=e(99),be=e(475),Ce=e(497),ye=e(129),ae=e(707),ie=e(709),oe=e(708),se=e(711),he=e(768),ue=e(712),ce=e(730),_e=e(130),we=e(484),re=function(e){return"["+e.get("name")+"]("+e.get("url")+") "},t.exports=ge(d,k,w,g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return xe(t,e),t.prototype.className="card-detail-window u-clearfix",t.prototype.defaultActionLimit=50,t.prototype.maxActionLimit=1e3,t.prototype.maximumCommentLength=16384,t.prototype.maxDescLength=1800,t.prototype.addListCloseEventListener=function(){var e,t,n;e=this.model.previous("idList"),e&&(this.stopListening(this.modelCache,"add:List:"+e),n=this.modelCache.get("List",e),this.stopListening(n,"change:closed")),t=function(e){return function(){return e.renderArchivedDebounced(),e.listenTo(e.model.getList(),{"change:closed":e.renderArchivedDebounced})}}(this),this.model.getList()?t():this.listenToOnce(this.modelCache,"add:List:"+this.model.get("idList"),t)},t.prototype.initialize=function(){var e,t;this.fEditingName=!1,this.makeDebouncedMethods("render","renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:idList":function(e){return function(){return e.renderListDebounced(),e.addListCloseEventListener()}}(this),"change:idMembersVoted":this.renderVotesDebounced,"change:due change:dueComplete":this.renderDueDateDebounced,"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){return this.renderCoverDebounced()},destroy:this.closeDialog}),this.addListCloseEventListener(),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced}),this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced}),this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,sort:this.sortChecklists}),this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced}),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing}),e=this.model.getBoard(),this.listenTo(e,{"change:labelNames":this.renderLabelsDebounced,"change:labels":this.renderLabelsDebounced,"change:prefs":function(e){var t,n;return t=function(t){var n,r;return(null!=(n=e.get("prefs"))?n[t]:void 0)!==(null!=(r=e.previous("prefs"))?r[t]:void 0)},t("cardCovers")&&this.renderCover(),n=t("cardAging")||t("comments")||t("voting"),n&&0===this.$(".editing").length?this.renderDebounced():void 0}}),this.subscribe(we(e,this.model),function(e){return function(){return e.renderAttachments()}}(this)),this.getData(),this.numAttachmentsProcessing=this.slot(0),this.watch("numAttachmentsProcessing",this.renderAttachmentsDebounced),this.fHideFullDescription=(null!=(t=this.model.get("desc"))?t.length:void 0)>this.maxDescLength,this.actionListView=this.collectionSubview(o,this.model.actionList,{renderOpts:{context:this.model,compact:!1}}),this.markNotificationsReadOnActive(),this.listenTo(R,"add:Notification",this.markNotificationsReadOnActive),this.listenTo(V,"cancelEdits",this.saveCommentDraft),r(window).on("beforeunload.CardDetailView-"+this.model.cid,le(this,"saveCommentDraft"))},t.prototype.remove=function(){this.saveCommentDraft(),r(window).off(".CardDetailView-"+this.model.cid),t.__super__.remove.apply(this,arguments)},t.prototype.markNotificationsReadOnActive=function(){"active"!==U.getStatus()||U.getHidden()?this.listenToOnce(U,"setStatus visibilitychange",this.markNotificationsReadOnActive):this.markRelatedNotificationsRead()},t.prototype.markRelatedNotificationsRead=function(){
var e,t,n,r,o;for(t=function(e){return function(t){var n,r;return t.get("unread")&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.model.id}}(this),o=this.modelCache.all("Notification"),e=0,n=o.length;n>e;e++)r=o[e],t(r)&&r.markRead()},t.prototype.events={"click .js-edit-labels":"editLabelsSidebar","click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribeToCard","click .js-unsubscribe":"unsubscribeFromCard","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar","click .js-more-menu":"showMoreMenu","keydown  .js-card-detail-title-input":"nameKeyDownEvent","focus    .js-card-detail-title-input":function(e){return this.startNameEditing({focus:!1})},"blur     .js-card-detail-title-input":"stopNameEditing","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-details-toggle-due-date-complete":"toggleDueDateComplete","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-desc-content.is-hide-full":"showFullDescription","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp","click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-show-all-actions":"showAllActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"commentInputEvent","mutated .js-new-comment-input":"commentInputEvent","click .js-add-comment:not(:disabled)":"submitComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention",click:"clickAwayFromComment","click .js-new-comment .js-comment-add-attachment":"commentAddAttachment","click .js-new-comment .js-comment-mention-member":"commentMentionMember","click .js-new-comment .js-comment-add-emoji":"commentAddEmoji","click .js-new-comment .js-comment-add-card":"commentAddCard","click .js-show-details":"showDetails","click .js-hide-details":"hideDetails","click a[href]":"interceptHighlightLink","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl","sortstop .js-checklist-list":"sortStop",shortcut:"shortcut",replyToAction:"replyToAction"},t.prototype.shortcut=function(e){var t,n,r,o,i,s,a;switch(t=this.model.getBoard(),n=this.model.editable(),o=l.isLoggedIn(),e){case D.Space:if(n&&t.hasActiveMembership(l.me()))return this.model.toggleMember(l.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case D.A:case D.M:if(n)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case D.E:if(n)return this.editDesc(),["E - Edit Description","Card Detail"];break;case D.L:if(n)return this._openEditLabelsSidebar({hideOnSelect:!1}),["L - Edit Labels","Card Detail"];break;case D.D:if(n)return null!=this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case D.C:case D.Delete:if(n)return this.archiveCard(),["C / Delete - Archive Card"];break;case D.T:if(n)return this.editTitle(),"T - Edit Title";break;case D.AngleRight:case D.Period:if(n)return this.model.moveToNextList(),"> - Move to Next List";break;case D.AngleLeft:case D.Comma:if(n)return this.model.moveToPrevList(),"< - Move to Previous List";break;case D._0:case D._1:case D._2:case D._3:case D._4:case D._5:case D._6:case D._7:case D._8:case D._9:if(n)return r=function(e){return function(t){return e._openEditLabelsSidebar({searchInit:t,hideOnSelect:!0})}}(this),N.setLabelFromKey(e,this.model,r),"0-9 - Toggle Specific Label";break;case D.V:if(t.canVote(l.me()))return this.model.toggleVote(),"V - Vote";break;case D.S:if(o)return a=this.model.get("subscribed"),this.model.subscribe(!a),["S - Subscribe",a?"Unsubscribe":"Subscribe"];break;case D.J:if(null!=(i=this.model.nextCard()))return x.showCardDetail(i,{isNavigating:!0}),"J - Down";break;case D.K:if(null!=(s=this.model.prevCard()))return x.showCardDetail(s,{isNavigating:!0}),"K - Up"}},t.prototype.incrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(le.add(e))},t.prototype.decrementNumAttachmentsProcessing=function(e){return null==e&&(e=1),this.numAttachmentsProcessing.update(le.sub(e))},t.prototype.getData=function(){this.loading=!0,this.$(".js-loading-card-actions").show(),this.waitForId(this.model,function(e){return function(){var t;return t=e.fShowAllActions?e.maxActionLimit:e.defaultActionLimit,Q.try(function(){return!l.isLoggedIn()||l.me().getShowDetails()?F.loadCardDetails(e.model.id,t):F.loadCardHideDetails(e.model.id,t)}).finally(function(){return e.loading=!1,e.$(".js-loading-card-actions").hide()}).then(function(){return e.renderShowAllActionsButton(),e.scrollToHighlight()}).done()}}(this))},t.prototype.scrollToHighlight=function(){var e,t,n;e=Date.now(),cancelAnimationFrame(this.scrollInterval),t=null,(n=function(r){return function(){var o,i;T.scrolledSince(e)||(null!=(o=r.$(".mod-highlighted")[0])&&(t||(i=o.getBoundingClientRect(),t=i.top<0?"top":i.top+i.height>window.innerHeight?"bottom":null),"top"===t?o.scrollIntoView(!0):"bottom"===t&&o.scrollIntoView(!1),e=Date.now()),r.scrollInterval=r.requestAnimationFrame(n))}}(this))()},t.prototype.render=function(){var e,t;return this.fShowAllAttachments=!1,this.fShowAllActions=!1,e=ne.extend(this.model.toJSON(),{canComment:this.model.getBoard().canComment(l.me()),canVote:this.model.getBoard().canVote(l.me()),canSubscribe:l.isLoggedIn(),canToggleDetails:l.isLoggedIn(),hasAttachments:this.model.attachmentList.length>0,me:l.me().toJSON(),loading:this.loading,editable:this.model.editable()}),e.showActions=e.canVote||e.canSubscribe,this.$el.html(ae(e)),this.actionListView.setElement(this.$(".js-list-actions")[0]),this.commentInput=this.$(".js-new-comment-input")[0],this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderLabels().renderAging().renderEditing().renderPluginBadges().renderPluginButtons(),e.canComment&&this.recallDrafts(),this.$(".js-card-detail-title-input").autosize({append:!1}),this.$(".js-new-comment-input").autosize(),"chrome"!==(t=h.browserStr)&&this.defer(ne.bind(this.fixSidebar,this)),S.update(this.el),this},t.prototype._commentDraftKey=function(){return"draft_"+this.model.id+"_comment"},t.prototype.recallDrafts=function(){var e;return e=X.get(this._commentDraftKey()),e&&this.$(".js-new-comment-input").val(e),this.renderCommentSubmitAbility(),t.__super__.recallDrafts.apply(this,arguments)},t.prototype.saveCommentDraft=function(){var e,t;e=this.$(".js-new-comment-input"),0!==e.length&&(t=e.val(),t?X.set(this._commentDraftKey(),t):X.unset(this._commentDraftKey()))},t.prototype.saveCardName=function(){var e,t,n;e=this.$(".js-card-detail-title-input"),n=e.val(),t=this.model.get("name"),n=n.replace(/\s+/g," ").trim(),n!==t&&(n.length>16384||0!==n.trim().length&&this.model.update("name",n))},t.prototype.nameKeyDownEvent=function(e){A.getKey(e)===D.Enter&&(ee.stop(e),this.stopNameEditing()),A.getKey(e)===D.Escape&&(ee.stop(e),this.stopNameEditing())},t.prototype.startNameEditing=function(e){var t;null==e&&(e={}),this.fEditingName||(t=this.$(".js-card-detail-title-input"),this.fEditingName=!0,t.addClass("is-editing"),e.focus&&t.focus().select())},t.prototype.stopNameEditing=function(e){var t;this.fEditingName&&(this.fEditingName=!1,t=this.$(".js-card-detail-title-input").removeClass("is-editing"),t.blur(),_e(),this.saveCardName())},t.prototype.setRelativeSidebarPos=function(){return this.fFixed=!1,this.fRelative=!0,this.$(".window-sidebar").css({left:"",top:"",position:"relative"})},t.prototype.setFixedSidebarLeftPos=function(){var e,t;return this.fFixed?(t=parseFloat(r(".window").offset().left),e=t+r(".window").width()-this.$(".window-sidebar").outerWidth(),this.$(".window-sidebar").css({left:e})):void 0},t.prototype.setFixedSidebarPos=function(){return this.fFixed=!0,this.fRelative=!1,this.setFixedSidebarLeftPos(),this.$(".window-sidebar").css({top:0,position:"fixed"})},t.prototype.fixSidebar=function(){var e,t,n,o,i;e=r(".window-overlay").off("scroll.fixSidebar"),this.fFixed=!1,this.fRelative=!1,t=parseInt(r(".window").css("margin-top")),n=parseInt(this.$(".window-sidebar").css("padding-top")),i=function(o){return function(){var i,s,a,u,c,l;a=o.$(".window-header").outerHeight(),s=null!=(u=o.$(".window-cover:visible").outerHeight())?u:0,i=null!=(c=o.$(".window-archive-banner:visible").outerHeight())?c:0,l=t+a+s+i+n,e.scrollTop()<=l||te.fSmall||o.$(".window-sidebar").height()>r(window).height()?o.fRelative||o.setRelativeSidebarPos():o.fFixed||o.setFixedSidebarPos()}}(this),o=this.throttle(i,32),e.on("scroll.fixSidebar",o)},t.prototype.editDesc=function(e){ee.stop(e),this.showFullDescription(),this.edit("desc")},t.prototype.showFullDescription=function(e){this.fHideFullDescription=!1,r(".js-desc-content").removeClass("is-hide-full")},t.prototype.editTitle=function(e){this.startNameEditing({focus:!0})},t.prototype.archiveCard=function(e){this.model.close(),ke("Card Detail","Sidebar","Archive Button")},t.prototype.unarchiveCard=function(e){ke("Card Detail","Sidebar","Re-Open Button"),this.model.reopen()},t.prototype.deleteCardSidebar=function(e){C.toggle("delete card",{elem:e.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return T.hide(),e.model.destroy(),ke("Card","Delete")}}(this)}),ke("Card Detail","Sidebar","Open Delete Confirm")},t.prototype.showMoreMenu=function(e){ee.stop(e),J.toggle({elem:this.$(".js-more-menu"),view:f,options:{model:this.model,modelCache:this.modelCache}}),ke("Card Detail","Sidebar","Open More Menu")},t.prototype.openCoverInViewer=function(e){var t;ee.stop(e),this.showCover()&&(t=this.model.attachmentList.get(this.model.get("idAttachmentCover")),c.isActive()||(c.show({model:this.model,attachmentModel:t}),ke("Card Detail","Open Attachment Viewer via Cover",t.getType())))},t.prototype.openMoveMenu=function(e){J.toggle({elem:e,view:b,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openMoveFromHeader=function(e){ee.stop(e),this.openMoveMenu(this.$(".js-open-move-from-header"),20),ke("Card Detail","Move Button (via Header)")},t.prototype.moveCard=function(e){ee.stop(e),this.openMoveMenu(this.$(".js-move-card"),35),ke("Card Detail","Sidebar","Open Move Menu")},t.prototype.copyCard=function(e){ee.stop(e),J.toggle({elem:this.$(".js-copy-card"),view:m,options:{model:this.model,modelCache:this.modelCache}}),ke("Card Detail","Sidebar","Open Copy Menu")},t.prototype.openLabelsPopOver=function(e,t){J.toggle({elem:e,view:v,options:ne.extend({model:this.model,modelCache:this.modelCache},t)})},t.prototype.editLabelsMainSingleLabel=function(e){ee.stop(e),this.openLabelsPopOver(this.$(e.target).closest(".card-label")),ke("Card Detail","Edit Labels Main Column - Single Label")},t.prototype.editLabelsMain=function(e){ee.stop(e),this.openLabelsPopOver(this.$(".js-details-edit-labels")),ke("Card Detail","Edit Labels Main Column - Plus Button")},t.prototype.editLabelsSidebar=function(e){return ee.stop(e),ke("Card Detail","Sidebar","Edit Labels Button"),this._openEditLabelsSidebar()},t.prototype._openEditLabelsSidebar=function(e){return this.openLabelsPopOver(this.$(".js-edit-labels"),e)},t.prototype.showVotes=function(e){ee.stop(e),J.toggle({elem:this.$(".js-show-votes"),view:z,options:{model:this.model,modelCache:this.modelCache}}),ke("Card Detail","Header Vote Button")},t.prototype.doClicks=function(){return!M.sorting},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.checkShowCover=function(){var e,t;e=this.showCover(),t=this.model.hasStickers(),e?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("is-covered"):t?this.$(".js-card-cover-box").removeClass("hide is-covered").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide")},t.prototype.clearCover=function(){var e;return this.$(".js-card-cover-box").css({"background-color":"","background-image":""}),e=["dialog-close-button-light","dialog-close-button-dark"],r(".dialog-close-button").removeClass(e.join(" "))},t.prototype.renderCover=function(){var e,t,n,o,i,s,a,u,c,l,d,p,m,f,g,v,y,b,w,_;return this.clearCover(),this.showCover()&&(i=this.model.attachmentList.get(this.model.get("idAttachmentCover")),o=40,t=160,n=730,null!=i&&(h.isHighDPI()?(f=2*n,m=2*t):(f=n,m=t),v=i.get("previews"),g=null!=(b=ee.previewBetween(v,0,m,f,1/0))?b:ee.biggestPreview(v),c=null!=g?g.url:i.get("url"),e=this.$(".js-card-cover-box"),null!=(l=i.get("edgeColor"))&&(w=l.match(/[0-9a-f]{2}/gi).map(function(e){return parseInt(e,16)}),y=w[0],d=w[1],a=w[2],e.css("background-color","rgb("+y+", "+d+", "+a+")"),s=(y+d+a)/3,s>150?u="dark":105>s&&(u="light"),null!=u&&r(".dialog-close-button").addClass("dialog-close-button-"+u)),p=Math.max(o,Math.min(null!=(_=null!=g?g.height:void 0)?_:t,t)),this.$(".js-card-cover-box").css({"background-image":'url("'+c+'")',height:p,"background-size":(null!=g?g.height:void 0)<p?"initial":"contain"}))),this.checkShowCover(),this},t.prototype.renderPluginButtons=function(){var e;return e=this.subview(q,this.model),this.appendSubview(e,this.$(".js-plugin-buttons")),this},t.prototype.renderPluginBadges=function(){var e;return e=this.subview(H,this.model),this.appendSubview(e,this.$(".js-plugin-badges")),this},t.prototype.renderStickers=function(){var e,t,n,r,o;return e=this.$(".js-display-stickers").empty(),r=this.model.stickerList.models,t=r.length>0,t&&(o=function(){var e,t,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(this.subview(Y,n,{board:this.model}));return o}.call(this),this.appendSubviews(o,e)),this.checkShowCover(),this},t.prototype.renderName=function(){var e,t;return t=this.model.get("name"),e=this.model.getBoard().get("name"),this.$(".js-title-helper").text(t),this.fEditingName||this.$(".js-card-detail-title-input").val(t).trigger("autosize.resize",!1),x.title(pe("card detail title",{cardName:t,boardName:e},{raw:!0})),this},t.prototype.renderDescription=function(){var e,t,n,o;return t=this.model.get("desc"),n=Z.description.format(null!=t?t:"",{textData:this.model.get("descData")}).output,e=this.$(".js-card-desc"),e.empty().append(n).data("unmarkeddown",t),de(e[0],this.model.getBoard()),o=!/^\s*$/.test(n),this.$(".js-show-with-desc").toggleClass("hide",!o),this.$(".js-hide-with-desc").toggleClass("hide",o),r(".js-desc-content").toggleClass("is-hide-full",this.fHideFullDescription),this},t.prototype.renderList=function(){var e;return e=this.model.getList(),null!=e&&this.$(".js-current-list").removeClass("hide").html(ie({listName:e.get("name"),editable:this.model.editable()})),this},t.prototype.renderArchived=function(){var e,t,n,r,o;return e=this.model.get("closed")===!0,t=(null!=(n=this.model.getList())?n.get("closed"):void 0)===!0,r=e,o=!e&&t,this.$(".js-archive-banner").toggleClass("hide",!r),this.$(".js-archived-list-banner").toggleClass("hide",!o),this.$(".js-archive-card").toggleClass("hide",e),this.$(".js-unarchive-card").toggleClass("hide",!e),this.$(".js-delete-card").toggleClass("hide",!e),this},t.prototype.showAllActions=function(e){return this.fShowAllActions=!0,this.renderShowAllActionsButton(),this.getData()},t.prototype.renderShowAllActionsButton=function(){var e,t,n,r;return r=!l.isLoggedIn()||l.me().getShowDetails(),e=this.model.actionList.filter(function(e){return r?!0:e.isCommentLike()}),n=e.length>=this.defaultActionLimit,t=this.fShowAllActions||!n,this.$(".js-show-all-actions").toggleClass("hide",t)},t.prototype.renderActionList=function(){var e;return e=!l.isLoggedIn()||l.me().getShowDetails(),this.actionListView.setShowDetails(e),this.waitForId(this.model,function(e){return function(){return e.actionListView.render()}}(this)),this.$(".js-show-details").toggleClass("hide",e),this.$(".js-hide-details").toggleClass("hide",!e),this},t.prototype.renderMembers=function(e){var t,n,r,o;return t=this.$(".js-card-detail-members-list").empty(),o=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models,r=function(){var e,t,r;for(r=[],e=0,t=o.length;t>e;e++)n=o[e],r.push(this.getMemberOnCardHtml(n));return r}.call(this).join(""),t.html(r),this.model.editable()&&t.append(oe({klass:"js-details-edit-members"})),this.$(".js-card-detail-members").toggleClass("hide",0===o.length),this},t.prototype.renderLabels=function(){var e,t,n,r,o;return t=this.model.getLabels().sort(I.compare),e=this.$(".js-card-detail-labels-list").empty(),o=function(){var e,o,i;for(i=[],e=0,o=t.length;o>e;e++)r=t[e],n=this.model.dataForLabel(r),n.extraClasses=["mod-card-detail"],this.model.editable()&&n.extraClasses.push("mod-clickable"),i.push(he(n));return i}.call(this),e.append(o),this.model.editable()&&e.append(oe({klass:"js-details-edit-labels"})).addClass("js-edit-label"),this.$(".js-card-detail-labels").toggleClass("hide",0===t.length),this},t.prototype.renderSubscribe=function(){var e,t,n;return e=this.$(".js-subscribe-sidebar-button"),t={subscribed:this.model.get("subscribed")||(null!=(n=this.model.get("badges"))?n.subscribed:void 0)},e.html(se(t)),this.$(".js-subscribed-indicator-header").toggleClass("hide",!t.subscribed),this},t.prototype.renderAging=function(){var e,t,n,r;return n=this.model.getBoard(),t=n.isPowerUpEnabled("cardAging"),e=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses()),t&&(r=this.model.getAgingData(),e.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===r.mode&&e.addClass(r.agingClassesToAdd),S.update(this.$(".js-card-detail-age"))),this.$(".js-card-detail-age").toggleClass("hide",!t),this},t.prototype.renderDueDate=function(){var e,t,n,r,o,i;return n=this.model.get("due"),r=this.model.get("dueComplete"),n?(i=ve(n).calendar(),o=B.relativeInfoForDueDate(n,r),null!=o&&(i+=" ("+o+")"),t=[],t.push(B.classForDueDate(n,r)),this.model.editable()&&t.push("is-clickable"),e=this.$(".js-card-detail-due-date-badge").removeClass(function(e,t){return(t.match(/is-due-\S+/g)||[]).join(" ")}).addClass(t.join(" ")).attr("title",B.titleForDueDate(n,r)),e.find(".js-date-text").text(i).toggleClass("js-details-edit-due-date",this.model.editable()),e.find(".js-card-detail-due-date-badge-complete").toggleClass("js-details-toggle-due-date-complete",this.model.editable()),this.$(".js-card-detail-due-date").removeClass("hide"),this):(this.$(".js-card-detail-due-date").addClass("hide"),this)},t.prototype.renderVotes=function(){var e,t,n,r,o,i,s;return t={voted:this.model.voted(),canVote:this.model.getBoard().canVote(l.me())},e=this.$(".js-vote-sidebar-button"),e.html(ue(t)),n=null!=(r=null!=(o=this.model.get("badges"))?o.votes:void 0)?r:0,n&&this.$(".js-card-detail-votes-badge").text(me("votes",n)).toggleClass("is-voted",null!=(i=null!=(s=this.model.get("badges"))?s.viewingMemberVoted:void 0)?i:!1),this.$(".js-card-detail-votes").toggleClass("hide",0===n),this},t.prototype.sortChecklists=function(){var e;return e=this.$(".js-checklist-list"),ee.withoutAlteringSelection(function(t){return function(){return t.model.checklistList.forEach(function(n){var r;return r=t.existingSubview(_,n),e.append(r.el)})}}(this)),this},t.prototype.removeChecklist=function(e){return this.deleteSubview(this.existingSubview(_,e))},t.prototype.renderChecklists=function(){var e,t,n,o;return fe("render","rendering checklists"),e=this.$(".js-checklist-list").empty(),o=function(){var e,n,r,o;for(r=this.model.checklistList.models,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(this.subview(_,t,{card:this.model}));return o}.call(this),this.appendSubviews(o,e),M.refreshIfInitialized(e),(null!=(n=this.model)?n.editable():void 0)&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:75,distance:7,tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(e,t){var n;return n=r(t.helper).outerHeight(),r(t.placeholder).height(n)}}),this},t.prototype.showFewerAttachments=function(e){ee.stop(e),this.fShowAllAttachments=!1,this.renderAttachments()},t.prototype.showMoreAttachments=function(e){ee.stop(e),this.fShowAllAttachments=!0,this.renderAttachments()},t.prototype.renderAttachments=function(){var e,t;return null!=(t=this._renderAttachmentsPromise)&&t.cancel(),e=ne.clone(this.model.attachmentList.models),this._renderAttachmentsPromise=Q.try(function(t){return function(){return W.all({timeout:5e3,command:"attachment-sections",card:t.model,board:t.model.getBoard(),options:{entries:K.attachments(e)}})}}(this)).cancellable().then(function(t){return function(n){var r,o,i,s,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x;return d={},x={},u=t.$(".js-plugin-sections"),C=function(){var e,t,r,o,i,s,a;for(a=[],e=0,r=n.length;r>e;e++)if(w=n[e],(null!=w&&null!=(i=w.claimed)?i.length:void 0)>0){for(s=w.claimed,t=0,o=s.length;o>t;t++)p=s[t],d[p.id]=!0;k=w.id||w.title,(ne.isFunction(k)||x[k])&&(k=ne.uniqueId("attachment-section_")),x[k]=!0,_=this.subview(G,this.model,{},k),_.updateSection(w),a.push(_)}return a}.call(t),t.ensureSubviews(C,u),b=ne.reject(e,function(e){return d[e.id]}),g=4,h=b.length>0,c=b.slice(0,g),m=b.length>g,o=t.$(".js-attachments-section"),r=o.find(".js-attachment-list"),f=(b.length-g).toString(),o.find(".js-view-all-attachments").text(pe("view all attachments",{hiddenCount:f})),i=o.find(".js-show-fewer-attachments").addClass("hide"),s=o.find(".js-show-more-attachments").addClass("hide"),y=(v=t.numAttachmentsProcessing.get())?ne.times(Math.min(3,v),function(e){return t.subview(E,t.model,null,"processing-"+e)}):[],l=h?(m?t.fShowAllAttachments?(i.removeClass("hide"),c=t.model.attachmentList.models):s.removeClass("hide"):void 0,c.map(function(e){return t.subview(a,e,{onReply:function(){return t.replyToAttachment(e)}})})):[],C=Se.call(y).concat(Se.call(l)),t.ensureSubviews(C,r),o.toggleClass("hide",ne.isEmpty(C))}}(this)).catch(Q.CancellationError,function(){}),this._renderAttachmentsPromise.done(),this},t.prototype.renderEditing=function(){var e,t,n,r;return r=this.model.memberEditingList.models,e={members:function(){var e,o,i;for(i=[],e=0,o=r.length;o>e;e++)t=r[e],l.isMe(t)||null==t.get("editing")||(n=t.toJSON(),n.icon=function(){switch(t.get("editing").action){case"commenting":return"comment";case"editing":return"edit";default:return"edit"}}(),i.push(n));return i}()},this.$(".js-editing-members").empty().append(ce(e)).toggleClass("hide",0===e.members.length),this},t.prototype.sortStop=function(e,t){ee.stopPropagation(e),t.item.trigger("movechecklist",[t])},t.prototype.keydownEvent=function(e){return t.__super__.keydownEvent.apply(this,arguments),l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})},t.prototype.keydownCommentEvent=function(e){var t;return l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"}),t=A.getKey(e),t!==D.Tab||!r(e.target).hasClass("new-comment-input")||!this.model.editable()||J.view instanceof p||""!==r(e.target).val()||(ee.stop(e),this.submitComment(e)),A.isForceSubmitEvent(e)&&!this._isCommentTooLong()?this.submitComment(e):this.checkInsert(e)},t.prototype._isCommentTooLong=function(){return this.$(".js-new-comment-input").val().length>this.maximumCommentLength},t.prototype.renderCommentSubmitAbility=function(e){var t,n;return t=this._isCommentTooLong(),n=0===this.$(".js-new-comment-input").val().length,this.$(".js-add-comment").prop("disabled",n||t),this.$(".comment-too-long-warning").toggleClass("is-shown",t),this.$(".comment-too-long-warning").find(".js-attach-comment").toggle("undefined"!=typeof Blob&&null!==Blob),this},t.prototype._cancelEditing=function(){return l.me().editing({idBoard:this.model.getBoard().id})},t.prototype.commentInputEvent=function(e){return this.renderCommentSubmitAbility(),this},t.prototype.clearComment=function(){var e;return e=r(this.commentInput),e.val("").css("height",""),this.renderCommentSubmitAbility()},t.prototype.submitComment=function(e){var t,n;return ke("Card Detail","Comment","Submit Comment"),ee.stop(e),t=r(this.commentInput),n=t.val(),this.clearComment(),this._cancelEditing(),this.model.addComment(n),V.cancelEdits(),this.collapseComment(),this.renderCommentSubmitAbility(),J.hide(),!1},t.prototype.clearEdits=function(){return this._cancelEditing(),t.__super__.clearEdits.apply(this,arguments)},t.prototype.commitEdits=function(){return this._cancelEditing(),t.__super__.commitEdits.apply(this,arguments)},t.prototype.stopEditing=function(){return this._cancelEditing(),t.__super__.stopEditing.apply(this,arguments)},t.prototype.truncateComment=function(e){var t;return t=this.$(".js-new-comment-input"),t.val(t.val().substr(0,this.maximumCommentLength)),this.$(".js-new-comment-input").autosize(),this.renderCommentSubmitAbility()},t.prototype.attachComment=function(e){var t;return t=new Blob([this.$(".js-new-comment-input").val()],{type:"text/plain"}),this.incrementNumAttachmentsProcessing(),this.model.upload(t,"comment.txt",this.callback(function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this))),this.clearComment(),V.cancelEdits(),this.collapseComment()},t.prototype.inputComment=function(e){var t;t=this.$(".js-new-comment"),V.cancelEdits(this.commentInput),t.addClass("is-focused")},t.prototype.clickAwayFromComment=function(e){var t,n;if(!J.isVisible&&(n=e.target,t=this.$(".js-new-comment"),!r(n).closest(t).length||0!==n.children.length))return this.collapseComment()},t.prototype.collapseComment=function(){return this.$(".js-new-comment").removeClass("is-focused")},t.prototype.replyToAction=function(e,t){var n,r,o,i,s,a,u;i=this.modelCache.get("Member",t.get("idMemberCreator")),u=null!=i?i.get("username"):void 0,n=this.$(this.commentInput),a=t.isCommentLike()&&null!=u?(V.cancelEdits(this.commentInput),RegExp("@"+u+"(\\W|$)").test(n.val())?(n.focus(),null):"@"+u+" "):t.isAddAttachment()&&null!=(r=this.model.attachmentList.get(null!=(s=t.get("data").attachment)?s.id:void 0))?(o=re(r),l.isMe(i)?o:["@"+u,o].join(" ")):void 0,a&&(n.addClass("is-focused"),ee.insertSelection(n,a),n.trigger("autosize.resize"))},t.prototype.replyToAttachment=function(e){var t;return V.cancelEdits(this.commentInput),t=this.$(this.commentInput),t.addClass("is-focused"),ee.insertSelection(t,re(e)),t.trigger("autosize.resize")},t.prototype.getCard=function(){return this.model},t.prototype.getTextInput=function(){return this.$(".js-new-comment-input")},t.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},t.prototype.openEditMembersPopOver=function(e){J.toggle({elem:e,view:y,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.editMembersMain=function(e){ee.stop(e),this.openEditMembersPopOver(this.$(".js-details-edit-members")),ke("Card Detail","Edit Members via Main Column")},t.prototype.changeMembersSidebar=function(e){ee.stop(e),this.openEditMembersPopOver(this.$(".js-change-card-members")),ke("Card Detail","Sidebar","Open Manage Member Menu")},t.prototype.addChecklistSidebar=function(e){return ee.preventDefault(e),J.toggle({elem:e.target,view:i,options:{model:this.model,modelCache:this.modelCache,cardView:this}}),ke("Card Detail","Add Checklist Button","Open Add Checklist Menu"),!1},t.prototype.showDueDateBadgeMenu=function(e){ee.stop(e),J.toggle({elem:this.$(".js-details-edit-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),ke("Card Detail","Due Date Badge","Open Due Date Menu")},t.prototype.toggleDueDateComplete=function(e){var t;return t=!this.model.get("dueComplete"),this.model.update({dueComplete:t}),ke("Card Detail","Due Date Badge",t?"Marked Complete":"Marked Incomplete")},t.prototype.openAttachPicker=function(e){var t,n;return ee.stop(e),t=r(e.target).closest(".js-attach"),J.toggle({elem:t,view:u,options:{model:this.model,modelCache:this.modelCache}}),n=r(t).hasClass("inline")?"Inline":"Sidebar",ke("Card Detail","Open Attachment Type Picker","Via "+n+" Button"),!1},t.prototype.dueDateSidebar=function(e){return ee.preventDefault(e),J.toggle({elem:this.$(".js-add-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),ke("Card Detail","Sidebar","Open Due Date Menu"),!1},t.prototype.subscribeToCard=function(e){return this.model.subscribe(!0),ke("Card Detail","Sidebar","Subscribe"),!1},t.prototype.unsubscribeFromCard=function(e){return this.model.subscribe(!1),ke("Card Detail","Sidebar","Unsubscribe"),!1},t.prototype.vote=function(e){return ee.preventDefault(e),this.model.vote(!0),ke("Card Detail","Sidebar","Vote"),!1},t.prototype.unvote=function(e){return ee.preventDefault(e),ke("Card Detail","Sidebar","Unvote"),this.model.vote(!1),!1},t.prototype.openFormatHelp=function(e){return ke("Card Detail","Formatting Help"),J.toggle({elem:this.$(".js-format-help"),view:L,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1},t.prototype.dragenter=function(e){var t;if(this.model.editable())return this.$el.addClass("is-drophover"),t=r(".window-overlay").scrollTop()+200,this.$(".dropzone").css({"padding-top":t+"px"})},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t,n;if(this.model.editable()&&(ke("Card Detail","Drop Attachment Upload"),t=e.detail,!Ce(this.model.getBoard(),t)))return this.incrementNumAttachmentsProcessing(t.length),n=R.lock("card drop files"),Q.resolve(t).each(function(e){return function(t){var n;return n=t.name||be(),ye(e.model,"upload",t,n).finally(e.callback(function(){return e.decrementNumAttachmentsProcessing()}))}}(this)).catch(function(){}).finally(function(){return R.unlock(n)}).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t;if(this.model.editable())return ke("Card Detail","Drop Attachment Url"),t=e.detail,this.incrementNumAttachmentsProcessing(),this.model.uploadUrl(t,this.callback(function(e){return function(){return e.decrementNumAttachmentsProcessing()}}(this))),e.stopPropagation()},t.prototype.focusChecklistAdd=function(e){return this.existingSubview(_,e).focusNewTaskInput()},t.prototype.closeDialog=function(){return T.hide()},t.prototype.highlight=function(e,t){var n,r,o,i;if(null!=(o=/^([a-z]+)-([a-f0-9]{24})$/.exec(e)))switch(n=o[0],i=o[1],r=o[2],i){case"action":case"comment":this.actionListView.setHighlight(r),this.model.actionList.get(r)||this.showAllActions(),t&&this.scrollToHighlight()}},t.prototype.interceptHighlightLink=function(e){var t,n,r,o,i;e.target.href&&(i=ee.relativeUrl(e.target.href),n=x.getCardUrl(this.model),null!=(o=RegExp("^"+n+"\\#([^\\#]+)$").exec(i))&&(t=o[0],r=o[1],r&&(ee.stop(e),r===location.hash.substr(1)?(history.replaceState(null,null,location.pathname),this.actionListView.setHighlight(null)):(history.replaceState(null,null,location.pathname+"#"+r),this.highlight(r,!0)))))},t.prototype.showDetails=function(e){return ee.stop(e),l.me().setShowDetails(!0),this.getData(),this.renderActionList()},t.prototype.hideDetails=function(e){
return ee.stop(e),l.me().setShowDetails(!1),this.getData(),this.renderActionList()},t}(O))},{}],403:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},v={}.hasOwnProperty;r=e("jquery"),o=e(73),s=e(408),a=e(465),u=e(510),c=e(514),d=e(496),p=e("underscore"),f=e(40),l=e("bluebird"),m=e(231),h=function(e,t){var n;for(e=p.clone(e),n=[];e.length>0;)n.push(e.splice(0,t));return n},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return g(t,e),t.prototype.viewType=s,t.prototype.getModels=function(){return this.collection.models},t.prototype.render=function(){return f("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.options.deferCards?c.enqueue("deferredCardList_"+this.cid,function(e){return function(){return e.progressiveRender()}}(this)):this.progressiveRender(),this},t.prototype.progressiveRender=function(){var e;return e=Math.max(10,Math.ceil(window.innerHeight/32)),l.resolve(h(this.getModels(),e)).each(function(e){return function(t){var n;return e.appendSubviews(function(){var e,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(this.subview(this.viewType,n));return o}.call(e)),new l(m(e,"defer"))}}(this)).tap(function(e){return function(){var t;"chrome"!==(t=o.browserStr)&&"firefox"!==t&&"opera"!==t&&"windows"===o.osStr&&(e.defer(function(){return r("#board").css("bottom",1)}),e.setTimeout(function(){return r("#board").css("bottom",0)},150))}}(this)).done()},t.prototype.insertSubview=function(e,t,n){var r;return null==n&&(n=this.$el),f("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?n.children().eq(0):t<n.children().length?n.children().eq(t):void 0:t instanceof d&&(t=t.$el),r=e.model,e.$el.is(":empty")?(e.delegateEvents(),e.render()):n.hasClass("hide")||r.getBoard().filter.satisfiesFilter(r)||e.renderFiltered(),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):n.append(e.$el),u.refreshIfInitialized(this.$el)},t}(a)},{}],404:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(157),a=e(97),u=e(18),c=e(33),l=e(34),d=e("bluebird"),p=e(562),h=e(126),m=e(496),f=e("underscore"),g=e(855),v=e(43),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){return this.showAllOrgMembers=!1,this.updateSearch=f.debounce(this.updateSearch,100),this.makeDebouncedMethods("renderMems"),null!=this.model.memberList&&this.listenTo(this.model.memberList,"add remove reset",function(e){return function(){return e.updateOrdering(),e.renderMemsDebounced()}}(this)),this.updateOrdering()},t.prototype.events={"click .js-select-member":"selectMem","click .js-show-org-members":"showOrgMembers","mouseenter .pop-over-member-list .item":"hoverMemberSelect",input:"updateSearch",keydown:"keydownEvent"},t.prototype.updateOrdering=function(){var e;return this._onCardMembers={},this._onListMembers={},this._onBoardMembers={},e=function(e,t){return t.memberList.forEach(function(t){return e[t.id]=!0})},this.model instanceof i&&e(this._onCardMembers,this.model),this.model.getList().cardList.forEach(e.bind(null,this._onListMembers)),this.model.getBoard().listList.forEach(function(t){return function(n){return n.cardList.forEach(e.bind(null,t._onBoardMembers))}}(this))},t.prototype.render=function(){var e;return e=this.model.getBoard(),this.$el.html(g({includeOrgMembers:null!=e.getOrganization()&&e.canInviteMembers()})),this.renderMems()},t.prototype.getSearch=function(){return this.$(".js-search-mem").val().trim()},t.prototype.filteredMembers=function(e,t){var n;return n=RegExp("^"+h.escapeForRegex(t.toLowerCase())),f.chain(e).filter(function(e){return function(e){var t;return t=h.getMemNameArray(e),f.find(t,function(e){return n.test(e)})}}(this)).first(8).value()},t.prototype.filteredBoardMembers=function(e){var t,n,r,i;return n=this.model.getBoard(),r=this.model.getList(),t=n.memberList.filterDeactivated({force:!0}),i=t.sortBy(function(e){return function(t){var n;return n=o.isMe(t)?0:e._onCardMembers[t.id]?1:e._onListMembers[t.id]?2:e._onBoardMembers[t.id]?3:4,n+t.get("fullName")}}(this)),e?this.filteredMembers(i,e):i},t.prototype.filteredOrgMembers=function(e){var t;return this.showOrgSection()?(t=this.model.getBoard().getOrganization(),null==this.orgMembersPromise&&(this.orgMembersPromise=l.loadOrganizationMembersData(t.id)),this.orgMembersPromise.then(function(n){return function(r){var o,i;return o=(i=t.memberList.filterDeactivated({force:!0})).without.apply(i,n.model.getBoard().memberList.models),e?n.filteredMembers(o,e):o}}(this))):[]},t.prototype.hasSearch=function(){return""!==this.getSearch()},t.prototype.showOrgSection=function(){var e;return e=this.model.getBoard().getOrganization(),null!=e&&(this.showAllOrgMembers||this.hasSearch())},t.prototype.renderMems=function(){var e,t,n,r,o,i;return i=this.getSearch(),e=this.filteredBoardMembers(i),t=this.filteredOrgMembers(i),r={".js-board-members":e,".js-org-members":t},o=this.showOrgSection(),this.$(".js-show-org-members").toggleClass("hide",o),this.$(".js-org-members").toggleClass("hide",!o),null!=(n=this._renderMemsPromise)&&n.cancel(),this._renderMemsPromise=d.each(f.keys(r),function(e){return function(t){var n,o,i;return i=e.$(t),0!==i.length?(n=i.find(".js-loading"),o=i.find(".js-no-results"),n.removeClass("hide"),o.addClass("hide"),d.resolve(r[t]).then(function(t){var r,s,a;return n.addClass("hide"),r=i.find(".js-mem-list"),r.toggleClass("collapsed",t.length>9),o.toggleClass("hide",t.length>0),a=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)s=t[e],r.push(this.subview(p,s,{showUnconfirmed:!0,card:this.model}));return r}.call(e),e.ensureSubviews(a,r)})):void 0}}(this)).cancellable().then(function(e){return function(){var t;return e.hasSearch()&&(t=e.$el.find(".item").first(),t.length>0)?h.selectMenuItem(e.$el,".item",t):void 0}}(this)).done(),this},t.prototype.hoverMemberSelect=function(e){return h.selectMenuItem(this.$el,".item",e.currentTarget)},t.prototype.keydownEvent=function(e){var t;t=a.getKey(e),t===u.Tab||t===u.Enter?(h.stop(e),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),this.$(".js-search-mem").val(""),this.focusSearch(),this.renderMems()):(t===u.ArrowUp||t===u.ArrowDown)&&(h.stop(e),h.navMenuList(this.$el,".item",t))},t.prototype.updateSearch=function(e){return this.renderMems(),this.focusSearch()},t.prototype.selectMem=function(e){var t,n,o,i,s,a;h.stop(e),a=this.model,n=r(e.currentTarget),t=n.closest(".item"),i=n.attr("idMember"),t.hasClass("active")?(a.removeMember(i),t.removeClass("active"),v("Card","Change Member","Remove Member")):(o=this.model.getBoard(),s=c.get("Member",i),d.try(function(){return o.hasActiveMembership(s)?void 0:d.fromNode(function(e){return o.addMember(s,e),v("Card","Add Member to Board and Card")})}).then(function(){return a.addMember(i),t.addClass("active"),v("Card","Change Member","Add Member")}).done()),this.focusSearch()},t.prototype.focusSearch=function(){this.$(".js-search-mem").focus()},t.prototype.showOrgMembers=function(e){this.showAllOrgMembers=!0,this.renderMems()},t}(m)},{}],405:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(210),o=e(29),s=e(509),a=e(30),u=e(513),c=e(413),l=e(496),d=e(106),p=e(493),h=e(43),t.exports=d(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="move card",t.prototype.initialize=function(e){var t;return t=e.onCommit,this.onCommit=null!=t?t:function(){},this.listenTo(o.me().boardList,"add remove reset",this.render)},t.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"},t.prototype.render=function(){var e,t,n,r,i,s,a,u,c,l;for(t={organizations:o.me().getOpenBoardsByOrg(!0)},c=t.organizations,n=0,i=c.length;i>n;n++)for(a=c[n],l=a.boards,r=0,s=l.length;s>r;r++)e=l[r],e.id===this.model.get("idBoard")&&(e.selected=!0);return u={move_card_controls:p.move_card_controls},this.$el.html(p.fill("popover_move_card",t,{},u)),this.updateBoardData(),this},t.prototype.commitChange=function(e){var t,n,o,i,a,c,l,d;t=this.$(".js-select-board"),n=this.$(".js-select-list"),o=this.$(".js-select-position"),i=t.find("option:selected").val(),a=n.find("option:selected").val(),d=o.find("option:selected").val(),c=parseInt(o.find("option:selected").prop("index"),10),i===this.model.getBoard().id?(l=this.model.getBoard().listList.get(a),this.model.moveToList(l,c),h("Card","Move Menu","Same Board")):null!=i&&null!=a&&null!=d&&(h("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),s.hide(),r({url:"/1/cards/"+this.model.id,type:"put",data:{idList:a,idBoard:i,pos:d},success:function(e){return function(t){return e.model.board=null,e.model.set("idBoard",t.idBoard),e.model.set("idList",t.idList),e.model.set("pos",t.pos)}}(this)})),this.onCommit(),u.hide()},t}(l))},{}],406:[function(e,t,n){var r,o,i,s,a;r=e(524),i=e(513),s=e(126),a=e(800),t.exports=o=function(){function e(){}return e.prototype.openMemberOnCardMenu=function(e){var t,n,o,a;s.stop(e),n=this.$(e.target).closest(".member"),o=n.attr("data-idmem"),a=this.modelCache.get("Member",o),t=this.model,i.toggle({elem:n,view:r,options:{model:a,modelCache:this.modelCache,card:t}})},e.prototype.getMemberOnCardHtml=function(e){var t,n,r;return t=e.toJSON(),n=this.model.getBoard().getOrganization(),t.isVirtual=(null!=n?n.isVirtual(e):void 0)||(null!=(r=this.model.getBoard())?r.isVirtual(e):void 0),null!=n&&(t.isDeactivated=n.isDeactivated(e)),a(t)},e}()},{}],407:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p;r=e(73),o=e(74),i=e(469),s=e(195),p=e(493),a=e("underscore"),l=e(768),d=e(491)("badge"),c=e(101),u=d.renderable(function(e){var t,n,r,s,a,u,l,p,h,m,f,g;return h=e.notifications,m=e.subscribed,g=e.votes,f=e.viewingMemberVoted,l=e.due,p=e.dueComplete,u=e.description,a=e.comments,n=e.attachments,r=e.checkItems,s=e.checkItemsChecked,t=e.archived,h&&d.div(".badge.is-unread-notification",{title:c("badge.notifications")},function(){return d.span(".badge-icon.icon-sm.icon-notification"),d.span(".badge-text",function(){return d.text(h)})}),m&&d.div(".badge.is-icon-only",{title:c("badge.subscribed")},function(){return d.span(".badge-icon.icon-sm.icon-subscribe")}),g>0&&d.div(".badge",{title:c("badge.votes"),class:d.classify({"is-voted":f})},function(){return d.span(".badge-icon.icon-sm.icon-vote"),d.span(".badge-text",function(){return d.text(g)})}),l&&d.div(".badge",{title:i.titleForDueDate(l,p),class:i.classForDueDate(l,p)},function(){return d.span(".badge-icon.icon-sm.icon-clock"),d.span(".badge-text",function(){return d.text(o.toDateString(l))})}),u&&d.div(".badge.is-icon-only",{title:c("badge.description")},function(){return d.span(".badge-icon.icon-sm.icon-description")}),a>0&&d.div(".badge",{title:c("badge.comments")},function(){return d.span(".badge-icon.icon-sm.icon-comment"),d.span(".badge-text",function(){return d.text(a)})}),n>0&&d.div(".badge",{title:c("badge.attachments")},function(){return d.span(".badge-icon.icon-sm.icon-attachment"),d.span(".badge-text",function(){return d.text(n)})}),r>0&&d.div(".badge",{title:c("badge.checkitems"),class:d.classify({"is-complete":s===r})},function(){return d.span(".badge-icon.icon-sm.icon-checklist"),d.span(".badge-text",function(){return d.text(s),d.text("/"),d.text(r)})}),t?d.div(".badge",{title:c("badge.archived.title")},function(){return d.span(".badge-icon.icon-sm.icon-archive"),d.span(".badge-text",function(){return d.text(c("badge.archived.text"))})}):void 0}),t.exports={renderCover:function(){var e,t,n,o,i,s,a,u,c,l;return this.showCover()&&(n=this.model.attachmentList.get(this.model.get("idAttachmentCover"))),null!=n?(a=r.isHighDPI()?600:300,u=null!=(c=n.smallestPreviewBiggerThan(a))?c:n.biggestPreview(),i=null!=u?u.url:n.get("url"),e=this.$(".js-card-cover"),e.css({"background-color":null!=(l=n.get("edgeColor"))?l:"transparent","background-image":'url("'+i+'")'}).toggleClass("is-no-preview-size",null==u),null!=u&&(t=this.$(".js-card-stickers"),s=Math.min(u.height,260),o=245*u.height/u.width,s>=o?(e.css({height:o,"background-size":"cover"}),t.css("height",o)):(e.css({height:s,"background-size":"contain"}),t.css("height",s)))):this.$(".js-card-cover").css({"background-image":"","background-color":"",height:""}).removeClass("is-no-preview-size"),this.$el.toggleClass("is-covered",null!=n),this},getBadgesHtml:function(){var e,t;return e=null!=(t=this.model.get("badges"))?t:{},u({subscribed:e.subscribed,description:e.description,comments:e.comments,attachments:e.attachments,checkItems:e.checkItems,checkItemsChecked:e.checkItemsChecked,votes:e.votes,viewingMemberVoted:e.viewingMemberVoted,due:this.model.get("due"),dueComplete:this.model.get("dueComplete"),notifications:a.filter(this.modelCache.all("Notification"),function(e){return function(t){var n,r;return t.get("unread")&&null!=e.model.id&&(null!=(n=t.get("data"))&&null!=(r=n.card)?r.id:void 0)===e.model.id}}(this)).length,archived:this.model.get("closed")})},renderBadges:function(){var e,t;return e=null!=(t=this.model.get("badges"))?t:{},this.el.querySelector(".js-badges").innerHTML=this.getBadgesHtml(),this},renderMembers:function(e){var t,n,r,o;return t="",o=this.model.getBoard().getOrganization(),r=function(){var e,t,r;for(t=this.model.memberList.models,r=[],e=t.length-1;e>=0;e+=-1)n=t[e],r.push(this.getMemberOnCardHtml(n));return r}.call(this),this.$(".js-list-card-members").empty().append(r.join("")),this},labelsData:function(){return a.chain(this.model.getLabels()).sort(s.compare).map(function(e){return function(t){return e.model.dataForLabel(t)}}(this)).filter(function(e){return!a.isEmpty(e.color)}).value()},renderLabels:function(){var e,t,n;return n=function(){var n,r,o,i;for(o=this.labelsData(),i=[],n=0,r=o.length;r>n;n++)t=o[n],e=t,e.extraClasses=["mod-card-front"],i.push(l(e));return i}.call(this),this.$(".js-card-labels").empty().append(n),this}}},{}],408:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V,$,z,R,F,U,q=function(e,t){function n(){this.constructor=e}for(var r in t)H.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},H={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(29),s=e(73),a=e(500),u=e(404),l=e(406),d=e(407),p=e(6),h=e(409),m=e(74),e(466),f=e(510),v=e(18),y=e(504),b=e(619),w=e(513),_=e(514),k=e("bluebird"),x=e(412),C=e("promise-queue"),j=e(650),S=e(494),T=e(126),M=e(496),B=e("underscore"),A=e(40),D=e(106),R=e(493),F=e(43),I=e("moment"),E=e(101),U=e(497),V=e(475),z=e(135),N=e(129),P=e(231),$=e(484),O=e(713),g=new C(1),L=function(e){g.add(function(){return new k(function(t){e.hookDroppable(),B.defer(t)})})},t.exports=D(l,c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return q(t,e),B.extend(t.prototype,d),t.prototype.className="list-card js-member-droppable",t.prototype.filterDeactivated=!0,t.prototype.showMemberStatus=!1,t.prototype.applyBoardCardFilter=!0,t.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu",click:"showDetail",mouseenter:function(){return this.trigger("mouseEnterCardView")},mousemove:function(){return this.trigger("mouseMoveCardView")},mouseleave:function(){return this.trigger("mouseLeaveCardView")},"dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl",shortcut:"shortcut","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,t,n,r;for(r=["filterDeactivated","showMemberStatus","applyBoardCardFilter"],e=0,t=r.length;t>e;e++)n=r[e],null!=this.options[n]&&(this[n]=this.options[n]);_.enqueue("initialize_"+this.cid,function(e){return function(t){var n,r;return r=t.delayed,r&&e.render(),e.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers","renderBadges","renderDueComplete"),e.listenTo(e.model,{"change:name":e.renderNameDebounced,"change:labels":e.renderLabelsDebounced,"change:idAttachmentCover":e.renderCoverDebounced,"change:name change:labels change:idLabels change:due change:dueComplete":e.renderFilteredDebounced,"change:dueComplete":e.renderDueComplete,"change:dateLastActivity":e.renderPowerUpEffectsDebounced,"change:badges change:due change:dueComplete change:subscribed":e.renderBadgesDebounced}),e.listenTo(e.modelCache,"add:Notification remove:Notification change:Notification",e.renderBadgesDebounced),e.listenTo(m,"renderInterval",e.renderBadgesDebounced),e.listenTo(e.model.memberList,"add remove reset",e.frameDebounce(function(){return this.renderMembers(),this.renderFiltered()})),e.listenTo(e.model.labelList,"add remove reset change",e.renderLabelsDebounced),e.listenTo(e.model.stickerList,{"add remove reset change sort":e.renderStickersDebounced}),n=e.model.getBoard(),e.listenTo(n,"change:powerUps change:prefs.cardAging",e.renderPowerUpEffectsDebounced),e.subscribe($(n,e.model),function(){return e.renderPowerUpEffectsDebounced()}),e.listenTo(n.filter,"change",e.renderFilteredDebounced),e.listenTo(n,"change:labels",e.renderLabelsDebounced),e.listenTo(n.viewState,"active-card-changed",e.renderActiveState),e.listenTo(e,"mouseEnterCardView",function(){return L(this)})}}(this))},t.prototype.renderActiveState=function(){var e;null!=this.$el&&(e=this.model.getBoard().viewState.isCardSelected(this.model),this.$el.toggleClass("active-card",e),e?S.addHandler(this,{scope:"card"}):S.removeHandler(this))},t.prototype.shortcut=function(e){var t,n,r,o,s;switch(r=i.isLoggedIn(),t=this.model.editable(),o=this.onCalendar,e){case v.Enter:return this.showDetail(),"Enter - Open Card";case v.E:if(t)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case v.T:return p.showCardDetail(this.model,{runMethod:"editTitle"}),"T - Open Card and Edit Title";case v.D:if(t)return this.showPopOver(h),["D - Due Dates","On Board View"];break;case v.L:if(t)return this.showPopOver(a,{hideOnSelect:!1}),["L - Edit Labels","On Board View"];break;case v._0:case v._1:case v._2:case v._3:case v._4:case v._5:case v._6:case v._7:case v._8:case v._9:if(t)return n=function(e){return function(t){return e.showPopOver(a,{searchInit:t,hideOnSelect:!0})}}(this),y.setLabelFromKey(e,this.model,n),"0-9 - Toggle Specific Label";break;case v.A:case v.M:if(t)return this.showPopOver(u),["A - Assign Members","Board View"];break;case v.Space:if(t&&this.model.getBoard().hasActiveMembership(i.me()))return this.model.toggleMember(i.myId()),"Space - Toggle Assigning Self";break;case v.C:case v.Delete:if(t)return this.model.close(),"C / Delete - Archive Card";break;case v.AngleRight:case v.Period:if(t&&!o)return this.model.moveToNextList(),"> - Move to Next List";break;case v.AngleLeft:case v.Comma:if(t&&!o)return this.model.moveToPrevList(),"< - Move to Previous List";break;case v.V:if(r)return this.model.toggleVote(),"V - Vote";break;case v.S:if(r)return s=this.model.get("subscribed"),this.model.subscribe(!s),["S - Subscribe",s?"Unsubscribe":"Subscribe"]}},t.prototype.showPopOver=function(e,t){return null==t&&(t={}),w.toggle({elem:this.$(".js-card-menu"),view:e,options:B.extend({model:this.model,modelCache:this.modelCache,hideOnSelect:!0},t)})},t.prototype.render=function(){var e,t,n,r,o,i;for(A("render","rendering card "+this.model.get("name")),e=this.model.toJSON(),e.showCover=this.showCover(),e.showEditor=this.model.editable()&&!this.options.hideMenu,this.model.hasStickers()&&(e.hasStickers=!0),e.labels=this.labelsData(),o=this.model.getBoard().getOrganization(),e.members=[],i=this.model.memberList.models,t=i.length-1;t>=0;t+=-1)n=i[t],r=n.toJSON(),r.isVirtual=(null!=o?o.isVirtual(n):void 0)||this.model.getBoard().isVirtual(n),null!=o&&(r.isDeactivated=o.isDeactivated(n)),e.members.push(r);return this.$el.toggleClass("js-archive-card",this.model.get("closed")),this.showCover()&&this.model.hasCover()&&this.$el.addClass("is-covered"),this.model.hasStickers()&&this.$el.addClass("is-stickered"),this.el.innerHTML=O(e),this.renderFiltered(),this.renderBadges(),this.renderPluginBadges(),this.renderDueComplete(),_.enqueue("render_"+this.cid,function(e){return function(){return e.renderActiveState(),e.renderCover(),e.renderStickers(),e.renderPowerUpEffects(),e.waitForId(e.model,function(){return e.renderLink()}),e._droppableHookedSinceRender=!1,L(e)}}(this)),this},t.prototype.hookDroppable=function(){var e;s.isTouch()||null!=this.$el&&(this._droppableHookedSinceRender||(this._droppableHookedSinceRender=!0,s.isTouch()||(e=this.throttle(function(){return r(".board-canvas")[0].getBoundingClientRect()},100,{trailing:!1}),this.$el.droppable({refreshPositions:!0,inBounds:function(t){var n,r,o;return n=e(),n.left<=(r=t.pageX)&&r<n.right&&n.top<=(o=t.pageY)&&o<n.bottom},accept:".js-list-draggable-board-members .member, .js-draggable-sticker",hoverClass:"active-card",drop:function(e){return function(t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b;n.draggable.hasClass("member")?(a=n.draggable.data("id"),s=n.draggable.clone(),u=e.model.memberList.detect(function(e){return e.id===a}),u||(e.model.addMember(a),F("Card","Add Member by Board Sidebar"))):n.draggable.hasClass("js-draggable-sticker")&&(h=n.draggable.data("sticker"),i=r=o=1,f=n.helper.offset(),g={top:e.$el.offset().top+i,left:e.$el.offset().left+r},v=e.$el.outerWidth()-r-o,l=f.left-g.left,d=f.top-g.top,c=l/v*100,m=e.$(".js-card-stickers").height(),y=e.$el.hasClass("is-stickered")||e.$el.hasClass("is-covered")?d/m*100:0,y>m&&(y=m),b=T.getElemTransformMatrix(n.helper.find(".sticker-select-fixed")),p=null!=b?T.getMatrixDegrees(b)%360:0,e.addNewStickerToList(h,c,y,p))}}(this)}))))},t.prototype.addNewStickerToList=function(e,t,n,r){var o,i;o=null!=(i=e.id)?i:e.get("image"),F("Card","Sticker",o),this.model.stickerList.create({image:o,left:z(t),top:z(n),rotate:r,zIndex:this.model.stickerList.nextZIndex(),imageUrl:e.get("url"),imageScaled:e.get("scaled")},{modelCache:this.modelCache})},t.prototype.showStickers=function(){return!this.onCalendar},t.prototype.renderStickers=function(e){var t,n,r,o,i;return this.showStickers()?(n=this.$(".list-card-stickers-area"),t=this.$(".js-card-stickers").empty(),r=this.model.hasStickers(),r?(this.$el.addClass("is-stickered"),n.removeClass("hide"),i=function(){var e,t,n,r;for(n=this.model.stickerList.models,r=[],e=0,t=n.length;t>e;e++)o=n[e],r.push(this.subview(j,o));return r}.call(this),this.appendSubviews(i,t)):(this.$el.removeClass("is-stickered"),n.addClass("hide")),this):void this.$el.removeClass("is-stickered")},t.prototype.renderName=function(){var e,t;return e=this.model.toJSON(),t=R.fill("card_title_on_card_front",e),this.$(".js-card-name").html(t),this},t.prototype.renderLink=function(){var e;return e=p.getCardUrl(this.model),this.$(".js-card-name").attr("href",e),this},t.prototype.renderPluginBadges=function(){var e;return e=this.$(".js-plugin-badges"),this.ensureSubviews([this.subview(b,this.model)],e),this},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar},t.prototype.renderFiltered=function(e){var t,n;if(null==this.options.dontFilter)return null==this._visible&&(this._visible=!0),t=this.model.getBoard(),n=null==t||!p.onBoardView(t.id)||!this.applyBoardCardFilter||t.filter.satisfiesFilter(this.model),this._visible!==n&&(this.$el.toggleClass("hide",!n).height(n?"":0),this._visible=n),this},t.prototype.renderDueComplete=function(){return this.$el.toggleClass("is-due-complete",this.model.get("dueComplete"))},t.prototype.renderPowerUpEffects=function(){var e,t;return e=this.model.getBoard(),this.$el.removeClass(this.model.getAllAgingClasses()),e.isPowerUpEnabled("cardAging")&&!this.model.get("closed")?(t=this.model.getAgingData(),this.$el.addClass(t.agingClassesToAdd)):void 0},t.prototype.openQuickCardEditor=function(e){return T.stop(e),w.hide(),x.open(this),F("Card Front","Open Quick Card Editor"),this},t.prototype.moveToCalendarDay=function(e,t,n){var r;return n.getCardView(this.model).delegateEvents(),r=new Date(n.data.day),this.model.changeDueDateMaintainTime(r),n.updateHeader(),n.renderCardsAndListHeaders()},t.prototype.moveInCalendarDay=function(e,t,n){return n.getCardView(this.model).delegateEvents(),n.renderCardsAndListHeaders()},t.prototype.moveTo=function(e,t,n,r){var o,i;return 0===t.item.parents(".js-list").length?void(null!=n&&n.renderCards()):(o=t.item.parents(".js-list").find(".list-card:not(.placeholder,.js-composer)"),i=o.index(t.item),r||t.item.remove(),void this.model.moveToList(n.model,i))},t.prototype.moveIn=function(e,t,n){n.model.id===this.model.get("idList")&&this.moveTo(e,t,n,!0)},t.prototype.showDetail=function(e){return e&&(e.ctrlKey||e.metaKey||e.shiftKey)||!this.doClicks()?void 0:(T.stop(e),p.showCardDetail(this.model))},t.prototype.dragenter=function(e){var t;if(this.model.editable())return t=this.$el.outerHeight(),this.$(".list-card-dropzone").css({height:t+"px","line-height":t+"px"}),this.$el.addClass("is-drophover")},t.prototype.dragleave=function(e){return this.$el.removeClass("is-drophover")},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,!U(this.model.getBoard(),t)))return k.resolve(t).each(function(e){return function(t){var n;return n=t.name||V(),N(e.model,"upload",t,n)}}(this)).catch(function(){}).done(),e.stopPropagation()},t.prototype.dropUrl=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadUrl(t),e.stopPropagation()},t.prototype.doClicks=function(){return!f.sorting},t}(M))},{}],409:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;o=e(74),s=e(513),a=e(126),u=e(496),c=e(146),l=e("underscore"),f=e(727),v=e(43),m=e("moment"),i=e("pikaday"),h=e(101),d=function(){return{previousMonth:h("prev month button text"),nextMonth:h("next month button text"),months:m.months(),weekdays:m.weekdays(),weekdaysShort:m.weekdaysMin()}},g="LT",p=function(e){return m(e,g).isValid()},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="change due date",t.prototype.tagName="form",t.prototype.className="dpicker-widget u-clearfix",t.prototype.events={"click .js-remove-date":"removeDueDate","input .js-dpicker-time-input":"validateTimeInput","change .js-dpicker-time-input":"normalizeTimeInput",'click a[href="/business-class"]':function(){return v("Card Detail","Click Business Class Link","Date Picker PopOver")},submit:function(e){return e.preventDefault(),this.submitDueDate()},"click .js-enable-calendar-powerup":function(e){return e.preventDefault(),this.enableCalendarPowerUp()}},t.prototype.initialize=function(){return this.listenTo(this.model.getBoard(),"change:powerUps",this.renderCalendarPowerUp)},t.prototype.getSelectedDueDateMoment=function(){var e,t;return e=this.picker.getMoment(),e.isValid()?(e.year()<1e3&&e.add(2e3,"years"),t=this.selectedTimeMoment(),e.hour(t.hour()).minute(t.minute())):null},t.prototype.submitDueDate=function(){var e;return e=this.getSelectedDueDateMoment(),null!=e?this.setDueDate(e.toDate()):this.removeDueDate()},t.prototype.setDueDate=function(e){return t.lastDueDate=e,this.model.update("due",e.getTime()),s.hide()},t.prototype.removeDueDate=function(){return this.model.get("due")&&this.model.update("due",null),s.hide()},t.prototype.renderCalendarPowerUp=function(){var e,t,n,r,o;t=this.$(".js-cal-enabled").addClass("hide"),e=this.$(".js-enable-cal").addClass("hide"),n=this.model.getBoard(),r=n.isPowerUpEnabled("calendar"),o=n.owned()&&!r,r?t.removeClass("hide"):o&&e.removeClass("hide")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,n,r,o,s;return e=this.model.getBoard(),s=m().startOf("day").add(1,"days").hour(12).toDate(),n=null!=(r=null!=(o=this.model.getDueDate())?o:t.lastDueDate)?r:s,this.$el.html(f({canChangePowerUps:e.owned(),canEnableAdditionalPowerUps:e.canEnableAdditionalPowerUps()})),this.picker=new i({field:this.$(".js-dpicker-date-input")[0],container:this.$(".js-dpicker-cal")[0],bound:!1,format:"l",firstDay:m.localeData().firstDayOfWeek(),i18n:d()}),this.picker.setDate(n),this.$timeInput().val(m(n).format(g)),this.renderCalendarPowerUp(),this},t.prototype.validateTimeInput=function(){return this.$timeInput().toggleClass("input-error",!this.isTimeInputValid())},t.prototype.normalizeTimeInput=function(){return this.$timeInput().val(this.selectedTimeMoment().format(g)),this.validateTimeInput()},t.prototype.selectedTimeMoment=function(){return this.isTimeInputValid()?m(this.$timeInput().val(),g):m().hours(12).minutes(0)},t.prototype.$timeInput=function(){return this.$(".js-dpicker-time-input")},t.prototype.isTimeInputValid=function(){return p(this.$timeInput().val())},t.prototype.enableCalendarPowerUp=function(){this.model.getBoard().enablePlugin("55a5d917446f517774210011"),v("Card Detail","Enable Calendar via Due Date Menu")},t}(u)},{}],410:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(496),i=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewTitleKey="formatting help",t.prototype.render=function(){return this.$el.html(i.fill("formatting_help")),this},t}(o)},{}],411:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(408),i=e(496),s=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(e){return this.showBoard=e.showBoard,this.cardView=this.subview(r,this.model,{filterDeactivated:!1,showMemberStatus:!1})},t.prototype.className="card-grid-container",t.prototype.render=function(){var e;return e={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.showBoard},this.$el.html(s.fill("member_cards_card",e)),this.appendSubview(this.cardView,this.$(".js-card")),this},t}(i)},{}],412:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),o=e(400),i=e(500),s=e(404),a=e(405),u=e(406),c=e(407),l=e(409),d=e(97),p=e(18),h=e(513),f=e(648),g=e(494),v=e(126),y=e(496),b=e("underscore"),_=e(493),k=e(43),w=e(106),t.exports=w(u,m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),b.extend(t.prototype,c),t.prototype.className="quick-card-editor",t.open=function(e){var n,r,o;return this.close(),n=e.$el,r=n.offset(),o={width:n.width(),left:r.left,top:r.top},this.current=new t({model:e.model,modelCache:e.modelCache
}).render(o)},t.close=function(){var e;return null!=(e=this.current)&&e.closeEditor(),this.current=null},t.prototype.initialize=function(){return this.makeDebouncedMethods("renderStickers","renderLabels"),this.listenTo(this.model,{"change:labels":this.renderLabelsDebounced,"change:idLabels":this.renderLabelsDebounced}),this.listenTo(this.model.labelList,"add remove reset change",function(e){return function(){return e.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderMembers)),this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})},t.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels","click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"},t.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},t.prototype.showStickers=function(){return!0},t.prototype.shortcut=function(e){switch(e){case p.Escape:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case p.Enter:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}},t.prototype.render=function(e){var t,n,o,i;return n=this.model.toJSON(),n.labels=this.model.getLabels(),n.showCover=this.showCover(),n.hasStickers=this.model.hasStickers(),n.quickEdit=!0,n.members=[],n.left=this.cLeft=e.left,n.top=this.cTop=e.top,n.width=this.cWidth=e.width,t=this.cWidth+this.cLeft+160,o=r(window).height(),i=r(window).width(),t>i&&(n.leftButtons=!0,this._usingLeftButtons=!0),this.$el.html(_.fill("quick_card_editor",n,{})),this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover(),r("body").append(this.$el),this.calcHeight(),this.focusInput(),g.addHandler(this,{scope:"quick_card_editor",modal:!0}),this.defer(function(e){return function(){return e.$(".quick-card-editor-buttons").addClass("fade-in")}}(this)),this.$(".js-edit-card-title").autosize(),this},t.prototype.calcHeight=function(){var e,t,n,o,i,s,a;s=r(window).height(),a=r(window).width(),o=this.$(".quick-card-editor-card").outerHeight(),this.cTop+o>s&&(i=s-o-8,this.$(".quick-card-editor-card").css({top:i})),e=this.$(".quick-card-editor-buttons"),t=e.outerHeight(),n=e.offset(),t+n.top>s&&e.css({top:-36})},t.prototype.renderStickers=function(){var e,t,n;return this.$(".sticker.moving, .sticker.rotating").length>0?this:(e=this.$(".js-card-stickers").empty(),n=function(){var e,n,r,o;for(r=this.model.stickerList.models,o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(this.subview(f,t));return o}.call(this),this.appendSubviews(n,e),this.$(".list-card").toggleClass("is-stickered",this.model.hasStickers()),this)},t.prototype.checkShowCover=function(){return this.$(".list-card").toggleClass("is-covered",this.showCover()).toggleClass("is-stickered",this.model.hasStickers()),this},t.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()},t.prototype.showPopOver=function(e,t,n,o){null==o&&(o={}),v.stop(e),h.toggle({elem:r(e.target).closest("a"),view:new t(b.extend({model:this.model,modelCache:this.modelCache},o)),alignRight:this._usingLeftButtons}),k("Quick Card Editor",n)},t.prototype.editLabels=function(e){return this.showPopOver(e,i,"Open Label Edit")},t.prototype.editMembers=function(e){return this.showPopOver(e,s,"Open Member Edit")},t.prototype.copyCard=function(e){return this.showPopOver(e,o,"Open Copy Card",{onCopy:this.closeEditor.bind(this)})},t.prototype.editDueDate=function(e){return this.showPopOver(e,l,"Open Due Date Edit")},t.prototype.moveCard=function(e){var t;return t=this.closeEditor.bind(this),this.showPopOver(e,a,"Open Move Card",{onCommit:t})},t.prototype.archive=function(e){v.stop(e),this.model.close(),this.closeEditor(),k("Quick Card Editor","Archive")},t.prototype.quickCardEditKeydown=function(e){return d.getKey(e)===p.Enter?this.saveEdits(e):void 0},t.prototype.saveEdits=function(e){var t;v.stop(e),t=this.$(".js-edit-card-title").val().trim(),t===this.model.get("name")?this.closeEditor():""!==t?(this.model.update({name:t}),this.closeEditor(),k("Quick Card Editor","Save Name")):this.$(".js-edit-card-title").focus().select()},t.prototype.checkCloseEditor=function(e){h.isVisible?h.hide():this.$(".sticker.editing").length>0?this.stopEditingStickers():this.closeEditor(e)},t.prototype.closeEditor=function(e){this.remove(),h.hide(),k("Quick Card Editor","Close")},t.prototype.stopEditingStickers=function(){var e,t,n,r;for(n=b.clone(this.model.stickerList.models),e=0,t=n.length;t>e;e++)r=n[e],r.trigger("stopEditing")},t.prototype.stopCard=function(e){v.stopPropagation(e),h.hide()},t}(y))},{}],413:[function(e,t,n){var r,o,i,s,a,u,c;r=e("jquery"),o=e(34),i=e(217),a=e(126),u=e("underscore"),c=e(101),t.exports=s=function(){function e(){}return e.prototype.renderValues=function(){var e,t,n,o,i,s,a;n=this.$(".js-select-board option:selected").val(),o=this.$(".js-select-list option:selected").val(),a=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1,e=this.modelCache.get("Board",n),t=e.get("name"),i=u.find(e.listList.models,function(e){return function(e){return e.id===o}}(this)),this.$(".js-board-value").text(t),null!=i?(s=i.get("name"),a=a.toString(),this.$(".js-list-value").text(s),this.$(".js-pos-value").text(a),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").removeAttr("disabled")):(this.$(".js-list-value").empty().append(r("<i></i>").text(c("no lists"))),this.$(".js-pos-value").empty().append(r("<i></i>").text(c("n/a"))),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").attr("disabled","disabled"))},e.prototype.updateBoardData=function(){var e,t,n,r,s,a,u;if(e=this.$(".js-select-board"),n=e.find("option:selected").val(),t={},n===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),u=this._boardData.listList.models,r=0,s=u.length;s>r;r++)a=u[r],a.cardCount=this._boardData.listList.get(a.id).openCards().length;this.updateListList()}else null!=n&&(this.$(".js-submit").attr("disabled","disabled"),o.loadBoardData(n,i.cardsAndListsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",n),e.updateListList()}}(this)).done())},e.prototype.updateListList=function(){var e,t,n,o,i,s,a,u,c,l,d,p;for(t=this.$(".js-select-board"),n=this.$(".js-select-list").empty(),i=t.find("option:selected").val(),s=this.model.getList().id,a=i===this.model.getBoard().id?s:null!=(d=this._boardData.listList.at(0))?d.id:void 0,p=this._boardData.listList.models,u=0,c=p.length;c>u;u++)l=p[u],e=r("<option>").val(l.id).appendTo(n),o=l.id===s?e.format("current list",{listName:l.get("name")}):e.text(l.get("name")),l.id===a&&e.attr("selected","selected");return this.updatePositionList()},e.prototype.updatePositionList=function(){var e,t,n,o,i,s,a,u,l,d,p,h,m,f,g,v;if(t=this.$(".js-select-list"),n=this.$(".js-select-position").empty(),a=t.find("option:selected").val(),null==a)return void this.renderValues();for(d=null!=(m=this._boardData.listList.get(a))?m:this._boardData.listList.at(0),g=(null!=d?d.id:void 0)===this.model.getList().id,p=this._boardData.listList.get(a).cardList.length,g?(o=this.model.getList().openCards().indexOf(this.model),v=o,this.showCurrentPosition||(p-=1)):(o=-1,v=p),s=l=0,f=p;f>=0?f>=l:l>=f;s=f>=0?++l:--l)u=String(s+1),i=s===o?c("current position",{index:u}):u,h=0===s?"top":s===p?"bottom":d.calcPos(s),e=r("<option>").val(h).text(i).appendTo(n),s===v&&e.attr("selected","selected");this.$(".js-pos-value").text(String(v)),this.renderValues()},e}()},{}],414:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(496),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.viewTitleKey="sending links",t.prototype.render=function(){return this.$el.html('<div class="spinner loading"></div>'),this},t}(o)},{}],415:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;i=e(513),s=e(126),a=e(496),u=e("underscore"),l=e(718),d=e(43),o=e(33),c=function(e){return function(t,n){return t.get(e).localeCompare(n.get(e))}},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add checklist",t.prototype.initialize=function(e){this.cardView=e.cardView},t.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist","change .js-checklist-copy-source":"changeSource","input .js-checklist-title":function(e){return this.$(".js-checklist-title").attr("data-changed",!0)}},t.prototype.render=function(){var e;return e=this.modelCache.find("Card",function(e){return function(t){return t.get("idBoard")===e.model.getBoard().id&&t.isOpen()&&t.checklistList.length>0}}(this)).sort(c("name")).map(function(e){return{name:e.get("name"),checklists:e.checklistList.chain().clone().sort(c("name")).map(function(e){return{id:e.id,name:e.get("name")}}).value()}}),this.$el.html(l({checklistCards:e})),this},t.prototype.addChecklist=function(e){var t,n,r,o,a;return s.stop(e),a=this.$(".js-checklist-title").val(),o=this.$(".js-checklist-copy-source").val(),0===a.length?void this.$(".js-checklist-title").focus().select():(n=""!==o?"Copied Checklist Items":"No Checklist Items Copied",r="Checklist"===a?"Default Title (Checklist), "+n+")":"Renamed Title, "+n+")",d("Checklist","Create",""+r),t=this.model.checklistList.create({name:a,idChecklistSource:o,idCard:this.model.id}),this.cardView.focusChecklistAdd(t),void i.hide())},t.prototype.changeSource=function(e){var t,n,r,i,s;return t=this.$(".js-checklist-title"),n=t.attr("data-default"),t.attr("data-changed")&&t.val()&&t.val()!==n?void 0:(r=this.$(".js-checklist-copy-source").val(),i=r&&null!=(s=o.get("Checklist",r))?s.get("name"):n,t.val(i).removeAttr("data-changed"))},t}(a)},{}],416:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(417),i=e(465),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.viewType=o,t}(i)},{}],417:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(457),i=e(460),s=e(470),a=e(463),u=e(513),c=e(104),l=e(126),d=e(472),p=e(106),h=e(493),m=e(43),t.exports=p(r,i,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.className="checklist-item",t.prototype.allowNewlines=!1,t.prototype.initialize=function(){return this.listenTo(this.model,{"change:name":this.renderName,"change:state":this.renderState}),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard","click .js-open-editing-menu":"openEditingMenu",movecheckitem:"moveCheckItem"},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.selfMention=!0,t.prototype.render=function(){var e,t;return t=this,e=this.model,this.$el.html(h.fill("checklist_item",{},{editable:this.model.editable()})),this.renderName(),this.renderState(),this.recallDrafts(),this},t.prototype.getTextInput=function(){return this.$(".js-checkitem-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.renderName=function(e){var t,n;n=c.checkItems.format(this.model.get("name"),{textData:this.model.get("nameData")}).output,t=this.$(".js-checkitem-name"),t.empty().append(n),d(t[0],this.model.getBoard())},t.prototype.renderState=function(e){var t;t=this.model.toJSON(),t.checked="complete"===t.state,this.$el.toggleClass("checklist-item-state-complete",t.checked)},t.prototype.toggleState=function(e){var t,n;this.model.editable()&&(t="complete"===this.model.get("state"),n=t?"incomplete":"complete","complete"===n?(this.$el.addClass("checklist-item-fade-out"),this.setTimeout(function(e){return function(){return e.model.update("state",n),e.$el.removeClass("checklist-item-fade-out")}}(this),200)):(this.$el.removeClass("checklist-item-fade-out"),this.model.update("state",n)),m("Checklist","Toggle Checklist Item State",n))},t.prototype.delete=function(e){l.stop(e),this.model.destroy(),m("Checklist","Delete Single Checklist Item")},t.prototype.convertToCard=function(e){l.stop(e),this.model.run("convertToCard"),this.model.getChecklist().checkItemList.remove(this.model),m("Checklist","Convert Checklist Item to Card")},t.prototype.moveCheckItem=function(e,t,n,r){var o,i,s;if(r||this.model.getChecklist()===n)return o=t.item.parent().children(),i=o.index(t.item),s=n.calcPos(i,this.model),r?(this.model.update({pos:s,idChecklist:n.id}),this.model.collection.remove(this.model),n.checkItemList.add(this.model)):this.model.update("pos",s),n.checkItemList.sort({silent:!0}),m("Checklist","Reorder Checklist Item")},t.prototype.commitEdits=function(e){return u.hide(),0===this.$(".js-checkitem-input").val().length?this.model.destroy():t.__super__.commitEdits.apply(this,arguments)},t.prototype.openEditingMenu=function(e){return l.stop(e),u.toggle({elem:e.target,view:a,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},t}(s))},{}],418:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(457),s=e(458),a=e(416),c=e(460),l=e(507),d=e(510),p=e(470),h=e(461),m=e(463),f=e(97),g=e(511),v=e(268),y=e(513),b=e("bluebird"),w=e(126),_=e("underscore"),C=e(40),x=e(106),S=e(493),T=e(43),k=e(101),j=e(129),t.exports=x(i,c,u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.className="checklist",t.prototype.initialize=function(){return this.makeDebouncedMethods("renderCheckedState"),this.listenTo(this.model.checkItemList,{"add remove reset change:state":function(){return this.renderProgress(),this.renderCheckedStateDebounced()}}),this.listenTo(v,{"change:idCollapsedChecklists":this.renderCheckedStateDebounced}),this.listenTo(this.model,{"change:name":this.renderName})},t.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click :not(.focus) .js-new-checklist-item-input":function(e){return r(e.currentTarget).select()},"click .js-confirm-delete":"confirmDeleteChecklist","click .js-hide-checked-items":"hideCheckedItems","click .js-show-checked-items":"showCheckedItems","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","click .js-open-editing-menu":"openEditingMenu","keyup .js-new-checklist-item-input":"keyAutoMention"},t.prototype.render=function(){var e,t;return C("render","rendering checklist state "+this.model.get("name")),this.$el.html(S.fillFromModel("checklist",this.model)),e=this.$(".js-checklist-items-list"),(null!=(t=this.getCard())?t.editable():void 0)&&e.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(e,t){var n;return d.sorting=!0,n=r(t.helper).outerHeight(),r(t.placeholder).height(n)},stop:function(e){return function(){return e.defer(function(){return d.sorting=!1})}}(this)}),this.$newCheckItemInput=this.$(".js-new-checklist-item-input").autosize(),this.renderName(),this.renderCheckItems(),this.renderCheckedState(),this},t.prototype.renderName=function(){return this.$("div.checklist-title[attr=name] .current").text(this.model.get("name")),this},t.prototype.renderProgress=function(){var e,t,n,r;return t=this.model.getCompletedCount(this.getCard()),n=this.model.checkItemList.length,r=n>0?Math.round(100*t/n):0,e=t===n&&n>0,this.$(".js-checklist-progress-bar").width(r+"%"),this.$(".js-checklist-progress-percent").text(r+"%"),this.$(".js-checklist-progress-bar").toggleClass("checklist-progress-bar-current-complete",e),this},t.prototype.renderCheckItems=function(){var e,t;return e=this.$(".js-checklist-items-list"),t=this.collectionSubview(a,this.model.checkItemList,{el:e}),t.render(),d.refreshIfInitialized(e),this.renderProgress(),this},t.prototype.isChecklistCollapsed=function(){return v.inSet("idCollapsedChecklists",this.model.id)},t.prototype.renderCheckedState=function(e){var t,n,r,o;return r=this.model.checkItemList.length,n=this.model.getCompletedCount(this.getCard()),o=r>0,t=r===n&&r>0,this.$(".js-show-checked-items").text(k("show checked items",{count:n.toString()})),this.$(".js-completed-message").addClass("hide"),0!==n&&o?this.isChecklistCollapsed()?(this.$el.addClass("hide-completed-items"),this.$(".js-show-checked-items").removeClass("hide"),this.$(".js-hide-checked-items").addClass("hide"),this.$(".js-completed-message").toggleClass("hide",!t)):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").removeClass("hide")):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").addClass("hide")),this},t.prototype.hideCheckedItems=function(e){w.stop(e),v.pushCollapsedChecklist(this.model.id),T("Checklist","Hide Checked Items")},t.prototype.showCheckedItems=function(e){w.stop(e),v.pullCollapsedChecklist(this.model.id),T("Checklist","Show Checked Items")},t.prototype.getCard=function(){return this.options.card},t.prototype.selfMention=!0,t.prototype.cancelItemEditing=function(e){return r(e.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val(""),g.cancelEdits(),!1},t.prototype.focusNewTaskInput=function(e){g.cancelEdits(this.$newCheckItemInput),this.$newCheckItemInput.focus(),this.$(".js-new-checklist-item").addClass("focus")},t.prototype.keydownChecklistEvent=function(e){if(r(e.target).hasClass("js-new-checklist-item-input")){if(y.view instanceof h||y.view instanceof s)return this.checkInsert(e);if(f.isSubmitEvent(e))return this.submitTask(e)}},t.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")},t.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},t.prototype.submitTask=function(e){var t,n,r,i;return w.stop(e),r=this.$newCheckItemInput.val().trim(),/^\s*$/.test(r)?(w.stop(e),this.focusNewTaskInput(),!1):(i=_.compact(r.split(/\r\n|\r|\n/)),t=this.model,b.using(t.modelCache.getLock(),function(e){return function(){return b.resolve(i).each(function(e){var n;return n=t.checkItemList.length>0?t.checkItemList.last().get("pos")+w.spacing:w.spacing,n+=Math.floor(1024*Math.random()),j(t.checkItemList,"create",{name:e.trim(),pos:n,nameData:{emoji:o.me().allCustomEmoji()}}).catch(function(){})})}}(this)).done(),this.$newCheckItemInput.val("").trigger("autosize.resize"),this.focusNewTaskInput(),n=1===i.length?"Single Item":"Multiple Items",T("Checklist","Add Checklist Item",n),void y.hide())},t.prototype.sortStop=function(e,t){w.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!1])},t.prototype.sortReceive=function(e,t){w.stopPropagation(e),t.item.trigger("movecheckitem",[t,this.model,!0])},t.prototype.confirmDeleteChecklist=function(e){var t;w.stop(e),t=this.model.get("name"),l.toggle("delete checklist",{elem:this.$(e.target).closest(".js-confirm-delete"),model:this.model,title:k("confirm.delete checklist.title",{checklistName:t}),confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return T("Checklist","Delete Checklist"),e.model.destroy()}}(this)})},t.prototype.moveChecklist=function(e,t){var n,r,o;n=this.model.getCard(),null!=n&&(r=t.item.parent().children(),o=r.index(t.item),this.model.update("pos",n.calcChecklistPos(o,this.model)),this.model.collection.sort({silent:!0}),T("Checklist","Reorder Checklist"))},t.prototype.openEditingMenu=function(e){return w.stop(e),y.toggle({elem:e.target,view:m,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},t}(p))},{}],419:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n;return t=this.props.item,e=t.name,n=t.shortLink,o.div(".popover-item .u-clearfix",function(){return o.a({href:"/b/"+n,title:e},function(){return o.span(".popover-item-name",function(){return o.text(e)})})})})})},{}],420:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_bulk_actions"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,i;return i=this.props,e=i.count,r=i.onClose,n=i.onAddToTeamsPopoverClick,t=i.hasTeams,o.div(function(i){return function(){return o.div(".enterprise-bulk-actions",{class:o.classify({"has-selected-items":i.props.hasSelectedItems})},function(){return o.div(".v-centered",function(){return e>0&&o.format("selected-count",{count:e}),o.span(".select-links",function(){return i.props.allItemsAreSelected||o.a(".select-all",{onClick:i.props.onSelectAll},function(){return o.format("select-all")}),i.props.hasSelectedItems?o.a(".clear-all",{onClick:i.props.onClearAll},function(){return o.format("clear-all")}):void 0})}),o.div(".options",function(){return t&&o.b(n,".option.button-link.role-button",{class:o.classify({disabled:!i.props.hasSelectedItems}),disabled:!i.props.hasSelectedItems},function(){return o.format("add-to-teams")}),i.props.hasSelectedItems?o.div(".option.clickable.v-centered.last-option",{onClick:r},function(){return o.icon("close")}):void 0})}),o.hr()}}(this))})})},{}],421:[function(e,t,n){var r,o,i,s,a,u=[].slice;i=e("react"),r=e(513),o=e(429),a=e(488)("enterprise_dashboard_bulk_actions_popover"),s=e("underscore"),t.exports=i.createClass({getInitialState:function(){return{state:"initial",processed:0,total:0}},onBulkActionClick:function(){var e,t,n;return e=1<=arguments.length?u.call(arguments,0):[],this.setState({state:"running"}),n=function(e){return function(t,n){return e.setState({processed:t,total:n})}}(this),(t=this.props).runBulkAction.apply(t,u.call(e).concat([n])).spread(function(e){return function(t,n){return e.setState({state:"done",results:t,teamName:n})}}(this))},renderInitial:a.renderable(function(){var e;return e=s.extend({eventHandlers:{onBulkActionClick:this.onBulkActionClick}},this.props),a.div(function(){return a.addElement(i.createElement(o,e))})}),renderRunning:a.renderable(function(){var e;return e=this.state.total>0?this.state.processed+"/"+this.state.total:"",a.div(function(){return a.div(".spinner.loading"),a.div(".org-members-bulk-add-progress",function(){return a.text(e)})})}),renderDone:a.renderable(function(){var e,t,n;return e=this.state,t=e.results,n=e.teamName,a.div(function(){var e,o,i,u;for(a.h5(function(){return a.format("team"),a.text(": "),a.text(n)}),i=s.keys(t),e=0,o=i.length;o>e;e++)u=i[e],t[u].length>0&&(a.div(".org-members-bulk-add-results-heading",function(){return a.format(["states",u])}),a.div(".org-members-bulk-add-results-list",function(){var e,n,r,o,i;for(o=t[u],i=[],n=0,r=o.length;r>n;n++)e=o[n],i.push(a.div(function(){return a.text(e.fullName+" ("+e.username+")")}));return i}));return a.div(function(){return a.button({class:"primary full",onClick:function(){return r.hide()}},function(){return a.format("done")})})})}),render:function(){switch(this.state.state){case"initial":return this.renderInitial();case"running":return this.renderRunning();case"done":return this.renderDone()}}})},{}],422:[function(e,t,n){var r,o,i,s,a;r=e(211),o=e(212),s=e("bluebird"),a=e("underscore"),i=t.exports.BULK_ADD_RESULTS={RESTRICTED:"restricted",MUST_REACTIVATE:"must-reactivate",UNKNOWN:"unknown",EXISTING:"existing",ADDED:"added"},t.exports.addToTeam=function(e,t,n){var u,c;return c=a.reduce(a.values(i),function(e,t){return e[t]=[],e},{}),u=function(e,t,r){return c[t].push(e),n(e,t,r)},s.map(t,function(t){return function(t){return e.isMember(t.toBackbone())?void u(t,i.EXISTING):o({method:"post",url:"/1/organizations/"+e.get("name")+"/memberships",data:{idMember:t.id,type:"normal"}}).then(function(e){return u(t,i.ADDED,e)}).catch(r,function(e){var n,r;return n=e.message.toLowerCase(),r=/email is restricted/.test(n)?i.RESTRICTED:/already invited/.test(n)||/already in organization/.test(n)?i.EXISTING:/must reactivate/.test(n)?i.MUST_REACTIVATE:i.UNKNOWN,u(t,r)})}}(this),{concurrency:5}).then(function(){return c})}},{}],423:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,i,s;return s=this.props,t=s.eventHandlers,n=s.item,i=n.name,r=n.logoHash,e=n.displayName,o.div(".popover-item .u-clearfix",function(){return r?o.img(".popover-item-image",{src:[logoDomain,r,"30.png"].join("/")}):o.span(".popover-item-image.icon-lg.icon-organization"),o.span(".popover-item-name",function(){return o.text(e)}),o.div({onClick:function(){return t.onBulkActionClick(n)}},function(){return o.icon("add",{class:"bulk-actions-icon"})})})})})},{}],424:[function(e,t,n){var r,o,i,s,a,u,c;s=e("bluebird"),c=e(430),u=e("underscore"),o=function(){function e(e,t){this.enterprise=e,this.searchTerm=t,this.items=[],this.length=0,this.nextPageStartIndex=1,this.hasNext=!0}return e.prototype.PAGE_SIZE=50,e.prototype._load=function(t){var n,r;return r={startIndex:t,count:e.prototype.PAGE_SIZE},this.searchTerm&&(n=u.map(c.Member.prototype.SEARCH_FIELDS,function(e){return function(t){return t+' co "'+e.searchTerm+'"'}}(this)),r.filter=n.join(" or ")),this.enterprise.loadPageOfMembers(r).spread(function(e){return function(t,n){var r,o,i,s;for(s=n.totalResults,r=0,o=t.length;o>r;r++)i=t[r],e.items.push(i);return e.length=s,t}}(this))},e.prototype.loadNext=function(){return this.hasNext?this._load(this.nextPageStartIndex).tap(function(e){return function(t){return e.nextPageStartIndex+=t.length,e.hasNext=e.items.length<e.length}}(this)):s.resolve([])},e.prototype.loadAll=function(t){var n,r;return this.hasNext?(n=function(){var n,o,i,s,a;for(a=[],r=n=o=this.nextPageStartIndex,i=this.length,s=e.prototype.PAGE_SIZE;s>0?i>=n:n>=i;r=n+=s)a.push(this._load(r).tap(t));return a}.call(this),s.all(n).then(function(e){return function(){e.nextPageStartIndex+=e.length+1,e.hasNext=!1}}(this))):s.resolve([])},e}(),i=function(){function e(e){this._hash=u.reduce(e,function(e,t){var n,r,o,i,s;for(s=t.get("memberships"),n=0,r=s.length;r>n;n++)o=s[n],null==e[i=o.idMember]&&(e[i]=[]),e[o.idMember].push(t);return e},{})}return e.prototype.get=function(e){var t;return null==(t=this._hash)[e]&&(t[e]=[]),this._hash[e]},e}(),t.exports.Member=r=function(){function e(e){this.enterprise=e,this.main=new o(this.enterprise),this.orgsPerMember=new i(this.enterprise.organizationList.models),this.resetState()}return e.prototype.resetState=function(){var e,t,n,r,o;for(this.renderables={},r=this.enterprise.memberList.models,e=0,t=r.length;t>e;e++)n=r[e],o=new c.Member(n,this.orgsPerMember.get(n.get("id"))),this.renderables[o.id]=o;return this.setSearch("")},e.prototype.setSearch=function(e){return this.searchTerm=e,this._setSelected(!1),this.current=e?new o(this.enterprise,e):this.main},e.prototype._addLoadedRenderables=function(e){var t,n,r,o,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],null==this.renderables[r.get("id")]&&(o=new c.Member(r,this.orgsPerMember.get(r.get("id"))),o.selected=this.current.selected,i.push(this.renderables[o.id]=o));return i},e.prototype.loadNextPage=function(){return this.current.loadNext().tap(this._addLoadedRenderables.bind(this))},e.prototype.hasNextPage=function(){return this.current.hasNext},e.prototype.items=function(){return u.map(this.current.items,function(e){return function(t){return e.renderables[t.get("id")]}}(this))},e.prototype.selectedItemsLength=function(){return this.current.selected?u.reduce(this.items(),function(e,t){return t.selected||e--,e},this.current.length):u.reduce(this.items(),function(e,t){return t.selected&&e++,e},0)},e.prototype._selectedRenderables=function(){return u.filter(this.renderables,function(e){return e.selected})},e.prototype.selectedItems=function(){return this.current.selected?this.current.loadAll(this._addLoadedRenderables.bind(this)).then(this._selectedRenderables.bind(this)):s.resolve(this._selectedRenderables())},e.prototype._setSelected=function(e){var t,n,r,o,i;if(null!=this.current){for(this.current.selected=e,r=this.items(),o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(i.selected=e);return o}},e.prototype.select=function(){return this._setSelected(!0)},e.prototype.deselect=function(){return this._setSelected(!1)},e.prototype.lengthOfSearch=function(){return this.current.length},e.prototype.totalLength=function(){return this.main.length},e}(),t.exports.Team=a=function(){function e(e){this.allItems=e.organizationList.models,this.resetState()}return e.prototype.resetState=function(){var e,t,n,r,o;for(this.renderables={},r=this.allItems,e=0,n=r.length;n>e;e++)t=r[e],o=new c.Team(t),this.renderables[o.id]=o;return this.setSearch("")},e.prototype.setSearch=function(e){var t;return t=u.filter(this.allItems,function(t){return function(n){var r;return r=t.renderables[n.get("id")],r.isSearchMatch(e)}}(this)),this._items=u.map(t,function(e){return function(t){return e.renderables[t.get("id")]}}(this))},e.prototype.loadNextPage=function(){return s.resolve([])},e.prototype.hasNextPage=function(){return!1},e.prototype.items=function(){return this._items},e.prototype.lengthOfSearch=function(){return this._items.length},e.prototype.totalLength=function(){return this.allItems.length},e}()},{}],425:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(488)("enterprise_list_component"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e,t,n;return n=this.props,e=n.eventHandlers,t=n.itemComponent,i.div(function(n){return function(){return n.props.items.forEach(function(n){return i.addElement(o.createElement(t,{item:n,eventHandlers:e}))})}}(this))}),t}(o.Component)},{}],426:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(488)("enterprise_list_header_component"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){
return i.span(".title",function(e){return function(){return i.format(e.props.title,{count:e.props.count})}}(this))}),t}(o.Component)},{}],427:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(431),o=e("react"),s=e(488)("enterprise_dashboard_main_content"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=s.renderable(function(){return s.div(".enterprise-dash-layout",function(e){return function(){return s.div(".enterprise-dash-layout-sidebar",function(){return s.div(".js-sidebar-content")}),s.div(".enterprise-dash-layout-list",function(){return s.div(".indented-title",function(){return s.div(".js-list-header-content .list-header"),s.addElement(o.createElement(i,{onChange:e.props.onSearchTermChange,clearValue:e.props.tabChanged,placeholder:s.l(["search",e.props.selectedTab])}))}),s.div(".js-bulk-actions-content"),s.div(".js-list-content"),"members"===e.props.selectedTab?(s.div(".spinner.loading .pagination-spinner"),s.div(".js-load-next-page .hide",function(){return s.a(".show-more .load-next-page",function(){return s.format("load-more")})})):void 0})}}(this))}),t}(o.Component)},{}],428:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_member_item_component"),t.exports=r.createClass({getInitialState:function(){return{selected:this.props.item.selected}},render:o.renderable(function(){var e,t,n,r,i,s,a,u,c,l,d,p,h;return l=this.props,n=l.eventHandlers,u=l.item,s=u.initials,r=u.fullName,h=u.username,e=u.avatarDomain,t=u.avatarHash,p=u.type,a=u.isDeactivated,i=u.hasTransferred,c=u.organizations,d=u.selected,o.div(".member-list-item-detail.dashboard-list-item",{class:o.classify({"multiple-select-state-selected":d}),onClick:function(e){return function(){return u.selected=!u.selected,e.setState({selected:u.selected}),n.onSelectCheckboxClick()}}(this)},function(l){return function(){return o.div(".multiple-select-checkbox",function(){return o.icon("check",{class:"multiple-select-checkbox-check"})}),o.div(".member .member-no-menu",{class:o.classify({"member-deactivated":a})},function(){return t?o.img(".member-avatar",{height:"32",width:"32",src:[e,t,"50.png"].join("/"),srcSet:[e,t,"50.png 1x"].join("/")+", "+[e,t,"50.png 2x"].join("/"),alt:r+" ("+h+")",title:r+" ("+h+")"}):o.span(".member-initials",{title:r+" ("+h+")"},function(){return o.text(s)})}),o.div(".details",function(){return o.p(".name-line",function(){return o.span(".full-name",function(){return o.text(r)})}),o.p(".u-bottom.quiet",function(){return h?o.span(".quiet.u-inline-block",function(){return o.format("at-username",{username:h})}):void 0})}),o.div(".options",function(){return null!=p&&o.p(".option.status.quiet",function(){return o.format(p)}),a&&o.p(".option.status.quiet",function(){return o.format("deactivated")}),i||o.p(".option.status.quiet",function(){return o.format("not-transferred")}),c.length>0?o.a(".option.button-link.role-button",{href:"#",onClick:function(e){return e.stopPropagation(),e.preventDefault(),n.onPopoverClick(e.currentTarget,u)}},function(){return o.format("team-count",{count:c.length})}):o.p(".option.status.quiet.no-team",function(){return o.format("not-in-team")})})}}(this))})})},{}],429:[function(e,t,n){var r,o,i,s,a,u;o=e(425),s=e(431),i=e("react"),u=e(488)("enterprise_dashboard_popover"),a=e("underscore"),r=5,t.exports=i.createClass({getInitialState:function(){return{isCollapsed:!0,searchMatches:this.props.items}},paginatedItems:function(){return this.state.isCollapsed?a.first(this.state.searchMatches,r):this.state.searchMatches},onSearchTermChange:function(e){return this.setState({searchMatches:a.filter(this.props.items,function(t){return t.isSearchMatch(e)})})},render:u.renderable(function(){return u.div(function(e){return function(){return u.addElement(i.createElement(s,{onChange:a.debounce(e.onSearchTermChange,300),placeholder:u.l(["search",e.props.modelName])})),u.div(function(){return u.addElement(i.createElement(o,{items:e.paginatedItems(),itemComponent:e.props.itemComponent,eventHandlers:e.props.eventHandlers}))}),e.state.searchMatches.length>r?u.div(function(){return u.a(".quiet-button",{href:"#",style:{marginTop:"8px"},onClick:function(){return e.setState({isCollapsed:!e.state.isCollapsed})}},function(){return u.span(function(){return e.state.isCollapsed?u.format(["show-other",e.props.modelName]):u.format(["hide-other",e.props.modelName])})})}):void 0}}(this))})})},{}],430:[function(e,t,n){var r,o,i,s,a,u=[].slice,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};a=e("underscore"),i=function(){function e(){var e,t,n,r,o;for(e=1<=arguments.length?u.call(arguments,0):[],this.selected=!1,this.source=e[0],this.id=e[0].get("id"),o=this.ATTRIBUTES,n=0,r=o.length;r>n;n++)t=o[n],this[t]=e[0].get(t);this._parseAttributes.apply(this,e)}return e.prototype._parseAttributes=function(){},e.prototype.isSearchMatch=function(e){return a.any(this.SEARCH_FIELDS,function(t){return function(n){return-1!==t[n].toLowerCase().indexOf(e.toLowerCase())}}(this))},e.prototype.toBackbone=function(){return this.source},e}(),t.exports.Board=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.SEARCH_FIELDS=["name"],t.prototype.ATTRIBUTES=["name","shortLink"],t}(i),t.exports.Team=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.SEARCH_FIELDS=["displayName","name"],t.prototype.ATTRIBUTES=["logoHash","name","displayName"],t.prototype._parseAttributes=function(e){return this.boards=e.boardList.filter(function(e){return!e.get("closed")}),this.memberCount=e.get("memberships").length},t}(i),t.exports.Member=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.SEARCH_FIELDS=["username","fullName"],t.prototype.ATTRIBUTES=["active","avatarHash","fullName","id","initials","username"],t.prototype._parseAttributes=function(e,t){return this.organizations=t,this.isDeactivated=!e.get("active"),this.hasTransferred=d.call(e.get("roles"),"enterprise.owned")>=0,this.avatarDomain=window.avatarDomain,this.type=d.call(e.get("roles"),"enterprise.admin")>=0?"admin":d.call(e.get("roles"),"organization.admin")>=0?"team-admin":"collaborator"===e.get("userType")?"collaborator":"ghost"===e.get("memberType")?"virtual":e.get("confirmed")?void 0:"unconfirmed"},t.prototype.orgAdded=function(e){return this.organizations.push(e),this.isDeactivated=!1,this.type="ghost"===this.toBackbone().get("memberType")?"virtual":this.toBackbone().get("confirmed")?void 0:"unconfirmed"},t}(i)},{}],431:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_search"),t.exports=r.createClass({componentWillReceiveProps:function(e){return e.clearValue?this.refs["search-input"].value="":void 0},render:o.renderable(function(){return o.input(".main-search",{type:"text",ref:"search-input",placeholder:this.props.placeholder,onChange:function(e){return function(t){return e.props.onChange(t.target.value.trim())}}(this)})})})},{}],432:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e("react"),i=e(488)("enterprise_dashboard_sidebar"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e,t,n,r,o;return n=this.props,o=n.teamsCount,e=n.membersCount,r=n.selectedTab,t=n.onSidebarTabClick,i.div(function(){return i.div(".enterprise-dash-sidebar",function(){return i.div(".header",function(){return i.format("enterprise-administration")}),i.hr(),i.ul(function(){return i.li(function(){return i.b(function(){return t("teams")},".link",{class:i.classify({"is-active":"teams"===r})},function(){return i.format("teams",{count:o})})}),i.li(function(){return i.b(function(){return t("members")},".link",{class:i.classify({"is-active":"members"===r})},function(){return i.format("members",{count:e})})})})})})}),t}(r.Component)},{}],433:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_team_item_component"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r,i,s,a,u;return u=this.props,n=u.eventHandlers,r=u.item,a=r.name,i=r.logoHash,t=r.displayName,s=r.memberCount,e=r.boards,o.div(".member-list-item-detail",function(){return o.div(".member",function(){return o.a({href:"/"+a,title:a},function(){return i?o.img(".member-avatar",{src:[logoDomain,i,"30.png"].join("/")}):o.span(".team-of-member-image.icon-lg.icon-organization")})}),o.a({href:"/"+a,title:a},function(){return o.div(".details",function(){return o.p(".name-line.name-without-details",function(){return o.span(".full-name",function(){return o.text(t)})})})}),o.div(".options",function(){return e.length>0?o.b(function(e){return n.onPopoverClick(e,r)},".option.button-link.role-button",function(){return o.format("boards",{count:e.length})}):o.p(".option.status.quiet",function(){return o.format("boards",{count:e.length})}),o.p(".option.status.quiet",function(){return o.format("members",{count:s})})})})})})},{}],434:[function(e,t,n){var r,o;r=e("react"),o=e(488)("enterprise_dashboard_team_of_member"),t.exports=r.createClass({render:o.renderable(function(){var e,t,n,r;return r=this.props.item,n=r.name,t=r.logoHash,e=r.displayName,o.div(".popover-item .u-clearfix",function(){return o.a({href:"/"+n,title:n},function(){return t?o.img(".popover-item-image",{src:[logoDomain,t,"30.png"].join("/")}):o.span(".popover-item-image.icon-lg.icon-organization"),o.span(".popover-item-name",function(){return o.text(e)})})})})})},{}],435:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty;o=e(419),s=e(420),i=e(73),p=e(427),l=e(425),d=e(426),h=e(428),c=e(424),m=e(513),f=e(429),a=e(421),v=e("react"),y=e("react-dom"),b=e(487),w=e(432),_=e(490),C=e(433),x=e(434),k=e(423),v=e("react"),j=e(496),r=e("jquery"),M=e(101),B=e(106),T=e(422),O=e(430),L=e(733),S=e("underscore"),g=e("bluebird"),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return P(t,e),B(_,t),t.prototype.events={"click .js-load-next-page":"loadNextPage"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.memberList=new c.Member(this.model),this.teamList=new c.Team(this.model),this.selectedTab="members",this._initTab(),this.loadNextPage(),"explorer-10"!==i.browserVersionStr?this._configurePaginationOnScroll():void 0},t.prototype._configurePaginationOnScroll=function(){return this.paginationLock=!1,this.previousScrollTop=0,r("#content").scroll(function(e){return function(){var t,n,o;if("members"===e.selectedTab&&!e.paginationLock)return n=e.$(".js-list-content").height(),t=r("#content").scrollTop(),o=t>e.previousScrollTop,o&&t/n>.6?(e.paginationLock=!0,e.loadNextPage().then(function(){return e.paginationLock=!1,e.previousScrollTop=r("#content").scrollTop()})):e.previousScrollTop=t}}(this))},t.prototype.remove=function(){return r("#content").off("scroll")},t.prototype._initTab=function(){return m.hide(),this.memberList.resetState(),this.teamList.resetState()},t.prototype.render=function(){return this.$el.html(L({name:this.model.get("name"),enforcesSso:this.model.get("prefs").ssoOnly})),this.tabChanged&&this._initTab(),this.renderStatic(),this.renderDynamic(),this.tabChanged=!1,this},t.prototype._renderSection=function(e,t,n){var r;return this.$(t).append(e),r=v.createElement(b,{},n),y.render(r,e)},t.prototype.renderStatic=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this._renderSection(this.reactRoot,".js-content",this.getMainContentComponent())},t.prototype.renderDynamic=function(){return null==this.sidebarRoot&&(this.sidebarRoot=document.createElement("div")),this._renderSection(this.sidebarRoot,".js-sidebar-content",this.getSidebarComponent()),"members"===this.selectedTab?(null==this.bulkActionsRoot&&(this.bulkActionsRoot=document.createElement("div")),this._renderSection(this.bulkActionsRoot,".js-bulk-actions-content",this.getBulkActionsComponent())):this.$(".js-bulk-actions-content").html(""),null==this.listHeaderRoot&&(this.listHeaderRoot=document.createElement("div")),this._renderSection(this.listHeaderRoot,".js-list-header-content",this.getListHeaderComponent()),null==this.listRoot&&(this.listRoot=document.createElement("div")),this._renderSection(this.listRoot,".js-list-content",this.getListComponent())},t.prototype.rerender=function(){return this.renderDynamic()},t.prototype.bulkAddToTeam=function(e,t){return e=e.toBackbone(),this.memberList.selectedItems().then(function(n){var r,o;return o=0,t(o,n.length),r=function(r){return function(r,i,s){return o+=1,t(o,n.length),i===T.BULK_ADD_RESULTS.ADDED?(e.addMembership(s),r.orgAdded(e)):void 0}}(this),T.addToTeam(e,n,r)}).tap(function(e){return function(){return e.rerender()}}(this)).then(function(t){return[t,e.get("displayName")]})},t.prototype.getMainContentComponent=function(){return v.createElement(p,{selectedTab:this.selectedTab,tabChanged:this.tabChanged,onSearchTermChange:S.debounce(function(e){return function(t){var n;return n="members"===e.selectedTab?e.memberList:e.teamList,n.setSearch(t),e.rerender(),"members"===e.selectedTab&&t?e.loadNextPage():void 0}}(this),300)})},t.prototype.onTeamsOfMemberPopoverClick=function(e,t){t.organizations.length>0&&m.toggle({elem:e,getViewTitle:function(){return M(["view title","teams"])},reactElement:v.createElement(f,{modelName:"teams",items:t.organizations.map(function(e){return new O.Team(e)}),itemComponent:x,key:t.username+"-teams"})})},t.prototype.onBoardsOfTeamPopoverClick=function(e,t){t.boards.length>0&&m.toggle({elem:e,getViewTitle:function(){return M(["view title","boards"])},reactElement:v.createElement(f,{modelName:"boards",items:t.boards.map(function(e){return new O.Board(e)}),itemComponent:o,key:t.name+"-boards"})})},t.prototype.onSelectMemberClick=function(){return this.rerender()},t.prototype.getListComponent=function(){var e;return e="members"===this.selectedTab?{items:this.memberList.items(),itemComponent:h,eventHandlers:{onPopoverClick:this.onTeamsOfMemberPopoverClick,onSelectCheckboxClick:this.onSelectMemberClick.bind(this)}}:{items:this.teamList.items(),itemComponent:C,eventHandlers:{onPopoverClick:this.onBoardsOfTeamPopoverClick}},v.createElement(l,e)},t.prototype.getSidebarComponent=function(){return v.createElement(w,{teamsCount:this.teamList.totalLength(),membersCount:this.memberList.totalLength(),selectedTab:this.selectedTab,onSidebarTabClick:function(e){return function(t){return t!==e.selectedTab?(e.selectedTab=t,e.tabChanged=!0,e.render()):void 0}}(this)})},t.prototype.getBulkActionsComponent=function(){return v.createElement(s,{count:this.memberList.selectedItemsLength(),onClose:function(e){return function(){return e.memberList.deselect(),e.rerender()}}(this),onAddToTeamsPopoverClick:function(e){return function(t){e.model.organizationList.models.length>0&&m.toggle({elem:t,getViewTitle:function(){return M(["view title","teams"])},reactElement:v.createElement(a,{modelName:"teams",items:e.model.organizationList.map(function(e){return new O.Team(e)}),itemComponent:k,runBulkAction:e.bulkAddToTeam.bind(e),key:"bulk-add-teams"})})}}(this),hasTeams:this.teamList.totalLength()>0,allItemsAreSelected:this.memberList.selectedItemsLength()===this.model.memberList.length,onSelectAll:function(e){return function(){return e.memberList.select(),e.rerender()}}(this),onClearAll:function(e){return function(){return e.memberList.deselect(),e.rerender()}}(this),hasSelectedItems:this.memberList.selectedItemsLength()>0})},t.prototype.getListHeaderComponent=function(){return v.createElement(d,{title:this.selectedTab,count:"members"===this.selectedTab?this.memberList.lengthOfSearch():this.teamList.lengthOfSearch()})},t.prototype.loadNextPage=function(){return this.memberList.hasNextPage()?(this.$(".pagination-spinner").show(),this.$(".js-load-next-page").hide(),this.memberList.loadNextPage().then(function(e){return function(){return e.$(".pagination-spinner").hide(),"explorer-10"===i.browserVersionStr&&e.$(".js-load-next-page").toggle(e.memberList.hasNextPage()),e.rerender()}}(this))):g.resolve()},t}(j)},{}],436:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty,m=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(74),i=e(126),s=e(455),d=e("moment"),u=e(758),a=e(757),c=e(759),l=e(760),t.exports=r=function(e){function t(e){var n;n=e.enterprise,t.__super__.constructor.apply(this,arguments),this.enterprise=n}var n;return p(t,e),n="AccountTransferRequired",t.prototype.events={"click .js-dismiss-account-transfer":"dismiss","click .js-begin-transfer":"beginTransfer"},t.prototype.dismiss=function(e){return i.stop(e),this.model.dismiss(n,function(e){return function(){return e.render()}}(this))},t.prototype.beginTransfer=function(e){return i.stop(e),window.location="/enterprise/"+this.enterprise.name+"/transfer-account"},t.prototype._remainingDays=function(){var e;return e=o.parse(this.enterprise.prefs.mandatoryTransferDate),o.getDaysUntil(e)},t.prototype.renderCollapsed=function(){var e,t;return t=this._remainingDays(),e=0>=t,this.$el.html(u({remainingDays:t,overdue:e,enterpriseName:this.enterprise.name}))},t.prototype.renderBig=function(){var e,t;return this.$el.html(a({targetDate:o.toDateString(this.enterprise.prefs.mandatoryTransferDate),enterpriseName:this.enterprise.name,isAdmin:(e=this.model.id,m.call(null!=(t=this.enterprise.idAdmins)?t:[],e)>=0)}))},t.prototype.renderDelayed=function(){return this.$el.html(c({enterpriseName:this.enterprise.name}))},t.prototype.renderRemainingDays=function(){var e,t;return t=this._remainingDays(),t>1&&5>=t?this.$el.addClass("mod-medium-urgent"):1>=t&&this.$el.addClass("mod-urgent"),this.enterprise.ssoDateDelayed&&(e=this.model.id,m.call(this.enterprise.idAdmins,e)>=0)?this.renderDelayed():this.model.isDismissed(n)?this.renderCollapsed():this.renderBig()},t.prototype.renderMissedDate=function(){return this.$el.addClass("mod-urgent"),this.$el.html(l())},t.prototype.render=function(){return null!=this.enterprise?this.renderRemainingDays():this.renderMissedDate(),this},t}(s)},{}],437:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(148),a=e(114),u=e(496),p=e(741),h=e(43),d=e("moment"),l=e(32).locales,s=e(98),c=e(231),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(o,"add remove reset",this.frameDebounce(this.render))},t.prototype.viewTitleKey="announcements",t.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"},t.prototype.render=function(){var e,t,n,r;for(t=o.forLocale(l[0]),n=0,r=t.length;r>n;n++)e=t[n],e.isUnread()&&e.markRead();return a.set("tacoShow",d().add(1,"hours").valueOf()),this.$el.html(p(t.map(c.method("toJSON")))),this},t.prototype.clickBlog=function(){return h("Header","Announcements Menu","Trello Blog")},t.prototype.clickTwitter=function(){return h("Header","Announcements Menu","Twitter Link")},t.prototype.clickFacebook=function(){return h("Header","Announcements Menu","Facebook Link")},t.prototype.clickGoogle=function(){return h("Header","Announcements Menu","Google+ Link")},t.prototype.openAnnouncementLink=function(e){return r(e.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover")?void 0:h("Info","Announcements","Open Announcement Link")},t}(u)},{}],438:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(507),i=e(564),t.exports=o=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.template="confirm_merge"}return s(t,e),t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.appendSubview(this.subview(i,this.model),this.$(".js-member")),this},t}(r)},{}],439:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(210),i=e(455),s=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.initialize=function(){var e,t,n,o;n={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/},e={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(t in n)if(o=n[t],o.test(this.model.get("email"))){this.emailInboxUrl=e[t];break}return null==this.emailInboxUrl?r({url:"/checkYourEmail",data:{email:this.model.get("email")},dataType:"json",success:function(e){return function(t){return null==t.error?(e.emailInboxUrl=t.url,e.render()):void 0}}(this)}):void 0},t.prototype.render=function(){var e;return e=this.model.toJSON(),null!=this.emailInboxUrl&&(e.emailInboxUrl=this.emailInboxUrl,e.knownEmailProvider=!0),this.$el.html(s.fill("header_warning_banner",e)),this},t}(i)},{}],440:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(366),o=e(582),s=e(513),a=e(126),u=e(496),c=e(493),l=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="create",t.prototype.events={"click .js-new-board":"newBoard","click .js-new-org":"newOrg","click .js-new-bc-org":"newBCOrg"},t.prototype.render=function(){return this.$el.html(c.fill("header_add_menu")),this},t.prototype.newBoard=function(e){return l("Header","Add Menu","New Board"),a.stop(e),s.pushView({view:new r({model:this.model,modelCache:this.modelCache,useLastOrganization:!0})})},t.prototype.newOrg=function(e){return l("Header","Add Menu","New Org"),a.stop(e),s.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.newBCOrg=function(e){var t;return l("Header","Add Menu","New Business Class Org"),t={isBusinessClass:!0},a.stop(e),s.pushView({view:new o({model:this.model,modelCache:this.modelCache,createOpts:t})})},t}(u)},{}],441:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(270),i=e(126),s=e(496),a=e(493),u=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="header-boards-button",t.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"},t.prototype.render=function(){return this.$el.html(a.fill("header_boards_menu_button")),this},t.prototype.toggleBoardsSidebar=function(e){i.stop(e),u("Header","Boards Menu","Toggle Boards Menu"),o.getShowSidebar()?o.hideSidebar():o.showSidebar()},t}(s)},{}],442:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(210),s=e(447),a=e(513),u=e(126),c=e(496),l=e(493),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.CHANNELS=["stable","beta","alpha"],t.prototype.viewTitleKey="switch channels",t.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie"},t.prototype.initialize=function(){var e,t,n;return e=this.model.get("channels"),this.channels=function(){var t,r,o,i;for(o=this.CHANNELS,i=[],t=0,r=o.length;r>t;t++)n=o[t],h.call(e.allowed,n)>=0&&i.push({name:n,displayName:u.capitalize(n),active:n===e.active});return i}.call(this),this.isDev=e.dev,t=!!r.cookie("head"),t&&this.isDev?this.defer(function(e){return function(){return e.showDev()}}(this)):void 0},t.prototype.selectChannel=function(e){var t;return t=e.target.name,o({url:"/1/members/me/channels/active",type:"PUT",data:{value:t},success:function(e){return function(){return e.model.get("channels").active=t,a.hide(),document.location.reload()}}(this)})},t.prototype.removeCookie=function(e){return u.stop(e),r.cookie("head",null,{path:"/"}),this.render()},t.prototype.render=function(){var e,t;return e=!!r.cookie("head"),t=window.TrelloVersion,this.$el.html(l.fill("header_channel_picker",{channels:this.channels,cookie:e,version:t,dev:this.isDev})),this},t.prototype.showDev=function(e){return u.stop(e),a.pushView({view:s}),this},t}(c)},{}],443:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;u=e("underscore"),r=e(6),c=e(101),i=e(34),s=e("bluebird"),a=e(496),l=e(40),d=e(744),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.getViewTitle=function(){return"Open Enterprise Dashboard"},t.prototype.initialize=function(){return s.map(this.model.get("idEnterprisesAdmin"),function(e){return i.loadEnterprise(e)}).then(function(e){return function(t){return e.enterprises=t,e.render()}}(this))},t.prototype.render=function(){var e;return l("render","rendering HeaderEnterpriseAdminDashboardMenuView"),null!=this.enterprises?this.enterprises.length>0?(e=u.map(this.enterprises,function(e){return e.get("name")}),this.$el.html(d({enterpriseNames:e,url:r.getEnterpriseAdminDashboardUrl}))):this.$el.text("You are not an admin of any enterprise"):this.$el.text("Loading..."),this},t}(a)},{}],444:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(496),s=e(745),a=e(890),u=e(43),i=e(88),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="information",t.prototype.events={"click .js-new-tip":"newTipEvent","click .js-tip":"clickTip","click .js-meta-page-link":"clickMetaPage","click .js-meta-page-more-link":"showMoreLinks"},t.prototype.initialize=function(){return this.remainingTips=i.slice(0),t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){return this.$el.html(s()),this.newTip(),this},t.prototype.getFreshTip=function(){var e,t;return this.remainingTips.length<1&&(this.remainingTips=i.slice(0)),e=Math.floor(Math.random()*this.remainingTips.length),t=this.remainingTips[e],this.remainingTips.splice(e,1),t},t.prototype.newTipEvent=function(){u("Header Tips","Get a new tip."),this.newTip()},t.prototype.newTip=function(){var e;return e=this.getFreshTip(),this.$(".js-fill-tip").empty().append(a(e)),u("Header Tips",e.id,"Viewed"),this},t.prototype.clickTip=function(e){var t;return t=this.$(e.currentTarget).attr("data-tipid"),u("Header Tips",t,"Clicked")},t.prototype.clickMetaPage=function(e){var t;return t=this.$(e.currentTarget).attr("data-metapagename"),u("Header","Information Menu",t)},t.prototype.showMoreLinks=function(e){return this.$(".js-more-menu-button").addClass("hide"),this.$(".js-more-menu").removeClass("hide"),u("Header","Information Menu","Show More Links")},t}(o)},{}],445:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),o=e(29),s=e(534),i=e(532),a=e(6),c=e(449),f=e(101),l=e(513),d=e("react"),p=e(126),h=e(496),v=e(40),m=e(231),y=e(748),g=e(32).locales,b=m(e(43),"Header","User Menu"),w=function(e){return function(){return b(e)}},t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.events={"click .js-profile":w("Profile"),"click .js-cards":w("Cards"),"click .js-billing":w("Billing"),"click .js-account":w("Settings"),"click .js-help":function(e){return w("Help"),o.isLoggedIn()?(p.stop(e),l.show({getViewTitle:function(){return f(["view title","help"])},maxWidth:500,clientx:r(window).width()-500,clienty:40,elem:e.currentTarget,reactElement:d.createElement(c,{key:"help"})})):void 0},"click .js-shortcuts":w("Shortcuts"),"click .js-change-locale":"changeLocale","click .js-logout":"logout"},t.prototype.render=function(){var e;return v("render","rendering HeaderMemberMenuView"),e={profileUrl:a.getMemberProfileUrl(),cardsUrl:a.getMemberCardsUrl(),billingUrl:a.getMemberBillingUrl(),accountUrl:a.getMemberAccountUrl(),canLogOut:o.canLogIn(),hasAccount:this.model.hasMemberOrOrgAccount()},this.$el.html(y(e)),this},t.prototype.changeLocale=function(e){b("Change Locale"),p.stop(e),l.pushView({view:new i({model:this.model,modelCache:this.modelCache,onChange:function(e,t){return t===e?l.popView():document.location.reload()}})})},t.prototype.logout=function(e){return o.canLogIn()?(o.logoutPost(),b("Log Out")):(l.pushView({view:new s({model:this.model,modelCache:this.modelCache})}),p.stop(e))},t}(h)},{}],446:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e(29),o=e(6),i=e(508),s=e(509),a=e(440),u=e(442),d=e(445),c=e(443),h=e(568),l=e(444),m=e(34),f=e(200),g=e(513),v=e("bluebird"),y=e("react"),b=e(115),w=e(126),_=e(496),k=e("underscore"),C=e(101),x=e(40),S=e(493),T=e(43),j=e(777),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),t.prototype.className="header-user",t.prototype.initialize=function(){var e;return this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",this.renderUnreadNotifications),this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar),this.idLastNotification=null!=(e=k.chain(this.modelCache.all("Notification")).pluck("id").compact().sort().last().value())?e:"",this.listenTo(this.modelCache,"add:Notification",this.showDesktopNotification),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-open-header-info-menu":"viewInfoMenu","click .js-open-header-notifications-menu":"viewNotificationsMenu",
"click .js-open-enterprise-dashboard-menu":"viewEnterpriseDashboardMenu","click .js-open-header-member-menu":"viewMemberMenu","click .js-open-add-menu":"openAddMenu","click .js-open-channel-picker":"viewChannelPicker"},t.prototype.render=function(){var e;return x("render","rendering header"),e={hasCrown:this.model.isFeatureEnabled("crown"),showChannelPicker:r.isLoggedIn()&&this.model.get("channels").allowed.length>1,escapedReturnUrl:w.escapedReturnUrl(),isEnterpriseAdmin:this.model.isEnterpriseAdmin()},this.$el.html(S.fill("header_user",e,{},{header_signup_login:S.header_signup_login})),this.renderUnreadNotifications(),this.renderAvatar(),this.renderMemberName(),this},t.prototype.renderMemberName=function(){var e;return this.$(".js-member-name").text(null!=(e=this.model.get("fullName"))?e:this.model.get("username"))},t.prototype.renderAvatar=function(){return x("render","rendering avatar"),this.$(".member").html(j(this.model.toJSON())),this},t.prototype.renderUnreadNotifications=function(){var e;return e=f.unreadCount(this.modelCache),this.$(".js-open-header-notifications-menu").toggleClass("new-notifications",e>0),o.title(),this},t.prototype.viewInfoMenu=function(e){T("Header","Information Menu","Open Information Menu"),w.stop(e),g.toggle({elem:this.$(".js-open-header-info-menu"),view:l,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.viewEnterpriseDashboardMenu=function(e){var t;w.stop(e),T("Header","Enterprise Dashboard Menu","Open Enterprise Dashboard Menu"),t=new c({model:r.me(),modelCache:this.modelCache}),g.toggle({elem:this.$(".js-open-enterprise-dashboard-menu"),view:t})},t.prototype.viewNotificationsMenu=function(e){w.stop(e),T("Header","Notifications Menu","Open Notifications Menu"),g.toggle({elem:this.$(".js-open-header-notifications-menu"),hidden:k.bind(this.model.clearAllNotifications,this.model),maxWidth:450,displayType:"mod-notifications",getViewTitle:function(){return C("view title.notifications")},reactElement:y.createElement(h,{key:"header-notifications",member:this.model,noteUrl:"/"+this.model.get("username")+"/notifications"}),options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openAddMenu=function(e){w.stop(e),T("Header","Add Menu","Open"),g.toggle({elem:this.$(".js-open-add-menu"),view:new a({model:r.me(),modelCache:this.modelCache})})},t.prototype.viewMemberMenu=function(e){var t;w.stop(e),T("Header","User Menu","Open User Menu"),t=new d({model:r.me(),modelCache:this.modelCache}),g.toggle({elem:this.$(".js-open-header-member-menu"),view:t})},t.prototype.viewChannelPicker=function(e){w.stop(e),g.toggle({elem:this.$(".js-open-channel-picker"),view:new u({model:r.me(),modelCache:this.modelCache})})},t.prototype.showDesktopNotification=function(e){return!i.enabled()||e.id<=this.idLastNotification?void 0:(this.idLastNotification=e.id,v.try(function(){var t;return t=Date.now()-b.serverToClient(e.get("date")),t<w.getMs({minutes:1})?e:m.loadNotification(e.id)}).then(function(e){return e.get("unread")?new i(e):void 0}).done())},t}(_)},{}],447:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(126),s=e(496),a=e(493),u=e("xtend"),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="select client version",t.prototype.LATEST_VERSION={"0.0":!0},t.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"},t.prototype.initialize=function(){var e,t;return this.active=function(){try{return JSON.parse(r.cookie("head"))}catch(e){}}()||{},this.active.version&&(this.active.version=[null!=(e=this.active.version)?e:0,null!=(t=this.active.patch)?t:0].join(".")),r.getJSON("/web/deployments").done(function(e){return function(t){return e.deployments=t,e.render()}}(this))},t.prototype.render=function(){return null!=this.deployments?this.$el.html(a.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())})):this.$el.text("Loading..."),this},t.prototype.formatVersion=function(e){return"0.0"===e?"latest":e},t.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}},t.prototype.listHeads=function(){var e,t,n,r;t=this.deployments,n=[];for(e in t)r=t[e],n.push({displayName:e,value:e,selected:this.active.name===e});return n},t.prototype.listVersions=function(){var e,t,n,r,o;t=this.deployments[this.active.name],n=u(this.LATEST_VERSION,t),r=[];for(o in n)e=n[o],r.push({displayName:this.formatVersion(o),value:o,selected:this.active.version===o,active:e});return r},t.prototype.updateHead=function(e){return this.active.name=r(e.target).val(),this.active.version=null,this.render()},t.prototype.updateVersion=function(e){var t,n,o,i;return this.active.version=r(e.target).val(),this.render(),o=this.active.version.split("."),i=o[0],n=o[1],t={name:this.active.name,version:i,patch:n},parseInt(i)>=0?(r.cookie("head",JSON.stringify(t),{path:"/"}),document.location.reload()):void 0},t}(s)},{}],448:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(148),o=e(437),i=e(150),s=e(29),c=e(513),l=e(114),d=e(126),p=e(496),h=e("underscore"),v=e(493),y=e(43),f=e(101),g=e(32).locales,u=e(98),m=e(231),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderTacoState"),this.listenTo(i,"add remove reset",this.renderTacoStateDebounced),this.listenTo(r,"add remove reset change:unread",this.renderTacoStateDebounced),this.updateAllAnnouncements=h.debounce(this.updateAllAnnouncements,6e4,!0),this.setInterval(function(e){return function(){return e.renderTacoState()}}(this),3e4)},t.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"},t.prototype.render=function(){return this.$el.html(v.fill("woof_header")),this.renderTacoState(),this},t.prototype.renderTacoState=function(){var e,t,n,r;n={alert:"woof-alert",unread:"woof-up",recentlyRead:"woof-crouch",none:"woof-hide"},e=this.$(".header-btn");for(r in n)t=n[r],e.removeClass(t);_.call(h.pluck(i.toJSON(),"type"),"downtime")>=0?(e.find(".js-phrase").text(f("announcements.maintenance")),e.addClass(n.alert)):e.find(".js-phrase").text(f("announcements.new stuff")),e.addClass(this.interestingAnnouncementCount()>0?n.unread:l.get("tacoShow")>Date.now()?n.recentlyRead:n.none)},t.prototype.interestingAnnouncementCount=function(){return i.forLocale(g[0]).filter(m.method("isUnread")).length},t.prototype.updateAllAnnouncements=function(){return r.fetch()},t.prototype.openAnnouncement=function(e){d.stop(e),this.updateAllAnnouncements(),c.toggle({elem:this.$(".header-btn"),view:new o({model:s.me(),modelCache:this.modelCache})}),y("Header","Announcement","Unread",this.interestingAnnouncementCount())},t}(p)},{}],449:[function(e,t,n){var r,o;r=e("react"),o=e(488)(),t.exports=r.createClass({displayName:"HelpOverlay",componentDidMount:function(){return window.addEventListener("message",this.receiveMessage)},componentWillUnmount:function(){return window.removeEventListener("message",this.receiveMessage)},receiveMessage:function(e){var t,n,r,o;if(e.source===this.refs.iframe.contentWindow)switch(n=e.data,r=n.type,o=n.value,r){case"resize":if(this.refs.loading.style.display="none",t=parseFloat(this.refs.iframe.style.height),!this.refs.iframe.style.height||o>t&&50>t-o)return this.refs.iframe.style.height=o+"px"}},render:o.renderable(function(){return o.div(function(){return o.div(".spinner.loading",{ref:"loading"}),o.iframe(".help-embedded-iframe",{ref:"iframe",src:"/contact?compact=1&trello=1&url="+encodeURIComponent(location.href)+"&source=from%20in%20app"})})})})},{}],450:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(210),s=e(29),a=e(156),u=e(438),c=e(509),d=e(34),p=e(126),h=e(455),m=e("underscore"),g=e(746),v=e(43),f=e(101),t.exports=l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-create-new-account":"createNewAccount"},t.prototype.className="header-banner mod-warning mod-invited",t.prototype.initialize=function(){return this.boardOrOrg=this.options.idBoard?this.modelCache.get("Board",this.options.idBoard):this.modelCache.get("Organization",this.options.idOrganization),d.loadMemberEmail(this.getGhost().id).then(function(e){return function(t){var n;if(null!=(n=t.get("email")))return i({url:"/1/search/members/",type:"get",data:{query:n},dataType:"json",success:function(t){return m.isEmpty(t)||"normal"!==t[0].memberType?void 0:e.hasAccount=!0}})}}(this)).finally(function(e){return function(){return e.render()}}(this)).done()},t.prototype.getInviteToken=function(){return p.inviteTokenFor(this.boardOrOrg.id)},t.prototype.getMemberAdder=function(){var e;return e=this.getInviteToken().split("-")[1],this.modelCache.get("Member",e)},t.prototype.getGhost=function(){var e;return e=this.getInviteToken().split("-")[0],this.modelCache.get("Member",e)},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.isLoggedIn=s.isLoggedIn(),this.boardOrOrg instanceof a?(e.isBoard=!0,e.modelName=this.boardOrOrg.get("name")):e.modelName=this.boardOrOrg.get("displayName"),e.modelType=this.boardOrOrg.typeName,n=this.getMemberAdder(),null!=n&&(e.memberAdder=n.toJSON(),e.isInviter=s.isMe(n)),t=this.getGhost(),e.ghost=null!=t?t.toJSON():void 0,e.signupUrl="/signup?"+r.param({reauthenticate:!0,returnUrl:location.pathname,email:null!=t?t.get("email"):void 0,fullName:null!=t?t.get("fullName"):void 0}),this.$el.html(g(e)),this},t.prototype.joinModel=function(e){var t;return p.stop(e),s.isLoggedIn()?(t=this.getGhost().get("email"),u.toggle("add email",{elem:r(e.target),model:this.model,html:f("confirm.add email.text",{ghostEmail:t}),data:this.model.toJSON(),fxConfirm:function(e){return function(){var t,n,r;return r=e.options.idBoard?"board":"organization",t=null!=(n=e.options.idBoard)?n:e.options.idOrganization,i({url:"/associate-json/"+r+"/"+t+"/"+p.inviteTokenFor(t),dataType:"json",type:"post",success:function(t){return null==t.error?(e.deleteTokenCookie(),window.location.reload()):void 0}})}}(this)})):void 0},t.prototype.deleteTokenCookie=function(){var e;return r.cookie("invite-token-"+(null!=(e=this.options.idBoard)?e:this.options.idOrganization),null,{path:"/"})},t.prototype.hideHeader=function(){return r(this.el).hide(),p.calcBoardLayout()},t.prototype.ignoreInvite=function(e){var t,n,r,i,s;return p.stop(e),null!=(t=this.getGhost())?(s=this.options.idBoard?"board":"organization",n=null!=(i=this.options.idBoard)?i:this.options.idOrganization,this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0}),this.hideHeader(),this.deleteTokenCookie(),r=function(){switch(s){case"board":return"rejected board invite";case"organization":return"rejected org invite"}}(),o.show(r,"error",null,5e3)):void 0},t.prototype.createNewAccount=function(e){return v("Header","Login/Signup Menu","Open Login/Signup Menu: Create New")},t}(h)},{}],451:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;s=e(70),o=e(455),d=e(491)(),c=e(231),p=c(e(43),"Header","New Locale Banner"),l=e(27),i=e("underscore"),u=e("locale").banners,a=e(71),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(e){this.locale=e.locale},t.prototype.events={"click .js-switch-language":function(){return p("Set locale to "+this.locale),this.setLocale()},"click .js-dismiss":function(){return p("Dismiss "+this.locale),this.dismiss(function(){})}},t.prototype.setLocale=function(){return this.model.setPref("locale",this.locale,function(e){return function(){return e.dismiss(function(){return document.location.reload()})}}(this))},t.prototype.dismiss=function(e){return this.model.dismissLanguageBannerFor(this.locale,function(t){return function(){return t.remove(),e()}}(this))},t.prototype.render=function(){var e,t,n,r,o;return o=this.locale.replace(/-/,"_"),e=null!=(n=null!=(r=u[this.locale])?r:u[o])?n:u[o.substr(0,o.indexOf("_"))],s(null!=e,"Attempt to show a NewLocaleBanner with an unrecognized locale"),t=i.find(l,function(e){return function(t){return t.code===e.locale}}(this)),s(null!=t,"Attempt to show a NewLocaleBanner with an unrecognized language"),this.$el.html(d.render(function(){return d.text(e.mainText.replace("{language}",t.name)),d.text(" "),d.a({href:"#",class:"quiet primary js-switch-language"},e.switchText),d.text(" - "),d.a({href:"#",class:"quiet js-dismiss"},e.dismissText)})),this},t}(o)},{}],452:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(6),i=e(455),a=e(493),s=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.render=function(){var e,t,n,o,i,u;return n=this.model.toJSON(),i=this.model.get("prefs"),t="public"===i.voting,e="public"===i.comments,o=t&&e?"subscribe vote comment":t?"subscribe vote":e?"subscribe comment":"subscribe",n.interactionText=s(["public interactions",o]),u=encodeURIComponent(r.getBoardUrl(this.model)),n.signupUrl="/signup?returnUrl="+u+"&source=public-board-banner",n.tourUrl="/tour?board="+u+"&source=public-board-banner",this.$el.html(a.fill("header_public_board",n)),this},t}(i)},{}],453:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(534),s=e(513),u=e(126),c=e(455),l=e(493),d=e(43),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",function(e){return function(){return e.$el.toggle(!o.canLogIn()),r(window).triggerHandler("resize")}}(this))},t.prototype.events={"click .js-change-password":"changePassword"},t.prototype.render=function(){return this.$el.html(l.fill("header_warning_password",this.model.toJSON())),this},t.prototype.changePassword=function(e){return u.stop(e),s.toggle({elem:this.$(".js-change-password"),view:new i({model:this.model,modelCache:this.modelCache})}),d("Header","Password Banner","Open Change Password Menu")},t}(c)},{}],454:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(455),i=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=function(){return this.$el.html(i.fill("header_two_factor_backups_banner")),this},t}(o)},{}],455:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e(496),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.className="header-banner mod-warning",t}(r)},{}],456:[function(e,t,n){var r,o;r=e("jquery"),o=e(290),t.exports={clear:function(){this.isActive()&&(this.viewer.$el.off("remove.attachment-viewer",this._handleViewRemove),this.viewer.close(),this.viewer=null)},isActive:function(){return null!=this.viewer},_handleViewRemove:function(){return this.viewer=null},show:function(e){this.clear(),this.viewer=new o(e),this.viewer.$el.on("remove.attachment-viewer",this._handleViewRemove.bind(this)),r("body").append(this.viewer.render().el)}}},{}],457:[function(e,t,n){var r,o,i,s,a,u,c,l;r=e("jquery"),i=e(73),s=e(97),a=e(18),u=e(513),c=e(126),l=e("underscore"),t.exports=o=function(){function e(){}return e.prototype.checkInsert=function(e){var t,n,o,l,d,p,h,m;if(d=s.getKey(e),u.isVisible&&!i.isTouch())if(e.shiftKey&&(d===a.ArrowUp||d===a.ArrowDown)||e.altKey&&(d===a.ArrowUp||d===a.ArrowDown));else if(d===a.Escape)c.stop(e),u.hide();else for(n=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",itemClass:".js-select-emoji"},{listClass:".js-card-list",itemClass:".js-select-card"}],o=0,p=n.length;p>o;o++)if(m=n[o],h=m.listClass,l=m.itemClass,t=r(".pop-over").find(h),t.length>0){if(d===a.Enter||d===a.Tab)return c.stop(e),t.find(".item:first").hasClass("selected")&&(this.keyAutoMention(e),t=r(".pop-over").find(h)),t.find(".item.selected:first "+l).first().click(),u.hide(),!1;if(d===a.ArrowUp||d===a.ArrowDown)return c.stop(e),c.navMenuList(t,".item",d),!1}},e.prototype.keyAutoMention=function(e){var t,n,r,o,d,p,h;if(!i.isTouch()){if(s.isArrow(s.getKey(e))||s.getKey(e)===a.Enter)return;return s.getKey(e)===a.Escape?void(u.isVisible&&c.stop(e)):(h=c.getWordFromCaret(this.getTextInput()),/^@\S/.test(h.str.substring(0,2))?(t=this.getAutoMentionerView("input"),0===t.filterMentionablesForMatches(h.str.substring(1).toLowerCase()).length?void u.hide():(u.show({elem:this.getMentionTarget(),view:t,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus()))):/^:[a-z0-9_]+$/.test(h.str)?(n=this.getEmojiCompleterView("input"),u.show({elem:this.getEmojiTarget(),view:n,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())):(r=c.getLineFromCaret(this.getTextInput()),p=/^(?:.*\s)?\#((?!\s)[^\#\.,;:@]{0,32})$/,null!=(o=null!=(d=p.exec(r.str))?d[1]:void 0)?(null==this.debouncedCardSearch&&(this.debouncedCardSearch=l.debounce(function(e){return function(t){var n,r;return n=e.getInputCardCompleterView(),r=function(){return u.show({elem:e.getCardTarget(),view:n,keepEdits:!0})},e._lastQuery=t,n.search(t,function(n,o){return t===e._lastQuery?n||l.isEmpty(o)?u.hide():r():void 0})}}(this),200)),void this.debouncedCardSearch(o)):this.setTimeout(function(){return u.hide()},5)))}},e}()},{}],458:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty,k=[].slice;r=e("jquery"),o=e(29),s=e(97),a=e(18),g=e(101),u=e(513),d=e(564),l=e(561),p=e(114),h=e(126),m=e(496),f=e("underscore"),y=e(493),b=e(43),c="recentMentions",v=p.get(c)||[],t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.viewTitleKey="mention",t.prototype.initialize=function(){var e,t,n;return(e=null!=(t=this.getCard())&&null!=(n=t.getBoard())?n.getOrganization():void 0)?this.listenTo(e.memberList,"add remove reset",this.frameDebounce(this.render)):void 0},t.prototype.events={"mouseenter .js-select-member":"hoverItem","click .js-select-member:not(.disabled)":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent","keyup .js-filter-mentionables":"keyupEvent"},t.prototype.render=function(){var e,t,n,r,o,i;return i=this,t=this.getMentionables(),this.cardMentionables=t.cardMentionables,this.boardMentionables=t.boardMentionables,this.commenterMentionables=t.commenterMentionables,this.allMentionables=t.allMentionables,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),e.showAllCardMembers=0<(n=this.cardMentionables.length)&&12>n,e.showAllBoardMembers=0<(r=this.boardMentionables.length)&&12>r,e.showAllCommenters=0<(o=this.commenterMentionables.length)&&12>o,this.$el.html(y.fill("popover_auto_mentioner",e)),this.$mentionablesList=this.$(".js-available-members"),e.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.cardMentionables.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.boardMentionables.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+this.commenterMentionables.length+")"),(e.showAllCardMembers||e.showAllBoardMembers||e.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide")),this.options.button?this.fillMentionables(this.allMentionables):this.options.input&&this.filterMentionables(),this},t.prototype.getCard=function(){return this.options.card},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.getMentionables=function(){var e,t,n,r,i,s,a,u,c,l,d,p,m,y,b,w;return m=o.myId(),i=this.getCard(),n=i.getBoard(),d=function(e){return function(t,r){return null==r&&(r={}),f.chain(t).reject(function(t){return t===m&&!e.options.selfMention||n.isDeactivated(e.modelCache.get("Member",t))}).sortBy(function(e){var t;return t=v.indexOf(e),-1===t?v.length:t}).map(function(t){return f.extend({},r,{id:t,names:h.getMemNameArrayFromId(e.modelCache,t),type:"member"})}).value()}}(this),s=d(i.getIdCardMems()),r=d(n.getIdBoardMems()),a=n.isPublic()?d(i.getIdCommenters()):[],b=null!=(y=n.getOrganization())?(l=[],c=[],e=y.memberList.filter(function(e){return!y.isDeactivated(e)}),n.isPrivate()?y.isFeatureEnabled("superAdmins")?(p=f.groupBy(e,function(e){return function(e){return y.ownedByMember(e)?"admin":"not-admin"}}(this)),l=f.pluck(p.admin,"id"),c=f.pluck(p["non-admin"],"id")):c=f.pluck(e,"id"):l=f.pluck(e,"id"),k.call(d(l)).concat(k.call(d(c,{disabled:!0,extraText:g(["mention member","board not team visible"])})))):[],u=[{type:"extra",text:"card",names:["all","card"],extraText:g(["automentioner","all-members-on-card"])},{type:"extra",text:"board",names:["all","board"],extraText:g(["automentioner","all-members-on-board"])}],w=f.uniq(k.call(s).concat(k.call(r),k.call(a),k.call(b)),function(e){return e.id}),t=w.concat(u),{cardMentionables:s,boardMentionables:r,commenterMentionables:a,orgMentionables:b,allMentionables:t}},t.prototype.clearMentionables=function(){return this.$mentionablesList.empty()},t.prototype.keydownEvent=function(e){var t;((t=s.getKey(e))===a.Enter||t===a.Tab)&&(h.stop(e),this.$mentionablesList.find(".item.selected:first .js-select-member").click())},t.prototype.keyupEvent=function(e){var t;if(t=s.getKey(e),t===a.Enter||t===a.Tab||t===a.ArrowLeft||t===a.ArrowRight);else{if(t!==a.ArrowUp&&t!==a.ArrowDown)return this.filterMentionables();h.stop(e),h.navMenuList(this.$mentionablesList,".item",t)}},t.prototype.filterMentionables=function(e){var t,n,o,i;return this.clearMentionables(),this.options.button?o=r(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(t=this.getTextInput(),i=h.getWordFromCaret(t),o=i.str.substring(1).toLowerCase()),n=this.filterMentionablesForMatches(o),this.options.input&&0===n.length?void this.setTimeout(function(){return u.hide()},5):(this.fillMentionables(n),h.selectMenuItem(this.$mentionablesList,".item",this.$mentionablesList.find(".item").first()))},t.prototype.filterMentionablesForMatches=function(e){var t;return t=RegExp("^"+h.escapeForRegex(e)),f.filter(this.getMentionables().allMentionables,function(e){return f.any(e.names,function(e){return t.test(e)})})},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),h.selectMenuItem(this.$mentionablesList,".item",t)},t.prototype.deselectMember=function(e){return this.$mentionablesList.find(".item").removeClass("selected")},t.prototype._membersFromIds=function(e){return f.compact(f.map(e,function(e){return function(t){return e.modelCache.get("Member",t)}}(this)))},t.prototype.fillMentionables=function(e){var t,n,r,o,i,s,a,u,c,p,h;for(e=f.groupBy(e,"type"),n=(e.member||[]).map(function(e){return function(t){var n,r,o;return o=t.id,n=t.disabled,r=t.extraText,{member:e.modelCache.get("Member",o),disabled:n,extraText:r}}}(this)),this.$mentionablesList.empty(),i=0,a=n.length;a>i;i++)p=n[i],c=p.member,t=p.disabled,o=p.extraText,this.appendSubview(this.subview(d,c,{disabled:t,extraText:o}),this.$mentionablesList);if(null!=e.extra)for(h=e.extra,s=0,u=h.length;u>s;s++)r=h[s],this.$mentionablesList.append(new l(r).render().el);this.$(".js-empty-list").toggleClass("hide",f.keys(e).length>0)},t.prototype.insertMember=function(e){var t,n,o,i;h.stop(e),b("Card Detail","Mention Member Autocomplete","Insert"),n=r(e.currentTarget).attr("autocompleteText"),this.saveRecent(r(e.currentTarget).attr("idMember")),t=this.getTextInput(),this.options.input?(i=h.getWordFromCaret(t),h.insertSelection(t,"@"+n+" ",i.start,i.end)):(o=h.getCaretPosition(t),null!=o&&(i={start:o,end:o}),h.insertSelection(t,"@"+n+" ",null!=i?i.start:void 0,null!=i?i.end:void 0)),u.hide()},t.prototype.selectAllCardMembers=function(e){var t,n;h.stop(e),b("Card Detail","Mention Member Autocomplete","Insert - All Card Members"),t=this.getTextInput().focus(),n="@card ",h.insertSelection(t,n),u.hide()},t.prototype.selectAllBoardMembers=function(e){var t,n;h.stop(e),b("Card Detail","Mention Member Autocomplete","Insert - All Board Members"),t=this.getTextInput().focus(),n="@board ",h.insertSelection(t,n),u.hide()},t.prototype.selectAllCommenters=function(e){var t,n,r,o,i,s,a;for(h.stop(e),b("Card Detail","Mention Member Autocomplete","Insert - All Commenters"),t=this.getTextInput().focus(),r="",s=this._membersFromIds(this.commenterMentionables),n=0,o=s.length;o>n;n++)i=s[n],a=i.get("username"),r+="@"+a+" ";h.insertSelection(t,r),u.hide()},t.prototype.saveRecent=function(e){var t;return t=p.get(c)||[],t=f.chain([e].concat(k.call(t))).uniq().first(16).value(),p.set(c,t),v=t},t}(m)},{}],459:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),s=e(97),a=e(18),u=e(34),c=e(513),l=e("bluebird"),d=e(126),p=e(496),h=e("underscore"),m=e(129),f=e(493),g=e(43),o=e(211),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="add card",t.prototype.events={"mouseenter .js-select-card":"hoverItem","click .js-select-card":"selectCard",keydown:"keydownEvent","keyup .js-search":"keyupEvent","input .js-search":"updateSearch"},t.prototype.initialize=function(){return this.cards=[],this.debouncedSearch=this.debounce(this.search,200).bind(this)},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0,e.hideLoading=!0),this.$el.html(f.fill("popover_card_completer",e)),this.renderCards()},t.prototype.renderCards=function(){var e,t,n,r,o;return e=this.$(".js-card-list").empty(),r=function(){var e,r,i,s;for(i=this.cards,s=[],e=0,r=i.length;r>e;e++)n=i[e],o=n.toJSON(),t=n.getBoard(),null!=t&&(o.boardName=t.get("name")),s.push(f.fill("select_card",o));return s}.call(this),e.append(r),this.$(".js-loading").addClass("hide"),d.selectMenuItem(e,".item",e.find(".item").first()),this},t.prototype.keyupEvent=function(e){var t;t=s.getKey(e),(t===a.ArrowUp||t===a.ArrowDown)&&(d.stop(e),d.navMenuList(this.$(".js-card-list"),".item",t))},t.prototype.updateSearch=function(e){var t;return t=this.$(".js-search").val(),this.debouncedSearch(t)},t.prototype.keydownEvent=function(e){var t,n,r;return t=this.$(".js-card-list"),((r=s.getKey(e))===a.Enter||r===a.Tab)&&(d.stop(e),n=t.find(".item.selected:first .js-select-card"),n.length>0)?n.click():void 0},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.search=function(e,t){var n,r,i,s,a;if(null==t&&(t=function(){}),e!==this._lastQuery){if(this._lastQuery=e,""===e)return this.cards=[],this.renderCards(),void t(null,[]);if(d.isShortId(e)&&(r=this.options.card,n=null!=r?r.getBoard():void 0,null!=n))return i=null!=(s=n.getCard(e))?l.resolve(s):u.loadCardData(n.id,e),void i.then(function(e){return[e]}).catch(o.NotFound,o.Unauthorized,function(){return[]}).tap(function(e){return function(t){return e.cards=t}}(this)).nodeify(t).catch(function(){}).done();a={query:e,modelTypes:"cards",partial:!0},u.loadSearchData(a).nodeify(function(n){return function(r,o){return e===n._lastQuery?null==r?(n.cards=h.chain(o.cards).map(function(e){return n.modelCache.get("Card",e.id)}).sortBy(function(e){return e.get("idBoard")===n.model.get("idBoard")?0:1}).value(),n.options.input&&h.isEmpty(n.cards)&&c.hide(),n.renderCards(),t(null,o.cards)):(n.options.input&&c.hide(),t(r)):void 0}}(this))}},t.prototype.hoverItem=function(e){var t,n;return t=this.$(".js-card-list"),n=r(e.target).closest(".item"),d.selectMenuItem(t,".item",n)},t.prototype.selectCard=function(e){var t,n;d.stop(e),n=r(e.target).closest(".js-select-card").attr("id"),t=this.modelCache.get("Card",n),null!=t&&this.insertCard(t),c.hide()},t.prototype.insertCard=function(e){var t,n,r,o,i;return o=e.get("url"),t=this.getTextInput(),this.options.input?(i=d.getLineFromCaret(t),r=i.str.lastIndexOf("#"),-1!==r&&(i.start+=r)):(n=d.getCaretPosition(t),null!=n&&(i={start:n,end:n})),d.insertSelection(t,o+" ",null!=i?i.start:void 0,null!=i?i.end:void 0),g("Card Detail","Comment Box - Added Card",this.options.input?"inline":"via menu")},t}(p)},{}],460:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h;r=e("jquery"),o=e(399),i=e(458),s=e(459),u=e(461),c=e(34),l=e(513),d=e(126),h=e(43),p={},t.exports=a=function(){function e(){}return e.prototype.openEmojiCompleter=function(e){return d.stop(e),l.pushView({view:this.getEmojiCompleterView("button")})},e.prototype.openAutoMentioner=function(e){return d.stop(e),l.pushView({view:this.getAutoMentionerView("button")}),h("Card Detail","Mention Autocomplete","Open Menu - With Click")},e.prototype.getAutoMentionerView=function(e){var t,n,r;return t=this.getCard(),null!=(n=null!=(r=t.getBoard())?r.getOrganization():void 0)&&(!p[n.id]||Date.now()-p[n.id]>3e5)&&(p[n.id]=Date.now(),c.loadOrganizationMembersData(n.id)),new i({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,selfMention:this.selfMention,modelCache:this.modelCache})},e.prototype.getEmojiCompleterView=function(e){var t;return t=this.getCard(),new u({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getCardCompleterView=function(e){var t;return t=this.getCard(),new s({model:t,button:"button"===e,input:"input"===e,target:this.getTextInput(),card:t,modelCache:this.modelCache})},e.prototype.getInputCardCompleterView=function(){var e;return e=this.getCard(),new s({model:e,input:!0,target:this.getTextInput(),card:e,modelCache:this.modelCache})},e.prototype.commentAddAttachment=function(e){var t,n,i,s,a,u;e.preventDefault(),t=r(e.target).closest(".comment-box").find("textarea"),a=t.prop("selectionStart"),s=t.prop("selectionEnd"),i=t.val().substring(a,s),n=this.getCard(),u=new o({model:this.model,defaultName:i
}),u.on("attach",function(e){var n,r,o;return o=e.url,n=e.name,n=n||i,r=n?"["+n+"]("+o+")":o,d.insertSelection(t,r+" ",a,s),t.trigger("autosize.resize")}),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:u,options:{model:n,modelCache:this.modelCache}}),h("Card Detail","Comment Box - Open Attachment Type Picker")},e.prototype.commentMentionMember=function(e){e.preventDefault(),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getAutoMentionerView("button")}),h("Card Detail","Comment Box - Mention Members")},e.prototype.commentAddEmoji=function(e){e.preventDefault(),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getEmojiCompleterView("button")}),h("Card Detail","Comment Box - Add Emoji")},e.prototype.commentAddCard=function(e){e.preventDefault(),l.toggle({elem:r(e.currentTarget),keepEdits:!0,view:this.getCardCompleterView("button")}),h("Card Detail","Comment Box - Add Card")},e}()},{}],461:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,w=[].slice;r=e("jquery"),o=e(29),s=e(462),a=e(97),u=e(18),c=e(34),l=e(513),p=e(126),h=e(496),m=e("underscore"),g=e(493),v=e(43),d=e("emoji-map"),f=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="emoji",t.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"selectEmoji",keydown:"keydownEvent","keyup .js-filter-emoji":"keyupEvent","click .js-upload-emoji":"openEmojiUploader"},t.prototype.initialize=function(){this._customEmoji={},o.me().isFeatureEnabled("customEmoji")&&(this.listenTo(o.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji())},t.prototype.render=function(){var e,t;return t=this,e={},this.options.input&&(e.input=!0),this.options.button&&(e.button=!0),this.$el.html(g.fill("popover_emoji_completer",e)),this.$emojiList=this.$(".js-available-emoji"),this.options.input&&this.filterEmoji(this.getInput()),this.options.button&&this.fillDefaultEmojiList(),this},t.prototype.keyupEvent=function(e){var t,n;return n=a.getKey(e),n===u.ArrowUp||n===u.ArrowDown?(p.stop(e),void p.navMenuList(this.$emojiList,".item",n)):n!==u.Enter&&n!==u.Tab?(t=this.getInput(),this.filterEmoji(t)):void 0},t.prototype.keydownEvent=function(e){var t,n;return((n=a.getKey(e))===u.Enter||n===u.Tab)&&(p.stop(e),t=this.$emojiList.find(".item.selected:first .js-select-emoji"),t.length>0)?t.click():void 0},t.prototype.updateCustomEmoji=function(){return this._customEmoji=m.object(o.me().customEmojiList.map(function(e){return[e.get("name"),e.get("url")]})),this.render()},t.prototype.getTextInput=function(){return r(this.options.target)},t.prototype.getInput=function(){var e,t;return this.options.button?this.$(".js-filter-emoji").val():(e=this.getTextInput(),t=p.getWordFromCaret(e),t.str.substring(1))},t.prototype.filterEmoji=function(e){return this.clearEmojiList(),this.fillEmojiList(e)?p.selectMenuItem(this.$emojiList,".item",this.$emojiList.find(".item").first()):void 0},t.prototype.renderEmojiList=function(e){var t,n,r,o,i;for(r=0,o=e.length;o>r;r++)n=e[r],t={name:n,image:null!=(i=this._customEmoji[n])?i:d[n]},this.$emojiList.append(g.fill("select_emoji",t));return this},t.prototype.fillDefaultEmojiList=function(e){var t;t=["thumbsup","smile","warning","sunglasses","ballot_box_with_check","facepalm"],this.renderEmojiList(t)},t.prototype.fillEmojiList=function(e){var t,n;return n=e.replace(/\W+/g,""),""===e?(this.fillDefaultEmojiList(),!1):/[A-Z]/.test(n)&&this.options.input?(l.hide(),!1):(n=n.toLowerCase(),this.$(".js-upload-emoji").text(f("upload emoji named",{emojiName:n})).attr("data-emojiname",n),this.$(".js-no-matching-emoji-helper").text(f("no matching emoji helper",{emojiName:n})),t=this.getEmojiSuggestions(n).slice(0,6),t.length>0?(this.$(".js-results").removeClass("hide"),this.$(".js-no-results").addClass("hide"),this.renderEmojiList(t)):(this.$(".js-results").addClass("hide"),this.$(".js-no-results").removeClass("hide")),0!==t.length)},t.prototype.clearEmojiList=function(){return this.$emojiList.empty()},t.prototype.getEmojiSuggestions=function(e){var t,n,r,o,i,s,a,u,c;if(a=RegExp("^"+p.escapeForRegex(e)),t=function(){var e;e=[];for(i in this._customEmoji)a.test(i)&&e.push(i);return e}.call(this),c=function(){var e;e=[];for(i in d)a.test(i)&&e.push(i);return e}(),null==this._sortOverride)for(u=["thumbsup","smile","warning","sunglasses","facepalm","question","thumbsdown","wink","smiley","smile_cat","bowtie","heart","laughing","bug","cry","dancer","dancers","clap","shipit","white_check_mark","star","arrow_down","point_down","point_up","point_left","metal"],this._sortOverride={},o=r=0,s=u.length;s>r;o=++r)n=u[o],this._sortOverride[n]=o+1;return m.uniq(w.call(t).concat(w.call(c))).sort(function(e){return function(t,n){var r,o;return r=e._sortOverride[t],o=e._sortOverride[n],r&&!o?-1:o&&!r?1:(r&&o&&(t=r,n=o),n>t?-1:t>n?1:0)}}(this))},t.prototype.hoverItem=function(e){var t;return t=r(e.target).closest(".item"),p.selectMenuItem(this.$emojiList,".item",t)},t.prototype.selectEmoji=function(e){var t;p.stop(e),t=r(e.target).closest(".js-select-emoji").find(".emoji-name").text(),this.insertEmoji(t),l.hide()},t.prototype.insertEmoji=function(e){var t,n,r;return t=this.getTextInput(),this.options.input?r=p.getWordFromCaret(t):(n=p.getCaretPosition(t),null!=n&&(r={start:n,end:n})),p.insertSelection(t,":"+(""+e).trim()+": ",null!=r?r.start:void 0,null!=r?r.end:void 0),v("Emoji Select",e)},t.prototype.openEmojiUploader=function(e){var t;p.stop(e),t=this.$(e.target).attr("data-emojiname"),l.pushView({keepEdits:!0,view:s,options:{model:o.me(),emojiName:t,completerView:this}}),v("Card Detail","Open Custom Emoji Uploader")},t}(h)},{}],462:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(29),a=e(513),u=e(126),c=e(496),d=e(493),l=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="upload emoji",t.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange","input .js-emoji-name":"nameChange"}},t.prototype.initialize=function(e){var t,n,r,o,i;for(this.completerView=e.completerView,this.hasGold=this.model.isFeatureEnabled("customEmoji"),this.hasBCGold=!1,o=this.model.organizationList.models,i=[],t=0,n=o.length;n>t&&(r=o[t],this.hasBCGold=r.isFeatureEnabled("goldMembers"),!this.hasBCGold);t++)i.push(void 0);return i},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON(),e.emojiName=this.options.emojiName,e.hasGold=this.hasGold,e.hasBCGold=this.hasBCGold,e.canUpload=this.hasGold||this.hasBCGold,this.$el.html(d.fill("popover_emoji_uploader",e)),this._validate(),this.renderEmoji(),this},t.prototype.getName=function(){return this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_")},t.prototype.renderEmoji=function(){var e,t,n,r,o;return this.$(".js-emoji-preview-name").text(":"+(this.getName()||"???")+":"),e=this.$(".js-emoji-preview"),t=this.$(".js-upload-emoji-file"),n=null!=(o=t.prop("files"))?o[0]:void 0,/^image\/.*/.test(null!=n?n.type:void 0)?(r=new FileReader,r.onload=function(e){return function(t){return e.$(".js-emoji-conversion").removeClass("hide"),e.$(".js-emoji-preview").attr("src",t.target.result)}}(this),r.readAsDataURL(n)):this.$(".js-emoji-conversion").addClass("hide"),this},t.prototype.fileChange=function(e){var t,n,o,i,s,a,u;return n=this.$(".js-emoji-name"),t=this.$(".js-upload-emoji-file"),""===n.val()&&(i=r(e.target),o=null!=(a=t.prop("files"))?a[0]:void 0,null!=o?s=o.name:t.val()&&(s=null!=(u=/[^\/]+$/.exec(t.val()))?u[0]:void 0),null==s&&(s=""),s=s.split(".")[0],s=s.toLowerCase().replace(/[^a-z0-9_]/g,""),n.val(s),this.$(".js-emoji-name").focus().select()),this.renderEmoji(),this._validate()},t.prototype.nameChange=function(e){return this.renderEmoji(),this._validate()},t.prototype._validate=function(e){var t,n,r,o,i,s;return r=this.getName(),t=this.$(".js-upload-emoji-file"),o=/^[a-z0-9_\s]+$/.test(r),n=(null!=(i=t.prop("files"))?i.length:void 0)>0||t.val(),s=o&&n&&(this.hasGold||this.hasBCGold),this.$(".js-invalid-name").toggleClass("hide",o||""===r),this.$(".js-upload-emoji").toggleClass("disabled",!s)},t.prototype.uploadEmoji=function(e){var t,n,s,c,l,d,p;if(u.stop(e),!r(".js-upload-emoji").hasClass("disabled")){if(this.$(".error").addClass("hide"),t=this.$(".js-upload-emoji-file"),s=null!=(p=t.prop("files"))?p[0]:void 0,c=this.getName(),l=function(e){return function(){return e.completerView.insertEmoji(c),a.hide()}}(this),!s&&t.val())return void u.uploadFile(i.myToken(),t,l);if(null!=s&&!u.validFileSize(s))return void o.flash("file too large","error");if(null!=s&&c)return d=new FileReader,n=new FormData,n.append("token",i.myToken()),n.append("file",s),n.append("name",c),d.onload=function(e){return function(t){return e.model.customEmojiList.create({url:t.target.result,name:c},{data:n,processData:!1,contentType:!1,success:l,error:function(){return this.$(".error").removeClass("hide")}})}}(this),d.readAsDataURL(s)}},t}(c)},{}],463:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(460),i=e(97),s=e(18),a=e(126),u=e(496),c=e(106),l=e(493),t.exports=c(r,o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="options",t.prototype.events=function(){return{"click .js-open-mention-selector":"openAutoMentioner","click .js-open-emoji-selector":"openEmojiCompleter",keydown:"keydownEvent"}},t.prototype.render=function(){return this.$el.html(l.fill("popover_insertion_menu")),this},t.prototype.keydownEvent=function(e){var t;return t=i.getKey(e),t===s.Enter?(a.stop(e),this.$emojiList.find(".item.selected:first .js-select-emoji").click()):t===s.Enter?(a.stop(e),this.$memList.find(".item.selected:first .js-select-member").click()):void 0},t.prototype.getCard=function(){return this.model.getCard()},t.prototype.selfMention=!0,t.prototype.getTextInput=function(){return this.options.parent.getTextInput()},t}(u))},{}],464:[function(e,t,n){var r,o;o=e(101),r={getPermLevelAltText:function(e){return o(["board perms",e,"short summary"])},getPermLevelAltTextForBoard:function(e){return r.getPermLevelAltText(e.getPermLevel())},getPermLevelIconClass:function(e){return"org"===e?"organization-visible":e},getPermLevelIconClassForBoard:function(e){return r.getPermLevelIconClass(e.getPermLevel())}},t.exports=r},{}],465:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].slice;r=e("jquery"),i=e(496),s=e("underscore"),a=e(40),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(){return this.listenPropagators={},this.listenTo(this.collection,{sort:this.sort,add:this.addModel,remove:this.removeModel,reset:this.reset}),t.__super__.initialize.apply(this,arguments)},t.prototype.getModels=function(){return this.collection.models},t.prototype.subview=function(){var e,n,r;return r=t.__super__.subview.apply(this,arguments),null==(e=this.listenPropagators)[n=r.cid]&&(e[n]=this.listenTo(r,"all",function(e){return function(){var t,n;return n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],e.trigger.apply(e,[n,r].concat(l.call(t)))}}(this))),r},t.prototype.addModel=function(e,t){var n;a("render","adding "+this.collection.model.name+" to "+this.viewType.name),n=this.subview(this.viewType,e),this.el&&this.insertSubview(n,s.indexOf(this.getModels(),e))},t.prototype.removeModel=function(e,t){return a("render","removing "+this.collection.model.name+" from "+this.viewType.name),this.removeSubview(this.viewForModel(e))},t.prototype.reset=function(e,t){var n,r,o,i,s,a,u,c;for(u=t.previousModels,o={},c=e.models,n=0,i=c.length;i>n;n++)a=c[n],o[a.cid]=!0;for(r=0,s=u.length;s>r;r++)a=u[r],o[a.cid]||this.removeModel(a);return this.sort()},t.prototype.sort=function(){var e,t,n,r,o;for(o=this.getModels(),t=e=0,n=o.length;n>e;t=++e)r=o[t],this.moveSubviewToPosition(this.subview(this.viewType,r),t)},t.prototype.render=function(){var e;return a("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.appendSubviews(function(){var t,n,r,o;for(r=this.getModels(),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(this.subview(this.viewType,e));return o}.call(this)),this},t.prototype.viewForModel=function(e){return this.existingSubview(this.viewType,e)},t.prototype.removeSubview=function(e){return this.deleteSubview(e)},t.prototype.insertSubview=function(e,t,n){null==n&&(n=this.$el),a("render","inserting "+e.$el.find("h2").text()+" at position "+t),"number"==typeof t?t=0>=t?n.children().eq(0):t<n.children().length?n.children().eq(t):void 0:t instanceof i&&(t=t.$el),e.$el.is(":empty")&&(e.delegateEvents(),e.render()),(null!=t?t.length:void 0)>0?e.$el.insertBefore(t):n.append(e.$el)},t.prototype.moveSubviewToPosition=function(e,t,n){var o,i,s,u,c;if(null==n&&(n=this.$el),e.$el.is(":empty"))return void this.insertSubview(e,t,n);for(c=n.children(".placeholder,.card-composer"),i=0,u=c.length;u>i;i++)s=c[i],r(s).index()<=t&&t++;o=e.$el.index(),o!==t&&(a("render","moving "+e.$el.find("h2").text()+" into position "+t),0===t?n.prepend(e.$el):t>=n.children().length?n.append(e.$el):e.$el.insertAfter(n.children().eq(t-1)))},t}(i)},{}],466:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m;r=e("underscore"),o=e(120),p=e(125),d=e(467),a=d.getTypes,s=d.getDropped,l=function(e,t){document.addEventListener(e,t)},h=function(e,t,n,r){var o,i,s;for(o=0,i=n.length;i>o;o++)s=n[o],p(e,t+":"+s,r)},i=function(e){var t;return e?(t=i(e.parentElement),t.push(e),t):[]},u=[],c=null,m=function(e,t){var n,r,s,a,l,d,p,m,f;if(clearTimeout(c),!(u.length>0&&u[u.length-1]===e)){for(p=i(e),s=o(p,u,function(e,t){return e===t}),m=u.slice(s),r=0,l=m.length;l>r;r++)n=m[r],h(n,"dd-leave",t,{bubbles:!1});for(f=p.slice(s),a=0,d=f.length;d>a;a++)n=f[a],h(n,"dd-enter",t,{bubbles:!1});return u=p}},l("dragenter",function(e){return m(e.target,a(e.dataTransfer)),e.preventDefault()}),l("dragover",function(e){var t;return t=a(e.dataTransfer),t.length>0&&(e.dataTransfer.dropEffect="copy"),m(e.target,t),e.preventDefault()}),l("dragleave",function(e){var t;return t=a(e.dataTransfer),c=setTimeout(function(){return m(null,t)},200)}),l("dragend",function(e){return m(null,[])}),l("drop",function(e){var t;t=a(e.dataTransfer),s(e).then(function(n){var r,o;for(o in n)r=n[o],p(e.target,"dd-drop:"+o,{detail:r});return m(null,t)}),e.preventDefault()})},{}],467:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w;r=e("bluebird"),o=e("underscore"),w=e(142),p=function(e){var t;return t=function(){switch(e.kind){case"file":return"files";case"string":switch(e.type){case"text/uri-list":return"url";case"text/plain":return"text"}}}(),t||"unknown"},g=function(e){return o.chain(e.items).map(p).compact().uniq().value()},h=function(e){switch(e){case"Files":case"application/x-moz-file":return"files";case"Url":case"text/x-moz-url":case"text/uri-list":return"url";case"Text":case"text/plain":return"text";default:return"unknown"}},v=function(e){return o.chain(e.types).map(h).compact().uniq().value()},f=function(e){return e.files.length>0?["files"]:[]},l=function(e){return r.all(o.toArray(e.items).map(function(e){var t;return t=p(e),"text"===t||"url"===t?new r(function(n){return e.getAsString(function(e){return n({type:t,content:e})})}):"files"===t?{type:t,content:e.getAsFile()}:null}))},u=function(e){return o.map(e.files,function(e){return{type:"files",content:e}})},c=function(e){var t;return t=e.types,null==t&&(t=e.getData("Text")?["Text"]:[]),o.map(t,function(t){var n,r;return r=h(t),"text"!==r&&"url"!==r||!(n=e.getData(t))?null:{type:r,content:n}})},i=function(e){return r.all(s.map(function(t){return t(e)})).then(function(e){return o.chain(e).flatten().compact().each(function(e){"text"===e.type&&w(e.content)&&(e.type="url")}).reject(function(e){return"url"===e.type&&!w(e.content)}).groupBy("type").mapObject(function(e,t){return"files"===t?o.pluck(e,"content"):e[0].content}).value()})},b=function(){return/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent)},y=function(e){var t;return t=window.DataTransfer||window.Clipboard,t?t.prototype.hasOwnProperty(e)||"types"===e&&b()||!window.DataTransfer&&"files"===e&&b():!1},m=y("items")?g:y("types")?v:y("files")?f:function(){return[]},s=y("items")?[l]:o.compact([y("files")?u:void 0,y("getData")&&y("types")?c:void 0]),a=function(e){return i(e.dataTransfer)},d=function(e){return null!=e.clipboardData?i(e.clipboardData):null!=window.clipboardData?i(window.clipboardData):r.resolve({})},t.exports={getTypes:m,getDropped:a,getPasted:d}},{}],468:[function(e,t,n){var r,o;r=e("jquery"),t.exports=o=function(){function e(){}return e.prototype.checkLength=function(e){var t,n,o,i;i=r(e.target).val(),o=this.maxLength||16384,t=0===i.length||/^\s*$/.test(i),n=!t&&i.length>o,null!=this.preventSubmit?this.preventSubmit(n,t):this._preventSubmit(n,t)},e.prototype._preventSubmit=function(e,t){return this.$(".js-too-long-warning").toggleClass("hide",!e),this.$(".js-is-empty-warning").toggleClass("hide",!t),this.$('input[type="submit"]').prop("disabled",t||e)},e}()},{}],469:[function(e,t,n){var r,o,i,s,a;a=e("moment"),r=e("underscore"),i=e(101),o=function(e,t){var n,o,i,s,a;for(i=0,s=t.length;s>i;i++){if(o=t[i],!r.isArray(o))return o;if(n=o[0],a=o[1],n>=e)return a}throw new Error("no matching dispatch value for "+e+"!")},s=function(e){var t,n,r;return t=e.complete,r=e.incomplete,n=null,function(e,i){return i?t():(null==n&&(n=r()),o(a(e).diff(a(),"hours",!0),n))}},t.exports={classForDueDate:s({complete:function(){return"is-due-complete"},incomplete:function(){return[[-36,"is-due-past"],[0,"is-due-now"],[24,"is-due-soon"],"is-due-future"]}}),titleForDueDate:s({complete:function(){return i("badge.due.complete")},incomplete:function(){return[[-36,i("badge.due.overdue")],[0,i("badge.due.recently overdue")],[1,i("badge.due.less than an hour")],[24,i("badge.due.less than a day")],i("badge.due.later")]}}),relativeInfoForDueDate:s({complete:function(){return null},incomplete:function(){return[[-36,i("badge.due.overdue short")],[0,i("badge.due.recently overdue short")],[24,i("badge.due.due soon short")],null]}})}},{}],470:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;r=e("jquery"),o=e(458),i=e(510),a=e(461),v=e(131),u=e(97),c=e(18),l=e(511),d=e(513),p=e(114),h=e(126),m=e(496),f=e("underscore"),b=e(40),w=e(493),y=e(101),g=e(91),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.allowNewlines=!0,t.prototype._draftKey=function(e){return"draft_"+this.model.id+"_"+e},t.prototype._saveDraft=function(e,t){return p.set(this._draftKey(e),t)},t.prototype._recallDraft=function(e){return p.get(this._draftKey(e))},t.prototype._discardDraft=function(e){return p.unset(this._draftKey(e))},t.prototype.editField=function(e){var t,n,o;return n=r(e.target).closest("a"),n.length>0&&"#"!==n.attr("href")||i.sorting||(t=r(e.target).closest(".editable"),0===t.length||v(t))?void 0:(h.stop(e),d.hide(),o=t.attr("attr"),this.edit(o))},t.prototype.edit=function(e){var t,n,r,o,i,s,a,u,c;e.indexOf(".")>-1&&(c=e.split("."),e=c[1]),t=this.$("[attr="+e+"]"),u=this.$(".js-no-higher-edits [attr="+e+"]"),n=t.not(u),0!==n.length&&(l.cancelEdits(),o=n.find(".edit:first"),0!==o.length&&(i=n.find(".field:first"),a=i.is("textarea"),s=i.parent().is(".card-detail-edit"),r=n.find(".current"),o.append(w.fill("edit_controls")),o.hasClass("delete")||o.find(".delete").remove(),o.hasClass("convert")||o.find(".convert").remove(),o.hasClass("options-menu")||o.find(".options-menu").remove(),n.addClass("editing"),""===i.val()&&i.val(h.traverse(this.model.attributes,null!=c?c:e)),this.waitForId(this.model,function(t){return function(){return i.data("draftKey",t._draftKey(e))}}(this)),b("editable",this.model),i.focus().select().autosize({append:!1})))},t.prototype.recallDrafts=function(){var e,t,n;return n=this,e=this.$("[attr]"),t=this.$(".js-no-higher-edits [attr]"),e.not(t).each(function(e){return function(t,o){var i,s,a,u;i=r(o),a=i.attr("attr"),null!=e.model.id&&(u=n._recallDraft(a),null!=u&&(s=i.find(".field:first"),s.val(u),e.defer(function(){return i.find(".edits-warning").show()})))}}(this))},t.prototype.stopEditing=function(e){return h.stop(e),l.cancelEdits(),!1},t.prototype.clearEdits=function(e){var t,n;return h.stop(e),t=r(e.target).closest(".editable[attr]"),n=t.attr("attr"),null!=n&&this._discardDraft(n),t.find(".field").val(""),t.find(".edits-warning").hide(),t.find(".edits-error").hide(),l.cancelEdits(),!1},t.prototype.validate=function(){var e,t,n,o,i,s,a,u,c;for(a=this.$(".editing.non-empty .field"),n=0,i=a.length;i>n;n++)if(e=a[n],/^\s*$/.test(r(e).val()))return!1;for(u=this.$(".editing .field"),o=0,s=u.length;s>o;o++)if(e=u[o],t=(null!=(c=r(e).val())?c:"").length,t>16384)return r(".editing").find(".edits-error").text(y("text too long",{over:g(t-16384)})).show(),!1;return!0},t.prototype.keydownEvent=function(e){var t;t=u.getKey(e),l.isEditing()&&(d.view instanceof a||d.view instanceof o?"function"==typeof this.checkInsert&&this.checkInsert(e):u.isForceSubmitEvent(e)||t===c.Enter&&(!r(e.target).is("textarea")||r(e.currentTarget).hasClass("single-line"))&&!e.shiftKey?(h.stop(e),this.commitEdits(e)):t!==c.Enter||this.allowNewlines||h.stop(e))},t.prototype.commitEdits=function(e){var t,n,o,i;return h.stop(e),t=r(e.target).closest(".editable.editing[attr]"),t.find(".edits-error").hide(),this.validate()?(i=this,o=this.model,n=this.customSet,t.remove("input[type=submit]"),t.removeClass("editing").each(function(){var e,n;return e=r(this).attr("attr"),n=r(this).find(".field").val(),i.allowNewlines||(n=n.replace(/[\r\n]+/g," ")),0===r.trim(n).length&&(n=""),o.get(e)===n?i._discardDraft(e):o.update(e,n,function(n){null!=n?t.find(".edits-error").text(n.message).show():i._discardDraft(e)})}).find(".field").val(""),t.find(".edits-warning").hide(),!0):void 0},t.prototype.clickSetting=function(e){var t,n,o,i;t=r(e.target),t.hasClass("disabled")||t.closest(".js-disabled").length||(n=t.attr("href"),n&&"#"!==n||(o=t.closest(".pref").attr("name"),o&&(i=t.attr("value"),i=function(){switch(i){case"true":return!0;case"false":return!1;default:return i}}(),this.model.setPref(o,i),this.model.save(),h.stop(e))))},t.prototype.delegateEvents=function(e){var n;return n={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":h.stopPropagation,"click textarea":h.stopPropagation},null!=this.model.setPref&&(n["click a"]="clickSetting"),t.__super__.delegateEvents.call(this,f.extend(n,e||this.events))},t}(m)},{}],471:[function(e,t,n){var r,o,i,s,a,u,c;u=e(101),o=e(513),i=e("react"),c=e(488)("file_link_handler"),s=e(126),a=e("underscore"),r=i.createClass({displayName:"FileLinkComponent",render:function(){var e;return e=this.props.url,c.render(function(){return c.div(function(){return c.p(function(){return c.format("browsers-prevent-file-links")}),c.input(".js-autofocus",{type:"text",value:e,readOnly:!0,onFocus:function(e){return a.defer(function(){return e.target.select()})}})})})}}),t.exports=function(e){return o.show({elem:e,getViewTitle:function(){return u(["view title","open file link"])},reactElement:i.createElement(r,{key:"FileLinkComponent",url:e.href})})}},{}],472:[function(e,t,n){var r,o,i,s,a,u,c,l;o=e(31),u=e(102),i=e(483),s=e("bluebird"),c=e(252),a=e("underscore"),r=u("FriendlyLink",["BoardRequired"]),l=c.renderable(function(e){var t,n;return t=e.icon,n=e.text,c.img(".known-service-icon",{src:t}),c.text(n)}),t.exports=function(e,t){var n;if(null==t)throw r.BoardRequired();return n="A"===e.tagName?[e]:a.toArray(e.querySelectorAll("a")),s.map(n,function(e){var n;return n=e.href,e.textContent===n?i.one({command:"format-url",board:t,options:{url:n}}).catch(i.Error.NotHandled,function(){return null}).then(function(n){return null!=(null!=n?n.text:void 0)?n:o.interpret(e.href,t.modelCache)}).then(function(t){return null!=t?(e.classList.add("known-service-link"),e.innerHTML=l(t)):void 0}):void 0}).done()}},{}],473:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m;o=e(6),i=e(471),p=e(143),s=e(511),a=e(33),u=e(513),m=e(134),c=e(270),l=e(126),r=e("jquery"),d=function(e){var t,n,s,a;if(t=r(e.target).closest("a"),n=t.attr("href"),n&&"#"!==n){if(0===n.indexOf("file://"))l.preventDefault(e),i(t[0]);else if(0===n.indexOf("/")||0===n.indexOf(siteDomain+"/")){if(a=n.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),s=a!==location.pathname.slice(1),window!==window.top&&h(a))return l.preventDefault(e),void window.open(a);p(n)&&null==r(this).attr("target")&&(l.preventDefault(e),s&&o.navigate(a,{trigger:!0}))}}else l.preventDefault(e)},h=function(e){var t,n,r,i,s,u;if(null==(n=o.getCurrentBoard()))return!1;if(i=/^([bc])\/([^\/]+)/.exec(e),null==i)return!0;switch(t=i[0],r=i[1],u=i[2],r){case"b":return u!==n.get("shortLink");case"c":return(null!=(s=a.get("Card",u))?s.getBoard():void 0)!==n;default:return!0}},t.exports=function(e){var t,n,i;if(n=o.getCurrentBoard(),i=n&&o.getCurrentBoardView(),u.isVisible&&!u.hardToClose&&0===r(e.target).closest(".pop-over").length&&r(e.target).closest("body").length>0)u.hide();else{if(r(e.target).is("input")||r(e.target).is("textarea")||e.target.attributes["data-reactid"])return void l.stopPropagation(e);u.isVisible&&r(e.target).closest(".pop-over").length>0||(c.get("showBoardsListSidebar")&&0===r(e.target).closest(".boards-drawer").length?c.hideUnpinnedSidebar():r(".new-comment").hasClass("focus")?r(".new-comment").removeClass("focus").find("textarea").blur():(null!=n?n.viewState.get("listComposerOpen"):void 0)?null!=n&&n.viewState.set("listComposerOpen",!1):(null!=n?n.composer.get("vis"):void 0)&&!r(e.target).closest(".card-composer").length>0?n.composer.save("vis",!1):s.isEditing()?s.cancelEdits():o.showingCalendar(i)&&0===r(e.target).closest(".calendar-day").length?r(".calendar-day.active").removeClass("active"):r("input, textarea").blur())}t=r(e.target).closest("a"),t.length&&m(e)&&d(e)}},{}],474:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(33),o=e("react"),i=e("xtend"),t.exports=function(e){return function(t){function n(e){n.__super__.constructor.apply(this,arguments),this.listeners=[]}return s(n,t),n.prototype.listenTo=function(e,t){return r.on(e,t),this.listeners.push({events:e,callback:t})},n.prototype.componentWillUnmount=function(){return this.listeners.forEach(function(e){var t,n;return n=e.events,t=e.callback,r.off(n,t)})},n.prototype.render=function(){var t;return t=i(this.props,{listenTo:this.listenTo.bind(this)}),o.createElement(e,t)},n}(o.Component)}},{}],475:[function(e,t,n){var r,o;o=e("moment"),r=e(101),t.exports=function(){var e,t;return t=o(),e=r("pasted file name",{date:t.format("l"),time:t.format("LTS")}),e+".png"}},{}],476:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O=[].slice;m=e("underscore"),r=e(29),i=e(157),s=e(6),o=e(156),u=e(198),l=e(204),p=e("bluebird"),j=e(102),c=e(33),B=e("xtend"),d=j("PluginHandlerContext",["InvalidSignature","InvalidType","NotSerializable"]),b={},C=function(e){var t;return null!=(t=s.getCurrentBoard())&&t.id===e},f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWYXZ",S=function(e){var t,n,r,o;for(null==e&&(e=16),t=[],n=r=0,o=e;o>=0?o>r:r>o;n=o>=0?++r:--r)t.push(f[Math.floor(Math.random()*f.length)]);return t.join("")},k={},v={card:{type:i,serialize:function(e){return{value:e.id}},deserialize:function(e){var t;return t=c.get("Card",e),null!=t&&C(t.get("idBoard"))?t:null}},board:{type:o,serialize:function(e){return{value:e.id}},deserialize:function(e){return C(e)?c.get("Board",e):null}},member:{type:u,serialize:function(e){return{value:e.id}},deserialize:function(e){return r.isMe(e)?c.get("Member",e):null}},el:{type:Element,serialize:function(e){var t;return t=S(),b[t]=e,{value:t,disposer:function(){return delete b[t]}}},deserialize:function(e){return b[e]}}},h="__insecure_signature",a=S(64),_=function(e){var t;return t=m.chain(e).pairs().sortBy(function(e){var t,n;return t=e[0],n=e[1],t}).filter(function(e){var t;return t=e[0],t!==h}).object().value(),[a,JSON.stringify(t),a].join("\n").split("").reduce(function(e,t){return e.map(function(e){return 31*e+t.charCodeAt(0)&4294967295})},[0,1,2,3]).map(function(e){return("00000000"+e.toString(16)).substr(-8,8)}).join("")},M=function(e){return e[h]=_(e),e},g=function(e){return _(e)===e[h]},x=function(e){return m.isString(e)||m.isNumber(e)||m.isBoolean(e)||m.isNull(e)||m.isUndefined(e)?!0:m.isFunction(e)||m.isRegExp(e)||m.isDate(e)?!1:m.isArray(e)?m.every(e,x):m.isObject(e)?x(m.values(e)):!1},T=function(e){var t;return t=[],p.try(function(){return M(m.mapObject(e,function(e,n){var r,o,i,s;if(null!=(r=v[n])){if(!(e instanceof r.type)){if(null==e)return null;throw d.InvalidType("value in context did not have the expected type")}return i=r.serialize(e),s=i.value,o=i.disposer,null!=o&&t.push(o),s}if(x(e))return e;throw d.NotSerializable("the value for "+n+" was not serializable")}))}).disposer(function(){var e,n,r;for(n=0,r=t.length;r>n;n++)(e=t[n])()})},y=function(e){if(!e||!g(e))throw d.InvalidSignature("Context signature check failed. This usually means that the Power-Up modified the context between calls to Trello.");return m.mapObject(e,function(e,t){var n;return null!=e&&v.hasOwnProperty(t)&&null!=(n=v[t])?n.deserialize(e):e})},w=function(){var e;return e=1<=arguments.length?O.call(arguments,0):[],M(B.apply(null,e))},t.exports={Error:d,serialize:T,deserialize:y,extend:w}},{}],477:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A;r=e("jquery"),_=e("underscore"),o=e(29),i=e(6),B=e(142),O=e(143),L=e(129),p=e(34),h=e(620),m=e(476),f=e(480),g=e(631),v=e(632),y=e(633),b=e(513),P=e(482),w=e("bluebird"),A=e("xtend"),s="Invalid context, missing board",a="Invalid context, missing card",u="Invalid context, missing el (or attempt to use el after initial request)",c="Invalid context, missing list",l="Invalid context, missing member",d="Invalid context, missing plugin",M=function(e,t){var n,r;return n=t.el,null!=n&&(b.contains(n)||b.toggledBy(n))?!0:null!=(r=T(e))&&b.contains(r)?!0:!1},S=null,C=function(){null!=S&&(S.remove(),S=null)},j=null,x=0,k=function(){r(".js-close-board-bar").off(),r(window).off("resize.plugin-board-bar"),null!=j&&(j.remove(),j=null,E(0))},E=function(e){return null==e&&(e=x),x=e,e>window.innerHeight/2&&(e=window.innerHeight/2),r(".board-canvas").css("margin-bottom",e+"px"),0===r(".plugin-board-bar").length?k():void 0},t.exports=function(e){var t,n,d,x;return d=e.idPlugin,t=e.allowRestricted,x=function(e){return _.mapObject(e,function(t){return function(n,r){var o,i,s;if(null==(o=null!=r?r.context:void 0))throw n.NotHandled("Missing context");if(s=function(e){var t,r,i;return t=e.command,i=e.el,r=e.options,w.using(m.serialize({
el:i}),function(e){return n.request(t,A(r,{context:m.extend(o,e)})).then(function(e){return function(e){return P(e,s)}}(this))})},r=P(r,s),i=m.deserialize(o),null==i)throw n.NotHandled("Invalid context");return t.call(e,n,A(r,{context:i}))}})},n={data:function(e,t){var n,r,o,i;if(i=t.context,n=i.board,r=i.card,null==n)throw e.NotHandled(s);return o=null!=r?r.getPluginData(d):void 0,A(n.getPluginData(d),o)},set:function(e,t){var n,r,i,a,u,c,l;if(i=t.context,u=t.scope,l=t.visibility,a=t.data,n=i.board,r=i.card,null==n)throw e.NotHandled(s);if("private"!==l&&"shared"!==l)throw e.NotHandled("Invalid value for visibility");if(!_.isString(a))throw e.NotHandled("Invalid value for data");if(c=function(){switch(u){case"card":return r||function(){throw e.NotHandled("Card scope not available without card context")}();case"board":return n;case"organization":return n.getOrganization()||function(){throw e.NotHandled("Unable to save plugin data at the organization level because the member is not in the organization")}();default:throw e.NotHandled("Invalid value for scope")}}(),"shared"===l){if(!("card"!==u&&"board"!==u||(null!=c?c.editable():void 0)))throw e.NotHandled("Scope not editable by active member");if("organization"===u&&!c.hasActiveMembership(o.me()))throw e.NotHandled("Scope not editable by active member")}c.setPluginData(d,l,a)},navigate:function(e,t){var n,r,o;if(n=t.context,r=t.url,!B(r))throw e.NotHandled("Not a supported url");if(!O(r))throw e.NotHandled("Navigation only allowed to Trello client URLs");o=r.replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),o!==location.pathname.slice(1)&&i.navigate(o,{trigger:!0})},showCard:function(e,t){var n,r,o,a;if(o=t.context,a=t.idCard,n=o.board,null==n)throw e.NotHandled(s);if(null!=(r=n.getCard(a)))return i.showCardDetail(r);throw e.NotHandled("Card not on board")},popup:function(e,t){var n,r,o,i,a,c,l;if(i=t.context,l=t.title,o=t.content,r=t.callback,n=i.board,a=i.el,null==n)throw e.NotHandled(s);if(c=function(){var t;switch(t={model:n,title:l,content:o,callback:r},o.type){case"iframe":return new v(t);case"list":return new y(t);default:throw e.NotHandled("Uknown type for popup")}},M(e,i))b.pushView({view:c()});else{if(null==a)throw e.NotHandled(u);b.toggle({elem:a,view:c()})}},"close-popup":function(e,t){var n;n=t.context,M(e,n)&&b.hide()},"pop-popup":function(e,t){var n;n=t.context,M(e,n)&&b.popView()},overlay:function(e,t){var n,o,i;if(i=t.context,o=t.content,n=i.board,null==n)throw e.NotHandled(s);C(),S=new g({model:n,content:o}),r("body").append(S.render().el)},"close-overlay":function(e,t){var n;if(n=t.context,null==S)throw e.NotHandled("No overlay is being displayed");C()},"board-bar":function(e,t){var n,o,i,a,u;if(i=t.context,o=t.content,n=i.board,a=i.el,null==n)throw e.NotHandled(s);k(),j=new h({model:n,content:o}),r(".board-main-content").append(j.render().el),u=o.height||200,E(u),r(".js-close-board-bar").one("click",function(){return k()}),r(window).on("resize.plugin-board-bar",_.debounce(function(){return E()},300))},"close-board-bar":function(e,t){var n;if(n=t.context,null==j)throw e.NotHandled("No board bar is being displayed");k()},resize:function(e,t){var n,r,o,i;if(n=t.context,i=t.width,r=t.height,o=T(e),!o)throw e.NotHandled("Could not find iframe to resize");null!=i&&(o.style.width=i+"px"),r&&(o.style.height=r+"px",o.parentNode.className.indexOf("plugin-board-bar")>-1&&E(r))},card:function(e,t){var n,r,o;if(r=t.context,o=t.fields,null!=(n=r.card))return f.card(n,o);throw e.NotHandled(a)},cards:function(e,t){var n,r,o;if(r=t.context,o=t.fields,null!=(n=r.board))return f.cards(n.openCards(),o);throw e.NotHandled(s)},list:function(e,t){var n,r;return n=t.context,r=t.fields,w.try(function(){var e,t;return null!=(t=n.list)?t:null!=(e=n.card)?null!=(t=e.getList())?t:p.getCardList(e.id):null}).then(function(t){if(null==t)throw e.NotHandled(c);return f.list(t,r)})},lists:function(e,t){var n,r,o;if(r=t.context,o=t.fields,null!=(n=r.board))return f.lists(n.listList.models,o);throw e.NotHandled(s)},member:function(e,t){var n,r,o;if(n=t.context,r=t.fields,null!=(o=n.member))return f.member(o,r);throw e.NotHandled(l)},board:function(e,t){var n,r,o;if(r=t.context,o=t.fields,null!=(n=r.board))return f.board(n,o);throw e.NotHandled(s)},"attach-to-card":function(e,t){var n,r,o,i,s;if(r=t.context,s=t.url,i=t.name,o=t.mimeType,null!=(n=r.card))return L(n,"uploadUrl",{url:s,name:i,mimeType:o}).return();throw e.NotHandled(a)}},t&&_.extend(n,{"request-token":function(e,t){var n,o,i,s;if(n=t.context,i=t.name,o=t.key,s=t.scope,!o)throw e.NotHandled("Missing API key");if(!i)throw e.NotHandled("Missing app name");if(!s)throw e.NotHandled("Missing scope");return new w(function(t){var n,a;return a=function(n){var r;if(r=/<pre>\s*([0-9a-f]+)\s*<\/pre>/.exec(n),!r)throw e.NotHandled("Failed to fetch token");return t(r[1])},n=function(t){var n,o;if(n=/input type="hidden" name="requestKey" value="([0-9a-f]+)"/.exec(t),o=/input type="hidden" name="signature" value="([0-9a-f\/]+)"/.exec(t),!n||!o)throw e.NotHandled("Unable to get required parameters");return r.post("/1/token/approve",{approve:"Allow",requestKey:n[1],signature:o[1]},a)},r.get("/1/authorize?expiration=never&response_type=token&name="+encodeURIComponent(i)+"&scope="+encodeURIComponent(s)+"&key="+encodeURIComponent(o),n)})}}),x(n)},T=function(e){var t;return t=document.querySelectorAll("iframe.plugin-iframe"),_.find(t,function(t){return t.contentWindow===e.source})}},{}],478:[function(e,t,n){var r,o,i,s,a,u,c,l;c=e(102),r=e(204),o=e(477),i=e(479),u=e(486),l=e("xtend"),a=c("PluginCache",["InconsistentUrlForId","InvalidArgument"]),s=function(){function e(){this.pluginFromUrl={},this.pluginFromId={}}return e.prototype.Error=a,e.prototype.get=function(e){var t,n,s;if(!(e instanceof r))throw a.InvalidArgument("expected a plugin");if(n=e.id,s=n===u.id&&null!=u.url?u.url:e.get("url"),null!=(t=this.fromId(n))){if(t.manifestUrl!==s)throw a.InconsistentUrlForId("the cached plugin is using a different url");return t}return e=new i(n,e.get("name"),s,o({idPlugin:n,allowRestricted:/^https:\/\/[\w-]+\.(?:staging\.)?trello\.services\/manifest\.json$/.test(s)||/^http:\/\/localhost:\d+\/[\w-]+\/manifest\.json$/.test(s)})),this.pluginFromUrl[s]=this.pluginFromId[n]=e,e},e.prototype.fromUrl=function(e){return this.pluginFromUrl[e]},e.prototype.fromId=function(e){return this.pluginFromId[e]},e}(),t.exports=new s},{}],479:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=[].slice,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),c=e("underscore"),l=e(122),d=e(102),o=e(214),p=e(254),a=e("bluebird"),u=e(258),s=d("Plugin",["InvalidManifestUrl","UnableToLoadManifest","NotHandled","Timeout"]),h=function(e,t){return l(t,function(t,n){return"url"===n&&c.isString(t)?t.replace(/^\.\//,e):void 0})},m=function(e){var t;return t=p(e).set("hash",null).set("query",null),t.set("pathname",t.pathname.replace(/[^\/]+$/,"")),t.href},t.exports=i=function(){function e(e,t,n,r){if(this.id=e,this.name=t,this.manifestUrl=n,this.handlers=r,null==this.manifestUrl)throw s.InvalidManifestUrl("invalid url")}return e.Error=s,e.prototype.readFromManifest=function(){var e,t,n,r,o,i,s;for(o=2<=arguments.length?f.call(arguments,0,t=arguments.length-1):(t=0,[]),e=arguments[t++],s=this._loadManifest(),n=0,i=o.length;i>n;n++)r=o[n],s=s.get(r);return s.then(function(t){return c.isUndefined(t)?e:t})},e.prototype.getName=function(){return this.readFromManifest("name","").catch(s.UnableToLoadManifest,function(e){return function(){return e.name}}(this))},e.prototype.getDescription=function(){return this.readFromManifest("description","")},e.prototype.getDetails=function(){return this.readFromManifest("details","")},e.prototype.getImages=function(){return this.readFromManifest("images",[])},e.prototype.getRecommend=function(){return this.readFromManifest("recommend",{})},e.prototype.getIconUrl=function(){return this.readFromManifest("icon","url",null)},e.prototype._loadManifest=function(){return null!=this._manifest?this._manifest:this._manifest=a.try(function(e){return function(){return new a(function(t,n){return r.ajax({url:e.manifestUrl,dataType:"json",timeout:1e4}).done(t).fail(function(t,r){return"undefined"!=typeof console&&null!==console&&console.error("Unable to load manifest. Error="+r+" Url="+e.manifestUrl),n(s.UnableToLoadManifest())})})}}(this)).then(function(e){return function(t){return h(m(e.manifestUrl),t)}}(this))},e.prototype._getIo=function(){return null!=this._io?this._io:this._io=this.readFromManifest("connectors","iframe","url",null).then(function(e){return function(t){return new o(t,e.handlers)}}(this))},e.prototype.request=function(e,t,n){return new a(function(e){return u.onVisible(e)}).then(function(r){return function(){return r._getIo().call("request",e,t,n).catch(o.Error.NotHandled,function(){throw s.NotHandled()}).catch(o.Error.Timeout,function(e){throw s.Timeout(e.message)})}}(this))},e.prototype.supports=function(e){return this.readFromManifest("capabilities",[]).then(function(t){return g.call(t,e)>=0}).catch(s.UnableToLoadManifest,function(){return!1})},e.prototype.canReadManifest=function(){return this._loadManifest().then(function(){return!0}).catch(s.UnableToLoadManifest,function(){return!1})},e}()},{}],480:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("underscore"),i=e(102),r=i("PluginModelSerializer",["InvalidField"]),s=function(e,t,n){if(o.any(n,function(e){return _.call(t,e)<0}))throw r.InvalidField();return o.pick(e,n)},a=function(e,t,n,i){return null==i&&(i={}),o.chain(n).map(function(n){var o;if(_.call(t,n)<0)throw r.InvalidField();return o=null!=i[n]?i[n](e,n):e.get(n),[n,o]}).object().value()},b=function(e,t){return null==t&&(t=["bytes","height","scaled","url","width"]),s(e,["bytes","height","scaled","url","width"],t)},w=function(e,t){return e.map(o.partial(b,o,t))},u=function(e,t){return null==t&&(t=["id","url","name","edgeColor","previews"]),a(e,["id","url","name","edgeColor","previews"],t,{previews:function(){var t;return w(null!=(t=e.get("previews"))?t:[])}})},c=function(e,t){return e.map(o.partial(u,o,t))},l=function(e,t){return null==t&&(t=["id","name"]),a(e,["id","name","url","shortLink","members"],t,{members:function(){return y(e.memberList)}})},d=function(e,t){var n;return null==t&&(t=["id","name"]),n=["id","name","desc","due","closed","cover","attachments","members","labels","url","shortLink","idList","idShort"],a(e,n,t,{attachments:function(){return c(e.attachmentList)},cover:function(){var t,n;return null!=(n=e.get("idAttachmentCover"))&&null!=(t=e.attachmentList.get(n))?u(t):null},labels:function(){return m(e.labelList)},members:function(){return y(e.memberList)}})},p=function(e,t){return null==t&&(t=["id","name"]),e.map(o.partial(d,o,t))},h=function(e,t){return null==t&&(t=["name","color"]),a(e,["name","color"],t)},m=function(e,t){return e.map(o.partial(h,o,t))},f=function(e,t){return null==t&&(t=["id","name"]),a(e,["id","name","cards"],t,{cards:function(){return p(e.cardList.models,["id","name","desc","due","cover","attachments","members","labels","url","shortLink"])}})},g=function(e,t){return null==t&&(t=["id","name"]),e.map(o.partial(f,o,t))},v=function(e,t){return null==t&&(t=["id","fullName","username"]),a(e,["id","fullName","username","avatar"],t,{avatar:function(){var t;return t=e.get("avatarHash"),t?[window.avatarDomain,t,"50.png"].join("/"):null}})},y=function(e,t){return e.map(o.partial(v,o,t))},t.exports={Error:r,attachment:u,attachments:c,board:l,card:d,cards:p,list:f,lists:g,member:v}},{}],481:[function(e,t,n){var r;r=e("xtend"),t.exports=function(e){return r(e,{locale:window.locale})}},{}],482:[function(e,t,n){var r,o,i;r=e(122),o=e(481),i=e("xtend"),t.exports=function(e,t){return r(e,function(e){var n,r,s;return null!=e&&null!=(s=e._callback)?(n=function(e,n){return function(r){return null==r&&(r={}),t(i(r,{command:"callback",options:{action:n,callback:e,options:o(r.options)}}))}},r=n(s,"run"),r.retain=n(s,"retain"),r.release=n(s,"release"),r):void 0})}},{}],483:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S;f=e("underscore"),r=e(29),k=e(102),s=e(33),a=e(34),u=e(204),l=e(479),d=e(478),c=e(476),C=e(481),x=e(482),m=e("bluebird"),S=e("xtend"),h=k("PluginRunner",["NotHandled","InvalidPlugin","Timeout"]),o=5e3,i=1e4,g={},w=function(e){return null==g[e]&&(g[e]=a.loadBoardEnabledPlugins(e),g[e].delay(i).then(function(){return delete g[e]})),g[e]},_=function(e,t){return m.try(function(){var n,r;if(t instanceof u)return t;if(!f.isString(t))throw h.InvalidPlugin("invalid plugin specifier");if(r=t,null!=(n=s.get("Plugin",r)))return n;if(null==e)throw h.InvalidPlugin("unable to find plugin");return w(e.id).then(function(){if(null!=(n=s.get("Plugin",r)))return n;throw h.InvalidPlugin("plugin not available to board")})})},b=function(e){var t,n,r;return r=e.plugins,n=e.plugin,t=e.board,r=null!=r?r:null!=n?[n]:null!=t?t.idPluginsEnabled():[],m.map(r,function(e){return function(e){return _(t,e)}}(this))},y=function(e){var t,n,o,i;return t={member:r.me(),permissions:{board:(null!=e&&null!=(o=e.board)?o.editable():void 0)?"write":"read"}},n=null!=e&&null!=(i=e.board)?i.getOrganization():void 0,null!=n&&(t.permissions.organization=(null!=n?n.hasActiveMembership(r.me()):void 0)?"write":"read"),null!=e.card&&(t.permissions.card=e.card.editable()?"write":"read"),S(t,f.pick(e,["board","card","command","el","options"]))},v=function(e){var t;return t=e.options},j=function(e){if(0===e.length)throw h.NotHandled("no plugin handles this command");return e[0]},p=function(){function e(){}return e.prototype.Error=h,e.prototype.processCallbacks=function(e,t,n){return x(e,function(e){return function(r){var o;return o=S(n,r),e._run([t],y(o),v(o)).then(j).catch(h.NotHandled,function(e){throw h.NotHandled("attempt to run callback on plugin "+t.plugin.id+" failed")})}}(this))},e.prototype._run=function(e,t,n,r){var i,s,a,u;return null==r&&(r=o),a=t.command,i=t.board,s=t.card,u=t.member,m.using(c.serialize(t),function(t){return function(o){return m.filter(e,function(e){var t;return t=e.io,t.supports(a)}).map(function(e){var c,d,p;return p=e.plugin,d=e.io,c=S(n,{context:o}),d.request(a,C(c),r).then(function(n){return{response:t.processCallbacks(n,e,{board:i,card:s,member:u})}}).catch(l.Error.NotHandled,l.Error.Timeout,function(){return null})}).filter(function(e){return null!=e}).map(function(e){var t;return t=e.response})}}(this))},e.prototype._runFromOptions=function(e){var t,n,r;return r=b(e),n=y(e),t=v(e),m.resolve(r).map(function(e){return{plugin:e,io:d.get(e)}}).then(function(r){return function(o){return r._run(o,n,t,e.timeout)}}(this))},e.prototype.all=function(e){return this._runFromOptions(e).then(f.flatten)},e.prototype.one=function(e){return this._runFromOptions(e).then(j)},e}(),t.exports=new p},{}],484:[function(e,t,n){var r,o,i,s,a;o=e("underscore"),i=e(121),r=e("hearsay"),a={},s=function(e,t){var n,s,a;return a=e.snoopIdPluginsEnabled().map(function(n){var i;return 0===n.length?r.const({}):(i=n.map(function(n){return t?r.combine(e.snoopPluginData(n),t.snoopPluginData(n)):e.snoopPluginData(n)}),r.combine.apply(r,i).map(function(e){return o.object(n,e)}))}).latest(),s=a.distinct(o.isEqual),n=i(s),n.use(),n},t.exports=function(e,t){var n,r;return t?null!=a[n=e.id+t.cid]?a[n]:a[n]=s(e,t):null!=a[r=e.id]?a[r]:a[r]=s(e)}},{}],485:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(488)(""),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e;return e=this.props.items,i.ul(".pop-over-list",function(){return e.forEach(function(e){return i.li({onClick:e.onClick},function(){return i.addElement(e.content)})})})}),t}(o.Component),t.exports=r},{}],486:[function(e,t,n){var r,o;r=e(114),o=r.getRaw("powerUpPreviewUrl"),t.exports=null!=o?{id:"55a5d917446f51777421000d",url:o}:{}},{}],487:[function(e,t,n){var r,o,i,s,a,u;r=e("react-dnd-html5-backend"),o=e(513),i=e("react"),u=e(473),s=e("react-dnd"),a=i.createClass({displayName:"ReactRootComponent",render:function(){return i.createElement("div",{className:"js-react-root",onClick:this.dismissPopover},this.props.children)},dismissPopover:function(e){e.isDefaultPrevented()||u(e)}}),t.exports=s.DragDropContext(r)(a)},{}],488:[function(e,t,n){var r,o,i,s,a,u,c=[].slice;r=e(6),u=e(492),a=e(134),s=e("recup"),i=e(251),o=e("underscore"),t.exports=u(i(s,{b:function(){var e,t,n,r,o,i;if(o=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(e),t=i.attrs,n=i.contents,null!=t.href)throw Error("Can't specify an href on a `b` tag");if(t.href="#",null!=t.onClick)throw Error("onClick must be a positional argument to `b`");return r=t.disabled,t.onClick=function(e){return e.preventDefault(),r?void 0:o(e.currentTarget)},this.a(t,n)},link:function(){var e,t,n,o,i,s;if(s=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(e),t=i.attrs,n=i.contents,null!=t.href)throw Error("Can't specify an href on a `link` tag");return t.href=s,o=t.onClick,t.onClick=function(e){a(e)&&(e.preventDefault(),"function"==typeof o&&o(),r.navigate(s,{trigger:!0}))},this.a(t,n)},radio:function(e,t,n){var r,i;return i=function(r){var o;r.target.checked&&(o={},o[t]=n,e.setState(o))},r=o.isEqual(e.state[t],n),this.input({type:"radio",name:t,value:n,checked:r,onChange:i})}}))},{}],489:[function(e,t,n){var r,o;o=function(){function e(){this.viewsToBeRemoved=[]}return e.prototype.enqueue=function(e){var t,n,r,o;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],o.$el.detach(),r.push(this.viewsToBeRemoved.push(o));return r},e.prototype.processQueue=function(){var e,t,n,r;for(n=Date.now(),e=0,t=[];Date.now()-n<10&&this.viewsToBeRemoved.length>0;)r=this.viewsToBeRemoved.shift(),r.remove(),t.push(e++);return t},e}(),t.exports=r=new o,setInterval(function(){return r.processQueue()},10)},{}],490:[function(e,t,n){var r,o;o=e(43),t.exports=r=function(){function e(){}return e.prototype.switchSection=function(e){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e.target).addClass("active"),o(this.model.typeName+" View","Tab Navigation","Open "+this.$(e.target).text()+" Page")},e}()},{}],491:[function(e,t,n){var r,o;o=e(492),r=e(66),t.exports=o(r)},{}],492:[function(e,t,n){var r,o,i,s,a,u,c,l={}.hasOwnProperty,d=[].slice;r=e("underscore"),o=e(71),i=e(101),a=e(251),c=e("xtend"),u=function(e){var t,n;return r.object(function(){var r;r=[];for(t in e)l.call(e,t)&&(n=e[t],r.push([t,n.toString()]));return r}())},s={format:function(){this.raw(this.l.apply(this,arguments))},formatText:function(){return this.text(this.l.apply(this,arguments))},classify:function(e){var t,n;return function(){var r;r=[];for(t in e)n=e[t],n&&r.push(t);return r}().join(" ")},urlify:function(e){return e=e.replace("'","\\'").replace('"','\\"').replace("(","\\(").replace(")","\\)"),"url('"+e+"')"},stylify:function(e){var t,n;return function(){var r;r=[];for(t in e)n=e[t],n&&r.push(t+": "+n+";");return r}().join("")},optionSelected:function(e,t,n){return e&&(t=r.extend({selected:"selected"},t)),this.option(t,n)},check:function(e,t){this.format(t),this.text(" "),e&&(this.icon("check"),this.text(" "))},icon:function(e,t,n){var r,o,i;null==n&&(n={}),"object"==typeof t&&(n=t,t=void 0),r=null!=(i=n.class)?i:"",o=c(n,{class:("icon-sm icon-"+e+" "+r).trim()}),this.span(o),null!=t&&(this.raw("&nbsp;"),this.format(t))}},t.exports=function(e){var t;return t=a(e,s),function(e){return a(t,{l:function(t,n,r){return t=o.normalizeKeyPath(t),i(["templates",e].concat(d.call(t)),u(n),r)}})}}},{}],493:[function(e,t,n){var r,o,i,s,a;r=e(29),s=e(491)(),a=e(763),o=e("underscore"),i={mustacheRenderWithHelpers:function(e,t,n,i){var a;return null==n&&(n={}),null==i&&(i={}),a=o.extend({__ed:n.editable,__own:n.owned,__loggedIn:r.isLoggedIn(),__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain},t),s.mustacheRender(e,a,i)},mustacheRenderModel:function(e,t,n,r){var s;return null==r&&(r={}),s={editable:"function"==typeof t.editable?t.editable():void 0,owned:"function"==typeof t.owned?t.owned():void 0},n=o.extend(t.toJSON(),n),i.mustacheRenderWithHelpers(e,n,s,r)},fill:function(e,t,n,r){var o;if(null==t&&(t={}),null==n&&(n={}),null==r&&(r={}),o=a[e],null==o)throw new Error("Could not find template "+e+"!");return i.mustacheRenderWithHelpers(o,t,n,r)},fillFromModel:function(e,t,n,r){var o;if(null==n&&(n={}),null==r&&(r={}),o=a[e],null==o)throw new Error("Could not find template "+e+"!");return i.mustacheRenderModel(o,t,n,r)},fillMenu:function(e,t,n){return i.fill("menu_base",{content:this.fill(e,t,n)})}},t.exports=e(251)(a,i)},{}],494:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;r=e("jquery"),o=e(73),i=e(97),s=e(18),a=e(116),c=e(126),l=e("underscore"),m=e(40),g=e(43),f=e(467),h=f.getTypes,p=f.getPasted,v=e(124),d=e(231),t.exports=u=new(function(){function e(){var e,t,n,o;for(this._handlers={},this.clear(),o=["keydown","keypress","paste"],t=0,n=o.length;n>t;t++)e=o[t],r(document).bind(e,this[e].bind(this));a.on("pasteImage",function(e){return function(t){return e.triggerPasted("files",[t])}}(this))}var t;return e.prototype.precedence={global:0,default:1,header:2,board:3,board_sidebar:3,list:4,card:5,search_box:6,dialog:10,dialog_view:12,popover:30,popover_view:32,attachment_viewer:100,quick_card_editor:100},e.prototype._isKeyEligible=function(e){var t;return t=i.getKey(e),!(o.isTouch()||t===s.Unknown||t!==s.Escape&&r(e.target).is("input:visible,textarea:visible,select:visible")||e.ctrlKey||e.altKey||e.metaKey)},e.prototype.addHandler=function(e,t){var n,r,o,i;return i=t.scope,o=t.precedence,r=t.modal,null==o&&(o=this.precedence[i]),null==o&&(m("userinput","Missing precedence for "+i),o=this.precedence.default),null==r&&(r=!1),null==(n=this._handlers)[i]&&(n[i]={}),this._handlers[i]={target:e,scope:i,precedence:o,modal:r},m("userinput","Adding handler for "+i)},e.prototype.removeHandlerScope=function(e){var t,n;t=[];for(n in this._handlers)n===e&&(m("userinput","Removing handlers for "+n),t.push(delete this._handlers[n]));return t},e.prototype.removeHandler=function(e){var t,n,r,o;n=this._handlers,r=[];for(o in n)t=n[o].target,e===t&&(m("userinput","Removing handler for "+o),r.push(delete this._handlers[o]));return r},e.prototype.clear=function(){var e,t;m("userinput","Removing all non-global handlers"),e=[];for(t in this._handlers)"global"!==t&&(m("userinput","Removing handler for "+t),e.push(delete this._handlers[t]));return e},t=function(e,t){var n,r,o,i;for(i=[],n=0,o=e.length;o>n&&(r=e[n],i.push(r),!t(r));n++);return i},e.prototype._sortedHandlers=function(){var e;return e=l.sortBy(l.values(this._handlers),function(e){return-e.precedence}),t(e,d.get("modal"))},e.prototype._triggerOnTargets=function(){var e,t,n,r,o,i,s;for(t=arguments[0],e=2<=arguments.length?y.call(arguments,1):[],i=this._sortedHandlers(),r=0,o=i.length;o>r;r++)if(s=i[r].target,n=null!=(null!=s?s[t]:void 0)?s[t].apply(s,e):null!=(null!=s?s.triggerHandler:void 0)?s.triggerHandler(t,e):void 0)return(l.isString(n)||l.isArray(n))&&this._track(n),!0;return!1},e.prototype.keydown=function(e){var t;t=i.getKey(e),t===s.Escape&&c.stop(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t)&&c.stop(e)},e.prototype.keypress=function(e){var t;t=i.getKey(e),this._isKeyEligible(e)&&this._triggerOnTargets("shortcut",t)&&c.stop(e)},e.prototype.paste=function(e){p(e.originalEvent).then(function(t){return function(n){var r,o,i,s,u;if(!l.isEmpty(n)&&(!n.text&&!n.url||"INPUT"!==(i=e.target.tagName)&&"TEXTAREA"!==i||a.isClipboard(e.target)))for(s=["url","text","files"],r=0,o=s.length;o>r;r++)if(u=s[r],n[u]){t.triggerPasted(u,n[u]);break}}}(this))},e.prototype.triggerPasted=function(e,t){var n;return n=l.compact(this._sortedHandlers().map(function(e){var t;return null!=(t=e.target)?t.el:void 0})),v(n,"userinput-paste:"+e,{detail:t})},e.prototype._track=function(e){return null!=e?(l.isArray(e)||(e=[e]),g.apply(null,["Keyboard Shortcuts"].concat(y.call(e)))):void 0},e}())},{}],495:[function(e,t,n){var r,o,i;r=e(147),o=e(34),t.exports=i=function(){function e(){}return e.prototype.limit=50,e.prototype.nextPage=1,e.prototype.shortLoad=!1,e.prototype.loading=!1,e.prototype.idModels=null,e.prototype.loadMoreActions=function(){return this.loading?void 0:(this.loading=!0,this.waitForId(this.model,function(e){return function(){var t;return o.loadMoreActionData(e.model.typeName.toLowerCase(),e.model.id,e.nextPage,e.limit,e.idModels,null!=(t="function"==typeof e.getActionsFilter?e.getActionsFilter():void 0)?t:"all").finally(function(){return e.loading=!1}).then(function(t){return e.shortLoad=t.length<e.limit,e.renderActions(),++e.nextPage}).done()}}(this)))},e.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit},e.prototype.getActions=function(){var e,t,n;return e=null!=(t="function"==typeof this.getFilteringModels?this.getFilteringModels():void 0)?t:[],(n=this.model).getActions.apply(n,e)},e}()},{}],496:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].slice;r=e("jquery"),o=e(227),i=e(77),s=e("hearsay"),u=e(111),l=e(494),h=e("underscore"),g=e(106),m=e(101),f=e(39),a=e("bluebird"),c=e(489),d={NONE:0,SOME:1,LOTS:2},t.exports=g(i,u,p=function(e){function t(e){this._subviews={},this.modelCache=null!=e?e.modelCache:void 0,this.handleDOMRemove=function(e){return function(){return e._delegated=!1}}(this),t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype._rendered=!1,t.VIGOR=d,t.prototype.vigor=d.LOTS,t.prototype.render=function(){var e;if(e=1<=arguments.length?b.call(arguments,0):[],null==this.renderOnce)return this;if(this._rendered)switch(this.vigor){case d.NONE:return this;case d.SOME:return f(Error("rendered more than once: "+this.constructor.name)),this;default:throw Error("You cannot render me more than once!")}return this._rendered=!0,this.renderOnce.apply(this,e),this},t.prototype.getViewTitle=function(){var e,t,n;return null==this.viewTitleKey?"":(t=h.result(this,"viewTitleKey"),e=null!=(n=h.result(this,"viewTitleArguments"))?n:{},m(["view title",t],e))},t.prototype.subview=function(e,t,n,r){return null==n&&(n={}),null==r&&(r=e.prototype.uniqueId()+"_"+t.cid),r in this._subviews||(this._subviews[r]=new e(h.extend({model:t,modelCache:this.modelCache},n))),this._subviews[r]},t.prototype.existingSubview=function(e,t,n){if(null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),!(n in this._subviews))throw new Error("existingSubview called before subview was created");return this._subviews[n]},t.prototype.existingSubviewOrUndefined=function(e,t,n){return null==n&&(n=e.prototype.uniqueId()+"_"+t.cid),this._subviews[n]},t.prototype.collectionSubview=function(e,t,n,r){var o,i;return null==n&&(n={}),null==r&&(r=e.prototype.uniqueId()),i=null!=(o=this._subviews)[r]?o[r]:o[r]=new e(h.extend({collection:t,modelCache:this.modelCache},n)),null!=n.el&&i.el!==n.el&&i.setElement(n.el),i},t.prototype.subviewsOfType=function(e){var t,n,r,o;n=this._subviews,r=[];for(t in n)y.call(n,t)&&(o=n[t],o instanceof e&&r.push(o));return r},t.prototype.deleteSubview=function(e,t){if(null==t&&(t=e.constructor.prototype.uniqueId()+"_"+e.model.cid),e!==this._subviews[t])throw new Error("incorrect key for subview in deleteSubview");return e.remove(),delete this._subviews[t]},t.prototype.removeSubviews=function(){var e;e=h.values(this._subviews),this._subviews={},c.enqueue(e)},t.prototype.deleteSubviewsOfType=function(e){var t,n,r,o;for(r=this.subviewsOfType(e),t=0,n=r.length;n>t;t++)o=r[t],this.deleteSubview(o)},t.prototype.remove=function(){return this.unsubscribe(),this.stopUsing(),this.removeSubviews(),this.cancelScheduled(),l.removeHandler(this),t.__super__.remove.apply(this,arguments)},t.prototype.frameDebounce=function(e,t){var n;return null==t&&(t=this),n=!1,function(){n||(n=!0,this.requestAnimationFrame(function(){n=!1,e.call(t)}))}},t.prototype.makeDebouncedMethods=function(){var e,t,n,r;for(r=1<=arguments.length?b.call(arguments,0):[],e=0,t=r.length;t>e;e++)n=r[e],this[n+"Debounced"]=this.frameDebounce(this[n])},t.prototype.delegateEvents=function(){var e,n,r;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove),t.__super__.delegateEvents.apply(this,arguments),n=this._subviews;for(e in n)r=n[e],r.delegateEvents();this._delegated=!0}},t.prototype.undelegateEvents=function(){var e,n,r;if(this._delegated){this.$el.off("remove",this.handleDOMRemove),t.__super__.undelegateEvents.apply(this,arguments),n=this._subviews;for(e in n)r=n[e],r.undelegateEvents();this._delegated=!1}},t.prototype.appendSubview=function(e,t){return null==t&&(t=this.$el),this.appendSubviews([e],t)},t.prototype.appendSubviews=function(e,t){var n,r,o;for(null==t&&(t=this.$el),n=0,r=e.length;r>n;n++)o=e[n],o.delegateEvents();return t.append(function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],r.push(o.render().el);return r}())},t.prototype.ensureSubviews=function(e,t){var n,o,i,s,a,u,c,l,d,p,m,f,g,v,y;for(null==t&&(t=this.$el),o=t[0],i=h.clone(o.childNodes),u=a=0,p=i.length;p>a;u=++a)if(n=i[u],!h.find(e,function(e){return e.el===n})){s=!1,g=this._subviews;for(d in g)y=g[d],y.el!==n||s||(this.deleteSubview(y,d),s=!0);if(!s)throw new Error("Could not find view associated with element to remove")}for(c=0,m=e.length;m>c;c++)v=e[c],h.find(i,function(e){return v.el===e})||(v.delegateEvents(),v.render());for(u=l=0,f=e.length;f>l;u=++l)v=e[u],v.el!==o.childNodes[u]&&(0===u?r(o).prepend(v.el):r(e[u-1].el).after(v.el))},t.prototype.uniqueId=function(){return this.hasOwnProperty("_uniqueId")||(this._uniqueId=h.uniqueId("view")),this._uniqueId},t}(o.View)),h.extend(p.prototype,s.mixin)},{}],497:[function(e,t,n){var r,o,i,s;r=e(506),o=e(29),i=e("underscore"),s=function(e){var t,n,i,s;return t=o.me().isFeatureEnabled("largeAttachments"),i=e.getOrganization(),s=null!=i&&i.isFeatureEnabled("largeAttachments"),n=t||s?"file size exceeds 250mb":"file size exceeds 10mb",r.show(n,"error","upload",5e3)},t.exports=function(e,t){var n,r,a;for(i.isArray(t)||(t=[t]),r=0,a=t.length;a>r;r++)if(n=t[r],!o.me().canUploadAttachment(n))return s(e),!0;return!1}},{}],498:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(211),i=e(212),a=e(126),u=e(496),c=e(43),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype._secretUrl=function(){return this.model.url()+"/invitationSecret"},t.prototype.showInvitationLink=function(e){return this.$(".js-show-invitation-link").addClass("hide"),this.$(".js-invitation-link-container").removeClass("hide"),i({method:"post",url:this._secretUrl()}).get("secret").then(function(e){return function(t){var n;return n=e.model.get("url").replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+t+"$2"),e.$(".js-invitation-link").val(n).focus().select()}}(this)).done()},t.prototype.clickInvitationLink=function(e){return r(".js-invitation-link").select()},t.prototype.deactivateInvitationLink=function(e){return this.$(".js-show-invitation-link").removeClass("hide"),this.$(".js-invitation-link-container").addClass("hide"),this.$(".js-invitation-link").val(""),i({method:"delete",url:this._secretUrl()}).done()},t}(u)},{}],499:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){
function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;o=e(211),i=e(29),h=e(101),a=e(97),m=e(100),u=e(34),c=e("bluebird"),g=e(491)("invitation_link"),l=e(126),d=e(496),y=e("xtend"),p=e("underscore"),r=e("jquery"),f=function(e){return/^\*@[^\*]+$/.test(e)?e.replace(/^\*@/,""):null},v=g.renderable(function(e){var t,n,r,o,i,s,a,u,c,l,d,p;i=e.isLoggedIn,o=e.isConfirmed,s=e.isValidEmail,l=e.returnUrl,r=e.inviter,a=e.name,c=e.requiredDomain,n=e.firstDomain,t=e.emailRestrictions,u=e.pendingEmail,p=e.willJoinOnConfirm,d=e.transferUrl,g.div(".invitation-link-description",function(){return g.format("youve-been-invited",{inviterName:r.fullName,name:a})}),u?g.p(".invitation-link-explanation",function(){return g.format("waiting-for-you-to-click-on-the-link-we-sent-to-email",{email:u})}):i?s?o?g.div(".invitation-link-options",function(){return g.button(".button.primary.js-join",function(){return g.format("join")})}):(g.p(".invitation-link-explanation.js-you-need-to-confirm",function(){return g.format("before-you-can-join-you-ll-need-to-confirm-your-email-address")}),p||(g.p(".invitation-link-explanation.js-will-join-on-confirm.hide",function(){return g.format("youll-be-added-as-soon-as-you-confirm-your-email")}),g.div(".invitation-link-options",function(){return g.button(".button.primary.js-join-on-confirm",function(){return g.format("join-after-i-confirm-my-email")})}))):(c?(g.p(".invitation-link-explanation",function(){return g.format("to-join-this-team-you-need-to-confirm-an-email-from-domain",{domain:c})}),g.h2(".add-email-to-your-account-heading",function(){return g.format("add-email-to-your-account")}),g.div(".invitation-link-add-email",function(){return g.input(".invitation-link-add-email-prefix.js-email-prefix-to-add",{placeholder:g.l("yourname"),"data-domain":c}),g.span(".invitation-link-add-email-domain",function(){return g.text("@"+c)})})):(g.p(".invitation-link-explanation",function(){return g.format("to-join-this-team-you-need-to-confirm-an-email-matching-one-of-the-following")}),g.ul(function(){var e,n,r,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(g.li(function(){return g.text(r)}));return o}),g.h2(".add-email-to-your-account-heading",function(){return g.format("add-email-to-your-account")}),g.div(".invitation-link-add-email",function(){var e;return e=n?g.l("yourname-at-domain",{domain:n}):void 0,g.input(".invitation-link-add-email.js-email-to-add",{placeholder:e})})),g.div(".invitation-link-options",function(){return g.div(function(){return g.a(".button.primary.js-add-email",{href:"#"},function(){return g.format("add-email")})}),g.div(".invitation-link-switch-accounts",function(){return g.a(".quiet",{href:"/login?reauthenticate=1&returnUrl="+encodeURIComponent(l)},function(){return g.format("switch-accounts")})})})):(g.p(".invitation-link-explanation",function(){return g.format("before-you-can-join-you-ll-need-a-trello-account")}),(c||t.length>0)&&(c?g.p(function(){return g.format("note-this-team-requires-you-log-in-with-an-email-from-domain",{domain:c})}):(g.p(function(){return g.format("note-this-team-requires-you-log-in-with-an-email-matching-one-of-the-following")}),g.ul(function(){var e,n,r,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(g.li(function(){return g.text(r)}));return o}))),g.div(".invitation-link-options",function(){return g.button(".button.primary.js-signup",function(){return g.format("sign-up")}),g.button(".button.js-login",function(){return g.format("log-in")})}),g.div(".invitation-link-options-learn-more",function(){return g.a(".quiet",{href:"/tour",target:"tour"},function(){return g.format("learn-more-about-trello")})})),g.p(".error.js-deactivated.hide",function(){return g.format("unfortunately-this-invitation-link-has-been-deactivated")}),g.p(".error.js-only-team-members.hide",function(){return g.format("only-team-members-can-join-this-board")}),g.div(".error.js-must-join-enterprise.hide",function(){return g.p(function(){return g.format("before-you-can-join-this-team-you-must-join-the-enterprise-it-belongs-to")}),g.p(function(){return g.a(".button.primary",{href:d},function(){return g.format("transfer-account")})})}),g.p(".error.js-error.hide",function(){})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.className="invitation-link",t.prototype.events={"click .js-join":function(e){return this._disableJoin(),this.fxJoin().catch(o.NotFound,function(e){return function(t){return e.$(".js-deactivated").removeClass("hide")}}(this)).catch(o.Other,function(e){return function(t){if(/organization restricts invites/.test(t.message))return e.$(".js-only-team-members").removeClass("hide");throw t}}(this)).catch(o.Conflict,function(e){return function(t){return e.$(".js-must-join-enterprise").removeClass("hide")}}(this)).catch(o,function(e){return function(t){var n;return n=m(t),e.$(".js-error").text(n).removeClass("hide")}}(this)).done()},"click .js-add-email":function(e){var t;return this.$(".js-email-to-add,.js-email-prefix-to-add").prop("disabled",!0),this.$(".js-add-email").prop("disabled",!0).addClass("disabled"),t=this._getEmail(),this.model.run("logins",{email:t},function(e){return function(n){e.pendingEmail=t,e.render()}}(this))},"input .js-email-to-add":"updateButton","input .js-email-prefix-to-add":"updateButton","keydown .js-email-prefix-to-add,.js-email-to-add":function(e){return a.isSubmitEvent(e)?this.$(".js-add-email:not(:disabled)").click():void 0},"click .js-join-on-confirm":function(e){return this._queueAutoJoin(),this.$(".js-join-on-confirm,.js-you-need-to-confirm").addClass("hide"),this.$(".js-will-join-on-confirm").removeClass("hide")},"click .js-signup":function(e){var t,n,o;return this._queueAutoJoin(),t=this._requiredDomain(),o=t?g.l("yourname-at-domain",{domain:t}):"",n=this._returnUrl(),window.location="/signup?"+r.param({returnUrl:n,confirmReturnUrl:n,email:o})},"click .js-login":function(e){var t;return this._queueAutoJoin(),t=this._returnUrl(),window.location="/login?"+r.param({returnUrl:t})}},t.prototype._disableJoin=function(){return this.$(".js-join").addClass("disabled").prop("disabled",!0)},t.prototype.initialize=function(e){var t;return this.fxJoin=e.fxJoin,this.fxQueueJoin=e.fxQueueJoin,this.inviter=e.inviter,this.name=e.name,this.emailRestrictions=e.emailRestrictions,this.transferUrl=e.transferUrl,this.willJoinOnConfirm=e.willJoinOnConfirm,null!=(t=i.me())?this.listenTo(t,"change:confirmed change:logins",function(e){return function(){return e.$(".js-join").addClass("disabled"),setTimeout(function(){return window.location.reload()},1e3)}}(this)):void 0},t.prototype.updateButton=function(){var e;return e=this._isValidEmail(this._getEmail()),this.$(".js-add-email").prop("disabled",!e).toggleClass("disabled",!e)},t.prototype._queueAutoJoin=function(){return this.fxQueueJoin()},t.prototype._getEmail=function(){var e,t;return e=this.$(".js-email-to-add"),t=this.$(".js-email-prefix-to-add"),e.length?e.val():t.length?t.val()+"@"+t.attr("data-domain"):void 0},t.prototype._isValidEmail=function(e){return 0===this.emailRestrictions.length?!0:p.any(this.emailRestrictions,function(t){return RegExp("^"+l.escapeForRegex(t).replace(/\\\*/g,"[^@]*")+"$").test(e)})},t.prototype._returnUrl=function(){return window.location.pathname},t.prototype._requiredDomain=function(){return 1===this.emailRestrictions.length&&f(this.emailRestrictions[0])},t.prototype.render=function(){var e,t,n,r,o,s;return o=i.me(),n=i.isLoggedIn(),t=null!=o?o.get("confirmed"):void 0,r=n&&p.chain(o.get("logins")).pluck("email").any(this._isValidEmail.bind(this)).value(),s=this._requiredDomain(),e=p.chain(this.emailRestrictions).map(f).compact().first().value(),this.$el.html(v({emailRestrictions:this.emailRestrictions,requiredDomain:s,firstDomain:e,inviter:this.inviter,name:this.name,isConfirmed:t,isLoggedIn:n,isValidEmail:r,pendingEmail:this.pendingEmail,returnUrl:this._returnUrl(),transferUrl:this.transferUrl,willJoinOnConfirm:this.willJoinOnConfirm})),this.updateButton(),this.defer(function(e){return function(){return e.$(".js-email-prefix-to-add,.js-email-to-add").focus().select()}}(this)),this},t}(d)},{}],500:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(505),i=e(513),s=e(496),a=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="labels",t.prototype.el=function(){return this.labelsView=this.subview(o,this.model,{board:this.model.getBoard(),selectLabel:this.toggleLabel.bind(this),renderOn:[{source:this.model.labelList,events:"add remove reset change"},{source:this.model,events:"change:labels, change:idLabels"}],popOverMethod:"pushView",searchInit:this.options.searchInit}),this.labelsView.render().el},t.prototype.toggleLabel=function(e){a(this.model.typeName,"Card Labels Menu","Change Label"),this.model.toggleLabel(this.modelCache.get("Label",e)),this.options.hideOnSelect&&i.popView()},t}(s)},{}],501:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(195),i=e(502),s=e(513),a=e(496),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="create label",t.prototype.el=function(){var e,t;return e=this.options.color,t=this.options.name,l.call(r.colors,t)>=0&&(e=t,t=""),new i({model:{name:t},submitTextKey:"create",color:e,onSubmit:function(e){return function(t,n){var r;return"function"==typeof(r=e.options).onSubmit&&r.onSubmit(t,n),s.popView()}}(this)}).render().el},t}(a)},{}],502:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(195),i=e(126),s=e(496),a=e("underscore"),c=e(493),u=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.tagName="form",t.prototype.className="edit-label",t.prototype.events={"click .js-palette-color":"pickColor","click .js-submit":"submit",submit:"submit"},t.prototype.initialize=function(e){return this.accessoryView=e.accessoryView,this.color=e.color,this.onSubmit=e.onSubmit,this.submitTextKey=e.submitTextKey,t.__super__.initialize.apply(this,arguments)},t.prototype.renderOnce=function(){var e,t,n;return t=function(){var t,n,o,i;for(o=r.colors.concat(null),i=[],t=0,n=o.length;n>t;t++)e=o[t],i.push({color:e,selected:e===this.color});return i}.call(this),n={label:{name:this.model.name},colors:t},n.submitText=u(this.submitTextKey),this.$el.html(c.fill("label_edit_component",n)),null!=this.accessoryView&&this.$(".js-accessory-view-holder").append(this.accessoryView.render().el),this},t.prototype.pickColor=function(e){var t;return i.stop(e),this.$(".js-palette-select").hide(),t=this.$(e.target).closest(".js-palette-color"),this.color=t.attr("data-color"),t.find(".js-palette-select").show()},t.prototype.submit=function(e){var t;return i.stop(e),t=this.$(".js-label-name").val().trim(),a.isEmpty(t)&&a.isEmpty(this.color)?void 0:this.onSubmit(t,a.isEmpty(this.color)?null:this.color)},t}(s)},{}],503:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(507),o=e(502),s=e(513),a=e(126),u=e(496),l=e(43),c=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return d(t,e),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.tagName="input",t.prototype.className="negate",t.prototype.attributes=function(){return{type:"submit",value:c("delete")}},t.prototype.events={click:function(e){return a.stop(e),this.options.onClick()}},t}(u),t.prototype.viewTitleKey="change label",t.prototype.el=function(){return new o({model:this.model.toJSON(),submitTextKey:"save",onSubmit:function(e){return function(t,n){var r;return e.model.update({color:n,name:t}),"function"==typeof(r=e.options).onSubmit&&r.onSubmit(),s.popView()}}(this),color:this.model.get("color"),accessoryView:new n({onClick:this.confirmDeleteLabel.bind(this)})}).render().el},t.prototype.confirmDeleteLabel=function(){return r.pushView("delete label",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(e){return function(t){var n;return e.model.destroy(),"function"==typeof(n=e.options).onSubmit&&n.onSubmit(),s.popView(),l("Label","Delete")}}(this)})},t}(u)},{}],504:[function(e,t,n){var r,o,i,s;r=e(18),o=e(195),s=e("underscore"),t.exports=i=function(){function e(){}return e.keyboardIndex=[s.last(o.colors)].concat(s.initial(o.colors)),e.keyNumberForColor=function(e){var t;return t=this.keyboardIndex.indexOf(e),t>=0?""+t:null},e.colorForKey=function(e){var t;return t=e-r._0,this.keyboardIndex[t]},e.setLabelFromKey=function(e,t,n){var r,o;o=this.colorForKey(e),r=t.getBoard().labelsForColors()[o],1===(null!=r?r.length:void 0)?t.toggleLabelColor(o):"function"==typeof n&&n(o)},e}()},{}],505:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(e,t){function n(){this.constructor=e}for(var r in t)w.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},w={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(97),s=e(18),a=e(195),u=e(501),c=e(503),l=e(504),p=e(513),h=e(126),m=e(496),f=e("underscore"),v=e(493),y=e(43),g=e(101),t.exports=d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}var n;return b(t,e),n=12,t.prototype.labelsToShow=n,t.prototype.events={"click .js-select-label":"clickLabel","click .js-toggle-color-blind-mode":"toggleColorBlindMode","click .js-edit-label":"clickEditLabel","click .js-add-label":"clickAddLabel","click .js-show-more":"showMore","input .js-label-search":"renderLabels","keyup .js-label-search":"keyUp","mouseover .card-label":"hoverLabel"},t.prototype.initialize=function(e){var n,r,i,s,a;for(this.selectLabel=e.selectLabel,this.board=e.board,this.modelCache=e.modelCache,this.renderOn=e.renderOn,this.popOverMethod=e.popOverMethod,this.searchInit=e.searchInit,this.makeDebouncedMethods("render","renderLabels"),this.listenTo(o.me(),{"change:prefs":this.renderDebounced}),this.listenTo(this.board.labelList,{"add remove reset change":this.renderLabelsDebounced}),s=null!=(i=this.renderOn)?i:[],n=0,r=s.length;r>n;n++)a=s[n],this.listenTo(a.source,a.events,this.renderLabelsDebounced);return t.__super__.initialize.apply(this,arguments)},t.prototype.render=function(){var e,t,n,r;return t=this.board.labelColors(),n={editable:this.board.editable()},e={colors:t,isColorBlindEnabled:o.me().get("prefs").colorBlind,searchInit:null!=(r=this.searchInit)?r:""},this.searchInit=null,this.$el.html(v.fill("popover_change_labels",e,n)),this.renderLabels()},t.prototype.renderLabels=function(){var e,t,n,r,o,i,s;return r=this.board.labelsForColors(),t=this._filteredLabels(),n=f.chain(t).map(function(e){return function(t){return e.model.dataForLabel(t)}}(this)).tap(function(e){return function(t){return e.$(".js-show-more").toggleClass("hide",t.length<=e.labelsToShow)}}(this)).first(this.labelsToShow).value(),e={labels:n},o={editable:this.board.editable()},this.$(".js-labels-list").empty().append(v.fill("select_labels",e,o)),i=this._searchVal(),s=f.isEmpty(i)||t.length>0?g("create new label.unnamed"):g("create new label.named",{name:i}),this.$(".js-add-label").text(s),!f.isEmpty(i)&&t.length>0&&this.selectFirstLabelInList(),this},t.prototype.highlightElement=function(e){return h.selectMenuItem(this.$(".js-labels-list"),".card-label",e)},t.prototype.getHighlightedElement=function(){return this.$(".js-labels-list .card-label.selected").first()},t.prototype.selectFirstLabelInList=function(e){this.highlightElement(this.$(".js-labels-list .card-label").first())},t.prototype.toggleColorBlindMode=function(e){var t;t=o.me(),t.toggleColorBlindMode(),y(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")},t.prototype.clickEditLabel=function(e){var t,n;return h.stop(e),t=r(e.target).closest(".js-edit-label"),n=t.attr("data-idLabel"),this.editLabel(n)},t.prototype.selectLabelViaElem=function(e){return this.selectLabel(e.attr("data-idLabel"))},t.prototype.clickLabel=function(e){var t;return h.stop(e),t=r(e.target).closest(".js-select-label"),this.selectLabelViaElem(t)},t.prototype.findElementForLabel=function(e){return this.$(".js-edit-label").filter(function(t){return function(t,n){return r(n).attr("data-idLabel")===e}}(this))},t.prototype.editLabel=function(e){var t,n;return t=this.findElementForLabel(e),n=this.modelCache.get("Label",e),p[this.popOverMethod]({elem:t,view:c,options:{model:n,board:this.board,modelCache:this.modelCache}})},t.prototype.clickAddLabel=function(e){var t;h.stop(e),t=this._searchVal(),p[this.popOverMethod]({elem:this.$(".js-add-label"),view:u,options:{board:this.board,name:t,color:this._nextColor(),onSubmit:function(e){return function(t,n){return e.model.createLabel(t,n),e.clearSearch()}}(this)}})},t.prototype.showMore=function(){return this.labelsToShow+=n,this.renderLabels()},t.prototype.hoverLabel=function(e){this.highlightElement(r(e.target).closest(".card-label"))},t.prototype.keyUp=function(e){var t,n,r;return n=i.getKey(e),n===s.ArrowUp||n===s.ArrowDown?(h.stop(e),void h.navMenuList(this.$(".js-labels-list"),".card-label",n)):n===s.Enter?(r=this._filteredLabels(),r.length>0?(t=this.getHighlightedElement(),t.length>0&&(this.selectLabelViaElem(t),this.clearSearch()),y(this.model.typeName,"Labels Menu","Add By Filter")):this.clickAddLabel()):void 0},t.prototype.clearSearch=function(){return this.$(".js-label-search").val(""),this.renderLabels()},t.prototype._nextColor=function(){var e,t;return t=f.chain(this.board.getLabels()).map(function(e){return e.get("color")}).uniq().value(),null!=(e=f.difference(a.colors,t)[0])?e:""},t.prototype._searchVal=function(){var e,t;return null!=(e=null!=(t=this.$(".js-label-search").val())?t.trim():void 0)?e:""},t.prototype._filteredLabels=function(){var e;return e=this._searchVal().toLowerCase(),f.chain(this.board.getLabels()).filter(function(t){var n,r;return f.isEmpty(e)||(null!=(n=t.get("name"))?n.toLowerCase().indexOf(e):void 0)>-1||0===(null!=(r=t.get("color"))?r.toLowerCase().indexOf(e):void 0)||t.get("color")===l.keyboardIndex[parseInt(e)]}).value()},t}(m)},{}],506:[function(e,t,n){var r,o,i,s,a,u,c=[].slice;r=e("jquery"),o=e("underscore"),s=e(40),a=e(221),u=e(493),i=e(101),t.exports=new(function(){function e(){var e,t,n,r;r=null,n=function(e){return function(){var t;return clearTimeout(r),e.hide("connection"),t=i("alerts.could not connect"),e.showHtml(u.fill("connect_failed",{msg:t}),"error","connectionDead")}}(this),a.on("connect_failed",n),a.on("reconnect_failed",n),t=function(e){return function(){return clearTimeout(r),e.hide("connection")}}(this),e=function(e){return function(){return clearTimeout(r),r=setTimeout(function(){return r=null,e.show("reconnecting","error","connection")},500)}}(this),a.on("reconnect",t),a.on("connecting",e)}return e.prototype._alerts={},e.prototype._hide=function(e){var t;return t=this._alerts[e],(null!=t?t.timeout:void 0)&&clearTimeout(t.timeout),delete this._alerts[e],r("#notification_"+e).remove(),this._showHideContainer()},e.prototype._show=function(e,t,n,o,i){var a,u;return s("alerts","show",e,t,n,o,i),this._hide(o),i&&(u=setTimeout(function(e){return function(){return e.hide(o)}}(this),i)),this._alerts[o]={timeout:u},a=r("<div>").attr("id","notification_"+o).addClass("app-alert-item mod-"+n).appendTo("#notification"),t?a.html(e):a.text(e),this._showHideContainer()},e.prototype._showHideContainer=function(){return r("#notification").toggle(!o.isEmpty(this._alerts))},e.prototype.show=function(){var e,t,n,r;return n=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],Array.isArray(n)?(r=n,n=r[0],t=r[1]):t={},this.showLiteralText.apply(this,[i(["alerts",n],t)].concat(c.call(e)))},e.prototype.showLiteralText=function(e,t,n,r){return this._show(e,!1,t,n,r)},e.prototype.showHtml=function(e,t,n,r){return this._show(e,!0,t,n,r)},e.prototype.flash=function(e,t,n){return this.show(e,t,n,2e3)},e.prototype.hide=function(e){return s("alerts","hide",e),this._hide(e)},e.prototype.hideAll=function(){var e,t;t=[];for(e in this._alerts)t.push(this.hide(e));return t},e}())},{}],507:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(513),i=e(126),s=e(496),a=e("underscore"),c=e(493),u=e(101),t.exports=r=function(e){function t(e){var n,r,o,i,s,u,c,l;this.model=e.model,l=e.text,c=e.html,this.elem=e.elem,this.top=e.top,o=e.confirmText,r=e.confirmBtnClass,n=e.cancelText,this.title=e.title,this.template=e.template,this.templateData=e.templateData,i=e.data,u=e.fxConfirm,s=e.fxCancel,this.popOnClick=e.popOnClick,null==this.template&&(this.template="confirm"),this.confirm=this._handleClick(u),this.cancel=s?this._handleClick(s):function(){},this.data=a.extend({text:l,html:c,confirmText:o,confirmBtnClass:r,cancelText:n},null!=i?i:{}),null==this.templateData&&(this.templateData={}),t.__super__.constructor.apply(this,arguments)}var n,r;return l(t,e),n=function(e,t){var n,r,o;r=a.clone(e);for(n in t)d.call(t,n)&&(o=t[n],n in r||(r[n]=o()));return r},r=function(e,t){var r;return r=n(t,{title:function(){return u(["confirm",e,"title"],t.templateData)},html:function(){return u(["confirm",e,"text"],t.templateData)},confirmText:function(){return u(["confirm",e,"confirm"],t.templateData)}}),"fxCancel"in r&&!("cancelText"in r)&&(r.cancelText=u(["confirm",e,"cancel"],t.templateData)),r},t.toggle=function(e,t){return t=1===arguments.length?e:r(e,t),o.toggle({elem:t.elem,top:t.top,view:this,options:t})},t.pushView=function(e,t){return t=1===arguments.length?e:r(e,t),o.pushView({view:this,options:t})},t.prototype.getViewTitle=function(){return this.title},t.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"},t.prototype.render=function(){return this.$el.html(c.fill(this.template,this.data,{},{member:c.member})),this},t.prototype._handleClick=function(e){return function(t){return function(n){return i.stop(n),t.popOnClick?o.popView():o.hide(),"function"==typeof e&&e(n),t.remove(),!1}}(this)},t}(s)},{}],508:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p;r=e(6),i=e(75),a=e("bluebird"),u=e(114),c=e(104),l=e("underscore"),p=e("xtend"),s=null!=(d=window.Notification)?d:{permission:"denied"},t.exports=o=function(){function e(t){this.model=t,(e.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():setTimeout(this.show.bind(this),o))}var t,n,o,c;return n=100,o=1e3,t=1e4,e.enabled=function(){return"granted"===s.permission},e.denied=function(){return"denied"===s.permission},e.notEnabled=function(){return"default"===s.permission},e.requestPermission=function(){return new a(function(e,t){var n;return n=s.requestPermission,n?n(function(n){return"denied"===n?t(n):e(n)}):t("denied")})},e.prototype.show=function(){return this.getLock(function(e){return function(){var n,r,o,i,a,u;return i=e.render(),u=i.title,n=i.body,r=i.icon,a=i.tag,window.fluid?window.fluid.showGrowlNotification({title:u,priority:1,sticky:!1,description:n,icon:r}):(o=new s(u,{body:n,icon:r,tag:a}),o.model=e.model,o.addEventListener("click",e.clickHandler.bind(e)),setTimeout(function(){return o.close()},t))}}(this))},c=function(e){switch(e.type){case"relDate":return e.current;case"comment":case"attachmentPreview":return"";default:return e.text}},e.prototype.render=function(){var e,t,n,r,o,s,a;return n=new i("notification").getEntities(this.model.get("display")),a=l.chain(n).map(c).compact().value().join("").trim(),t=l.find(n,function(e){return"comment"===e.type}),e=null!=t?t.text:"",o=this.model.getMember(),r="/favicon.ico",(null!=o?o.avatarHash:void 0)&&(r=[window.avatarDomain,o.avatarHash,"50.png"].join("/")),s=this.model.id,{title:a,body:e,icon:r,tag:s}},e.prototype.clickHandler=function(e){var t,n,o;return t=this.model.get("data"),this.model.markRead(),e.target.close(),this.localNotification()?(this.model.navigateToView()||r.memberNotificationsView(),window.focus()):(o=this.model.getUrlOfTarget(),n=window.open(o),null!=n?n.focus():window.location=o)},e.prototype.localNotification=function(){var e;return e=this.model.get("data"),l.any(l.invoke([function(){var t;return r.onBoardView(null!=(t=e.board)?t.id:void 0)},function(){var t;return r.onOrganizationView(null!=(t=e.organization)?t.id:void 0)},function(){return 0===location.pathname.indexOf(r.getMemberNotificationsUrl())}],"call"))},e.prototype.getLock=function(e){var r,o;return r="notification_lock_"+this.model.id,u.get(r)?void 0:(o=Math.random(),u.set(r,o),setTimeout(function(t){return function(){return u.get(r)===o?e():void 0}}(this),n),setTimeout(function(e){return function(){return u.unset(r)}}(this),t))},e}()},{}],509:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m;r=e("jquery"),o=e(6),s=e(18),a=e(511),u=e(513),c=e(270),l=e(494),d=e(126),p=e(146),h=e("underscore"),m=e(493),t.exports=i=new(function(){function e(){}var t,n,f,g;return g=e,n=null,t=null,f=null,e.prototype.shortcut=function(e){switch(e){case s.Escape:return this.hide(),["Esc - Hide Dialog","Dialog"]}},e.prototype.init=function(){n=r(".window"),t=n.find(".window-wrapper"),t.addClass("js-tab-parent"),this.scrolltop=0,this.isVisible=!1,this.displayType=null,this.lastScroll=0,r(".window-overlay").on("scroll mousedown keydown",function(e){return function(t){return e.lastScroll=Date.now()}}(this))},e.prototype.scrolledSince=function(e){return this.lastScroll>e},e.prototype.calcPos=function(e){var t,r;r=p.fSmall?"auto":e,n.css({width:r}),null!=(null!=(t=this.view)?t.setFixedSidebarLeftPos:void 0)&&i.isVisible&&this.view.setFixedSidebarLeftPos(),i.isVisible||n.show()},e.prototype.show=function(e){var s;this.isVisible&&this.hide(e.isNavigating),a.cancelEdits(),u.hide(),c.hideUnpinnedSidebar(),f=e.hide,this.scrolltop=r(window).scrollTop(),r("body").addClass("window-up"),null!=(s=o.getCurrentBoard())&&s.composer.save("vis",!1),r("body").find(".js-disable-on-dialog:not([disabled])").addClass("disabled-for-dialog").attr("disabled","disabled"),null!=e.displayType&&(n.addClass(e.displayType),this.displayType=e.displayType),t.empty().append(m.fill("dialog_close_button")),null!=e.maxWidth?this.calcPos(e.maxWidth):this.calcPos(""),e.view?(this.view=e.view,t.append(this.view.el),this.view.render(),this.view.delegateEvents(),l.addHandler(this.view,{scope:"dialog_view"})):e.html&&(this.view=null,t.append(e.html)),this.isVisible=!0,this.lastScroll=0,h.defer(function(e){return function(){return r(".window").css({height:1e5}),r(".window-overlay").scrollTop(1),r(".window-overlay").scrollTop(0),r(".window").css({height:""})}}(this)),n.find(".js-autofocus:first,.focus-dummy").focus().select(),n.find("input[type=submit]").click(function(e){d.preventDefault(e)}),n.find(".js-close-window").click(function(e){d.stop(e),i.hide(null,!0)}),l.addHandler(this,{scope:"dialog",modal:!0})},e.prototype.hide=function(e,t){(this.isVisible&&!a.isEditing()&&!r(".new-comment").hasClass("focus")||t)&&("function"==typeof f&&f(e),f=null,null!=this.view&&(l.removeHandler(this.view),n.removeClass(this.displayType),this.displayType=null,this.view.remove(),this.view=null),l.removeHandler(this),n.hide(),r("body").removeClass("window-up"),h.defer(function(e){return function(){return r(window).scrollTop(e.scrolltop),e.scrolltop=0}}(this)),this.isVisible=!1,r(".window-overlay").off("scroll.fixSidebar"),r(".disabled-for-dialog").removeAttr("disabled"),u.hide(),this.clear())},e.prototype.clear=function(){t.width(""),t.empty()},e}()),r(function(){return i.init()})},{}],510:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=[].slice;r=e("jquery"),o=e(73),i=e(6),u=e(513),c=e(514),l=e(270),d=e(126),p=e("underscore"),C=e(43),_=function(e,t){var n,r,o;return o=e.x,n=t.left,r=t.right,o>=n&&r>o},b=function(e,t,n){var r,o,i,s;return s=e.top,o=e.left,r=e.bottom,i=e.right,{top:s+n,bottom:r-n,left:o+t,right:i-t}},g=function(e){return{x:e.pageX,y:e.pageY}},h=function(){var e;return e=1<=arguments.length?x.call(arguments,0):[],function(){var t,n,r;for(n=0,r=e.length;r>n;n++)t=e[n],null!=t&&t.apply(this,arguments)}},k=function(e,t){return h(t,e)},s=function(){function e(e){this.scrollBoard=e.scrollBoard,this.scrollLists=e.scrollLists,this.commitEvent=e.commitEvent,this.cancelMethod=e.cancelMethod,this._queue=[]}return e.prototype.hasMousedLeft=!1,e.prototype.hasMousedRight=!1,e.prototype.stopped=!1,e.prototype.aborted=!1,e.prototype.start=function(e,t){this.$helper=t.helper,this.$target=r(e.target),this.initialMousePosition=g(e),this.lockModelCache(),l.hideSidebar(),this.startTrackingMouse(),this.hidePopoversForSomeReason(),this.boardElement=r("#board")[0],this.boardCanvasElement=r(".board-canvas")[0],this.cachedHoveredList=this.getHoveredListForPoint(this.initialMousePosition),(this.scrollLists||this.scrollBoard)&&this.startAutoscrolling(),a.sorting=!0,this.onStop(function(){return p.defer(function(){return a.sorting=!1})})},e.prototype.lockModelCache=function(){var e,t;if(t=i.getCurrentModelCache(),null==t)throw new Error("Attempt to use DragInfo on a page with no modelCache!");return e=t.lock("DragSort.startSort"),this.onStop(function(){return t.unlock(e)})},e.prototype.hidePopoversForSomeReason=function(){0===this.$target.closest(".pop-over").length&&u.hide()},e.prototype.startAutoscrolling=function(){var e,t;return e=Math.floor(1e3/60),t=setInterval(this.autoscroll.bind(this),e),this.onStop(function(){return clearInterval(t)})},e.prototype.getHoveredListForPoint=function(e){var t,n,o,i;for(i=r(".js-list"),n=0,o=i.length;o>n;n++)if(t=i[n],_(e,t.getBoundingClientRect()))return r(t).find(".list-cards")[0];return null},e.prototype.startTrackingMouse=function(){var e,t;return t=p.throttle(function(e){return function(t){return e.stopped?void 0:e.cachedHoveredList=e.getHoveredListForPoint(t)}}(this),100),e=20,r(document).on("mousemove.dragsort",function(n){return function(r){var o;o=g(r),o.x<n.initialMousePosition.x-e&&(n.hasMousedLeft=!0),o.x>n.initialMousePosition.x+e&&(n.hasMousedRight=!0),t(o)}}(this)),this.onStop(function(){return r(document).off("mousemove.dragsort")})},e.prototype.onStop=function(e){return this._queue.push(e)},e.prototype.stop=function(e,t){var n,r,o,i;for(this.stopped=!0,i=this._queue,r=0,o=i.length;o>r;r++)n=i[r],n.call(this);delete this._queue,this.aborted||this.$target.trigger(this.commitEvent,t)},e.prototype.scrollDeltaForOverhang=function(e){return.1*e},e.prototype.autoscrollBoard=function(){var e,t,n,r,o,i;n=this.$helper[0].getBoundingClientRect(),e=n.left,r=n.right,i=b(this.boardCanvasElement.getBoundingClientRect(),100,0),t=i.left-e,t>0&&this.hasMousedLeft&&(this.boardElement.scrollLeft-=this.scrollDeltaForOverhang(t)),o=r-i.right,o>0&&this.hasMousedRight&&(this.boardElement.scrollLeft+=this.scrollDeltaForOverhang(o))},e.prototype.autoscrollLists=function(){var e,t,n,r,o,i;n=this.$helper[0].getBoundingClientRect(),o=n.top,e=n.bottom,r=b(this.cachedHoveredList.getBoundingClientRect(),0,50),i=r.top-o,i>0&&(this.cachedHoveredList.scrollTop-=this.scrollDeltaForOverhang(i)),t=e-r.bottom,t>0&&(this.cachedHoveredList.scrollTop+=this.scrollDeltaForOverhang(t))},e.prototype.autoscroll=function(){this.scrollBoard&&this.autoscrollBoard(),
this.scrollLists&&null!=this.cachedHoveredList&&this.autoscrollLists()},e.prototype.abort=function(){var e;return this.aborted=!0,null!=(e=r.ui.ddmanager.current)&&(e.currentContainer=e),this.$target[this.cancelMethod]("cancel")},e}(),m=null,w=function(e,t){return t=p.defaults({},t,{distance:7,scroll:!1}),e.scrollLists&&(t.custom={refreshContainers:function(){var e,t,n,o;this.containers=function(){var i,s,a,u,c,l,d;for(c=this.containers,d=[],i=0,a=c.length;a>i;i++)if(e=c[i],r.contains(document,e.element[0])){for(t=e.element.closest(".js-list")[0],o=t.getBoundingClientRect(),l=["left","top","width","height"],s=0,u=l.length;u>s;s++)n=l[s],e.containerCache[n]=o[n];d.push(e)}return d}.call(this)}}),t.start=k(t.start,function(t,n){if(null!=m)throw new Error("Attempt to start a drag event while another is in progress!");m=new s(e),m.start(t,n)}),t.stop=k(t.stop,function(e,t){d.stopPropagation(e),m.stop(e,t),m=null}),t},f=function(e){return{width:e.outerWidth(),height:e.outerHeight()}},y=function(e,t,n){var i,s;o.isTouch()||(i=null,s=!("helper"in n)||"original"===n.helper,n.start=k(n.start,function(e,r){var o,a,u,c;s&&"appendTo"in n&&(r.helper.appendTo(n.appendTo),i.sortable("refreshPositions",!0)),u=(null!=(a=t.calcSize)?a:f)(r.item),c=u.width,o=u.height,r.placeholder.width(c),r.placeholder.height(o)}),t=p.extend({commitEvent:"sortcommit",cancelMethod:"sortable"},t),n=w(t,n),c.enqueue(function(){return i=r(e),i.sortable(n)}))},v=function(e,t,n){o.isTouch()||(t=p.extend({commitEvent:"dragcommit",cancelMethod:"draggable"},t),n=w(t,n),c.enqueue(function(){return r(e).draggable(n)}))},t.exports=a={refreshListSortable:function(){return y(".js-list-sortable",{scrollBoard:!0,scrollLists:!1,calcSize:function(e){var t;return t=e.children(".list"),{width:t.outerWidth(),height:t.outerHeight()}}},{handle:".list-header",tolerance:"pointer",placeholder:"list-wrapper placeholder",items:".js-list",appendTo:"body"})},refreshCalendarCardSortable:function(){return y(".js-calendar-sortable",{scrollBoard:!1,scrollLists:!1},{connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",items:".list-card:not(.placeholder-none, .hide, .js-composer)",appendTo:".calendar-drag-area",over:function(e,t){return r(e.target).closest(".calendar-day").addClass("drop")},out:function(e,t){return r(e.target).closest(".calendar-day").removeClass("drop")}})},refreshListCardSortable:function(){return y(".js-sortable",{scrollBoard:!0,scrollLists:!0},{connectWith:".js-sortable",placeholder:"list-card placeholder",items:".list-card:not(.placeholder, .hide, .js-composer)",appendTo:"body"})},refreshDraggableSidebarMembers:function(){return v(".js-list-draggable-board-members .member:not(.js-member-deactivated)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){C("Board Menu","Drag Member from Sidebar"),r(".list-card.active-card").removeClass("active-card")}})},refreshDraggableStickers:function(){return v(".js-draggable-sticker:not(.disabled)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(e,t){var n;C("Board Menu","Drag Sticker from Sidebar"),n=20*Math.random()-10,t.helper.find(".sticker-select-fixed").css({transform:"rotate("+n+"deg)","-webkit-transform":"rotate("+n+"deg)"})}})},abort:function(){if(null==m)throw new Error("Abort called while not dragging!");return m.abort()},refreshIfInitialized:function(e){return(null!=e?e.hasClass("ui-sortable"):void 0)?e.sortable("refresh"):void 0}}},{}],511:[function(e,t,n){var r,o,i,s;r=e("jquery"),o=e(227),i=e(114),s=e("underscore"),t.exports=new(function(){function e(){}return s.extend(e.prototype,o.Events),e.prototype.cancelEdits=function(e){var t;return r(".edit-controls:not(.keep)").remove(),r(".editing").removeClass("editing"),r(".is-editing").removeClass("is-editing"),r(".is-focused").removeClass("is-focused"),r(".checklist-new-item").removeClass("focus"),r("input").not(e||"none").blur(),r("textarea").not(e||"none").blur(),this.trigger("cancelEdits"),t=r(".editable"),t.length>0?t.each(function(e){var t,n,o,s,a,u,c;return o=r(".editable")[e],c=r(o).find(".edits-warning:first"),t=r(o).find(".current:first"),s=r(o).find(".field:first"),n=s.data("draftKey"),a=null!=(u=t.data("unmarkeddown"))?u!==s.val():s.val()!==t.text(),a&&""!==s.val()&&null!=n?(i.set(n,s.val()),c.show()):void 0}):void 0},e.prototype.isEditing=function(){return r(".editing").length+r(".checklist-new-item.focus").length+r(".is-focused").length>0},e}())},{}],512:[function(e,t,n){var r,o,i,s,a,u;s=e(231),o=e("react"),r=e("bluebird"),a=e(488)("popover"),u=e("xtend"),i=e("underscore"),t.exports=o.createClass({displayName:"Popover",getInitialState:function(){return{title:""}},componentDidMount:function(){return this.updateTitle(this.props)},componentWillReceiveProps:function(e){var t;return null!=(t=this._titlePromise)&&t.cancel(),this.updateTitle(e)},updateTitle:function(e){return this._titlePromise=r.resolve(e.getViewTitle()).cancellable().then(function(e){return function(t){return e.isMounted()?e.setState({title:t}):void 0}}(this)).catch(r.CancellationError,function(){})},componentWillUnmount:function(){var e;return null!=(e=this._titlePromise)?e.cancel():void 0},render:a.renderable(function(){var e,t,n,r,u;return u=this.props,t=u.hideHeader,n=u.onBack,r=u.onClose,e=u.children,a.div(function(u){return function(){return t||a.div(".pop-over-header.js-pop-over-header",function(){return null!=n&&a.a(".pop-over-header-back-btn.icon-sm.icon-back.is-shown",{onClick:n,href:"#"}),a.span(".pop-over-header-title",function(){return a.text(u.state.title)}),a.a(".pop-over-header-close-btn.icon-sm.icon-close",{onClick:r,href:"#"})}),a.div(function(){var t,n,r;return r={className:"pop-over-content js-pop-over-content u-fancy-scrollbar js-tab-parent"},t=function(e,t){return i.chain(null!=t?t.split(" "):void 0).union(e.split(" ")).value().join(" ")},n=function(e,n){return o.cloneElement(n,{className:t("js-popover-pushed hide",n.props.classNames)})},e=i.chain(e).initial().map(s(n,"js-popover-pushed hide")).value().concat(i.last(e)),a.addElement(o.createElement("div",r,e))})}}(this))})})},{}],513:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;r=e("jquery"),o=e(73),v=e(231),i=e(18),s=e(511),a=e(512),u=e("bluebird"),m=e(496),c=e("react"),l=e("react-dom"),p=e(494),h=e(126),f=e(146),d=e(108),y=e("xtend"),g=e("underscore"),t.exports=new(function(){function e(){this.argsStack=[],this.position={},this.isVisible=!1,this.hardToClose=!1,r(function(e){return function(){return t=r(".pop-over")}}(this))}var t,n,u,h;return t=null,n=null,u=null,h=null,e.prototype.shortcut=function(e){switch(e){case i.Escape:return this.popView(),["Esc - Pop Pop-over View","Pop Over"]}},e.prototype.contains=function(e){return r.contains(t[0],e)},e.prototype.toggledBy=function(e){return g.any(this.argsStack,function(t){return t.elem===e})},e.prototype.onWindowResize=function(){return this.isVisible?this.load(this.argsStack.pop()):void 0},e.prototype.calcPos=function(e){var n,o,i,s,a,u,c,l,d,p,h,m,v,y,b;return b=r(window).width(),y=r(window).height(),null!=e.maxWidth?e.maxWidth>b?t.width(b-16):t.width(e.maxWidth):t.width(""),s=b,v=y,p=t.outerWidth(),null!=e.elem&&r(e.elem).is(":visible")?(m=null!=e.top?e.top:null!=e.elem?r(e.elem).outerHeight()+6:35,n=e.alignRight?r(e.elem).offset().left+r(e.elem).outerWidth()-p:r(e.elem).offset().left,i=r(e.elem).offset().top+m):null!=e.clientx&&null!=e.clienty&&(n=e.clientx,i=e.clienty),a=v-68,e.hideHeader||(a-=t.find(".js-pop-over-header").outerHeight()),null!=e.clientx&&null!=e.clienty||g.include(["block","inline-block","inline","table-cell","flex"],r(null!=e?e.elem:void 0).css("display"))?(d=i>0?i:5,c=t.outerHeight(),u=d+c,(f.fLarge||f.fExtraLarge)&&(h=y+r(window).scrollTop(),u>h&&(d=h-c-8),c>h-44&&(d=44)),l=n>0?n:5,o=l+p+16,o>s&&(l=s-(p+5)),{left:l,top:d,contentHeight:a}):void 0},e.prototype.load=function(e){var n,r,o,i;if(this.view=e.view,this.hardToClose=e.hardToClose,t.addClass(e.displayType),!c.isValidElement(e.reactElement))throw new Error("PopOver args.reactElement has to be a react element");return n=(null!=(i=g.last(this.argsStack))?i.keepInDOM:void 0)?(r=g.chain(this.argsStack).filter(function(e){return e.keepInDOM}).pluck("reactElement").value(),r.concat(e.reactElement)):[e.reactElement],o={key:"PopOver",onBack:this.argsStack.length>0?v(this,"popView"):null,onClose:v(this,"hide"),getViewTitle:e.getViewTitle,hideHeader:e.hideHeader},this.por=l.render(c.createElement(a,o,n),t[0]),g.defer(function(n){return function(){var r;return n.position=null!=(r=n.calcPos(e))?r:n.position,t.css({left:n.position.left,top:n.position.top}),t.find(".js-pop-over-content").css({maxHeight:n.position.contentHeight}),t.addClass("is-shown")}}(this)),this.argsStack.push(e)},e.prototype.extractViewArgs=function(e){var t,n;if(null!=e.reactElement)return e;if(null==e.view&&(e={view:e}),g.isFunction(e.view)&&(e.view=new e.view(null!=(n=e.options)?n:{})),!(e.view instanceof m))throw new Error("PopOver args.view has to be a backbone instance");return t=function(e,t){return g.isFunction(e[t])?v(e,t):void 0},e.reactElement=c.createElement(d,{key:e.view.cid,view:e.view}),y({maxWidth:e.view.maxWidth,displayType:e.view.displayType,keepInDOM:e.view.keepInDOM,hideHeader:e.view.hideHeader,getViewTitle:t(e.view,"getViewTitle"),willBePushedDown:t(e.view,"willBePushedDown"),willBePopped:t(e.view,"willBePopped")},e)},e.prototype.show=function(e){e.keepEdits||s.cancelEdits(e.elActive),this.reset(),this.load(this.extractViewArgs(e)),g.defer(function(e){return function(){if(t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return t.find(".js-autofocus:first").focus().select()}}}(this)),this.isVisible=!0,"function"==typeof e.shown&&e.shown(t),u=e.hidden,this.positionInterval=setInterval(this.checkPosition.bind(this),150),p.addHandler(this,{scope:"popover",modal:!0})},e.prototype.checkPosition=function(){var e,n,o,i,s;return this.isVisible?(o=t.offset().top,s=r(window).scrollTop(),o!==s?(i=r(window).height(),n=t.outerHeight(),s>o&&i>=n?void t.css({top:s}):o+n>s+i&&(e=s+Math.max(0,i-n),e!==o)?t.css({top:e}):void 0):void 0):void clearInterval(this.positionInterval)},e.prototype.pushView=function(e){var n;if(this.clearDisplayTypes(),n=g.last(this.argsStack),null!=n&&"function"==typeof n.willBePushedDown&&n.willBePushedDown(),this.load(this.extractViewArgs(e)),t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.popView=function(){var e,n,r;if(e=g.last(this.argsStack),null!=e&&"function"==typeof e.willBePopped&&e.willBePopped(),null!=e&&null!=(n=e.reactElement.props)&&null!=(r=n.view)&&r.remove(),this.argsStack.pop(),null==g.last(this.argsStack))return void this.hide();if(this.load(this.argsStack.pop()),t.find(".js-autofocus").length>0){if(o.isTouch()&&t.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return setTimeout(function(e){return function(){return t.find(".js-autofocus:first").focus().select()}}(this),10)}},e.prototype.toggle=function(e){var t;return t=function(e,t){return e&&t&&r(e)[0]===r(t)[0]},g.last(this.argsStack)&&t(g.last(this.argsStack).elem,e.elem)?this.hide():this.show(e)},e.prototype.hide=function(){return clearInterval(this.positionInterval),t.removeClass("is-shown"),this.reset(),l.unmountComponentAtNode(t[0])},e.prototype.reset=function(){var e,n,r,o,i;for(this.clearDisplayTypes(),r=this.argsStack,n=r.length-1;n>=0;n+=-1)e=r[n],"function"==typeof e.willBePopped&&e.willBePopped(),null!=(o=e.reactElement.props)&&null!=(i=o.view)&&i.remove();return p.removeHandlerScope("popover_view"),p.removeHandler(this),this.view=null,this.argsStack=[],this.isVisible=!1,this.hardToClose=!1,"function"==typeof u&&u(t),u=null},e.prototype.clearDisplayTypes=function(){return t.removeClass("mod-mini-profile mod-avdetail mod-search-over mod-notifications")},e}())},{}],514:[function(e,t,n){var r,o=[].slice;r=e("underscore"),t.exports=new(function(){function e(){this.holding=!1,this.fxs={},this._unnamed=0}return e.prototype.hold=function(){return this.holding=!0},e.prototype.enqueue=function(){var e,t,n,r;e=2<=arguments.length?o.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],r=e[0],null==r&&(r="unnamed_"+this._unnamed++),this.holding?this.fxs[r]=t:t({immediate:!0,delayed:!1})},e.prototype.release=function(){var e;this.holding=!1,e=this.fxs,this.fxs={},r.defer(function(){var t,n;for(n in e)(t=e[n])({immediate:!1,delayed:!0})})},e}())},{}],515:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(513),s=e(126),a=e(496),u=e(493),c=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="js-add-list list-wrapper mod-add is-idle",t.prototype.initialize=function(){return this.listenTo(this.model.viewState,"change:listComposerOpen",this.frameDebounce(this.renderListComposer))},t.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose",submit:"addList"},t.prototype.render=function(){var e;return e=this.model.toJSON({board:!0}),this.$el.html(u.fill("list_add",e)),this.renderListComposer(),this.model.editable()&&this.$el.removeClass("fade hide"),this},t.prototype.setOpen=function(e){s.stop(e),this.model.viewState.set("listComposerOpen",!0)},t.prototype.setClose=function(e){s.stop(e),this.model.viewState.set("listComposerOpen",!1)},t.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()},t.prototype.renderOpen=function(e){s.stop(e),this.$el.removeClass("is-idle"),this.defer(function(e){return function(){return e.$(".list-name-input").blur().focus().select()}}(this)),i.hide()},t.prototype.renderClose=function(e){s.stop(e),this.$el.addClass("is-idle")},t.prototype.addList=function(e){var t,n,r,o;return s.stop(e),t=this.$(".list-name-input"),r=this.model.listList,o=r.length+1,n=t.val().trim(),""===n?void t.focus().select():(this.model.listList.create({name:n,pos:this.model.calcPos(o),closed:!1},{success:function(e){return function(e){return c("Board View","Add List - via Inline List Composer")}}(this)}),t.val(""),void this.renderOpen())},t}(a)},{}],516:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),i=e(513),s=e(496),a=e("underscore"),u=e(493),c=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="move all cards in list",t.prototype.events={"click .js-select-list":"selectList"},t.prototype.render=function(){var e,t,n,r,o,i;for(t=this.model.toJSON(),t.lists=[],i=this.model.getBoard().listList.models,n=0,r=i.length;r>n;n++)o=i[n],e=a.clone(o.toJSON()),e.id===this.model.id&&(e.current=!0),t.lists.push(e);return this.$el.html(u.fill("list_bulk_card_move",t)),this},t.prototype.selectList=function(e){var t,n,o,s,u,l,d;if(t=r(e.target).closest(".js-select-list"),d=t.attr("name"),!t.hasClass("disabled")){for(l=this.modelCache.get("List",d),c("Card","Moved in Bulk via List Menu"),o=a.clone(this.model.openCards().models),s=0,u=o.length;u>s;s++)n=o[s],n.moveToList(l,1e3);i.hide()}},t}(s)},{}],517:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(97),o=e(18),s=e(513),a=e(126),u=e(496),c=e(493),l=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="copy list",t.prototype.tagName="form",t.prototype.events={"click .js-submit":"submit",submit:"submit",'keydown textarea[name="name"]':"keydownEvent"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(c.fill("list_copy",e,{editable:this.model.editable()})),this},t.prototype.keydownEvent=function(e){r.getKey(e)===o.Enter&&(a.stop(e),this.submit(e))},t.prototype.submit=function(e){var t,n,r,o;return a.stop(e),r=this.$('textarea[name="name"]'),""===r.val().trim()?void r.focus().select():(t=this.model.getBoard(),n=t.listList.calcPos(this.model.getIndexInList()+1,this.model,!0),o={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:n,name:r.val().trim(),closed:!1},t.listList.create(o),s.hide(),void l("List","Copy List"))},t}(u)},{}],518:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(465),o=e(510),i=e(515),a=e(521),u=e(514),l=e(70),c=e("underscore"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewType=a,t.prototype.initialize=function(e){return this.resetCallback=e.resetCallback,t.__super__.initialize.apply(this,arguments),l(null!=this.resetCallback),this.listenTo(this.collection,{reset:this.resetCallback,"change:idBoard":this.boardChange})},t.prototype.render=function(){var e,t;return e=Math.max(3,Math.ceil(window.innerWidth/270)),t=this.getModels().map(function(t){return function(n,r){return t.subview(t.viewType,n,{deferCards:r>=e})}}(this)),this.model.editable()&&t.push(this.subview(i,this.model)),this.ensureSubviews(t),this.resetCallback()},t.prototype.boardChange=function(e,t){return t!==this.collection.board.get("id")?(this.collection.remove(e),o.refreshIfInitialized(this.$el)):void 0},t.prototype.addModel=function(){return t.__super__.addModel.apply(this,arguments),this.resetCallback()},t.prototype.removeSubview=function(){t.__super__.removeSubview.apply(this,arguments),o.refreshListCardSortable()},t.prototype.insertSubview=function(e){t.__super__.insertSubview.apply(this,arguments),e.$el.find(".ui-sortable").length>0?o.refreshIfInitialized(this.$el):o.refreshListCardSortable()},t}(r)},{}],519:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e(507),o=e(516),i=e(517),a=e(520),u=e(513),c=e(126),l=e(496),p=e(493),h=e(43),d=e("underscore"),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="list actions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.frameDebounce(this.render))},t.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-close-list":"closeList"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(p.fill("list_menu",e,{editable:this.model.editable()})),this},t.prototype.addCard=function(e){c.stop(e),u.hide(),this.model.getBoard().composer.save({list:this.model,index:0,vis:!0}),h("List Menu","Add Card"),h("Card Composer","Open","Via List Menu")},t.prototype.moveList=function(e){c.stop(e),h("List Menu","Open Move List Popover"),u.pushView({view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.copyList=function(e){c.stop(e),h("List Menu","Open Copy List Popover"),u.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.toggleSubscribe=function(e){c.preventDefault(e),this.model.get("subscribed")?(this.model.subscribe(!1),h("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),h("List Menu","Subscribe","Subscribe"))},t.prototype.moveCards=function(e){c.stop(e),h("List Menu","Open Move All Cards in List"),u.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.archiveCards=function(e){c.stop(e),h("List Menu","Open Archive All Cards in List"),r.pushView("archive all cards",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){var n,r,o,i;for(u.hide(),i=d.clone(e.model.cardList.models),r=0,o=i.length;o>r;r++)n=i[r],n.set({closed:!0});return e.model.run("archiveAllCards",{},e.listViewListen)}}(this)})},t.prototype.closeList=function(e){var t,n;return c.stop(e),n=this,t=this.model,h("List Menu","Archive List"),u.hide(),t.close(),!1},t}(l)},{}],520:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(29),s=e(34),a=e(217),u=e(513),c=e(126),l=e(496),d=e("underscore"),h=e(493),m=e(43),p=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="move list",t.prototype.tagName="form",t.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"},t.prototype.render=function(){var e,t,n,r,i,s,a,u,c,l,d;for(d=this,a=d.model,t={organizations:o.me().getOpenBoardsByOrg(!0)},c=t.organizations,n=0,i=c.length;i>n;n++)for(u=c[n],l=u.boards,r=0,s=l.length;s>r;r++)e=l[r],e.id===a.get("idBoard")&&(e.selected=!0);return this.$el.html(h.fill("popover_move_list",t)),this.updateBoardData(),this},t.prototype.renderValues=function(){var e,t,n,o,i;e=r(this.el),o=e.find(".js-select-board option:selected").val(),i=parseInt(e.find(".js-select-list-pos option:selected").text(),10),t=this.modelCache.get("Board",o),n=t.get("name"),e.find(".js-board-value").text(n),e.find(".js-pos-value").text(String(i))},t.prototype.updateBoardData=function(){var e,t,n,o,i,u,c,l;if(e=r(this.el),n=e.find(".js-select-board"),o=n.find("option:selected").val(),o===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),l=this._boardData.listList.models,i=0,u=l.length;u>i;i++)c=l[i],c.cardCount=this._boardData.listList.get(c.id).openCards().length;this.updateListList()}else t=e.find(".select-list,.select-position"),t.attr("disabled","disabled"),s.loadBoardData(o,a.listsMinimal).then(function(e){return function(){return e._boardData=e.modelCache.get("Board",o),e.updateListList(),t.removeAttr("disabled")}}(this)).done()},t.prototype.updateListList=function(){var e,t,n,o,i,s,a,u,c,l,h,m,f,g;for(g=this,l=g.model,t=this.$(".js-select-list-pos"),t.empty(),h=this._boardData.listList.models,u=this._boardData.id===this.model.getBoard().id,u?(o=d.indexOf(h,this.model),n=h.length):(o=-1,n=h.length+1),s=c=0,f=n;f>=0?f>c:c>f;s=f>=0?++c:--c)a=String(s+1),i=s===o?p("current position",{index:a}):a,m=this._boardData.listList.calcPos(s,l),e=r("<option>").val(m).text(i).appendTo(t),s===o&&e.attr("selected","selected");return this.renderValues()},t.prototype.commitChange=function(e){var t,n,r;c.stop(e),t=this.$(".js-select-list-pos"),r=parseInt(t.find("option:selected").val(),10),n=this.$(".js-select-board option:selected").val(),this.model.getBoard().composer.save("vis",!1),n===this.model.getBoard().id?(this.model.update({pos:r}),m("List Menu","Move Menu","Successfully Moved")):null!=n&&null!=r&&(this.model.update({idBoard:n,pos:r}),m("List Menu","Move Menu","Changed Board")),u.hide()},t}(l)},{}],521:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D=function(e,t){function n(){this.constructor=e}for(var r in t)I.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},I={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(73),s=e(393),a=e(403),u=e(6),e(466),c=e(510),w=e(496),p=e(519),f=e(513),v=e(116),m=e(483),g=e("bluebird"),y=e(494),b=e(126),_=e("underscore"),S=e(40),T=e(106),P=e(493),x=e(770),E=e(43),j=e(99),B=e(254),A=e(497),O=e(475),l=e(97),d=e(18),C=e(101),k=e(231),M=e(129),L=e(130),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return D(t,e),t.prototype.className="js-list list-wrapper",t.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation","click .js-open-card-composer":"openCardComposer","keydown  .js-list-name-input":"keyDownEvent","blur     .js-list-name-input":"stopEditing","click  .js-editing-target":"startEditing",movelist:"moveList",sortreceive:"sortReceive",sortcommit:"sortCommit","dd-drop:files":"dropFiles","dd-drop:text":"dropText","dd-drop:url":"dropUrl",mouseenter:"mouseenter",mouseleave:"mouseleave","userinput-paste:text":"dropText","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},t.prototype.initialize=function(){var e,n,o,i,s;for(t.__super__.initialize.apply(this,arguments),this.fEditingName=!1,this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount","renderName"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:subscribed":this.renderSubscribed}),this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced}),this.listenTo(this.model.getBoard(),"permChange",this.renderEditable),this.listenTo(this.model.getBoard().composer,{"change:list change:index change:vis":this.renderComposerDebounced,"change:list change:vis":this.toggleComposerLinkDebounced}),this.cardListView=this.collectionSubview(a,this.model.cardList,{className:"list-cards u-fancy-scrollbar u-clearfix js-list-cards",deferCards:this.options.deferCards}),r(window).on("resize."+this.uniqueId(),k(this,"hackFlexboxForSadBrowsers")),s=["mouseEnterCardView","mouseLeaveCardView","mouseMoveCardView"],n=function(e){return function(t){return e.listenTo(e.cardListView,t,function(e){return this.trigger(t,e)})}}(this),o=0,i=s.length;i>o;o++)e=s[o],n(e)},t.prototype.render=function(){return S("render","rendering list "+this.model.get("name")),this.cardListView.$el.detach(),this.$el.html(x({name:this.model.get("name"),subscribed:this.model.get("subscribed"),loggedIn:o.isLoggedIn()})),this.cardListView.$el.insertAfter(this.$(".js-list-header")),this.cardListView.render(),this.cardListView.$el.toggleClass("js-sortable",this.model.editable()),this.toggleComposerLinkDebounced(),this.renderComposerDebounced(),this.renderCardCount(),this.renderEditable(),this.hackFlexboxForSadBrowsers(),_.defer(function(e){return function(){return e.$(".js-list-name-input").autosize({append:!1})}}(this)),this},t.prototype.remove=function(){return r(window).off("."+this.uniqueId()),t.__super__.remove.apply(this,arguments)},t.prototype.renderName=function(){return this.$(".js-list-name-assist").text(this.model.get("name")),this.fEditingName||this.$(".js-list-name-input").val(this.model.get("name")).trigger("autosize.resize",!1),this},t.prototype.renderSubscribed=function(){return this.$(".js-list-subscribed").toggleClass("hide",!this.model.get("subscribed")),this.$(".js-list-header").toggleClass("is-subscribe-shown",this.model.get("subscribed")),this.$(".js-list-name-input").trigger("autosize.resize",!1),this},t.prototype.renderEditable=function(){var e;return e=this.model.editable(),this.$(".js-list-cards").toggleClass("js-sortable",e),e?this.$(".js-list-name-input").removeAttr("disabled"):this.$(".js-list-name-input").attr("disabled","disabled"),this.$(".js-open-card-composer").toggleClass("hide",!e),this},t.prototype.hackFlexboxForSadBrowsers=function(){var e;("explorer-10"===(e=i.browserVersionStr)||"explorer-11"===e)&&this.defer(function(e){return function(){var t,n,o,i,s;return t=e.$el,s=e.$(".list-header").outerHeight(),o=e.$(".open-card-composer").outerHeight(),n=r("#board").height(),i=n-s-o-20,e.$(".list-cards").css({"max-height":i})}}(this))},t.prototype.saveListName=function(e){var t,n,r;t=this.$(".js-list-name-input"),n=this.model.get("name"),r=t.val(),r=r.replace(/\s+/g," ").trim(),r!==n&&(r.length>16384||0!==r.trim().length&&this.model.update("name",r))},t.prototype.keyDownEvent=function(e){return l.getKey(e)===d.Enter?(b.stop(e),void this.stopEditing()):l.getKey(e)===d.Escape?void this.stopEditing():void 0},t.prototype.startEditing=function(e){b.stop(e),this.fEditingName||(this.fEditingName=!0,this.$(".js-editing-target").addClass("is-hidden"),_.defer(function(e){return function(){return e.$(".js-list-name-input").focus().select().addClass("is-editing")}}(this)))},t.prototype.stopEditing=function(e){var t;this.fEditingName&&(this.$(".js-editing-target").removeClass("is-hidden"),t=this.$(".js-list-name-input").removeClass("is-editing"),t.is(":focus")&&t.blur(),L(),this.fEditingName=!1,this.saveListName())},t.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())},t.prototype.composerOpen=function(){var e,t;return e=null!=(t=this.model.getBoard())?t.composer:void 0,null!=e&&e.get("vis")&&e.get("list")===this.model},t.prototype.renderComposer=function(){var e,t;return this.composerOpen()&&(e=this.model.getBoard().composer,t=u.getCurrentBoardView().subview(s,e),this.insertComposerAtIndex(e.get("index"),t),t.scrollIntoView(),_.debounce(t.delegateEvents(),150)),this},t.prototype.insertComposerAtIndex=function(e,t){var n,r;0===e?this.$(".list-cards").prepend(t.render().el):(r=e-1,n=this.$(".list-card").not(".js-composer"),r>=n.length&&(r=n.length-1),n.eq(r).after(t.render().el))},t.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(j("cards",this.model.openCards().length))},t.prototype.openCardComposer=function(e){var t;b.stop(e),f.hide(),t=this.model.getBoard(),t.composer.save({list:this.model,index:this.model.openCards().length,vis:!0}),E("Card Composer","Open","Via Bottom of List")},t.prototype.triggerOnItem=function(e,t,n){b.stopPropagation(e),this.defer(function(e){return function(){return t.item.trigger(n,[t,e])}}(this))},t.prototype.sortReceive=function(e,t){this.triggerOnItem(e,t,"moveto")},t.prototype.sortCommit=function(e,t){this.triggerOnItem(e,t,"movein")},t.prototype.openMenu=function(e){var t;return t=this,c.sorting?void 0:(b.preventDefault(e),E("List Menu","Open List Menu"),f.toggle({elem:e.currentTarget,view:new p({model:this.model,modelCache:this.modelCache})}),!1)},t.prototype.moveList=function(e,t){var n,r;b.stop(e),n=t.item.parent().children(),r=n.index(t.item),this.model.move(r)},t.prototype.eventStopPropagation=function(e){b.stopPropagation(e)},t.prototype.scrollToCard=function(e){var t;t=this.cardListView.viewForModel(e),b.scrollElementIntoView(this.$(".js-list-cards")[0],t.el,{vertical:!0,animated:!0})},t.prototype.mouseenter=function(e){return y.addHandler(this,{scope:"list"})},t.prototype.mouseleave=function(e){return y.removeHandler(this,{scope:"list"})},t.prototype.dropText=function(e){var t;if(this.model.editable())return t=e.detail,this.model.uploadText(t)},t.prototype.dropUrl=function(e){var t,n,r,o,i,s;if(this.model.editable())return e.stopPropagation(),s=e.detail,o=B(s),b.isExternalURL(s)||null==(t=null!=(i=/^\/c\/([^\/]+)/.exec(o.pathname))?i[1]:void 0)?void(null!=(n=o.host)&&m.one({timeout:2e3,command:"card-from-url",list:this.model,board:this.model.getBoard(),options:{url:s}}).catch(m.Error.NotHandled,function(){return{}}).then(function(e){return function(t){var r,o;return o=C("loading from domain",{domain:n}),r=_.pick(t,"name","desc"),M(e.model,"uploadUrl",s,r,o)}}(this)).done()):(r=v.isCut(s)?"moveCard":"copyCard",void this.trigger(r,{shortLink:t,idList:this.model.id}))},t.prototype.dropFiles=function(e){var t;if(this.model.editable()&&(t=e.detail,
!A(this.model.getBoard(),t)))return g.resolve(t).each(function(e){return function(t){var n;return n=t.name||O(),M(e.model,"upload",t,n)}}(this)).catch(function(){}).done()},t}(w)},{}],522:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=e(526),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.renderMenu=function(){},t}(o)},{}],523:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;o=e(533),i=e(507),s=e(6),a=e(526),u=e(513),c=e(126),l=e("underscore"),p=e(493),d=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="board-member-menu",t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board,"change:prefs",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-remove-member":"removeMember","click .js-change-role":"changeRole"},t.prototype.renderMenu=function(){var e,t,n;return t=l.extend(this.model.toJSON(),"function"==typeof(e=this.board).premiumFeatures?e.premiumFeatures():void 0,this.model.getMembershipData(this.board)),t.boardProfileUrl=s.getMemberBoardProfileUrl(this.model.get("username"),this.board.id),n=this.board.getMemberType(this.model),t.type=d(["member types",n]),t.isGhost="virtual"===n,("superadmin"===n||"deactivated"===n)&&(t.canChangeRole=!1),this.$el.append(p.fillMenu("member_on_board_menu",t,{editable:this.board.editable(),owned:this.board.owned()})),this},t.prototype.changeRole=function(e){c.stop(e),u.pushView({view:new o({model:this.model,parent:this.board,modelCache:this.modelCache})})},t.prototype.removeMember=function(e,t){c.stop(e),i.pushView(this.model.removeMembershipConfirmationKey(this.board),{confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.board.removeMember(e.model),u.hide()}}(this)})},t}(a)},{}],524:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(526),i=e(513),s=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.events={"click .js-remove-member":"removeMember"},t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.card=this.options.card},t.prototype.renderMenu=function(){return this.$el.append(s.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()})),this},t.prototype.removeMember=function(e){var t;i.hide(),t=this.model.id,this.card.removeMember(t)},t}(o)},{}],525:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(513),i=e(496),s=e(796),a=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getViewTitle=function(){return this.model.get("fullName")},t.prototype.displayType="mod-avdetail",t.prototype.events={"click .js-profile":"showProfile"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(s(e)),this},t.prototype.showProfile=function(){a("Mini Profile","Large Avatar - Click Profile")},t}(i)},{}],526:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(29),o=e(530),i=e(535),s=e(525),u=e(34),c=e(513),l=e(126),d=e(496),p=e("underscore"),h=e(809),m=e(43),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.frameDebounce(this.render))},t.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},t.prototype.displayType="mod-mini-profile",t.prototype.delegateEvents=function(e){var n;return n={"click .js-profile":"showProfile","click .js-edit-profile":"editProfile","click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},t.__super__.delegateEvents.call(this,p.extend(n,e||this.events))},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.isMe=r.isMe(this.model),e.showEmail=null!=e.email&&!e.isMe,null!=e.email||"ghost"!==this.model.get("memberType")||this.loaded||this.loadEmail(),this.$el.html(h(e)),this.renderMenu(),this},t.prototype.loadEmail=function(){return u.loadMemberEmail(this.model.id).then(function(e){return function(){return e.loaded=!0}}(this)).done()},t.prototype.showProfile=function(){m("Mini Profile","Click Profile")},t.prototype.editProfile=function(e){l.stop(e),m("Mini Profile","Click Edit Profile"),c.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.viewLarge=function(e){l.stop(e),m("Mini Profile","View Large Avatar"),c.pushView({view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAvatar=function(e){l.stop(e),m("Mini Profile","Change Avatar"),c.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},t}(d)},{}],527:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),o=e(523),i=e(510),a=e(513),u=e(126),c=e(496),l=e(70),d=e(40),p=e(777),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member",t.prototype.events={click:"showMenu"},t.prototype.initialize=function(e){this.board=e.board,l(null!=this.model,"You cannot have a deleted member as a board member!"),this.listenTo(this.model,"change",this.render),this.listenTo(this.board,"change:memberships",this.render)},t.prototype.render=function(){var e,t,n;return d("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),e=this.model.toJSON(),t=function(e){return function(t){var n;return n=t.getMembershipFor(e.model),"admin"===(null!=n?n.memberType:void 0)}}(this),e.isBoardAdmin=t(this.board)||(null!=(n=this.board.getOrganization())?n.isPremOrgAdmin(this.model):void 0),e.isGhost="ghost"===this.model.get("memberType"),e.isDeactivated=this.board.isDeactivated(this.model),this.$el.html(p(e)),this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown"),this.$el.toggleClass("member-deactivated js-member-deactivated",e.isDeactivated),e.isGhost&&this.$el.addClass("member-virtual"),this.$el.data("id",this.model.id),this},t.prototype.showMenu=function(e){this.doClicks()&&(u.stop(e),a.toggle({elem:e.currentTarget,view:new o({board:this.board,model:this.model,modelCache:this.modelCache})}))},t.prototype.doClicks=function(){return!i.sorting},t}(c)},{}],528:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(506),i=e(513),s=e(126),a=e(496),l=e(493),d=e(43),u=e(101),c=e(39),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="add email",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){return this.$el.html(l.fill("popover_add_email")),this},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return c(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(u(["email error",t])).show()},t.prototype.saveChanges=function(e){var t;return s.preventDefault(e),t=this.$('[name="email"]').val(),this.model.run("logins",{email:t},function(e){return function(t){t?e.showError(t.message):(i.popView(),o.flash("email sent","confirm"),d("Member","Added Email Address"))}}(this))},t}(a)},{}],529:[function(e,t,n){var r,o;r=e("react"),o=e(488)("boards_page_add_org_button"),t.exports=r.createClass({displayName:"MemberBoardsAddOrgComponent",render:o.renderable(function(){var e;return e=this.props.onClick,o.div(".boards-page-board-section.u-clearfix",function(){return o.b(e,".quiet-button.u-float-left",function(){return o.format("create-a-new-organization-ellipsis")})})})})},{}],530:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty,b=[].slice;r=e("jquery"),o=e(210),i=e(29),s=e(389),m=e(100),u=e(513),c=e(391),l=e(126),d=e(496),f=e(493),g=e(43),h=e(101),p=e(139),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="change avatar",t.prototype.initialize=function(){return this.listenTo(this.model,"change:avatarSource change:uploadedAvatarHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"},t.prototype.render=function(){var e,t,n,r,o;return o=this,t=this.model.toJSON({prefs:!0}),t["avatarSource_"+t.avatarSource]=!0,t.canTakePhoto=s.supportsGetUserMedia(),this.$el.html(f.fill("avatar_change",t)),n=this.$(".js-grav"),e=n.find("img"),r="https://secure.gravatar.com/avatar/"+(this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random()),l.waitForImageLoad(r,function(){return n.show()}),this},t.prototype.startUpload=function(e){var t,n,s,a,u,c,d;return u=this.model,a=r(e.target),s=null!=(c=a[0])&&null!=(d=c.files)?d[0]:void 0,t=this.$(".js-error").hide(),null==s||l.validFileSize(s)?(g("Member","Avatar","Use Uploaded - New"),!s&&a.val()?l.uploadFile(i.myToken(),a,this.uploadResult.bind(this)):null!=s?(n=new FormData,n.append("token",i.myToken()),n.append("file",s),o({url:a.closest("form").attr("action"),data:n,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){return e.uploadResult(new Error(m(t)))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(b.call(arguments)))}}(this),timeout:12e4})):void 0):(t.text(h("images can not be larger than 10mb")).show(),void g("Member","Avatar","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?t.show().text(e):void 0},t.prototype.useUploadedAvatar=function(e){return g("Member","Avatar","Use Uploaded - Existing"),this.model.update("avatarSource","upload"),u.popView()},t.prototype.useGravatar=function(e){return g("Member","Avatar","Use Gravatar"),this.model.update("avatarSource","gravatar"),u.popView()},t.prototype.clearAvatar=function(e){return g("Member","Avatar","Use Initials"),this.model.update("avatarSource","none"),u.popView()},t.prototype.takePhoto=function(e){var t;return t=function(e){return function(t){var n,r;return n=p(t),r=new FormData,r.append("token",i.myToken()),r.append("file",n,"avatar.png"),o({url:"/1/member/"+e.model.id+"/avatar",data:r,type:"post",processData:!1,contentType:!1,error:function(e,t,n,r){var o,i;return i=e.status,o=e.responseText,413!==i?r():void 0},timeout:6e4})}}(this),u.pushView({view:new c({model:this.model,modelCache:this.modelCache,savePhoto:t})}),g("Member","Avatar","Take Photo")},t}(d)},{}],531:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(513),s=e(496),a=e(493),u=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="send emails",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click li a":"changeFreq"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(a.fill("popover_set_email_freq",e)),this},t.prototype.changeFreq=function(e){var t;u("Member","Changed Email Frequency"),t=parseInt(r(e.target).closest("a").attr("value")),this.model.setPref("minutesBetweenSummaries",t).save(),i.popView()},t}(s)},{}],532:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(98),s=e(27),a=e(491)(),i=e(496),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="change locale",t.prototype.events={"click .js-select-locale":function(e){return this.selectLocale(e.currentTarget.getAttribute("data-locale"))}},t.prototype.initialize=function(e){return this.onChange=e.onChange,this.listenTo(this.model,"change:prefs.locale",this.render)},t.prototype.selectLocale=function(e){var t;t=this.model.getPref("locale"),this.model.setPref("locale",e,function(n){return function(){return n.onChange(e,t)}}(this))},t.prototype.render=function(){var e,t;return e=this.model.getLocale(),t=function(t,n){a.li(function(){a.a(".js-select-locale",{href:"#","data-locale":t},function(){a.text(n),t===e&&(a.text(" "),a.icon("check"))})})},this.$el.html(a.render(function(){return a.ul(".pop-over-list",function(){var e,n,r,i,a,u;for(n=0,r=s.length;r>n;n++)u=s[n],e=u.code,i=u.name,a=o.normalizeLocale(e),t(a,i)})})),this},t}(i)},{}],533:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(210),i=e(29),a=e(507),u=e(513),c=e(126),l=e(496),d=e("underscore"),h=e(493),m=e(43),p=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="change permissions",t.prototype.initialize=function(){this.parent=this.options.parent,this.listenTo(this.parent,"change:memberships",this.render)},t.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"},t.prototype.render=function(){var e,t,n,r,o,i,s;for(s=this,e=this.model.getMembershipData(this.parent),e.showObserver=this.parent.hasObservers(),e.canMakeAdmin=this.model.get("confirmed"),r=function(){if("Organization"===this.parent.typeName)return"org roles";if("Board"===this.parent.typeName)return"board roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),t=0,n=o.length;n>t;t++)i=o[t],e["roleText_"+i]=p([r,i,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(h.fill("popover_change_roles",e)),this},t.prototype.apiChangeRole=function(e){this.$el.find("ul a").addClass("disabled"),this.parent.changeMemberRole(this.model,{type:e}).done(),u.hide()},t.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)},t.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&i.isMe(this.model)},t.prototype.makeAdmin=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")},t.prototype.makeMember=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"normal"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to normal member",{fxConfirm:function(e){return function(t){return e.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))},t.prototype.makeObserver=function(e){c.stop(e),r(e.target).closest("a").hasClass("disabled")||"observer"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to observer",{fxConfirm:function(e){return function(t){return e.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))},t}(l)},{}],534:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(513),i=e(126),s=e(496),u=e(493),c=e(43),a=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},t.prototype.viewTitleKey=function(){return p.call(this.model.get("loginTypes"),"password")<0?"set password":"change password"},t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0,hasPassword:!0}),this.$el.html(u.fill("popover_change_set_password",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showPasswordError=function(e){return this.$("#password-error").text(a(["password error",e])).show()},t.prototype.saveChanges=function(e){var t,n,r;return i.preventDefault(e),this.$("#password-error").hide(),r=this.getValue("oldpassword"),t=this.getValue("password"),n=this.getValue("password2"),t||n?void(t!==n?this.showPasswordError("must match"):this.model.run("updatePassword",{oldPassword:r,newPassword:t},function(e){return function(t){return null==t?(c("Member","Changed Password"),void o.popView()):void e.showPasswordError(function(){switch(t.message.trim()){case"invalid value for newPassword":return"not long enough";case"The old password was incorrect":return"old password";default:return"unknown"}}())}}(this))):void 0},t}(s)},{}],535:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("jquery"),i=e(6),s=e(513),a=e(126),u=e(496),d=e(493),p=e(43),c=e(101),l=e(39),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change name and bio",t.prototype.events={"click .js-save-changes":"saveChanges"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_change_user_info",e)),this},t.prototype.getValue=function(e){return this.$("[name="+e+"]").val()},t.prototype.showError=function(e){var t;return t=function(){switch(e.trim().toLowerCase()){case"username is taken":return"username taken";case"username must be at least 3 characters":return"username too short";case"username is invalid: only lowercase letters, underscores, and numbers are allowed":return"username invalid";case"full name must be at least 1 character":return"full name too short";case"initials must contain 1-4 characters":return"initials wrong length";default:return l(new Error("Unknown server error message '"+e+"'")),"unknown"}}(),this.$("#account-error").text(c(["member profile error",t])).show()},t.prototype.saveChanges=function(e){var t,n,o,u,c,l,d;for(l=this,a.preventDefault(e),t={},this.$("#account-error").hide(),c=["fullName","initials","username","bio"],n=0,o=c.length;o>n;n++)u=c[n],t[u]=r.trim(this.getValue(u));t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),d=i.getMemberProfileUrl(this.model.get("username"))===i.location,this.model.update(t,{waitForServer:!0},function(e){return function(t){t?e.showError(t.message):(s.popView(),d&&i.setLocation({location:i.getMemberProfileUrl(e.model.get("username"))}),p("Member","Successfully Change User Info"))}}(this))},t}(u)},{}],536:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(210),o=e(507),i=e(74),a=e(126),u=e(496),c=e("underscore"),d=e(493),l=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-login",t.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"},t.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.dateAdded=a.idToDate(e.id).toISOString(),this.$el.html(d.fill("member_login",e)),i.update(this.el),this},t.prototype.setPrimary=function(e){return r({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(e){return function(t){return e.model.set("primary",!0)}}(this)})},t.prototype.confirmDeleteLogin=function(e){return a.stop(e),this.model.hasConflict()?void this.trigger("requestSetPassword"):o.toggle("delete credential",this.popover({html:l("confirm.delete credential.text",{email:this.model.get("email")}),confirmBtnClass:"negate",fxConfirm:function(e){return function(){return e.deleteLogin()}}(this)}))},t.prototype.popover=function(e){return c.extend({elem:this.$(".js-remove")},e)},t.prototype.deleteLogin=function(){return r({url:"/1/members/me/logins/"+this.model.id,type:"delete",success:function(e){return function(t){return e.model.trigger("destroy",e.model,e.model.collection)}}(this)})},t}(u)},{}],537:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j=function(e,t){function n(){this.constructor=e}for(var r in t)S.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},S={}.hasOwnProperty;k=e("underscore"),r=e("jquery"),o=e(528),i=e(29),s=e(530),a=e(531),u=e(532),c=e(534),l=e(535),d=e(508),h=e(539),m=e(549),f=e(550),g=e(551),v=e(555),y=e(556),b=e(558),w=e(513),_=e(126),C=e(493),x=e(43),t.exports=p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loginTypes change:prefs change:tokens change:credentials",this.frameDebounce(this.renderMainContent))},t.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-change-locale":"changeLocale","click .js-configure-2fa":"configure2FA","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm","click .js-add-email":"addEmail","click .js-mobile-temp-password":"mobileTempPassword"},t.prototype.renderMainContent=function(){var e,t,n,r;return n=this.model.toJSON({prefs:!0,hasPassword:!0}),n["avatarSource_"+n.avatarSource]=!0,n.canAllowDesktopNotifications=d.notEnabled(),n.cbEnabled=this.model.get("prefs").colorBlind,n.showMobileLoginPassword=k.any(this.model.get("credentials"),function(e){return"saml"===e.type}),this.$(".js-content").html(C.fill("member_account",n,{editable:i.isMe(this.model)})),this.$(".js-member-applications").html(this.subview(h,this.model).render().el),this.$(".js-member-sessions").html(this.subview(v,this.model).render().el),t=this.$(".js-credentials-section"),e=this.$(".js-credentials-list"),e.empty(),this.model.get("logins").length>0&&(r=this.collectionSubview(g,this.model.loginList,{model:this.model}),this.appendSubview(r,e)),this.$(".js-content").prepend(this.subview(f,this.model,{allowDismiss:!1}).render().el),this.setActiveView(".js-member-account"),this},t.prototype.changeUserInfo=function(e){return _.stop(e),x("Member View","Settings Page","Open Change User Info Menu"),w.toggle({elem:this.$(".js-change-name-and-bio"),view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.addEmail=function(e){return _.stop(e),x("Member View","Settings Page","Open Add Email Menu"),w.toggle({elem:r(e.target),view:new o({model:this.model,modelCache:this.modelCache})})},t.prototype.mobileTempPassword=function(e){return _.stop(e),x("Member View","Settings Page","Generate Temporary Mobile Password"),this.model.getMobileTempPassword(function(t){return w.toggle({elem:r(e.target),view:new b({tempPassword:t})})})},t.prototype.changeAvatar=function(e){return _.stop(e),x("Member View","Settings Page","Open Change Avatar Menu"),w.toggle({elem:this.$(".js-change-avatar"),view:new s({model:this.model,modelCache:this.modelCache})})},t.prototype.changePassword=function(e){return _.stop(e),x("Member View","Settings Page","Open Change Password Menu"),w.toggle({elem:this.$(".js-change-password"),view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.configure2FA=function(e){return x("Member View","Settings Page","Configure 2FA")},t.prototype.changeLocale=function(e){var t;return _.stop(e),x("Member View","Settings Page","Change Language"),t=function(e,t){return e!==t?document.location.reload():void 0},w.toggle({elem:this.$(".js-change-locale"),view:new u({model:this.model,modelCache:this.modelCache,onChange:t})})},t.prototype.changeEmailFreq=function(e){return _.stop(e),x("Member View","Settings Page","Open Change Frequency Menu"),w.toggle({elem:this.$(".js-change-email-freq"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.allowDesktopNote=function(e){_.stop(e),x("Member View","Settings Page","Allow Desktop Notifications"),d.requestPermission().finally(function(e){return function(){return e.render()}}(this))},t.prototype.toggleCB=function(e){_.stop(e),x("Member View","Settings Page","Toggle Color Blind Mode"),this.model.toggleColorBlindMode()},t.prototype.deleteConfirm=function(e){_.stop(e),x("Member View","Settings Page","Open Delete Account Confirmation Menu"),w.toggle({elem:this.$(".js-confirm-delete-member"),view:new m({model:this.model,modelCache:this.modelCache})})},t}(y)},{}],538:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),o=e(29),s=e(513),a=e(563),u=e(565),c=e(126),l=e(496),d=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.hoverMember=function(e){var t;return t=r(e.target).closest(".item"),c.selectMenuItem(this.$(".pop-over-member-list"),".item",t)},t.prototype.openOption=function(e){var t,n,i,l;c.stop(e),d("Invitations","Open Role Selector"),l=r(e.target).closest(".js-select-member").find(".username").text(),i=this.modelCache.findOne("Member","username",l),n=!1,r(e.target).closest(".item.js-email-invite").length>0&&(n=!0,t=r(e.target).closest(".js-email-invite").find(".full-name").attr("name")),i?s.pushView({view:new a({modelCache:this.modelCache,model:i,parent:this.model,onSendInvite:this.willBePopped.bind(this),canMakeAdmin:i.get("confirmed")})}):s.pushView({view:new u({model:o.me(),modelCache:this.modelCache,parent:this.model,email:t,onSendInvite:this.willBePopped.bind(this),canMakeAdmin:!1})})},t}(l)},{}],539:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(567),i=e(496),s=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(){var e,t,n,r,i;return e=this.model.toJSON({prefs:!0}),i=null!=(t=e.tokens)?t:[],e.hasTokens=i.length>0,this.$el.html(s.fill("member_application_list",e)),r=function(){var e,t,r;for(r=[],e=0,t=i.length;t>e;e++)n=i[e],r.push(this.subview(o,this.model,n,n.id));return r}.call(this),this.appendSubviews(r,this.$(".js-list-member-applications")),this},t}(i)},{}],540:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(128),o=e("react"),s=e(488)("member"),t.exports=r=function(e){function t(e){t.__super__.constructor.call(this,e)}return a(t,e),t.prototype.displayName="MemberAvatar",t.prototype.shouldComponentUpdate=i,t.prototype.render=s.renderable(function(){var e,t,n,r,o,i,a,u,c;return u=this.props,e=u.avatarHash,c=u.username,t=u.fullName,n=u.initials,o=u.isDeactivated,r=u.isBoardAdmin,i=u.isOrganizationAdmin,a=u.onClick,s.div(function(){var a,u,l;return l=t+" ("+c+")",e?(a=[window.avatarDomain,e,"30.png"].join("/"),u=[window.avatarDomain,e,"50.png"].join("/"),s.img({class:"member-avatar",height:"30",width:"30",src:a,srcSet:a+" 1x, "+u+" 2x",alt:l,title:l})):null!=n&&s.span(".member-initials",{title:l},function(){return s.text(n)}),o||(r&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-board")}),i&&s.span(".member-type.admin",{title:s.l("this-member-is-an-admin-of-this-organization")})),s.span(".member-gold-badge",{title:s.l("this-member-has-trello-gold")})})}),t}(o.Component)},{}],541:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty;r=e("jquery"),o=e(65),s=e(208),a=e(29),c=e(297),l=e(298),d=e(299),p=e(507),h=e(6),f=e(300),m=e(303),i=e(302),T=e(309),C=e(308),v=e(20),y=e(556),b=e(34),w=e(216),_=e(280),k=e(513),u=e(294),x=e("react"),j=e("react-dom"),S=e(487),M=e(310),O=e(101),B=e(231),L=e("moment"),P=e(110),A=e(493),D=e(43),E=e("recup"),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.renderMainContent=function(){return this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this.renderBanner(),this},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return x.createElement(S,{},o.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)?this.getBillingComponent():this.getSignUpForGoldComponent())},t.prototype.getBillingComponent=function(){var e;return e=M(this.model,v,{type:"gold",productName:O("products.gold"),productIconClass:"trello-gold",detailsUrl:"/gold",onRenewClick:B(this,"renew"),cancelProduct:B(this,"cancel"),onSwitchToYearly:B(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return b.loadMemberAccountData(e.model.get("username")).done()}}(this),didGetAuthStatus:function(e){return function(){return b.loadMemberAccountData(e.model.get("username")).done()}}(this),onChangeBillingContactClick:B(this,"changeBillingContactPopover"),reactivateProduct:B(w,"reactivate",this.model),changeCreditCard:B(w,"changeCreditCard",this.model),createPaidAccount:B(w,"createAccount",this.model),paidAccountPoll:B(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"}),onClickChangeCC:B(this,"changeCreditCardPopover"),
onChangeAdditionalDetailsClick:B(this,"changeAdditionalDetailsPopover")}),x.createElement(u,e)},t.prototype.getSignUpForGoldComponent=function(){return E.render(function(e){return function(){return E.div(function(){var t,n,r,o,u,c,l;return E.createElement(_,{stringsKey:"gold",subtitleCount:1,infoUrl:"/gold",epilogueCount:0,icon:"trello-gold"}),t=v.currentPriceObjectForModel(e.model),E.createElement(f,{onSubmit:B(w,"createAccount",e.model),doPoll:B(s,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"upgrade-me",contentBuilders:[P(C,{productName:"Trello Gold",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.monthly.productNumber,billingStrategy:t.billingStrategy}),P(m),P(i),P(T)],extraData:{billingContactFullName:null!=(n=null!=(r=e.model.get("paidAccount"))?r.contactFullName:void 0)?n:a.me().get("fullName"),billingContactEmail:null!=(o=null!=(u=e.model.get("paidAccount"))?u.contactEmail:void 0)?o:a.me().get("email"),billingContactLocale:null!=(c=null!=(l=e.model.get("paidAccount"))?l.contactLocale:void 0)?c:a.me().getPref("locale")},didntGetAuthStatus:function(){return b.loadMemberAccountData(e.model.get("username")).done()},didGetAuthStatus:function(){return h.memberBoardsView()}})})}}(this))},t.prototype.renderBanner=function(){var e,t,n,r,o,i;if(this.model.get("idPremOrgsAdmin").length>0&&(e=this.model.organizationList.filter(function(e){return!e.paysWithPurchaseOrder()}),e.length>0))for(n=A.fill("member_billing_org_link_list"),this.$(".js-content").prepend(n),r=0,o=e.length;o>r;r++)i=e[r],t=i.toJSON(),i.isPremium()&&i.owned()&&(t.billingLink=h.getOrganizationBillingUrl(i),this.$(".js-org-link-list").append(A.fill("member_billing_org_link",t)));return this},t.prototype.cancel=function(){return D("Member View","Billing Page","Cancel Gold"),w.cancel(this.model).then(function(e){return function(t){return D("Member","Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return D("Member View","Billing Page","Renew Expiring Gold Subscription"),w.renew(this.model).then(function(e){return function(t){return D("Member","Successfully Renewed Expiring Yearly Gold Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return p.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return w.changeProduct(e.model,v.currentProducts.yearly).then(function(t){return D("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t)}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return D("Member View","Billing Page","Open Change Billing Contact Info"),k.toggle({elem:e,view:new l({model:this.model,modelCache:this.modelCache})})},t.prototype.changeCreditCardPopover=function(e){return D("Member View","Billing Page","Open Change Credit Card"),k.toggle({elem:e,view:new d({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAdditionalDetailsPopover=function(e){return D("Member View","Billing Page","Open Change Additional Details"),k.toggle({elem:e,view:new c({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return j.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(y)},{}],542:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(147),o=e(160),i=e(271),a=e(217),c=e(495),u=e(496),l=e(106),d=e(493),t.exports=l(c,s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActions"},t.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board.memberList,"add remove reset",this.frameDebounce(this.render)),this.actionListView=this.collectionSubview(i,new o(this.model.getActions(this.board),{modelCache:this.modelCache}),{renderOpts:{context:this.model,readOnly:!0}}),this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.model.getActions(e.board),{silent:!0}),e.renderActions()}}(this)),this.idModels=[this.board.id],this.nextPage=0,this.loadMoreActions()},t.prototype.render=function(){return this.$el.html(d.fill("board_member_profile",this.model.toJSON())),this.actionListView.setElement(this.$(".list-actions")[0]),this.renderActions()},t.prototype.renderActions=function(){return this.actionListView.render(),this.$(".js-more-actions").toggle(this.hasMoreActions()),this},t.prototype.getActionsFilter=function(){return a.memberActions},t}(u))},{}],543:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I=function(e,t){function n(){this.constructor=e}for(var r in t)N.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},N={}.hasOwnProperty,V=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};B=e("underscore"),r=e("jquery"),o=e(29),i=e(318),s=e(319),a=e(320),u=e(321),c=e(325),l=e(326),d=e(327),p=e(328),h=e(529),m=e(15),f=e(6),g=e(366),v=e(582),y=e(74),O=e(231),L=e(101),w=e(550),k=e(513),C=e("bluebird"),x=e("react"),j=e("react-dom"),S=e(487),E=e("recup"),A=e(493),D=e(43),T=e(126),M=e(496),_=e(33),P=e(129),t.exports=b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset change:name change:displayName change:logoHash change:products",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardList,"add remove reset change:name change:idOrganization change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderReactSection)),this.listenTo(this.model.boardStarList,"add remove reset change:pos",this.renderReactSection),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderReactSection)},t.prototype.className="member-boards-view",t.prototype.getReactRoot=function(){return x.createElement(S,{},this.getMemberBoardsElements())},t.prototype.renderReactSection=function(){return j.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return this.$el.empty().prepend(this.subview(w,this.model,{allowDismiss:!0}).render().el),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$el.append(this.$reactRoot),this.renderReactSection(),this},t.prototype.getMemberBoardsElements=function(){return E.render(function(e){return function(){return E.div(function(){var t,n,r,o,a,u;for(u=(null!=m?m.enabled:void 0)&&!e.model.isDismissed(m.id)&&window.locale===m.locale&&Date.now()<y.parse(m.dateExpires),u&&(e._recordedDisplayed||(e._recordedDisplayed=!0,D("Boards Page Announcement","Displayed",m.id)),E.createElement(i,{icon:m.icon,message:m.message,onClick:function(e){return null!=e.target.href?D("Boards Page Announcement","Click",m.id,e.target.href):void 0},onDismiss:function(t){return e.model.dismiss(m.id),D("Boards Page Announcement","Dismiss",m.id)}})),o={items:e.getStarredBoards().map(O(e,"boardToBoardItemDndElement")),header:e.getStarredBoardsHeader(),noSidebarMod:!0,isStarredSection:!0},o.items.length>0&&E.createElement(l,o),o={items:e.getMyBoards().map(O(e,"boardToBoardItemElement")),header:e.getMyBoardsHeader(),mayBeSorted:!0,noSidebarMod:!0,createNewItem:x.createElement(s,{newBoard:O(e,"newBoard",e.model)})},E.createElement(c,o),a=e.model.getSortedOrgs(),t=0,n=a.length;n>t;t++)r=a[t],o={items:e.getOrgBoards(r).map(O(e,"boardToBoardItemElement")),header:e.getOrgHeader(r),mayBeSorted:!0,noSidebarMod:!0,createNewItem:x.createElement(s,{newBoard:O(e,"newBoard",r)})},E.createElement(c,o);return E.addElement(e.getAddOrgButtonElement())})}}(this))},t.prototype.backgroundObjForBoard=function(e){var t,n,r,o;return B.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(n=null!=(r=T.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?r.url:void 0)?n:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(o=e.getPref("backgroundColor"))?o:e.getClientBackgroundColor("blue")})},t.prototype.boardToBoardItemDndElement=function(e){var t,n;return t=this.boardToBoardItemProps(e),t.onDragHover=function(t){return function(t){var n,r,i,s;return r=o.me().boardStarList,n=r.getBoardStar(t),i=r.getBoardIndex(e.id),s=r.getNewPos(n,i),n.set({pos:s})}}(this),t.onDragEnd=function(){var t,n;n=o.me().boardStarList,t=n.getBoardStar(e.id),C.using(_.getLock(),function(){return P(t,"update",{pos:t.get("pos")}).catch(function(){})}).done()},t.orgname=null!=(n=e.getOrganization())?n.get("displayName"):void 0,t.isDraggable=!0,x.createElement(u,t)},t.prototype.boardToBoardItemElement=function(e){return x.createElement(a,this.boardToBoardItemProps(e))},t.prototype.boardToBoardItemProps=function(e){var t;return{id:e.id,name:e.get("name"),hasUnseenActivity:e.hasUnseenActivity(),dateLastActivity:new Date(null!=(t=e.get("dateLastActivity"))?t:T.idToDate(e.id)),isLessActive:e.isLessActive(),background:this.backgroundObjForBoard(e),showOptions:o.isLoggedIn(),isStarred:null!=o.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=o.me().boardStarList,C.using(_.getLock(),function(){return null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}).done()}}(this),badgeComponents:[],tagComponents:[],key:e.id}},t.prototype.newBoard=function(e,t){k.toggle({elem:t,top:0,view:g,options:{model:e,modelCache:this.modelCache}}),D("Boards View","Clicked 'Create new board' Button")},t.prototype.getAddOrgButtonElement=function(){var e;return e={onClick:O(this,"showAddOrgPopOver")},x.createElement(h,e)},t.prototype.showAddOrgPopOver=function(e){return D("Boards View","Clicked Add Org Button"),k.toggle({elem:e,top:0,view:v,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getMyBoardsHeader=function(){return x.createElement(d,{title:L("board section title.personal boards"),iconClass:"member"})},t.prototype.getMyBoards=function(){var e;return e=function(e){return function(t){var n,r;return n=null!=(r=t.getOrganization())?r.id:void 0,null!=n&&V.call(e.model.get("idOrganizations"),n)>=0}}(this),B.filter(this.model.boardList.models,function(t){return!e(t)&&t.isOpen()})},t.prototype.getOrgHeader=function(e){var t;return t={title:e.get("displayName"),iconClass:"organization",logoHash:e.get("logoHash"),linkElements:[{url:f.getOrganizationUrl(e),iconClass:"board",titleKey:"boards"},{url:f.getOrganizationMembersUrl(e),iconClass:"member",titleKey:"members"},{url:f.getOrganizationAccountUrl(e),iconClass:"gear",titleKey:"settings"}].map(O.choke(1,x,"createElement",p))},e.isFeatureEnabled("enterpriseUI")?(t.smallIconClass="enterprise",t.smallIconTitleKey="enterprise"):e.isPremium()&&(t.smallIconClass="business-class",t.smallIconTitleKey="business-class"),x.createElement(d,t)},t.prototype.getOrgBoards=function(e){return B.filter(this.model.boardList.models,function(t){return function(t){var n;return(null!=(n=t.getOrganization())?n.id:void 0)===e.id&&t.isOpen()}}(this))},t.prototype.getStarredBoardsHeader=function(){return x.createElement(d,{title:L("board section title.starred boards"),iconClass:"star"})},t.prototype.getStarredBoards=function(){return B.filter(this.model.boardStarList.getBoards(),function(e){return e.isOpen()})},t.prototype.remove=function(){return j.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(M)},{}],544:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(411),i=e(496),s=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.render=function(e){var t,n;return this.cards=e,t=this.model.toJSON({prefs:!0}),t.boardUrl=this.model.getUrl(),t.permissionLevel_org&&(t.permissionLevel="organization-visible"),t.idOrganization&&!this.options.hideOrg&&(t.org=null!=(n=this.modelCache.get("Organization",t.idOrganization))?n.toJSON():void 0),this.cards.length>0?(this.$el.html(s.fill("member_cards_board",t)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e;return e=this.cards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!0})}}(this)),this.appendSubviews(e,this.$(".js-list")),this},t}(i)},{}],545:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(411),i=e(126),s=e(496),a=e("underscore"),c=e(493),u=e(70),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){return this.cards=e.cards,u(this.cards.length>0)},t.prototype.render=function(){var e,t;return e=this.model.toJSON({prefs:!0}),e.boardUrl=this.model.getUrl(),e.permissionLevel_org&&(e.permissionLevel="organization-visible"),e.idOrganization&&!this.options.hideOrg&&(e.org=null!=(t=this.modelCache.get("Organization",e.idOrganization))?t.toJSON():void 0),this.$el.html(c.fill("member_cards_board",e)),this.renderCards(),this},t.prototype.renderCards=function(){var e;return e=this.cards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!1})}}(this)),this.appendSubviews(e,this.$(".js-list")),this},t}(s)},{}],546:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(74),o=e(411),s=e(126),a=e(496),u=e("underscore"),c=e(493),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="window-module",t.prototype.initialize=function(e){this.templateData=e.templateData},t.prototype.render=function(){var e;return e={iconType:"clock",isOverdue:!1,isDueSoon:!1},u.extend(e,this.templateData),this.groupedCards.length>0?(this.$el.html(c.fill("member_cards_date",e)),this.renderCards()):this.$el.empty(),this},t.prototype.renderCards=function(){var e;return e=this.groupedCards.map(function(e){return function(t){return e.subview(o,t,{showBoard:!0})}}(this)),this.appendSubviews(e,this.$(".js-list"))},t}(a)},{}],547:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;o=e(268),i=e(513),s=e(126),a=e(496),u=e(493),c=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.viewTitleKey="sort cards",t.prototype.initialize=function(){return this.listenTo(o,"change:cardsPageSortType",function(){return this.render()})},t.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"},t.prototype.render=function(){var e;return e={},e[o.getCardsPageSortType()]=!0,this.$el.html(u.fill("member_cards_filter",e)),this},t.prototype.sortByBoard=function(e){s.stop(e),o.sortCardsPageByBoard(),i.hide(),c("Member View","Cards Page","Sort by Board")},t.prototype.sortByDueDate=function(e){s.stop(e),o.sortCardsPageByDate(),i.hide(),c("Member View","Cards Page","Sort by Due Date")},t}(a)},{}],548:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(29),o=e(74),i=e(545),s=e(546),a=e(547),c=e(268),l=e(556),d=e(513),p=e(126),h=e("underscore"),g=e(493),v=e(43),f=e("moment"),m=e(101),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(c,"change:cardsPageSortType",function(){return this.renderCardsSection()})},t.prototype.events={"click .js-toggle-sort":"toggleSort"},t.prototype.renderMainContent=function(){return this.setActiveView(".js-member-cards"),this.$(".js-content").html(g.fill("member_cards_base")),this.renderCardsSection(),this},t.prototype.getCards=function(){return this.modelCache.find("Card",function(e){return function(t){return t.isOpen()&&t.hasMember(e.model)&&t.getBoard().isOpen()}}(this))},t.prototype.getSortType=function(){return c.getCardsPageSortType()},t.prototype.renderFilterText=function(){this.$(".js-sort-text").html(m(["sorting cards by",this.getSortType()]))},t.prototype.toggleSort=function(e){p.stop(e),v("Member View","Cards Page","Open Sorting and Filtering Options"),d.toggle({elem:this.$(".js-toggle-sort"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.clearContent=function(){return this.$(".js-cards-content").empty()},t.prototype.renderCardsSection=function(){switch(this.getSortType()){case"board":this.renderBoardSort();break;case"date":this.renderDateSort()}},t.prototype._appendNoVisibleCards=function(){var e,t;t=m(r.isMe(this.model)?"no assigned cards.at all":"no assigned cards.that you can see"),e={message:t,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-cards-content").append(g.fill("empty_list",e))},t.prototype.renderBoardSort=function(){var e,t,n,r,o,s,a,u;for(this.clearContent(),this.renderFilterText(),n=this.getCards(),r=!1,a=this.model.boardList.models,o=0,s=a.length;s>o;o++)e=a[o],e.isOpen()&&(t=h.filter(n,function(t){return function(t){return t.get("idBoard")===e.id}}(this)),h.isEmpty(t)||(r=!0,u=this.subview(i,e,{cards:t}),this.appendSubview(u,this.$(".js-cards-content"))));return r||this._appendNoVisibleCards(),this},t.prototype.renderDateSort=function(){var e,t,n,i,a,u,c,l,d,p,g,v;this.clearContent(),this.renderFilterText(),n=function(e,t){var n,r;return r=f().add(e,"days"),n=f().add(t,"days"),function(e,t){return!t&&f(e).isBetween(r,n)}},e=function(e){var t;return t=e.get("due"),null!=t?o.parse(t):null},u={"overdue cards":{fxTest:function(e,t){return!t&&f(e).isBefore(f())},data:{isOverdue:!0}},"due in the next day":{fxTest:n(0,1),data:{isDueSoon:!0}},"due in the next 7 days":{fxTest:n(1,7)},"due in the next month":{fxTest:n(7,28)},"due later":{fxTest:function(e,t){return!t&&f(e).isAfter(f().add(28,"days"))}},"due date met":{fxTest:function(e,t){return t}},"cards with no due date":{fxTest:function(e){return null==e},data:{iconType:"card"}}},g=h.sortBy(this.getCards(),function(e){return function(e){var t;return null!=(t=e.get("due"))?t:""}}(this)),c=!1;for(l in u)d=u[l],i=d.fxTest,t=d.data,a=g.filter(function(t){return function(t){return i(e(t),t.get("dueComplete"))}}(this)),h.isEmpty(a)||(c=!0,v=h.extend({header:m(["card group headers",l])},t),p=this.subview(s,r.me(),{templateData:v},"datesectionview-"+l),p.groupedCards=a,this.appendSubview(p,this.$(".js-cards-content")));return c||this._appendNoVisibleCards(),this},t}(l)},{}],549:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(506),i=e(513),s=e(126),a=e(496),c=e(493),l=e(43),u=e(101),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="delete account",t.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"},t.prototype.render=function(){var e;return e=this,this.$el.html(c.fill("popover_confirm_member_delete",this.model.toJSON())),this},t.prototype.deleteMember=function(e){s.stop(e),this.$(".js-delete-member").attr("disabled","disabled"),this.model.run("deleteAccount",{msg:"troodbye!"},function(){i.hide(),r.flash("email sent","confirm"),l("Member","Sent Account Delete Email")})},t.prototype.cancelDeleteMember=function(e){s.stop(e),i.hide()},t}(a)},{}],550:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e(506),o=e(29),i=e(20),a=e(34),u=e(126),c=e(496),l=e("underscore"),d=e(793),p=e(794),h=e(101),m=e(99),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced),this.listenTo(this.model,"change:paidAccount",this.renderDebounced)},t.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"},t.prototype.render=function(){var e,t,n,r,i,s;return this.$el.empty(),o.isMe(this.model)?(s=this.viewShown,this.model.isGold()&&!this.model.isDismissed("GoldIntro")?(this.viewShown="intro",this.$el.html(p({hasThreePowerups:this.model.isFeatureEnabled("threePlugins")}))):this.model.isDismissed("GoldEarned")&&this.options.allowDismiss||this.activating||(this.viewShown="earned",t=this.model.get("credits"),i=l.filter(t,function(e){var t;return!e.applied&&e.count>0&&("invitation"===(t=e.type)||"promoCode"===t)}),e=l.reduce(i,function(e,t){return e+t.count},0),e&&(e>12&&(e=12),r=l.chain(i).filter(function(e){return"invitation"===e.type&&null!=e.memberInvited}).pluck("memberInvited").pluck("fullName").value(),n={hasInvitations:r.length>0,joinedNames:r,localizedCongratulations:m("months of trello gold",e),showClose:this.options.allowDismiss,hasGold:this.model.isGold()},this.$el.html(d(n)))),null!=s&&s!==this.viewShown&&this.delegateEvents(),this):this},t.prototype.refreshPaidAccount=function(){return null==this.startedPolling&&(this.startedPolling=Date.now()),this.startedPolling+u.getMs({minutes:1})<Date.now()?(r.hide("activating"),void r.show("activating gold timeout","error","activating-failed")):a.loadMemberPaidAccount(this.model.id).then(function(e){return function(){e.model.isGold()?(delete e.startedPolling,e.activating=!1,r.hide("activating")):e.setTimeout(l.bind(e.refreshPaidAccount,e),u.getMs({seconds:1}))}}(this)).done()},t.prototype.startUsingGold=function(e){return u.stop(e),this.activating=!0,r.show("activating gold","info","activating"),this.render(),this.model.run("unpaidAccount",{products:[i.productShortNames.trelloGoldMonthly]},function(e){return function(t,n){return null==t&&n?e.refreshPaidAccount():void 0}}(this))},t.prototype.closeGoldEarned=function(e){return u.stop(e),this.model.dismiss("GoldEarned")},t.prototype.closeGoldIntro=function(e){return u.stop(e),this.model.dismiss("GoldIntro")},t}(c)},{}],551:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(534),o=e(465),i=e(507),s=e(536),u=e(513),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewType=s,t.prototype.initialize=function(){return this.listenTo(this,"requestSetPassword",this.showSetPassword),t.__super__.initialize.apply(this,arguments)},t.prototype.showSetPassword=function(e){return i.toggle("cant remove credential",e.popover({confirmBtnClass:"confirm",fxConfirm:function(t){return function(n){return u.show(e.popover({view:r,options:{model:t.model,modelCache:t.modelCache}}))}}(this)}))},t}(o)},{}],552:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(33),i=e(474),s=e(34),a=e(200),u=e(569),c=e("react"),d=e(488)("member_notifications"),l=e("underscore"),r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.loadMore=this.loadMore.bind(this),this.updateNotifications=this.updateNotifications.bind(this),this.state={nextPage:1,isMore:!1,notifications:[]}}return p(t,e),t.prototype.displayName="MemberNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications),this.updateNotifications()},t.prototype.updateNotifications=function(){return this.setState({notifications:a.sortedByDateDescending(o),isMore:!0})},t.prototype.loadMore=function(){return s.loadMoreNotificationData(this.props.member.get("username"),this.state.nextPage).then(function(e){return function(t){return e.setState({nextPage:e.state.nextPage+1,isMore:t.length>9,notifications:a.sortedByDateDescending(o)})}}(this)).done()},t.prototype.render=d.renderable(function(){return d.div(function(e){return function(){return d.div(".window-module-title",function(){return d.span(".window-module-title-icon.icon-lg.icon-notification"),d.h3(function(){return d.format("notifications")})}),0===e.state.notifications.length&&d.div(".empty-list",function(){return d.format("no-notifications")}),d.div(".js-list-notifications",function(){return d.createElement(u,{notifications:e.state.notifications,context:"notifications-page"})}),d.a(".show-more.js-more-notifications",{onClick:e.loadMore,class:d.classify({hide:!e.state.isMore})},function(){return d.format("load-more-notifications")})}}(this))}),t}(c.Component),t.exports=i(r)},{}],553:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;s=e(34),o=e(552),a=e("react"),u=e("react-dom"),c=e(487),d=e("recup"),l=e(496),r=e("jquery"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.className="member-notifications-view",t.prototype.renderOnce=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$el.prepend(this.reactRoot),this.renderReactSection(),this},t.prototype.getReactRoot=function(){return a.createElement(c,{},this.getNotificationListComponent())},t.prototype.renderReactSection=function(){return u.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getNotificationListComponent=function(){return d.render(function(e){return function(){return d.div(function(){return d.createElement(o,{member:e.model})})}}(this))},t}(l)},{}],554:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(160),o=e(271),s=e(556),a=e(600),u=e(217),c=e(495),l=e(106),d=e(493),p=e(43),t.exports=l(c,i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),p("Member Profile Page","Open"),this.limit=10,this.daysBack=u.memberProfile_daysBack,this.actionListView=this.collectionSubview(o,new r(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}}),this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(e){return function(){return e.actionListView.collection.reset(e.getActions(),{silent:!0}),e.renderActions()}}(this))},t.prototype.renderMainContent=function(){var e;return e=this.model.toJSON(),this.setActiveView(".js-member-profile"),this.$(".js-content").html(d.fill("member_profile",e)),this.defer(function(e){return function(){var t,n;return e.model.organizationList.length>0?(n=e.subview(a,e.model),t=e.$(".js-list-orgs").empty(),e.appendSubview(n,t)):e.$(".js-list-orgs").closest(".window-module").hide(),e.actionListView.setElement(e.$(".list-actions")[0]),e.renderActions()}}(this)),this},t.prototype.renderActions=function(){return 0===this.actionListView.collection.length?this.actionListView.$el.html(d.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render(),this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited()),this},t.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()},t.prototype.loadMoreActionsAndRemoveDateLimit=function(){return this.daysBack=null,this.loadMoreActions()},t.prototype.getActionsFilter=function(){return u.memberActions},t}(s))},{}],555:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(566),i=e(126),s=e(496),a=e("underscore"),u=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:sessions",this.frameDebounce(this.render))},t.prototype.events={"click .js-log-out-other":"logOutOther"},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),this.$el.html(u.fill("member_session_list",e)),n=function(){var n,r,i,s,a;for(s=null!=(i=e.sessions)?i:[],a=[],n=0,r=s.length;r>n;n++)t=s[n],a.push(this.subview(o,this.model,t,t.id));return a}.call(this),this.ensureSubviews(n,this.$(".js-sessions")),this},t.prototype.logOutOther=function(e){return i.stop(e),this.model.run("logoutOtherSessions"),this.model.set("sessions",a.filter(this.model.get("sessions"),function(e){return function(e){return e.isCurrent}}(this))),this.render()},t}(s)},{}],556:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e(65),o=e(29),i=e(530),s=e(103),p=e(100),u=e(513),c=e(490),l=e(126),d=e(496),m=e(106),f=e(493),g=e(43),v=e("xtend"),h=e(790),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),m(c,t),t.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",this.render),this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)},t.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,v(t.prototype.events,e||this.events))},t.prototype.render=function(){var e,t,n,i;return t=o.isMe(this.model),e=this.model.toJSON(),this.model.organizationList.models.length>0&&(e.showOrgs=!0),t&&(i=null!=(n=e.paidAccount)?n.standing:void 0,e.hasAccount=this.model.hasMemberOrOrgAccount(),e.accountProblem=r.isProblem(i),e.isMe=!0),e.hasCrown=this.model.isFeatureEnabled("crown"),e.editable=t,this.$el.html(h(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){
var e,t;return t=o.isMe(this.model),e=this.model.toJSON(),e.bioHtml=s.markdownAsHtml(e.bio,{textData:e.bioData}),e.hasCrown=this.model.isFeatureEnabled("crown"),this.$(".js-current-details").empty().append(f.fill("member_detail_profile_info",e,{editable:t})),t&&this.$(".js-profile-form").empty().append(f.fill("member_detail_profile_edit",e,{editable:t})),this},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeAvInProfile=function(e){l.stop(e),g("Member View","Header","Change Avatar Menu"),u.toggle({elem:this.$(".js-change-avatar-profile"),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){l.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),g("Member View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){l.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},t.prototype.submitProfile=function(e){var t,n,r,o,i;if(l.stop(e),!this.disabled){for(t={},i=["fullName","username","bio","initials"],r=0,o=i.length;o>r;r++)n=i[r],t[n]=this.$(".js-profile-form [name="+n+"]").val();t.username=t.username.toLowerCase().replace(/[^a-z0-9_]/g,""),t.initials=t.initials.toUpperCase(),this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){var n;e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?(n=t.message.trim().toLowerCase(),e.$(".js-profile-form-error").removeClass("hide").text(p(n))):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),g("Member","Successfully Change User Info"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(d)},{}],557:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e(29),i=e(34),s=e(513),a=e(126),u=e(496),c=e("underscore"),l=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="voters",t.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"},t.prototype.initialize=function(){return i.loadCardVoters(this.model.id).done(),this.listenTo(this.model.memberVotedList,"add remove reset",this.frameDebounce(this.render))},t.prototype.showAll=function(){return this.render(!0)},t.prototype.render=function(e){var t,n,o;return o=this.model.memberVotedList,t={members:function(){var e,t,r,i;for(r=o.models,i=[],e=0,t=r.length;t>e;e++)n=r[e],i.push(n.toJSON());return i}()},e!==!0&&(t.members=t.members.slice(0,48),t.loading=0===o.length,t.fewMembers=o.length<14,t.moreMembers=o.length>48,t.lengthDiff=o.length-48,t.canVote=this.model.getBoard().canVote(r.me()),t.voted=c.include(this.model.get("idMembersVoted"),r.myId())),this.$el.html(l.fill("members_voted",t,{},{member:l.member})),this},t.prototype.vote=function(e){return a.preventDefault(e),this.model.vote(!0),!1},t.prototype.unvote=function(e){return a.preventDefault(e),this.model.vote(!1),0===this.model.get("idMembersVoted").length&&s.hide(),!1},t}(u)},{}],558:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(496),i=e(491)("member_account"),s=i.renderable(function(e){var t;return t=e.tempPassword,i.p(function(){return i.format("temporary-mobile-password")}),i.p(".u-text-align-center",function(){return i.strong(function(){return i.text(t)})})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="temporary mobile password",t.prototype.render=function(){return this.$el.html(s({tempPassword:this.options.tempPassword})),this},t}(o)},{}],559:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(533),o=e(6),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.apiChangeRole=function(e){return t.__super__.apiChangeRole.apply(this,arguments),"admin"!==e&&this.isAdminAndMe()?o.navigate(o.getOrganizationUrl(this.parent),{trigger:!0}):void 0},t}(r)},{}],560:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},P={}.hasOwnProperty,E=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(211),i=e(212),s=e(29),a=e(6),_=e(306),c=e(97),l=e(18),d=e(33),p=e(34),h=e(22),m=e(216),f=e(513),g=e("bluebird"),O=e(43),y=e(126),b=e(496),w=e("underscore"),j=e(99),T=e(100),x=e(101),M=e(491)("quick_team_overlay"),r=e("jquery"),C=e(90),e(242),S=function(e){var t,n;return n=e[0],t=e[1],[n,x(["templates","credit_card","countries",t])]},B=M.renderable(function(e){var t,n,r,o,i,s;return o=e.firstName,i=e.lastName,n=e.email,t=e.bcMonthlyPrice,r=e.enterpriseMonthlyPrice,s=function(e,t){return null==t&&(t=!0),M.div(".features",{class:M.classify({"features-shown":t})},function(){var t,n,r,o;for(o=[],n=0,r=e.length;r>n;n++)t=e[n],o.push(M.div(".feature",function(){return M.span(".icon-sm.icon-check"),M.format(t)}));return o})},M.div(".complete-overlay.js-dismiss-complete",{"data-plan":"none"},function(){return M.div(".complete-overlay-content",function(){return M.div(".complete-overlay-dismiss",function(){return M.span(".icon-lg.icon-close")}),M.div(".complete-overlay-heading.complete-overlay-free.complete-overlay-bc",function(){return M.format("complete-your-team-is-all-set")}),M.div(".complete-overlay-subheading.complete-overlay-free.complete-overlay-bc",function(){return M.format("you-can-always-edit-your-team-from-the-main-trello-boards-screen")}),M.div(".complete-overlay-heading.complete-overlay-enterprise",function(){return M.format("youll-hear-from-us-soon")}),M.div(".complete-overlay-subheading.complete-overlay-enterprise",function(){return M.format("well-email-you-directly")}),M.div(".complete-overlay-image-container",function(){return M.img(".complete-overlay-image",{src:"https://a.trellocdn.com/images/walkthrough/2bfb1ef6ceebeb2cdb730ace7a0eb62f/taco-complete.svg"})}),M.div(".complete-overlay-dismiss-button",function(){return M.format("start-using-trello")})})}),M.div(".choose-plan.fill-area.js-choose-plan",{"data-phases":"choose-plan","data-plan":"none"},function(){return M.div(".invitations-sent.js-invitations-sent",{"data-phases":"choose-plan"},function(){return M.format("your-invitations-have-been-sent")}),M.div(".choose-plan-content",{"data-phases":"choose-plan"},function(){return M.div(".header-logo-area",function(){return M.img(".header-logo-image",{src:"https://a.trellocdn.com/images/walkthrough/742c8a741a466e6257f4214d5c31c5f2/trello-logo-blue.svg"})}),M.h1(".title",function(){return M.format("choose-a-plan")}),M.div(".plans",function(){return M.div(".plan.free-plan",function(){return M.div(".plan-name",function(){return M.format("free")}),M.div(".price",function(){return M.text("$0"),M.text(" "),M.span(".price-extra",function(){return M.format("free-forever")})}),M.div(function(){return M.button(".continue-button.js-choose-free.primary",function(){return M.format("select")})}),M.div(".explanation",function(){return M.format("for-small-teams-and-individuals")}),s(["unlimited-boards","unlimited-team-members","unlimited-collaboration","forever-ever"])}),M.div(".plan.business-class-plan",function(){return M.div(".plan-name",function(){return M.format("business-class")}),M.div(".price",function(){return M.text(t),M.text(" "),M.span(".price-extra",function(){return M.format("user-per-month")})}),M.div(function(){return M.button(".continue-button.js-choose-bc.primary",function(){return M.format("select")})}),M.div(".explanation",function(){return M.format("the-perfect-fit-for-companies")}),s(["all-free-features","advanced-admin-control","unlimited-power-ups","priority-email-support","detailed-data-exports","custom-team-organization","unlimited-observers"])}),M.div(".plan.enterprise-plan",function(){return M.div(".plan-name",function(){return M.format("enterprise")}),M.div(".price",function(){return M.text(r),M.text(" "),M.span(".price-extra",function(){return M.format("user-per-month")})}),M.div(function(){return M.button(".continue-button.js-choose-enterprise.primary",function(){return M.format("select")})}),M.div(".explanation",function(){return M.format("for-large-companies-that-want-the-confidence")}),s(["all-business-class-features","single-sign-on","account-management-team","custom-onboarding","comprehensive-legal-review","phone-support","in-depth-security-review-and-setup","enhanced-sla"])})}),M.div(".show-features.features-shown.js-hide-features",function(){return M.format("hide-plan-features")}),M.div(".show-features.features-hidden.js-show-features",function(){return M.format("view-plan-features")})}),M.div(".choose-plan-overlay.js-choose-plan-overlay",function(){return M.div(".choose-plan-overlay-content.js-choose-plan-overlay-content",function(){return M.span(".dismiss-plan.icon-lg.icon-close.js-dismiss-plan"),M.div(".choose-plan-enterprise",function(){return M.div(".choose-plan-overlay-header.choose-plan-overlay-header-enterprise",function(){return M.format("enterprise")}),M.div(".choose-plan-overlay-billing",function(){return M.div(".choose-plan-overlay-form",function(){return M.div(".choose-plan-overlay-price",function(){return M.div(".choose-plan-welcome-to-enterprise",function(){return M.format("welcome-to-enterprise")}),M.div(".choose-plan-let-us-contact-you",M.format("let-us-contact-you-and-show-you"))}),M.div(".choose-plan-inputs",function(){return M.div(".choose-plan-labeled",{style:"width: 72px; margin-right: 16px;"},function(){return M.format("licenses"),M.input(".choose-plan-input.js-enterprise-licenses",{type:"number",min:1})}),M.div(".choose-plan-labeled",{style:"width: 222px;"},function(){return M.format("company-name"),M.input(".choose-plan-input.js-company-name",{value:"",placeholder:M.l("enterprise-company-name-placeholder")})})}),M.div(".choose-plan-inputs",function(){return M.div(".choose-plan-labeled",{style:"width: 96px; margin-right: 16px;"},function(){return M.format("first-name"),M.input(".choose-plan-input.js-first-name",{value:o,placeholder:M.l("enterprise-first-name-placeholder")})}),M.div(".choose-plan-labeled",{style:"width: 198px;"},function(){return M.format("last-name"),M.input(".choose-plan-input.js-last-name",{value:i,placeholder:M.l("enterprise-last-name-placeholder")})})}),M.div(".choose-plan-labeled",{style:"width: 100%;"},function(){return M.format("email"),M.input(".choose-plan-input.js-email",{value:n,placeholder:M.l("enterprise-email-placeholder")})}),M.div(".choose-plan-labeled",{style:"width: 100%;"},function(){return M.format("phone-number"),M.input(".choose-plan-input.js-phone-number")}),M.button(".continue-button.js-submit-enterprise",{style:"margin-top: 8px"},function(){return M.format("get-trello-enterprise")})})})}),M.div(".choose-plan-bc",function(){return M.div(".choose-plan-overlay-header.choose-plan-overlay-header-bc",function(){return M.format("business-class")}),M.div(".choose-plan-overlay-billing",function(){return M.div(".choose-plan-overlay-price.js-price-header",function(){return M.span(".actual-price.js-actual-price"),M.span(".actual-price-recurrence",function(){return M.format("per-month")}),M.div(".price-times-users",function(){return M.span(".js-monthly-price"),M.text("  "),M.span(".js-user-count"),M.text(" "),M.span(".yearly-savings.js-savings",function(){return M.format("percent-savings")})})}),M.div(".choose-plan-overlay-enterprise-instead.js-enterprise-instead-header.hide",function(){return M.format("looks-like-your-team-would-be-better-suited-for-our-enterprise-plan"),M.text(". "),M.span(".choose-plan-info.js-why-enterprise",function(){return M.text("?")})}),M.div(".choose-plan-enterprise-explanation.js-why-enterprise-explanation.hide",function(){return M.p(function(){return M.format("one-hundred-team-members-will-benefit")}),M.h3(".choose-plan-enterprise-explanation-heading",function(){return M.format("features")}),s(["all-business-class-features","dedicated-phone-support","custom-onboarding","comprehensive-legal-review","enhanced-sla","security-review-and-setup"],!1)}),M.div(".choose-plan-overlay-form",function(){return M.div(".choose-plan-inputs",function(){var e;return M.div(".choose-plan-labeled",{style:"width: 72px; margin-right: 16px;"},function(){return M.format("licenses"),M.input(".choose-plan-input.js-licenses",{type:"number",min:1})}),M.div(".choose-plan-labeled.js-bc",{style:"width: 220px"},function(){var e;return M.format("plan"),e=function(e,t){return M.div(".choose-plan-frequency."+t,function(){return M.text(e),M.div(".choose-plan-frequency-check",function(){return M.span(".choose-plan-frequency-checkmark.icon-sm.icon-check")})})},M.div(function(){return e(M.l("yearly"),"js-choose-yearly"),e(M.l("monthly"),"js-choose-monthly")})}),M.div(".choose-plan-more-licenses.js-more-licenses.hide",function(){}),M.div(".choose-plan-too-few-licenses.js-too-few-licenses.hide",function(){return M.span(".choose-plan-warning",function(){return M.text("!")}),M.text(" "),M.span(".js-too-few-licenses-message")}),e=function(e,t){return M.div(".iframe-input.choose-plan-input"+e,t)},M.div(".choose-plan-labeled.js-bc",{style:"width: 100%"},function(){return M.format("card-number"),M.div(function(){return e(".choose-plan-card-number.js-card-number",{style:"width: 264px; display: inline-block;"})})}),M.div(".choose-plan-labeled.js-bc",{style:"width: 100px; margin-right: 16px;"},function(){return M.format("expiration"),e(".js-expiration-date")}),M.div(".choose-plan-labeled.js-bc",{style:"width: 105px"},function(){return M.format("security-code"),e(".js-cvv")}),M.div(".choose-plan-labeled.js-bc",{style:"width: 182px; margin-right: 16px;"},function(){return M.format("country"),M.select(".choose-plan-input.choose-plan-country.js-country",{autoComplete:"country"},function(){var e,t,n,r,o,i,s,a,u,c,l;for(i=_.special.map(S),e=0,n=i.length;n>e;e++)s=i[e],l=s[0],o=s[1],M.option({value:l},function(){return M.text(o)});for(c=_.unloved.map(S).sort(function(e,t){var n,r,o,i;return n=e[0],r=e[1],o=t[0],i=t[1],r.localeCompare(i)}),u=[],t=0,r=c.length;r>t;t++)a=c[t],l=a[0],o=a[1],u.push(M.option({value:l},function(){return M.text(o)}));return u})}),M.div(".choose-plan-labeled.js-bc.js-zip-code-container",{style:"width: 96px"},function(){return M.format("zip"),M.input(".choose-plan-input.js-zip-code",{maxLength:10})})}),M.div(".choose-plan-accept-tos.js-bc",function(){return M.input(".accept-tos.js-accept-tos",{type:"checkbox"}),M.span(function(){return M.format("i-accept-the-tos-and-the-privacy-policy")})}),M.button(".continue-button.js-pay",{style:"margin-top: 8px"},function(){return M.span(".idle",function(){return M.span(function(){return M.img(".choose-plan-lock.continue-button-enabled",{src:"https://a.trellocdn.com/images/walkthrough/19965b8db9a1b0c4b40fd312baa2dbe6/lock-light.svg"}),M.img(".choose-plan-lock.continue-button-disabled",{src:"https://a.trellocdn.com/images/walkthrough/a4cd76b2ba7188d46f8a4dbd82aff7e1/lock-dark.svg"}),M.text(" "),M.format("pay"),M.text(" "),M.span(".js-pay-amount")})}),M.span(".spinning",function(){return M.span(function(){return M.span(".list-spinner"),M.format("authorizing")})}),M.span(".complete",function(){return M.span(".icon-lg.icon-check")})}),M.button(".continue-button.js-try-enterprise.hide",{style:"margin-top: 8px"},function(){return M.format("try-enterprise")}),M.div(".choose-plan-payment-error.js-pay-error.hide",function(){return M.span(".choose-plan-warning",function(){return M.text("!")}),M.span(".choose-plan-payment-error-message.js-pay-error-message")})})})})})})}),M.div(".panels",{"data-phases":"team-name add-members"},function(){return M.div(".left-panel",{"data-phases":"team-name add-members"},function(){return M.div(".panel-content",function(){return M.div(".header-logo-area",function(){return M.img(".header-logo-image",{src:"https://a.trellocdn.com/images/walkthrough/742c8a741a466e6257f4214d5c31c5f2/trello-logo-blue.svg"})}),M.div(".left-panel-content",function(){return M.div(".fill-area.fade-in",{"data-phases":"team-name"},function(){return M.h1(".title",function(){return M.format("welcome-create-your-new-team")}),M.div(function(){return M.label(".overlay-label",function(){return M.format("team-name"),M.input(".team-name-input.js-name",{placeholder:M.l("team-name-placeholder"),maxlength:100})}),M.div(".overlay-tip",function(){return M.format("if-your-team-already-exists-you-can-skip-this-step")})}),M.div(function(){return M.button(".continue-button.js-set-name.primary.disabled",{disabled:!0},function(){return M.format("continue")})})}),M.div(".fill-area.fade-in",{"data-phases":"add-members"},function(){return M.h1(".title",function(){return M.format("invite-people-to-team")}),M.div(function(){return M.label(".overlay-label",function(){return M.format("enter-multiple-emails"),M.div(".js-emails")})}),M.div(".invitations-ready.js-invitations-ready.hide",function(){return M.text(j("invitations ready",0))}),M.div(".overlay-tip",function(){return M.format("tip-the-skys-the-limit")}),M.div(function(){return M.button(".continue-button.js-set-members.primary",function(){return M.format("continue")})})})})})}),M.div(".right-panel",{"data-phases":"team-name add-members"},function(){return M.div(".fill-area.fade-up",{"data-phases":"team-name"},function(){return M.img(".illustration",{src:"https://a.trellocdn.com/images/walkthrough/2dd8157460c8b2b05a371d27f6ec4ae3/create-team.svg",style:"max-width: 191px"})}),M.div(".fill-area.fade-up",{"data-phases":"add-members"},function(){return M.div(".add-members-illustration.add-members-illustration-1.js-add-members-illustration",function(){return M.img(".add-members-board.add-members-board-1",{src:"https://a.trellocdn.com/images/walkthrough/add-members/44ca5813ae98e4d753409edb0d7cad2c/board-1.svg"}),M.img(".add-members-board.add-members-board-2",{src:"https://a.trellocdn.com/images/walkthrough/add-members/51d2720d463b0fcc6301da337a9c45f8/board-2.svg"}),M.img(".add-members-board.add-members-board-3",{src:"https://a.trellocdn.com/images/walkthrough/add-members/120108135543cda57e10b6d2824b2b79/board-3.svg"}),M.img(".add-members-board.add-members-board-4",{src:"https://a.trellocdn.com/images/walkthrough/add-members/f2b67763919f3355955c83b1f570b5a9/board-4.svg"}),M.img(".add-members-board.add-members-board-5",{src:"https://a.trellocdn.com/images/walkthrough/add-members/0f67feaeaeaa442f0550a50c7deb6e7d/board-5.svg"}),M.img(".add-members-member.add-members-member-green",{src:"https://a.trellocdn.com/images/walkthrough/add-members/240be0eb2ac9215faaad2c483b46357d/green-face.svg"}),M.img(".add-members-star.add-members-stars-green",{src:"https://a.trellocdn.com/images/walkthrough/add-members/4bac12b5fa8f2b495d97970039c48b6e/green-star.svg"}),M.img(".add-members-member.add-members-member-red",{src:"https://a.trellocdn.com/images/walkthrough/add-members/627ab3871f30611f450605b0cbb34a2c/red-face.svg"}),M.img(".add-members-star.add-members-stars-red",{src:"https://a.trellocdn.com/images/walkthrough/add-members/186e56453f7d5a3eba61faf621f6e280/red-star.svg"}),M.img(".add-members-member.add-members-member-blue",{src:"https://a.trellocdn.com/images/walkthrough/add-members/4ad8e3f1511f3da373d5db86a56e4b42/blue-face.svg"}),M.img(".add-members-star.add-members-stars-blue",{src:"https://a.trellocdn.com/images/walkthrough/add-members/48fabb2364c18a3664d88024112a6eeb/blue-stars.svg"}),M.img(".add-members-member.add-members-member-purple",{src:"https://a.trellocdn.com/images/walkthrough/add-members/e573009b829c4cafd0bd7e98be4b92ff/purple-face.svg"}),M.img(".add-members-star.add-members-stars-purple",{src:"https://a.trellocdn.com/images/walkthrough/add-members/cba09b8b61254aa524a41f485e61c80c/purple-star.svg"}),M.img(".add-members-member.add-members-member-orange",{src:"https://a.trellocdn.com/images/walkthrough/add-members/0bc6bf7a94c715b3b9cae4ca5e9bcd2c/orange-face.svg"}),M.img(".add-members-star.add-members-stars-orange",{src:"https://a.trellocdn.com/images/walkthrough/add-members/2b1ce1b26c752ff3406b3075fb1e857b/orange-stars.svg"})})})})})}),t.exports=v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return L(t,e),t.prototype.className="quick-team-overlay",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.idOrganization=null,this.bcFrequency="yearly",this.manualLicenses=null,this.emailInput=new u},t.prototype.events={"click .js-set-name":function(e){var t,n,r;return n=this.$(".js-set-name"),t=this.$(".js-name"),r=function(e){return n.prop("disabled",!e),t.prop("disabled",!e)},r(!1),this.model.organizationList.create({displayName:t.val()},{silent:!0,success:function(e){return function(t){var n;return O("New Org","Create",void 0,t.id),e.idOrganization=t.id,n=t.get("displayName"),e.$(".js-company-name").val(n),e.$(".js-team-name").text(n),e.switchPhase("add-members")}}(this),error:function(){return r(!0)}})},"click .js-set-members":function(e){var t,n,r;return t=this.$(".js-set-members"),this.emailInput.disable(),t.prop("disabled",!0),n=/^[^@]+@[^@]+$/,r=w.chain(this.emailInput.getEmails()).map(function(e){return e.replace(/^\s+|\s+$/g,"")}).filter(function(e){return n.test(e)}).uniq().sortBy(function(e){return e.toLowerCase()}).value(),O("Team Create Overlay","Add Members","Email Count",r.length),g.map(r,function(e){return function(t){return i({method:"post",url:"/1/organizations/"+e.idOrganization+"/memberships",data:{email:t,type:"normal"}}).then(function(){return!0}).catch(o,function(){return!1})}}(this),{concurrency:5}).then(function(e){return function(t){var n;return n=t.filter(function(e){return e}).length,e.$(".js-invitations-sent").toggleClass("hide",0===n),e.loadMemberCount(),e.countMembers.then(function(t){var n,r,o,i,s;for(i=[".js-licenses",".js-enterprise-licenses"],s=[],n=0,r=i.length;r>n;n++)o=i[n],s.push(e.$(o).attr("min",t).val(t));return s}),e.renderSelectedPlan(),e.switchPhase("choose-plan")}}(this))},"click .js-choose-free":function(e){return O("Team Create Overlay","Chose Plan","Free"),this.$(".js-dismiss-complete").attr("data-plan","free"),this.switchPhase("complete")},"click .js-choose-plan-overlay":function(e){return this.$(e.target).hasClass("js-choose-plan-overlay")?this.switchOverlayPlan("none"):void 0},"click .js-choose-bc":function(e){return O("Team Create Overlay","Chose Plan","Business Class"),this.switchOverlayPlan("bc")},"click .js-dismiss-plan":function(e){return this.switchOverlayPlan("none")},"click .js-try-enterprise":function(e){return O("Team Create Overlay","Switched to Enterprise"),this.switchOverlayPlan("enterprise")},"click .js-choose-enterprise":function(e){return this.switchOverlayPlan("enterprise")},"click .js-show-features":function(e){return this.setShowFeatures(!0)},"click .js-hide-features":function(e){return this.setShowFeatures(!1)},"click .js-opt-out":function(e){return O("Team Create Overlay","Opt Out"),this.dismiss(),this.el.remove()},"input .js-name":function(e){var t,n,r,o;return t=this.$(".js-name"),r=t.val().replace(/^\s+|\s+$/g,""),n=1<=(o=r.length)&&128>=o,this.$(".js-set-name").prop("disabled",!n).toggleClass("disabled",!n)},"keydown .js-name":function(e){return c.isSubmitEvent(e)?this.$(".js-set-name").click():void 0},"change .js-emails":function(e){var t;return t=this.emailInput.getEmails().length,this.$(".js-invitations-ready").text(j("invitations ready",t)).toggleClass("hide",0===t),this.renderIllustration()},"click .js-choose-yearly":function(e){return this.bcFrequency="yearly",this.renderSelectedPlan()},"click .js-choose-monthly":function(e){return this.bcFrequency="monthly",this.renderSelectedPlan()},"input .js-licenses":function(e){var t;return t=parseInt(this.$(".js-licenses").val(),10)||0,this.manualLicenses=t,this.countMembers.then(function(e){return function(n){return t>=n?e.$(".js-enterprise-licenses").val(t):void 0}}(this)),this.renderSelectedPlan()},"change .js-accept-tos":function(e){return this.renderCanSubmit()},"input .js-zip-code":function(e){return this.renderCanSubmit()},"change .js-country":function(e){return this.renderCanSubmit(),this.renderZipCode()},"click .js-pay":function(e){var t;return t=this.$(".js-pay"),t.addClass("disabled").prop("disabled",!0).addClass("spinning"),this.hostedFieldsInstance.tokenize(function(e){return function(n,i){var a,u,c,l,p,f,g;return g=e.isZipCodeRequired()?r(".js-zip-code").val():void 0,a=r(".js-country").val(),c=s.me(),l=d.get("Organization",e.getIdOrg()),p=h.currentPriceObjectForModel(l),f="yearly"===e.bcFrequency?p.yearly.productNumber:p.monthly.productNumber,u={zipCode:g,country:a,nonce:i.nonce,billingContactFullName:c.get("fullName"),billingContactEmail:c.get("email"),billingContactLocale:window.locale,products:f,highWaterMarkSeats:e.manualLicenses},m.createAccount(l,u).then(function(n){return l.set(w.extend(n,{products:[f]})),t.removeClass("spinning").addClass("complete"),e.setTimeout(function(){return e.$(".js-dismiss-complete").attr("data-plan","bc"),e.switchPhase("complete")},500)}).catch(o,function(e){return t.removeClass("disabled spinning").prop("disabled",!1),this.$(".js-pay-error").removeClass("hide"),this.$(".js-pay-error-message").text(T(e))}).done()}}(this))},"click .js-submit-enterprise":function(e){return this.$(".js-submit-enterprise").addClass("disabled").prop("disabled",!0),r.post("https://forms.hubspot.com/uploads/form/v2/2249672/0d648010-875b-4a86-b1fc-8488b11b8e0a",{email:this.$(".js-email").val(),firstname:this.$(".js-first-name").val(),lastname:this.$(".js-last-name").val(),company:this.$(".js-company-name").val(),phone:this.$(".js-phone-number").intlTelInput("getNumber"),bc_license_interest_exactnum:parseInt(this.$(".js-enterprise-licenses").val(),10),hs_context:JSON.stringify({sfdcCampaignId:"701j0000001qFo8AAE"})}).always(function(e){return function(){return e.$(".js-dismiss-complete").attr("data-plan","enterprise"),e.switchPhase("complete")}}(this))},"click .js-dismiss-complete":function(e){return y.stop(e),this.dismiss(),this.el.remove()},"click .js-why-enterprise":function(e){return this.$(".js-why-enterprise-explanation").toggleClass("hide")}},t.prototype.switchPhase=function(e){switch(this.$("[data-phases]").each(function(){var t;return t=r(this),t.toggleClass("quick-team-overlay-inactive",E.call(t.attr("data-phases").split(" "),e)<0)}),e){case"team-name":this.defer(function(e){return function(){return e.$(".js-name").focus().select()}}(this));break;case"add-members":this.setTimeout(function(e){return function(){return e.emailInput.focus()}}(this),500)}return O("Team Create Overlay","Saw Screen",e)},t.prototype.switchOverlayPlan=function(e){return null==e&&(e="none"),this.$(".js-choose-plan").attr("data-plan",e)},t.prototype.setShowFeatures=function(e){return this.$(".js-choose-plan").toggleClass("show-features",e)},t.prototype.dismiss=function(){return this.model.dismiss("quick-team-create")},t.prototype.render=function(){var e,t,n,r;return t=s.me(),e=t.get("fullName"),n=e.split(" "),r=d.get("Organization",this.getIdOrg()),this.$el.html(B({firstName:w.first(n),lastName:w.last(n),email:t.get("email"),bcMonthlyPrice:"$"+C(h.getPrice(h.currentProducts.yearly)/12),enterpriseMonthlyPrice:"$20.00"})),this._loadGateway(),this.$(".js-emails").html(this.emailInput.render().el),this.$(".js-phone-number").intlTelInput({utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/10.0.6/js/utils.js"}),this._initHostedFields(),this.switchPhase("team-name"),this},t.prototype.getIdOrg=function(){return this.idOrganization},t.prototype.loadMemberCount=function(){return null!=this.getIdOrg()?null!=this.countMembers?this.countMembers:this.countMembers=p.loadOrganizationMembersMinimal(this.getIdOrg()).then(function(e){return function(e){var t;return t=e.memberList.filter(function(t){return!e.isDeactivated(t)}),t.length}}(this)):void 0},t.prototype.renderSelectedPlan=function(){return this.loadMemberCount(),this.countMembers.then(function(e){return function(t){var n,r,o,i,s,a,u,c,l,p,m,f;return u=d.get("Organization",e.getIdOrg()),null==e.manualLicenses&&(e.manualLicenses=t),o=e.manualLicenses,n=Math.max(t,o),l=n>=100,e.$(".js-try-enterprise").toggleClass("hide",!l),e.$(".js-pay").toggleClass("hide",l),e.$(".js-enterprise-instead-header").toggleClass("hide",!l),e.$(".js-price-header").toggleClass("hide",l),e.$(".js-bc").toggleClass("disabled",l),e.$(".js-bc").find("input,.iframe-input").toggleClass("disabled",l).prop("disabled",l),l||(c=h.currentPriceObjectForModel(u),s=c.monthly.productNumber,m=c.yearly.productNumber,i=h.getPrice(s),a=i*n,p=h.getPrice(m),f=p*n,e.$(".js-choose-yearly").toggleClass("choose-plan-frequency-checked","yearly"===e.bcFrequency),e.$(".js-choose-monthly").toggleClass("choose-plan-frequency-checked","monthly"===e.bcFrequency),e.$(".js-savings").toggleClass("hide","monthly"===e.bcFrequency),"yearly"===e.bcFrequency?(e.$(".js-actual-price").text("$"+C(f/12)),e.$(".js-monthly-price").text("$"+C(p/12)),e.$(".js-user-count").text(n),e.$(".js-save-percent").text(h.getYearlyDiscountPercent(m,s)),e.$(".js-pay-amount").text("$"+C(f,!0))):(e.$(".js-actual-price").text("$"+C(a)),e.$(".js-monthly-price").text("$"+C(i)),e.$(".js-user-count").text(n),e.$(".js-pay-amount").text("$"+C(a,!0)))),n>t?(r=n-t,e.$(".js-more-licenses").text(j("adding more licenses",r,{memberCount:String(t)})).removeClass("hide")):e.$(".js-more-licenses").addClass("hide"),t>o?(e.$(".js-too-few-licenses-message").text(j("sorry your team already has members",t)),e.$(".js-too-few-licenses").removeClass("hide")):e.$(".js-too-few-licenses").addClass("hide")}}(this)),this.renderCanSubmit(),this.renderZipCode()},t.prototype.isZipCodeRequired=function(){return"US"===this.$(".js-country").val()},t.prototype.renderCanSubmit=function(){var e,t,n,r;return n=this.$(".js-accept-tos").prop("checked"),r=!this.isZipCodeRequired()||5===(t=this.$(".js-zip-code").val().length)||9===t,e=n&&r&&null!=this.hostedFieldsInstance&&w.chain(this.hostedFieldsInstance.getState().fields).values().all(function(e){return e.isValid}).value(),this.$(".js-pay").toggleClass("disabled",!e).prop("disabled",!e),this.$(".js-pay-error").addClass("hide")},t.prototype.renderZipCode=function(){return this.$(".js-zip-code-container").toggleClass("hide",!this.isZipCodeRequired())},t.prototype.renderIllustration=function(){var e,t,n,r;for(r=1+this.emailInput.getEmails().length,n=[],t=e=1;5>=e;t=++e)n.push(this.$(".js-add-members-illustration").toggleClass("add-members-illustration-"+t,r>=t));return n},t.prototype.updateInvalid=function(){var e,t,n,r,o,i;r={number:".js-card-number",cvv:".js-cvv",expirationDate:".js-expiration-date"},i=this.hostedFieldsInstance.getState();for(t in r)o=r[t],e=this.$(o),n=i.fields[t].isEmpty||i.fields[t].isValid||i.fields[t].isFocused&&i.fields[t].isPotentiallyValid,e.toggleClass("invalid",!n);return this.renderCanSubmit()},t.prototype._initHostedFields=function(){return this._loadGateway().then(function(e){return function(){var t;return t=window.braintree,t.client.create({authorization:window.braintreeClientToken},function(n,r){return t.hostedFields.create({client:r,styles:{input:{"font-size":"14px","font-family":'"Helvetica Neue", Arial, Helvetica, sans-serif',"-webkit-font-smoothing":"antialiased"},".number":{"letter-spacing":"2px"},".cvv":{"letter-spacing":"2px"}},fields:{number:{selector:".js-card-number",placeholder:"         "},cvv:{selector:".js-cvv",placeholder:""},expirationDate:{selector:".js-expiration-date",placeholder:x("month/year abbreviation")}}},function(t,n){var r,o,i,s;for(n.on("cardTypeChange",function(e){return 1===e.cards.length?this.$(".js-card-number").attr("data-card-type",e.cards[0].type):this.$(".js-card-number").removeAttr("data-card-type")}),s=["focus","blur","empty","notEmpty","validityChange"],o=0,i=s.length;i>o;o++)r=s[o],n.on(r,function(t){return e.updateInvalid()});return e.hostedFieldsInstance=n,e.renderCanSubmit()})})}}(this))},t.prototype._loadGateway=function(){return null!=this._loadGatewayPromise?this._loadGatewayPromise:this._loadGatewayPromise=g.try(function(){var e,t;if(null==window.braintree||"3.6.3"!==(null!=(e=window.braintree.client)?e.VERSION:void 0))return t=["https://js.braintreegateway.com/web/3.6.3/js/client.min.js","https://js.braintreegateway.com/web/3.6.3/js/hosted-fields.min.js"],g.map(t,function(e){return new g(function(t){var n;return n=document.createElement("script"),n.src=e,n.onload=t,document.querySelector("head").appendChild(n);
})})}).return()},t}(b),k=M.renderable(function(e){var t;return t=e.placeholders,M.div(".emails-input-wrapper.js-wrapper",function(){return M.input(".new-email-input.js-input",{placeholder:"e.g. "+t})})}),u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return L(t,e),t.prototype.events={"keypress .js-input":function(e){var t,n;switch(t=this.$(".js-input"),n=c.getKey(e)){case l.Space:case l.Semicolon:case l.Comma:return y.stop(e),this.extractEmails({focus:!0,scrollIntoView:!0})}},"keydown .js-input":function(e){var t,n;switch(t=this.$(".js-input"),n=c.getKey(e)){case l.Tab:case l.Enter:return y.stop(e),this.extractEmails({focus:!0,scrollIntoView:!0});case l.Backspace:if(""===t.val())return this.$(".js-pill:last").remove(),this.triggerChange()}},"blur .js-input":function(e){return this.extractEmails({focus:!1,scrollIntoView:!1})},"paste .js-input":function(e){var t,n,r;return t=null!=(n=e.originalEvent)&&null!=(r=n.clipboardData)?r.getData("text/plain"):void 0,t?(y.stop(e),this.$(".js-input").val(t.replace(/\s+/g," ")),this.extractEmails({focus:!0,scrollIntoView:!0})):void 0},"click .js-wrapper":function(e){return this.focus()}},t.prototype.render=function(){var e,t;return t={calvin:["calvin@gross.club","hobbes@gross.club"],ender:["ender@battle.edu","bean@battle.edu"],monkey_island:["threepwood@grogmail.com","elaine.marley@tri-island.gov"],game_of_thrones:["arya.stark@mail.wi.wes","bran.stark@mail.wi.wes"],harry_potter:["hermione@spew.org.uk","ginny@dailyprophet.news"],futurama:["leela@planetexpress.nnyc","zoidberg@planetexpress.nnyc"],star_wars:["calrissian@cloud.ci","adm.ackbar@alliance.mil"],x_files:["dana.scully@fbi.gov","fox.mulder@fbi.gov"],star_trek:["sulu@starfleet.fed","spock@starfleet.fed"],downton_abbey:["e.hughes@downton.org.uk","c.carson@downton.org.uk"],taco:["taco@trello.com","chorizo@trello.com"],generic:["name1@example.com","name2@example.com"]},e=w.chain(t).keys().sample().value(),O("Team Create Overlay","Add Members","Placeholder",e),this.$el.html(k({placeholders:t[e].join(", ")})),this.defer(function(e){return function(){return e.focus()}}(this)),this},t.prototype.focus=function(){return this.$(".js-input").focus().select(),this.scrollInputIntoView()},t.prototype.scrollInputIntoView=function(){return this.$(".js-wrapper").prop("scrollLeft",this.$(".js-wrapper").prop("scrollWidth"))},t.prototype.extractEmails=function(e){var t,n,o,i,s;return o=e.focus,s=e.scrollIntoView,t=this.$(".js-input"),n=[],i=t.val().replace(/[^@\s,;]+@[^@\s,;]+/g,function(e){return n.push(e),""}).replace(/\s+/g," ").replace(/^\s*|\s*$/g,""),n.forEach(function(e){return function(n){var o,i;return o=r('<div class="email-pill js-pill"></div>').attr("data-email",n).text(n).insertBefore(t),i=r('<span class="email-pill-remove icon-sm icon-close"></span>').appendTo(o).click(function(t){return y.stop(t),o.remove(),e.triggerChange()})}}(this)),n.length>0&&(this.$(".js-input").attr("placeholder",""),this.triggerChange()),t.val(i),o&&t.focus(),s?this.scrollInputIntoView():void 0},t.prototype.disable=function(){return this.$(".js-input").prop("disabled",!0)},t.prototype.getEmails=function(){return this.$(".js-pill").map(function(){return r(this).attr("data-email")})},t.prototype.triggerChange=function(){return this.$el.trigger("change")},t}(b)},{}],561:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;a=e(493),o=e(496),i=e(491)("select_member"),s=i.renderable(function(e){var t,n;return n=e.text,t=e.extraText,i.li({class:"item js-member-item"},function(){return i.a({href:"#",class:"js-select-member ",title:n,autocompleteText:n},function(){return i.span(".text",{title:"card"},function(){return i.text(t)})})})}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.render=function(){return this.$el.html(s(this.options)),this},t}(o)},{}],562:[function(e,t,n){var r,o,i=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e(564),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)},t.prototype.renderActive=function(){var e;return this.$(".js-member-item").toggleClass("active",(e=this.model.id,a.call(this.options.card.get("idMembers"),e)>=0))},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.renderActive(),this},t}(o)},{}],563:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),o=e(506),i=e(210),s=e(156),a=e(202),u=e(513),l=e(126),d=e(496),p=e("underscore"),f=e(493),g=e(43),h=e(101),m=e(100),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.viewTitleKey="add as",t.prototype.initialize=function(){if(this.parent=this.options.parent,this.member=this.model,this.isBoard=this.isOrg=!1,this.objText="",this.didSendInvite=!0,this.parent instanceof s)this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList;else{if(!(this.parent instanceof a))throw new Error("A fragile abstraction has broken");this.isOrg=!0,this.objText="Org"}return this.invitationList=this.parent.invitationList},t.prototype.events={"click .js-invite":"invite"},t.prototype.render=function(){var e,t,n,r,o,i;for(e={showAdmin:this.parent.owned(this.member)&&this.options.canMakeAdmin,showObserver:this.parent.hasObservers()},r=function(){if(this.isBoard)return"board roles";if(this.isOrg)return"org roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),t=0,n=o.length;n>t;t++)i=o[t],e["roleText_"+i]=h([r,i,"text"]);return null==e.roleText_admin&&(e.roleText_admin=e.roleText_superadmin),this.$el.html(f.fill("manage_members_select_role",e)),this},t.prototype.invite=function(e){var t,n,s;l.stop(e),t=r(e.target).closest(".js-invite"),s=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,i({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:{type:s},dataType:"json",success:function(e){return function(e){return g("Invitations","Add Member to Board","Role: "+s)}}(this),error:function(e){return function(e,t){var n;n=m(e),o.showLiteralText(n,"error","alert",3e3),g("Invitations","Error: "+e.responseText)}}(this)}),"function"==typeof(n=this.options).onSendInvite&&n.onSendInvite(),this.options.onSendInvite=null,u.hide()},t}(d)},{}],564:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(493),o=e(496),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.initialize=function(){},t.prototype.render=function(){var e;return e=this.model.toJSON(),"ghost"===this.model.get("memberType")&&(e.isVirtual=!0),e.unconfirmed=this.options.showUnconfirmed&&!e.isVirtual&&!e.confirmed,e.inactive=this.options.showInactive&&!e.active,e.isKnownMember=this.options.isKnownMember,e.extraText=this.options.extraText,e.disabled=this.options.disabled,this.options.linkName?e.url="/"+this.model.get("username"):delete e.url,this.$el.html(i.fill("select_member",e,{},{member:i.member})),this.$(".js-member").data("id",this.model.id),this},t}(o)},{}],565:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e("jquery"),o=e(194),i=e(513),s=e(563),u=e(126),c=e(43),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.invite=function(e){var t,n;u.stop(e),t=r(e.target).closest(".js-invite"),n=t.hasClass("js-select-admin")?"admin":t.hasClass("js-select-member")?"normal":t.hasClass("js-select-observer")?"observer":void 0,o.prototype.create.call(this,{model:this.parent,data:{type:n,email:this.options.email},success:function(e){return function(t){return c("Invitations","Send Email "+e.objText+" Invite to New Member","Role: "+n)}}(this)}),i.popView()},t}(s)},{}],566:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(74),s=e(496),a=e("underscore"),u=e(493),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="member-account-session",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t;return e=this.options,e["type_"+this.options.type]=!0,t=e.ipAddress,this.$el.html(u.fill("member_session",e)),o.update(this.el),this},t.prototype.revoke=function(e){return r.get("/login/revoke",{id:this.options.id},function(e){return function(){return e.model.set("sessions",a.filter(e.model.get("sessions"),function(t){return t.id!==e.options.id}))}}(this))},t}(s)},{}],567:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e(507),o=e(74),s=e(126),a=e(496),u=e("underscore"),d=e(493),p=e(43),l=e("moment"),c=e(101),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.className="member-applications-list-item",t.prototype.events={"click .js-revoke":"revoke"},t.prototype.render=function(){var e,t,n,r,i,s;return s=this.options,n=s.dateExpires,i=s.permissions,r=s.identifier,t=s.dateCreated,e={identifier:r,dateApproved:l(o.parse(t)).calendar(),dateExpires:n?l(o.parse(n)).calendar():null,neverExpires:null==n},e.permissions=u.isEmpty(i)?[c("token perms.none")]:i.map(function(e){var t,n,r;return n=e.write?"readwrite":"read",t="*"===e.idModel?"general":"specific",r=e.modelType.toLowerCase(),c(["token perms",n,t,r])}),this.$el.html(d.fill("member_application",e)),this},t.prototype.revoke=function(e){return s.stop(e),r.toggle("revoke token",{elem:e.currentTarget,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.set("tokens",u.filter(e.model.get("tokens"),function(t){return t.id!==e.options.id})),e.model.pull("tokens",e.options.id,function(){return p("Member","Applications","Revoke App")})}}(this)})},t}(a)},{}],568:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(531),o=e(508),s=e(33),a=e(474),c=e(200),l=e(569),d=e(513),p=e("react"),h=e(126),f=e(488)("header_notification_list_menu"),g=e(43),m=e("underscore"),u=10,i=function(e){function t(e){this.state={canAllowDesktopNotifications:o.notEnabled(),notifications:[],remainingUnread:0}}return v(t,e),t.prototype.displayName="HeaderNotifications",t.prototype.componentDidMount=function(){return this.props.listenTo("add:Notification remove:Notification change:Notification",this.updateNotifications.bind(this)),this.updateNotifications()},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this._notificationPermissionPromise)?e.cancel():void 0},t.prototype.updateNotifications=function(){var e,t;return e=c.sortedByDateDescending(s),t=e.slice(u).filter(function(e){return e.get("unread")}),this.setState({notifications:e.slice(0,u),remainingUnread:t.length})},t.prototype.render=f.renderable(function(){var e,t,n,r;return n=this.state,e=n.canAllowDesktopNotifications,t=n.notifications,r=n.remainingUnread,0===t.length?f.p(".empty",{style:{padding:"24px 6px"}},function(){return f.format("no-notifications")}):f.div(function(n){return function(){return f.createElement(l,{notifications:t,context:"header"}),f.ul(".pop-over-list.mod-add-top-margin",function(){return f.li(function(){return f.a(".js-view-all-notifications",{href:n.props.noteUrl,onClick:n.viewAllNotifications},function(){return r>0?f.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:r}):f.format("see-all-notifications")})}),f.li(function(){return f.a(".js-change-email-frequency",{onClick:n.changeEmailFrequency.bind(n)},function(){return f.format("change-notification-email-frequency")})}),e?f.li(function(){return f.a(".js-allow-desktop-notifications",{onClick:n.allowDesktopNote.bind(n)},function(){return f.format("allow-desktop-notifications")})}):void 0})}}(this))}),t.prototype.viewAllNotifications=function(){return g("Header","Notifications Menu","See All Notifications")},t.prototype.changeEmailFrequency=function(e){h.stop(e),g("Header","Notifications Menu","Change Email Frequency"),d.pushView({view:new r({model:this.props.member,modelCache:s})})},t.prototype.allowDesktopNote=function(e){h.stop(e),g("Header","Notifications Menu","Allow Desktop Notifications"),this._notificationPermissionPromise=o.requestPermission().then(function(e){return function(t){return e.setState({canAllowDesktopNotifications:o.notEnabled()})}}(this)).catch(function(e){return function(){return e.setState({canAllowDesktopNotifications:!1})}}(this)).cancellable()},t}(p.Component),t.exports=a(i)},{}],569:[function(e,t,n){var r,o,i,s,a,u,c,l;r=e(75),o=e(570),i=e("react"),c=e("recup"),l=e(491)(""),s=e(104),a=e("underscore"),u=new r("notification"),t.exports=i.createClass({displayName:"NotificationsList",getInitialState:function(){return{now:new Date}},componentDidMount:function(){return this.interval=setInterval(this.updateNow,1e4)},componentWillUnmount:function(){return clearInterval(this.interval)},updateNow:function(){return this.setState({now:new Date})},render:function(){var e,t,n,r;return r=this.props,t=r.notifications,e=r.context,n=this.state.now,t=a.map(t,function(t){var r,a,c,l,d,p;for(l=t.getExpandedData(),l.entities=u.getEntities(t.get("display")),d=l.entities,a=0,c=d.length;c>a;a++)r=d[a],"comment"===r.type?r.textHtml=s.comments.format(r.text).output:"relDate"===r.type&&(r.text=u.relDateText(r.date,n));return"cardDueSoon"===t.get("type")?l.isDueDateNotification=!0:("declinedInvitationToBoard"===(p=t.get("type"))||"declinedInvitationToOrganization"===p)&&(l.isDeclinedInvitationNotification=!0),l.isDueSoon="cardDueSoon "===t.get("type"),l.isCommentLike=t.isCommentLike(),l.isAddAttachment=t.isAddAttachment(),l.idMemberCreator=t.get("idMemberCreator"),l.markRead=t.markRead.bind(t),l.navigateToView=t.navigateToView.bind(t),l.context=e,l.member=t.getMember(),l.key=t.id,i.createElement(o,l)}),i.createElement("div",null,t)}})},{}],570:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;o=e(522),i=e(74),s=e(734),m=e(40),a=e(540),u=e(33),l=e(513),d=e("react"),f=e(488)("notification"),g=e(43),p=e(126),h=e("underscore"),r=e("jquery"),t.exports=c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.displayName="Notification",t.prototype.render=f.renderable(function(){var e,t,n,r,o,u,c,l,d,p;return l=this.props,r=l.isCommentLike,n=l.isAddAttachment,p=l.unread,d=l.type,c=l.member,u=l.isDueDateNotification,e=l.date,o=l.isDeclinedInvitationNotification,t=l.entities,c=l.member,f.div({class:f.classify({"mod-comment-type":r,"mod-attachment-type":n,"mod-unread":p,"mod-due-soon":"cardDueSoon"===d,phenom:!0}),ref:function(e){return i.update(e)},onClick:this.clickedNotification.bind(this)},function(n){return function(){return f.div(".phenom-creator",function(){c?f.div(".member.js-show-mem-menu",{"data-idmember":c.id,onClick:n.viewMemberActionMenu.bind(n)},function(){return f.createElement(a,c)}):u?f.span(".icon-lg.icon-clock"):o?f.span(".icon-lg.icon-close"):f.span(".icon-lg.icon-member")}),f.div(".phenom-desc",function(){return h.forEach(t,function(e){return f.createElement(s,{entity:e,context:{},options:{}})})}),f.p(".phenom-meta.quiet",function(){return e?f.span(".date",{"data-date":e}):void 0})}}(this)),m("notifications",this.props)}),t.prototype.clickedNotification=function(e){return this.props.markRead(),"header"===this.props.context?g("Header","Notifications Menu","Clicked Notification"):"notifications-page"===this.props.context&&g("Member View","Notifications Page","Clicked Notification"),r(e.target).is("a")?void 0:(this.props.navigateToView(),p.stop(e))},t.prototype.viewMemberActionMenu=function(e){var t,n;p.stop(e),t=u.get("Member",null!=(n=r(e.target).closest("[data-idmember]").attr("data-idmember"))?n:this.props.idMemberCreator),r(e.target).closest(".pop-over").length>0?l.pushView({view:o,options:{model:t,modelCache:u}}):l.toggle({elem:this.$(".js-show-mem-menu"),view:o,options:{model:t,modelCache:u}})},t}(d.Component)},{}],571:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e(612),o=e(513),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.onSubmit=function(e){e&&(this.model.tagList.create({name:e},{wait:!0}),o.popView())},t.prototype.viewTitleKey="add tag",t}(i)},{}],572:[function(e,t,n){var r,o;r=e("react"),o=e(488)("ask_an_admin"),t.exports=r.createClass({displayName:"AskAnAdminComponent",render:o.renderable(function(){var e;return e=this.props.admins,o.div(function(){return o.div(".ask-an-admin",function(){return o.format("seem-helpful-ask-an-admin-to-consider-upgrading-your-team")}),o.h3(function(){return o.format("team-admins")}),o.ul(".organization-admin-list",function(){return e.forEach(function(e){return o.li(".organization-admin-list-item",function(){return o.div(".organization-admin-list-item-avatar",function(){var t;return t=e.avatarHash,t?t?o.img({src:avatarDomain+"/"+t+"/30.png"}):void 0:o.span(".icon.icon-lg.icon-member")}),o.div(".organization-admin-list-item-details",function(){return o.div(".organization-admin-list-item-name",function(){return o.text(e.fullName)}),o.div(".organization-admin-list-item-username",function(){return o.text("@"+e.username)})})})})})})})})},{}],573:[function(e,t,n){var r,o,i,s,a;r=e(211),o=e("react"),a=e(488)("bc_info"),i=e(231),s=e(89),t.exports=o.createClass({displayName:"BC3UpgradeComponent",getInitialState:function(){return{showingYearly:!1,upgradeDisabled:!1,error:null}},render:a.renderable(function(){var e,t,n,o,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;return d=this.props,C=d.yearlyDiscountAmount,k=d.yearlyDiscount,n=d.isMonthly,_=d.userCount,u=d.onUpgradeClick,o=d.isPerActiveUser,p=this.state,g=p.showingYearly,w=p.upgradeDisabled,e=p.error,f=n&&!g,t=!(n||0===k),y=i.choke(0,i(this,"setState",{showingYearly:!0})),v=i.choke(0,i(this,"setState",{showingYearly:!1})),h=f?this.props.monthly:this.props.yearly,c=h.price,b=h.totalPrice,l=h.productNumber,m=function(e){return function(t){return e.setState({upgradeDisabled:!0}),u(l,t).catch(r.BadRequest,r.Unauthorized,function(t){return e.setState({error:t.message,upgradeDisabled:!1})}).done()}}(this),C=s.money(C),c=s.money(c),b=s.money(b),a.div(".business-class-upgrade-box.u-gutter",function(){return o&&(a.p(function(){return a.format("were also introducing smart billing")}),a.p(function(){return a.format("theres also new pricing")})),a.p(function(){return o?f?a.format("when paid monthly per active user",{price:c}):a.format("when paid annually per active user",{price:c}):f?a.format("when paid monthly per user",{price:c}):a.format("when paid annually per user",{price:c})}),a.p(function(){return o?a.format("your new price per month per active user",{totalPrice:b,userCount:_}):a.format("your new price per month per user",{totalPrice:b,userCount:_})}),t&&a.p(function(){return a.format("discount upgrade to yearly",{yearlyDiscountAmount:C,yearlyDiscountPercent:s.percentage(k)})}),e&&a.p(function(){return a.text(e)}),a.button({onClick:m,class:"primary",disabled:w},function(){return a.format("upgrade my team")}),a.p(".quiet.business-class-upgrade-box-spaced-item",function(){return t?a.format("youll be chargedminus your discount",{totalPrice:b,yearlyDiscountAmount:C}):a.format("youll be charged",{totalPrice:b})}),n?a.p(function(){return g?a.b(v,function(){return a.format("or go back to monthly pricing")}):(k>0&&(a.format("or switch to paying annually",{yearlyDiscountPercent:s.percentage(k)}),a.text(" ")),a.b(y,function(){return a.format("see annual pricing")}))}):void 0})})})},{}],574:[function(e,t,n){var r,o;r=e("react"),o=e(488)("bc_info"),t.exports=r.createClass({displayName:"BC3UpgradeContactUsComponent",render:o.renderable(function(){return o.div(".business-class-upgrade-box.u-gutter",function(){return o.p(function(){return o.format("contact us to upgrade")}),o.p(".business-class-upgrade-box-header",function(){return o.format("contact options",{phoneNumber:"1 (844) 873-5561",emailAddress:"sales@trello.com"})})})})})},{}],575:[function(e,t,n){var r,o,i,s;r=e("react"),i=e(488)("org_account"),s=e(43),o=e(101),t.exports=r.createClass({displayName:"BoardCreateVisibilityRestrictionsComponent",render:i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restrictions,i.div(".setting-item-detail",function(){return i.div(".markeddown",function(){var e,t,n,o,s;for(n=["public","org","private"],o=[],e=0,t=n.length;t>e;e++)s=n[e],o.push(i.p(function(){return i.format(["board create visibility",s,r[s]])}));return o}),e&&!t?i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],576:[function(e,t,n){var r,o,i,s;r=e("react"),i=e(488)("org_account"),s=e(43),o=e(101),t.exports=r.createClass({displayName:"BoardInviteRestrictionsComponent",render:i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restricted,i.div(".setting-item-detail",function(){return i.div(function(){return r?i.p(function(){return i.format("only-team-members-can-be-added-to-boards-inside-this-team")}):i.p(function(){return i.format("anybody-can-be-added-to-boards-inside-this-team")})}),e&&!t?i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],577:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(571),s=e(584),a=e(513),u=e(126),c=e(496),r=e("jquery"),d=e(491)("org_filtering"),p=d.renderable(function(e,t){return e.tagList.models.length||d.p(function(){return d.format("tags-explanation")}),d.ul(".select-tags-list",function(){var n,r,o,i;for(o=e.tagList.models,n=0,r=o.length;r>n;n++)i=o[n],d.li(".select-tags-list-item.js-tag-item",{"data-id-tag":i.id},function(){return d.a(".select-tags-list-item-name-link.js-toggle-tag",function(){var e;return e=i.id,h.call(t.getIdTags(),e)>=0&&d.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),d.text(i.get("name"))}),d.a(".select-tags-list-item-edit-button.icon-sm.icon-edit.js-edit-tag",{href:"#"})})}),d.div(function(){return d.a(".quiet-button.full.js-add-tag",{href:"#"},function(){return d.format("create-tag")})})}),l=function(e){return r(e.target).closest(".js-tag-item")[0].dataset.idTag},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:idTags",this.render),this.listenTo(this.options.org.tagList,"add remove reset change",this.render),t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-add-tag":"addTag","click .js-toggle-tag":function(e){return this.toggleTag(l(e))},"click .js-edit-tag":function(e){return this.editTag(e,l(e))}},t.prototype.viewTitleKey="pick tags",t.prototype.addTag=function(e){return u.stop(e),a.pushView({view:o,options:{model:this.options.org,modelCache:this.modelCache}})},t.prototype.toggleTag=function(e){return this.model.toggleTag(e)},t.prototype.editTag=function(e,t){return u.stop(e),a.pushView({view:s,options:{modelCache:this.modelCache,model:this.options.org.tagList.get(t)}})},t.prototype.render=function(){return this.$el.html(p(this.options.org,this.model)),this},t}(c)},{}],578:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty,w=[].slice,_=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),r=e(211),o=e(212),a=e(513),u=e("bluebird"),g=e(43),m=e(491)("bulk_add_org_members"),c=e(496),s={RESTRICTED:"restricted",MUST_REACTIVATE:"must-reactivate",USERNAME_NOT_FOUND:"username-not-found",NOT_IN_ENTERPRISE:"not-in-enterprise",UNKNOWN:"unknown",EXISTING:"existing",ADDED:"added"},d=/^[^@]+@[^@]+$/,v=/^@[a-z0-9_]{3,}$/,f=m.renderable(function(){return m.div(function(){return m.label(function(){return m.format("emails-or-usernames"),m.textarea(".org-members-bulk-add.js-list",{placeholder:m.l("list-placeholder")})}),m.div(".org-members-bulk-add-found.quiet",function(){return m.div(".org-members-bulk-add-found-entry.js-emails-found",function(){return m.format("email-addresses-found"),m.text(" "),m.span(".js-email-count",function(){return m.text("0")})}),m.div(".org-members-bulk-add-found-entry.js-usernames-found",function(){return m.format("usernames-found"),m.text(" "),m.span(".js-username-count",function(){return m.text("0")})})}),m.button(".primary.full.js-add",function(){return m.format("add")})})}),p=m.renderable(function(){return m.div(function(){return m.div(".spinner.loading"),m.div(".org-members-bulk-add-progress.js-progress")})}),h=m.renderable(function(e){return m.div(function(){var t,n,r,o,i;for(o=l.values(s),n=0,r=o.length;r>n;n++)t=o[n],(null!=(i=e[t])?i.length:void 0)>0&&(m.div(".org-members-bulk-add-results-heading",function(){return m.format(["category",t]),m.text(" ("),m.text(e[t].length),m.text(")")}),m.div(".org-members-bulk-add-results-list",function(){var n,r,o,i,s;for(i=e[t],s=[],r=0,o=i.length;o>r;r++)n=i[r],s.push(m.div(".org-members-bulk-add-results-list-item",function(){return m.text(n)}));return s}));return m.div(function(){return m.button(".primary.full.js-close",function(){return m.format("done")})})})}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.viewTitleKey="add members",t.prototype.events={"click .js-add":"addMembers","input .js-list":"updateMembers","click .js-close":function(e){return a.hide()}},t.prototype.render=function(){return this.$el.html(f()),this.updateMembers(),this},t.prototype._parseEntries=function(){return this.$(".js-list").val().split(/[\s,;"<>]/)},t.prototype._parseEmails=function(){return l.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"")}).filter(function(e){return d.test(e)}).uniq().sortBy(function(e){return e.toLowerCase()}).value()},t.prototype._parseUsernames=function(){return l.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return v.test(e)}).map(function(e){return e.replace(/@/g,"")}).uniq().sort().value()},t.prototype.updateMembers=function(e){var t,n,r;return n=this._parseEmails().length,r=this._parseUsernames().length,t=n+r,this.$(".js-email-count").text(n),this.$(".js-username-count").text(r),this.$(".js-emails-found").toggleClass("hide",0===n),this.$(".js-usernames-found").toggleClass("hide",0===r),this.$(".js-add").prop("disabled",0===t).toggleClass("disabled",0===t)},t.prototype.addMembers=function(e){var t,n;return n=w.call(this._parseEmails()).concat(w.call(this._parseUsernames())),this.$el.html(p()),g("Organization View","Members Page","Bulk Add",n.length),t=0,u.map(n,function(e){return function(i){return o({method:"get",url:"/1/members/"+i,data:{fields:"idOrganizations"}}).catch(r.NotFound,function(e){return null}).then(function(t){var n;if(null!=t){if(n=e.model.id,_.call(t.idOrganizations,n)>=0)throw new r.Conflict("already in organization");return o({method:"put",url:"/1/organizations/"+e.model.id+"/members/"+t.id,data:{type:"normal"}})}if(d.test(i))return o({method:"post",url:"/1/organizations/"+e.model.id+"/memberships",data:{email:i,type:"normal"}});throw new r.NotFound("username not found")}).then(function(e){return s.ADDED}).catch(r,function(e){var t;return t=e.message,/email restricted/.test(t)?s.RESTRICTED:/already invited/.test(t)||/already in organization/.test(t)?s.EXISTING:/must reactivate/.test(t)?s.MUST_REACTIVATE:/username not found/.test(t)?s.USERNAME_NOT_FOUND:/must belong to enterprise/.test(t)?s.NOT_IN_ENTERPRISE:s.UNKNOWN}).then(function(e){return t++,this.$(".js-progress").text(t+"/"+n.length),{user:i,state:e}})}}(this),{concurrency:5}).then(function(e){return function(t){var r,o,i,s;i=l.chain(t).groupBy("state").pairs().map(function(e){var t,n;return t=e[0],n=e[1],[t,l.chain(n).pluck("user").sortBy(function(e){return e.toLowerCase().replace(/@.*$/,"")}).value()]}).object().value(),e.$el.html(h(i)),s=[];for(r in i)o=i[r],s.push(g("Organization View","Members Page","Bulk Add",r,n.length));return s}}(this)).done()},t}(c)},{}],579:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e("jquery"),i=e(582),s=e(513),a=e(126),u=e(496),c=e("underscore"),l=e(493),d=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"},t.prototype.render=function(){var e;return e={},this.model.organizationList.length>0&&(e.orgs=this.model.organizationList.map(function(e){return function(e){var t,n,r,o,i,s;return t=e.owned(),r=e.isPremium(),i=e.needsBCUpgrade(),n=!i||!t,s=!t||r&&!i?"#":"/"+e.get("name")+"/billing",o=e.get("memberships").length,c.extend(e.toJSON(),{memberCount:o,isAdmin:t,isPremium:r,needsBCUpgrade:i,orgUrl:s,isDisabled:n})}}(this))),this.$el.html(l.fill("select_org_to_upgrade",e)),this},t.prototype.chooseOrg=function(e){return d("Business Class Choose Org Page","Choose Org")},t.prototype.stop=function(e){return a.stop(e)},t.prototype.createOrg=function(e){a.stop(e),s.toggle({elem:r(e.target),top:20,view:i,options:{model:this.model,modelCache:this.modelCache,createOpts:{isBusinessClass:!0}}}),d("Business Class Choose Org Page","Create New Org")},t}(u)},{}],580:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty,f=[].slice;r=e("jquery"),o=e(210),i=e(29),
a=e(513),u=e(126),c=e(496),d=e(493),p=e(43),l=e(101),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.viewTitleKey="change logo",t.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.frameDebounce(this.render))},t.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},t.prototype.render=function(){var e,t;return t=this,e=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_org_logo",e)),this},t.prototype.startUpload=function(e){var t,n,s,a,c,d,h;return c=this.model,a=r(e.target),t=this.$(".js-error").hide(),s=null!=(d=a[0])&&null!=(h=d.files)?h[0]:void 0,null==s||u.validFileSize(s)?!s&&a.val()?u.uploadFile(i.myToken(),a,this.uploadResult.bind(this)):null!=s?(n=new FormData,n.append("token",i.myToken()),n.append("file",s),o({url:a.closest("form").attr("action"),data:n,type:"post",processData:!1,contentType:!1,error:function(e){return function(t){var n,r;return r=t.status,n=t.responseText,e.uploadResult(Error(n))}}(this),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(f.call(arguments)))}}(this),timeout:12e4})):void 0:(t.text(l("images can not be larger than 10mb")).show(),void p("Organization","Logo","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(p("Organization","Logo","Error - "+e),t.show().text(e)):(p("Organization","Logo","Use Uploaded - New"),a.hide())},t.prototype.removeLogo=function(e){u.stop(e),o({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(e){return function(){return p("Organization","Logo","Remove Logo"),a.hide()}}(this)})},t}(c)},{}],581:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;o=e(202),i=e(513),s=e(126),a=e(496),c=e(493),l=e(43),u=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="select team visibility",t.prototype.tagName="ul",t.prototype.className="pop-over-list",t.setVisibility=function(e){return function(t){return s.stop(t),l("Organization","Changed Visibility"),this.model.setPref("permissionLevel",e),i.hide()}},t.prototype.events={"click .js-select-members":t.setVisibility("private"),"click .js-select-public":t.setVisibility("public")},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),e["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,e.publicText=u("org perms.public.text"),e.privateText=u("org perms.private.text"),this.$el.html(c.fill("change_org_vis",e)),this},t}(a)},{}],582:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;r=e(29),o=e(6),s=e(34),a=e(513),u=e(126),c=e(496),l=e(493),d=e(43),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.viewTitleKey="create organization",t.prototype.initialize=function(e){return this.createOpts=e.createOpts,null!=this.createOpts?this.createOpts:this.createOpts={isBusinessClass:!1}},t.prototype.events={"click .js-save":"submit","submit form":"submit","click .js-business-class":"clickBusinessClassMore","input .js-display-name":function(){return this.updateSubmitButton()}},t.prototype.getValue=function(e){var t;return null!=(t=this.$("[name="+e+"]").val())?t.trim():void 0},t.prototype.render=function(){return this.$el.html(l.fill("org_create")),this.updateSubmitButton(),this},t.prototype.updateSubmitButton=function(){return this.$(".js-save").prop("disabled",0===this.getValue("displayName").length)},t.prototype.submit=function(e){var t,n,i,c,l;for(u.stop(e),t={},l=["displayName","desc"],n=0,i=l.length;i>n;n++)c=l[n],t[c]=this.getValue(c);r.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){s.loadOrganizationMembersMinimal(t.id),e.createOpts.isBusinessClass?o.organizationBillingView(t.get("name")):o.organizationBoardsView(t.get("name"),t.id),a.hide(),d("New Org","Create",void 0,t.id)}}(this)})},t.prototype.clickBusinessClassMore=function(){return d("New Org","Click Business Class Link")},t}(c)},{}],583:[function(e,t,n){var r,o,i;r=e("react"),i=e(488)("org_account"),o=e(101),t.exports=r.createClass({displayName:"DeleteOrgButtonComponent",render:i.renderable(function(){var e;return e=this.props.onClick,i.div(".window-module.u-gutter",function(){return i.b(e,".quiet-button",{style:{padding:"6px 11px",marginTop:"32px"}},function(){return i.format("delete-this-organization")})})})})},{}],584:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(513),s=e(496),i=e(612),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.getName=function(){return this.model.get("name")},t.prototype.onSubmit=function(e){e&&(this.model.update({name:e}),o.popView())},t.prototype.onDelete=function(){return this.model.destroy(),o.popView()},t.prototype.viewTitleKey="edit tag",t}(i)},{}],585:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M=function(e,t){function n(){this.constructor=e}for(var r in t)B.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},B={}.hasOwnProperty;r=e("jquery"),o=e(275),i=e(506),s=e(210),a=e(211),u=e(29),c=e(498),l=e(194),d=e(97),p=e(18),C=e(100),x=e(775),m=e(198),f=e(538),g=e(643),v=e(22),y=e(513),b=e(126),w=e(496),_=e("underscore"),j=e(106),S=e(493),k=e(765),T=e(43),t.exports=h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return M(t,e),j(g,f,c,t),t.prototype.viewTitleKey="members",t.prototype.initialize=function(){this.savedSearch=""},t.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember","click .js-show-invitation-link":"showInvitationLink","click .js-invitation-link":"clickInvitationLink","click .js-deactivate-link":"deactivateInvitationLink"},t.prototype.render=function(){var e,t;return t={},t.canInviteMembers=!0,t.canAddMembers=!0,t.isPerUser=v.isPerUser(this.model.get("products")),t.perUserPrice=v.getPrice(this.model.get("products")),t.isYearly="yearly"===v.getInterval(this.model.get("products")),t.isMonthly="monthly"===v.getInterval(this.model.get("products")),this.$el.html(x(t)),null!=(e=o.addMemberToOrganizationAd(u.me(),this.model))&&this.$(".js-ad").html(this.subview(e,this.model).render().el),this.setTimeout(function(e){return function(){return e.input=e.$(".js-search-input"),e.input.click(function(e){return b.stop(e)}).keyup(e.debounce(e.search,500).bind(e)).keydown(e.keydownEvent.bind(e)).focus(),e.savedSearch?(e.input.val(e.savedSearch),e.search(),e.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},t.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},t.prototype.search=function(e){var t;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),t=this.input.val().toLowerCase().trim(),""===t)return void this.clearSearchResults();this.loadingEl.show(),s({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:t},dataType:"json",success:function(e){return function(n){return e.renderSearchResults(t,n)}}(this)})}},t.prototype.keydownEvent=function(e){var t;t=d.getKey(e),t===p.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(b.stop(e),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(b.stop(e),this.$(".email-invite:first").click()):(t===p.ArrowUp||t===p.ArrowDown)&&(b.stop(e),b.navMenuList(this.$(".js-search-results .js-list"),"li",t))},t.prototype._handleError=function(e){var t;return t=C(e),i.showLiteralText(t,"error","alert",3e3),T("Invitations","Error: "+t),this.input.focus().select()},t.prototype.addMember=function(e){var t,n;b.stop(e),r(e.target).closest(".item.disabled").length>0||(this.clearSearchResults(),t=r(e.target).closest(".js-select-member").attr("idMember"),n=this.modelCache.get("Member",t),s({url:"/1/organization/"+this.model.id+"/members/"+t,type:"put",data:{type:"normal"},dataType:"json",success:function(e){return function(r){return null!=r.token||e.model.memberList.find(function(e){return e.id===t})?void 0:(e.model.memberList.add(n),T("Invitations","Add Member to Organization","Role: Member"))}}(this),error:this._handleError.bind(this)}))},t.prototype.renderEmailInviteToSearchResults=function(e){var t,n,r;return r=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=_.compact(b.removeDomainFromEmailAddress(e.email).split(r)).join(" ").replace(n,""),e.fullName=b.toTitleCase(t),e.modelType="Organization",this.$(".js-uninvited-search-results").append(k(e)).show()},t.prototype.sendEmailInvite=function(e){var t,n,o,i;if(b.stop(e),n=this.$(".js-send-email-invite"),null==n.attr("disabled")){if(t=this.$(".js-email-data .js-full-name"),i=t.val().trim(),!b.validName(i))return b.setCaretAtEnd(t),void r(".js-name-error").show();o={fullName:i,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},n.attr("disabled","disabled"),s({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:o,success:function(e){return function(t){var r;return r=new m(t,{modelCache:e.modelCache}),e.model.memberList.get(r.id)||e.model.memberList.add(r),T("Invitations","Send Email Org Invite to New Member","Role: "+t.type),n.removeAttr("disabled"),y.hide()}}(this),error:this._handleError.bind(this)})}},t.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),r(".js-search-results").hide()},t.prototype.removeInvitation=function(e){var t;t=r(e.currentTarget).closest(".invitation").data("id"),l.prototype.delete({model:this.model,idInvitation:t,success:function(e){return function(){return T("Invitations","Delete Organization Invite"),e.search}}(this)}),b.setCaretAtEnd(this.input[0])},t.prototype.canRemoveInvitation=function(e){return e.get("idMemberInviter")===u.myId()||this.model.owned()},t.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},t.prototype.willBePopped=function(){return this.savedSearch=""},t}(w)},{}],586:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(6),o=e(74),s=e(595),a=e(513),u=e(126),c=e(496),l=e("underscore"),p=e(493),h=e(43),d=e(99),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey="org activity for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"},t.prototype.render=function(e){var t,n,i,s,a,u,c;for(i=this.model.toJSON(),n=0,u=l.filter(this.org.boardList.models,function(e){return function(e){return e.isOpen()}}(this)),s=0,a=u.length;a>s;s++)t=u[s],c=this.model,g.call(t.memberList.models,c)>=0&&n++;return i.boardCount=d("boards",n),i.hasBoards=n>0,this.org.isFeatureEnabled("orgCards")&&(i.orgCardsUrl=r.getOrganizationMemberCardsUrl(this.org.get("name"),i.username)),this.$el.html(p.fill("org_member_activity",i)),o.update(this.el),this},t.prototype.viewCards=function(){return h("Organization View","Members Page","Activity - View Org Cards")},t.prototype.viewBoards=function(e){u.stop(e),h("Organization View","Members Page","Activity - View Boards"),a.pushView({view:new s({model:this.model,parent:this.org,modelCache:this.modelCache})})},t}(c)},{}],587:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e("react"),i=e(488)("org_account"),s=e(43),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.displayName="OrgBCSettingsComponent",t.prototype.render=i.renderable(function(){var e,t,n,r,o,a,u;return u=this.props,a=u.items,o=u.isAdmin,r=u.hasBC,e=u.billingUrl,n=function(e){return"/business-class"===e.target.getAttribute("href")?s("Organization View","Settings Page","A Whole Lot More Link"):void 0},t=function(){return s("Organization View","Settings Page","Upgrade My Team Button")},i.div(function(){return r?i.div(function(){return a.forEach(i.addElement)}):i.div(".org-bc-settings",function(){return i.div(".org-bc-settings-header",{onClick:n},function(){return i.span(function(){return i.img({src:"https://a.trellocdn.com/images/3494275fd68fd1b05677e97f6c0874e3/business-class-logo-blue.svg"})}),i.br(),i.format("upgrade-to-trello-business-class-to-unlock-these-settings"),i.br(),o?i.link(e,".button-link.primary",{onClick:t},function(){return i.format("upgrade-my-team")}):(i.br(),i.format("seem-helpful-ask-your-team-admin-to-consider-upgrading-your-team"),i.br(),i.br())}),a.forEach(i.addElement)})})}),t}(o.Component),t.exports=r},{}],588:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e("react"),i=e(488)("org_account"),s=e(43),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.displayName="OrgInviteRestrictionsContentsComponent",t.prototype.render=i.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.restrictions,i.div(function(){return i.div(".setting-item-detail",function(){return i.div(".markeddown",function(){return r.length?(i.p(function(){return i.format("only-people-with-these-email-domains-can-join-this-organization")}),i.ul(function(){var e,t,n,o;for(o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(i.li(function(){return i.strong(function(){return i.text(n)})}));return o})):i.p(function(){return i.format("anyone-with-any-email-domain-can-be-added-to-this-organization")})})}),e&&!t?i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})}),t}(o.Component),t.exports=r},{}],589:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;m=e(488)("org_account"),r=e(575),o=e(576),s=e(587),a=e(588),u=e("react"),c=e("react-dom"),l=e(613),d=e(614),p=e(615),h=e(617),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.displayName="OrgAccountComponent",t.prototype.render=m.renderable(function(){return m.div(function(e){return function(){return m.addElement(e.getVisibilitySection()),e.props.hasBC?(m.addElement(e.getBCSettingsComponent()),m.addElement(e.getSlackSection())):(m.addElement(e.getSlackSection()),m.addElement(e.getBCSettingsComponent()))}}(this))}),t.prototype.getVisibilitySection=function(){return u.createElement(l,{header:m.render(function(){return m.format("team-visibility")}),contents:u.createElement(h,{canChange:this.props.isAdmin,visibility:this.props.visibility}),onChange:this.props.openChangeOrgVis,canChange:this.props.isAdmin})},t.prototype.getBCSettingsComponent=function(){var e;return e={items:[this.getOrgInviteRestrictionsSection(),this.getBoardCreateVisibilityRestrictionsSection(),this.getBoardInviteRestrictionsSection(),this.getSlackRestrictionsSection()],isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,billingUrl:this.props.billingUrl},u.createElement(s,e)},t.prototype.canChange=function(){return this.props.isAdmin&&this.props.prefsEnabled},t.prototype.getOrgInviteRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("team-membership-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(a,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restrictions:this.props.inviteRestrictions}),onChange:this.props.openChangeOrgInviteRestrictions,canChange:this.canChange()})},t.prototype.getBoardCreateVisibilityRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("board-creation-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(r,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restrictions:this.props.boardVisibilityRestrictions}),onChange:this.props.openChangeBoardVisRestrictions,canChange:this.canChange()})},t.prototype.getBoardInviteRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("inviting-non-org-members-to-boards"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(o,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,restricted:this.props.externalMembersDisabled}),onChange:this.props.openChangeNonOrgMemberBoardInvites,canChange:this.canChange()})},t.prototype.getSlackRestrictionsSection=function(){return u.createElement(l,{header:m.render(function(){return m.span(function(){return m.format("slack-team-restrictions"),m.icon("business-class",{class:"icon-business-class-color"})})}),contents:u.createElement(p,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,slackAssociation:this.props.slackAssociation}),onChange:this.props.openChangeSlackRestrictions,canChange:this.canChange()})},t.prototype.getSlackSection=function(){return u.createElement(d,{isAdmin:this.props.isAdmin,hasBC:this.props.hasBC,slackAssociation:this.props.slackAssociation,deleteSlackAssociation:this.props.deleteSlackAssociation,changeSlackSelfJoin:this.props.changeSlackSelfJoin})},t}(u.Component),t.exports=i},{}],590:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D=function(e,t){function n(){this.constructor=e}for(var r in t)I.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},I={}.hasOwnProperty;r=e("jquery"),o=e(65),i=e(211),s=e(29),a=e(296),u=e(581),c=e(507),l=e(6),d=e(583),O=e(100),L=e(39),p=e(589),h=e(22),f=e(591),g=e(607),v=e(608),y=e(609),b=e(610),w=e(216),_=e(513),k=e("bluebird"),C=e("react"),x=e("react-dom"),j=e(487),S=e(126),T=e("underscore"),E=e(43),A=e(42),B=e(101),P=e(488)("org_account"),M=e(231),t.exports=m=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return D(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:prefs",this.renderMainContent),this.listenTo(this.model,"change:slack-association",this.renderMainContent)},t.prototype.renderMainContent=function(){return null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-account"),this},t.prototype.renderReactSection=function(){return x.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){return C.createElement(j,{},P.render(function(e){return function(){return P.div(function(){return P.addElement(e.getOrgAccountComponent()),e.model.owned()?e.model.isPremium()&&!o.willExpire(e.model.get("paidAccount"))?P.addElement(e.orgBCDelete()):P.createElement(d,{onClick:M(e,"orgDeleteConfirm")}):void 0})}}(this)))},t.prototype.getOrgAccountComponent=function(){var e,t;return e={isAdmin:this.model.owned(),slackAssociation:this.model.getLatestSlackAssociation(),prefsEnabled:this.model.isFeatureEnabled("prefs"),hasBC:this.model.isPremium(),visibility:this.model.getPermLevel(),billingUrl:this.model.get("name")+"/billing",changeSlackSelfJoin:this.model.changeSlackSelfJoin.bind(this.model),deleteSlackAssociation:this.model.deleteSlackAssociation.bind(this.model),inviteRestrictions:null!=(t=this.model.get("prefs").orgInviteRestrict)?t:[],boardVisibilityRestrictions:this.model.get("prefs").boardVisibilityRestrict,externalMembersDisabled:this.model.get("prefs").externalMembersDisabled,openChangeOrgVis:this.openChangeOrgVis.bind(this),openChangeOrgInviteRestrictions:this.openChangeOrgInviteRestrictions.bind(this),openChangeBoardVisRestrictions:this.openChangeBoardVisRestrictions.bind(this),openChangeNonOrgMemberBoardInvites:this.openChangeNonOrgMemberBoardInvites.bind(this),openChangeSlackRestrictions:this.openChangeSlackRestrictions.bind(this)},this.model.ensureSlackAssociation(),C.createElement(p,e)},t.prototype.openChangeOrgVis=function(e){_.toggle({elem:e,view:new u({model:this.model,modelCache:this.modelCache})}),E("Organization View","Settings Page","Open Change Org Visibility")},t.prototype.openChangeOrgInviteRestrictions=function(e){_.toggle({elem:e,view:new v({model:this.model,modelCache:this.modelCache})}),E("Organization View","Settings Page","Open Restrict Org Invites by Email Domain")},t.prototype.openChangeNonOrgMemberBoardInvites=function(e){_.toggle({elem:e,view:new f({model:this.model,modelCache:this.modelCache})}),E("Organization View","Settings Page","Toggle Allow Inviting Non-Org Members to Boards")},t.prototype.openChangeSlackRestrictions=function(e){_.toggle({elem:e,view:new y({model:this.model,modelCache:this.modelCache})}),E("Organization View","Settings Page","Toggle Slack Team Linking Restrictions")},t.prototype.openChangeBoardVisRestrictions=function(e){_.toggle({elem:e,view:new g({model:this.model,modelCache:this.modelCache})}),E("Organization View","Settings Page","Open Change Board Visibility")},t.prototype.bcAdLink=function(){return E("Organization View","Settings Page","Inline Business Class Ad Link")},t.prototype.orgBCDelete=function(){var e;return E("Organization View","Settings Page","Open Delete Org Dialog"),e=function(e){return function(){return new k(function(t,n){return e.model.destroy({success:function(){return E("Organization","Successfully Delete"),t()},error:function(e,t){return n(i.fromResponse(t.status,O(t)))}})}).then(function(){return l.navigate("/",{trigger:!0})})}}(this),E("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),C.createElement(a,{key:"cancel bc",isDeleting:!0,productName:B("products.bc"),id:this.model.id,cancelProduct:function(t){return function(n){var r,o;return n&&(o=n.reason,r=n.details,A(t.model,o,r)),t.model.paysWithPurchaseOrder()?e():w.cancel(t.model).then(function(e){return E("Organization","Successfully Canceled Paid Account"),t.model.set(e)}).catch(function(e){return L(e)}).then(function(){return e()})}}(this)})},t.prototype.orgDeleteConfirm=function(e){var t;E("Organization View","Settings Page","Open Delete Org Dialog"),t=function(e){return function(){return new k(function(t,n){return e.model.destroy({success:function(){return E("Organization","Successfully Delete"),t()},error:function(e,t){return n(i.fromResponse(t.status,O(t)))}})}).then(function(){return _.hide(),l.navigate("/",{trigger:!0})})}}(this),this.model.isPremium()&&!o.willExpire(this.model.get("paidAccount"))?(E("Organization View","Settings Page","Open Cancel Business Class and Delete Team Dialog"),_.toggle({elem:e,getViewTitle:function(){return B(["view title","delete team"])},maxWidth:600,reactElement:C.createElement(a,{key:"cancel bc",initialIsCancelling:!0,isDeleting:!0,productName:B("products.bc"),cancelProduct:function(e){return function(n){var r,o;return o=n.reason,r=n.details,A(e.model,o,r),e.model.paysWithPurchaseOrder()?t():w.cancel(e.model).then(function(t){return E("Organization","Successfully Canceled Paid Account"),e.model.set(t)}).catch(function(e){return L(e)}).then(function(){return t()})}}(this)})})):c.toggle("delete organization",{elem:e,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t().done()}}(this)})},t.prototype.remove=function(){return x.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(b)},{}],591:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(126),i=e(496),s=e(825),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="inviting non-org members",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.render)},t.prototype.events={"click a":"setPref"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.externalMembersDisabled=e.prefs.externalMembersDisabled,this.$el.html(s(e)),this},t.prototype.setPref=function(e){o.stop(e),e.target.parentElement.classList.contains("active")||this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))},t}(i)},{}],592:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P,E,A,D,I,N,V,$,z,R,F,U=function(e,t){function n(){this.constructor=e}for(var r in t)q.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},q={}.hasOwnProperty,H=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(65),s=e(208),a=e(572),u=e(29),p=e(297),c=e(573),l=e(574),h=e(298),m=e(299),f=e(507),g=e(6),y=e(300),v=e(303),i=e(302),L=e(309),S=e(308),b=e(34),w=e(22),d=e(294),k=e(610),C=e(216),x=e(280),j=e(513),M=e("react"),B=e("react-dom"),O=e(487),P=e(126),E=e("underscore"),A=e(310),I=e(101),D=e(231),z=e(43),R=e(42),N=e("moment"),V=e(110),F=e("xtend"),$=e("recup"),T=e("bluebird"),t.exports=_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return U(t,e),t.prototype.renderMainContent=function(){return this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this},t.prototype.renderReactSection=function(){return B.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.getReactRoot=function(){var e;return M.createElement(O,{},o.hasAccount(null!=(e=this.model.get("paidAccount"))?e.standing:void 0)&&this.model.owned()?this.getBillingComponent():this.getSignUpComponent())},t.prototype.getBillingComponent=function(){var e;return e=A(this.model,w,{type:"bc",productName:I("products.bc"),productIconClass:"business-class",detailsUrl:"/business-class",onRenewClick:D(this,"renew"),cancelProduct:D(this,"cancel"),onSwitchToYearly:D(this,"switchToYearly"),didntGetAuthStatus:function(e){return function(){return b.loadOrganizationData(e.model.get("name")).done()}}(this),didGetAuthStatus:function(e){return function(){return b.loadOrganizationData(e.model.get("name")).done()}}(this),onChangeBillingContactClick:D(this,"changeBillingContactPopover"),reactivateProduct:D(C,"reactivate",this.model),changeCreditCard:D(C,"changeCreditCard",this.model),createPaidAccount:D(C,"createAccount",this.model),paidAccountPoll:D(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"}),onClickChangeCC:D(this,"changeCreditCardPopover"),onChangeAdditionalDetailsClick:D(this,"changeAdditionalDetailsPopover")}),$.render(function(t){return function(){return $.div(function(){var n,o,i,s,a,u;return o=null!=(i=e.paidAccount)&&null!=(s=i.products)?s[0]:void 0,null!=o&&w.isUpgrade(o)&&(a=w.isPerActiveUser(o)?t.model.get("activeBillableMemberCount"):t.model.get("billableMemberCount"),n=H.call(w.BC1Products,o)>=0&&a>=10&&!r.cookie("upgrade-bc")||t.model.isEnterprise(),$.createElement(x,{stringsKey:"business-class-upgrade",subtitleCount:2,infoUrl:"/business-class",epilogueCount:n?2:1,icon:"business-class"}),n?$.createElement(l):(u=0,$.createElement(c,F(w.currentPriceObjectForModel(t.model),{isMonthly:w.isMonthly(o),yearlyDiscount:u,yearlyDiscountAmount:e.current.yearly.totalPrice*u,isPerActiveUser:w.isPerActiveUser(o),userCount:a,onUpgradeClick:function(e){return C.changeProduct(t.model,e).then(function(e){return z("Organization","Successfully Upgraded to BC3"),t.model.set(e)})}})))),$.createElement(d,e)})}}(this))},t.prototype.getSignUpComponent=$.renderable(function(){return $.div(function(e){return function(){var t,n,r,o,c,l,d;return e.model.isFeatureEnabled("plugins")||$.createElement(x,{stringsKey:"business-class",subtitleCount:1,infoUrl:"/business-class",epilogueCount:0,icon:"business-class"}),e.model.owned()?(t=w.currentPriceObjectForModel(e.model),$.createElement(y,{onSubmit:D(C,"createAccount",e.model),doPoll:D(s,{url:e.model.urlRoot+"/"+e.model.id+"?paid_account=true"}),buttonKey:"upgrade-team",contentBuilders:[V(S,{productName:"Business Class",monthlyProduct:t.monthly,yearlyProduct:t.yearly,defaultProduct:t.yearly.productNumber,billingStrategy:t.billingStrategy}),V(v),V(i),V(L)],extraData:{billingContactFullName:null!=(n=null!=(r=e.model.get("paidAccount"))?r.contactFullName:void 0)?n:u.me().get("fullName"),billingContactEmail:null!=(o=null!=(c=e.model.get("paidAccount"))?c.contactEmail:void 0)?o:u.me().get("email"),billingContactLocale:null!=(l=null!=(d=e.model.get("paidAccount"))?d.contactLocale:void 0)?l:u.me().getPref("locale")},didntGetAuthStatus:function(){return b.loadOrganizationData(e.model.get("name")).done()},didGetAuthStatus:function(){var t,n;return null!=(n=null!=(t=e.options.urlOptions)?t.returnUrl:void 0)?b.loadOrganizationPaidAccount(e.model.id).then(function(){return g.navigate(n,{trigger:!0})}):g.organizationBoardsView(e.model.get("name"),e.model.id)}})):e.model.isFeatureEnabled("plugins")?void 0:$.createElement(a,{admins:e.model.memberList.chain().filter(function(t){return e.model.ownedByMember(t)}).map(function(e){return{avatarHash:e.get("avatarHash"),fullName:e.get("fullName"),username:e.get("username")}}).value()})}}(this))}),t.prototype.cancel=function(e){var t,n;return e&&(n=e.reason,t=e.details),z("Organization View","Billing Page","Open Cancel Business Class Dialog"),R(this.model,n,t),e?T.resolve():C.cancel(this.model).then(function(e){return function(t){return z(e.model.typeName,"Successfully Canceled Paid Account"),e.model.set(t)}}(this))},t.prototype.renew=function(){return z("Organization View","Billing Page","Renew Expiring Business Class Subscription"),C.renew(this.model).then(function(e){return function(t){return z("Organization","Successfully Renewed Expiring Yearly Business Class Subscription"),e.model.set(t)}}(this)).done()},t.prototype.switchToYearly=function(e){return f.toggle("yearly billing switch",{elem:e,model:this.model,confirmBtnClass:"primary",fxConfirm:function(e){return function(t){return C.changeProduct(e.model,w.getYearlyEquivalent(e.model.get("paidAccount").product)).then(function(t){return z("Organization","Successfully Switched Business Class to Yearly Billing"),e.model.set(t);
}).done()}}(this)})},t.prototype.changeBillingContactPopover=function(e){return z("Organization View","Billing Page","Open Change Billing Contact Info"),j.toggle({elem:e,view:new h({model:this.model,modelCache:this.modelCache})})},t.prototype.changeCreditCardPopover=function(e){return z("Organization View","Billing Page","Open Change Credit Card"),j.toggle({elem:e,view:new m({model:this.model,modelCache:this.modelCache})})},t.prototype.changeAdditionalDetailsPopover=function(e){return z("Organization View","Billing Page","Open Change Additional Details"),j.toggle({elem:e,view:new p({model:this.model,modelCache:this.modelCache})})},t.prototype.remove=function(){return B.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}(k)},{}],593:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=e("underscore"),o=e(320),r=e(319),i=e(323),s=e(325),a=e(594),u=e("react"),c=e(126),v=e(488)("org_filtering"),h=e(101),d=e(231),p=e(91),m=e(128),b=e("xtend"),y=e(43),g=["active","members","stars","alphabetical"],f=["tagFilter","sort"],t.exports=u.createClass({displayName:"OrganizationBoardsComponent",getInitialState:function(){var e;return l.defaults(null!=(e=this.props.initialFilterState)?e:{},{filter:"",tagFilter:null,sort:g[0],showOtherPrivateBoards:!1})},render:v.renderable(function(){return v.div(".boards-page-layout",function(e){return function(){return v.div(".boards-page-layout-sidebar",function(){return v.addElement(e.getFilterComponent())}),v.div(".boards-page-layout-list",function(){return v.addElement(e.getBoardsComponent())})}}(this))}),componentWillUpdate:function(e,t){return l.isEqual(l.pick(t,f),l.pick(this.state,f))?void 0:this.props.onFilterChange(l.pick(t,f))},shouldComponentUpdate:m,toggleTagFilter:function(e){return e===this.state.tagFilter?this.setState({tagFilter:null}):this.setState({tagFilter:e})},toggleShowOtherPrivateBoards:function(){return this.setState({showOtherPrivateBoards:!this.state.showOtherPrivateBoards})},isVisibleBoard:function(e){var t;return(!this.state.tagFilter||(t=this.state.tagFilter,w.call(e.idTags,t)>=0))&&(!this.state.filter||c.buildFuzzyMatcher(this.state.filter)(e.name))&&(this.state.showOtherPrivateBoards||!e.isOtherPrivate)},getBoardsComponent:function(){var e;return e={items:l.chain(this.props.boards.slice().sort(function(e,t){return e.name.localeCompare(t.name)})).sortBy(function(e){return function(t){switch(e.state.sort){case"alphabetical":return 0;case"active":return-t.dateLastActivity.valueOf();case"members":return-t.membershipCount;case"stars":return-t.starCount}}}(this)).map(function(e){return function(t){return b(t,{hidden:!e.isVisibleBoard(t),tagComponents:t.tags.map(function(t){return u.createElement(i,{text:t.name,key:t.id,selected:t.id===e.state.tagFilter,onClick:function(){return y("Organization View","Boards Page","Click Tag Under Board"),e.toggleTagFilter(t.id)}})}).concat(t.extraTagComponents)})}}(this)).map(function(e){return u.createElement(o,e)}).value(),createNewItem:null!=this.props.newBoard?u.createElement(r,{newBoard:this.props.newBoard}):void 0},u.createElement(s,e)},getFilterComponent:function(){var e,t,n;return e=function(e,t){var n,r,o,i,s,a,u,c;for(u={},r=0,s=e.length;s>r;r++)for(o=e[r],c=t(o),i=0,a=c.length;a>i;i++)n=c[i],Object.hasOwnProperty.call(u,n)||(u[n]=0),u[n]++;return u},t=e(this.props.boards,d.get("idTags")),n={tags:this.props.tags.map(function(e){return function(n){var r;return{html:v.l("tag-with-count",{name:n.name,count:p(null!=(r=t[n.id])?r:0)}),onClick:e.toggleTagFilter.bind(e,n.id),selected:n.id===e.state.tagFilter}}}(this)),sorts:g.map(function(e){return function(t){return{html:h(["org sort",t]),onClick:function(){return y("Organization View","Boards Page","Select Sort",t),e.setState({sort:t})},selected:t===e.state.sort}}}(this)),onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onAddTag:this.props.addTag,filter:this.state.filter,showOtherPrivateBoards:this.state.showOtherPrivateBoards,canShowOtherPrivateBoards:l.find(this.props.boards,"isOtherPrivate"),toggleOtherPrivateBoards:d(this,"toggleShowOtherPrivateBoards"),key:this.id},u.createElement(a,n)}})},{}],594:[function(e,t,n){var r,o,i,s;r=e("react"),s=e(488)("org_filtering"),i={alphabetical:"Alphabetical",active:"Most Active",members:"Number of Members",stars:"Number of Stars"},o=function(e,t,n){var r,o,i;return i=null!=n?n:{},r=i.hasCloseableItems,o=i.onAddTag,s.ul(".boards-page-navigation-list",function(){var n,i,a,u,c,l;for(s.li(".boards-page-navigation-list-header",function(){return s.text(t)}),i=0,a=e.length;a>i;i++)c=e[i],n=c.html,l=c.selected,u=c.onClick,s.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":r,"is-active":l},s.b(u,{class:s.classify(e)},function(){return s.raw(n),r&&l?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})});null!=o&&s.li(".boards-page-navigation-list-item",function(){return s.b(o,{class:"boards-page-navigation-list-item-link mod-quiet"},function(){return s.format("create-tag")})})})},t.exports=r.createClass({displayName:"OrganizationBoardsFilterComponent",render:s.renderable(function(){var e,t,n,r,i,a,u,c,l;return i=this.props,t=i.filter,u=i.sorts,c=i.tags,r=i.onFilterChange,n=i.onAddTag,a=i.showOtherPrivateBoards,e=i.canShowOtherPrivateBoards,l=i.toggleOtherPrivateBoards,s.div(".boards-page-navigation",function(){return s.input(".boards-page-navigation-input",{type:"text",placeholder:s.l("search-for-boards"),value:t,onChange:function(e){return r(e.target.value)}}),o(u,s.l("sort")),c.length?o(c,s.l("filter-by-tag"),{hasCloseableItems:!0,onAddTag:n}):(s.p(".quiet.boards-page-navigation-explainer",function(){return s.format("tags-explanation")}),s.b(n,{class:"quiet-button"},function(){return s.format("create-tag")})),e?s.ul(".boards-page-navigation-list",function(){s.li(".boards-page-navigation-list-header",function(){return s.format("visibility")}),s.li(".boards-page-navigation-list-item",function(){var e;return e={"boards-page-navigation-list-item-link":!0,"mod-closeable":!0,"is-active":a},s.b(l,{class:s.classify(e)},function(){return s.format("show other private boards"),a?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})})}):void 0})})})},{}],595:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(126),i=e(496),s=e("underscore"),u=e(493),a=e(101),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="boards for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){this.org=this.options.parent},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.boards=this.org.boardList.models.filter(function(e){return function(t){return s.contains(t.memberList.models,e.model)&&t.isOpen()}}(this)).map(function(e){return function(t){var n;return n=t.toJSON(),n.memberType=a(["member types",t.getMemberType(e.model)]),n.url=t.getUrl(),n}}(this)),this.$el.html(u.fill("org_boards_for_member",e)),this},t}(i)},{}],596:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty,A=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};x=e("underscore"),r=e("jquery"),o=e(571),i=e(29),c=e(320),a=e(319),u=e(293),l=e(322),d=e(325),p=e(577),s=e(464),h=e(366),m=e(74),f=e(593),v=e(610),y=e(513),b=e("react"),w=e("react-dom"),_=e(487),k=e(114),C=e(126),B=e(812),T=e(101),j=e(231),O=e(43),M=e(488)("org_filtering"),S=e(91),L=e("xtend"),t.exports=g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return P(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),O("Organization Boards Page","Open"),this.listenTo(this.model,"change",this.renderReactSection),this.listenTo(this.model.boardList,"change:idTags change:name",this.renderReactSection),this.listenTo(this.model.tagList,"add remove reset change",this.renderReactSection),this.listenTo(i.me().boardStarList,"add remove reset",this.frameDebounce(this.renderReactSection))},t.prototype.events={"click .js-close-intro-helper":"closeBCIntro"},t.prototype.isFullWidth=function(){return this.model.isFeatureEnabled("tags")},t.prototype.boardToModelForBoardItem=function(e){var t,n;return t={id:e.id,name:e.get("name"),idTags:e.getIdTags(),isOtherPrivate:null==i.me().boardList.get(e.id)&&"private"===e.getPref("permissionLevel"),membershipCount:e.getMembershipCount(),starCount:e.getStarCount("organization"),dateLastActivity:new Date(null!=(n=e.get("dateLastActivity"))?n:C.idToDate(e.id)),background:this.backgroundObjForBoard(e),showOptions:i.isLoggedIn(),isStarred:null!=i.me().boardStarList.getBoardStar(e.id),relUrl:e.getUrl(),onStarClick:function(e){return function(e){var t;t=i.me().boardStarList,null==t.getBoardStar(e)?t.starBoard(e):t.unstarBoard(e)}}(this),badgeComponents:this.model.isFeatureEnabled("tags")?this.badgeComponentsForBoard(e):[],key:e.id}},t.prototype.boardToModelForBoardItemWithTags=function(e){return L(this.boardToModelForBoardItem(e),{tags:this.tagsForBoard(e),extraTagComponents:[b.createElement(l,{onClick:this.addTagToBoard.bind(this,e),key:e.id,id:e.id})]})},t.prototype.boardToModelForBoardItemWithNoTags=function(e){return L(this.boardToModelForBoardItem(e),{tagComponents:[]})},t.prototype.backgroundObjForBoard=function(e){var t,n,r,o;return x.extend({brightness:e.getPref("backgroundBrightness")},e.getPref("backgroundTile")?{image:e.getPref("backgroundImage"),tiled:!0}:(t=null!=(n=null!=(r=C.smallestPreviewBiggerThan(e.getPref("backgroundImageScaled"),400,200))?r.url:void 0)?n:e.getPref("backgroundImage"))?{image:t,tiled:!1}:{color:null!=(o=e.getPref("backgroundColor"))?o:e.getClientBackgroundColor("blue")})},t.prototype.tagsForBoard=function(e){return this.model.tagList.models.filter(function(t){var n;return n=t.id,A.call(e.getIdTags(),n)>=0}).map(function(e){return{id:e.id,name:e.get("name")}})},t.prototype.addTagToBoard=function(e,t){return O("Organization View","Boards Page","Open Tag Select Menu"),y.toggle({elem:t,view:p,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.badgeComponentsForBoard=function(e){var t,n,r,o,i,a;return o=e.getStarCount("organization"),n=e.getMembershipCount(),t=null!=(r=e.get("dateLastActivity"))?r:C.idToDate(e.id),i=s.getPermLevelIconClassForBoard(e),a=s.getPermLevelAltTextForBoard(e),x.compact([b.createElement(u,{icon:i,title:a,iconClass:"is-vis-color",key:["vis",e.id].join("-")}),b.createElement(u,{icon:"member",text:S(n),title:M.l("members"),key:["member",e.id].join("-")}),o?b.createElement(u,{icon:"star",text:S(o),title:M.l("members-who-starred-board"),key:["star",e.id].join("-")}):void 0,b.createElement(u,{icon:"activity",text:m.toDateString(t),title:M.l("last-activity"),key:["activity",e.id].join("-")})])},t.prototype.renderMainContent=function(){var e;return e=this.model.isPremium()&&this.model.owned(),this.$(".js-content").empty(),e&&!i.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(B({isEnterprise:this.model.isEnterprise(),hasCSVExport:this.model.isFeatureEnabled("csvExport"),hasGoldMembers:this.model.isFeatureEnabled("goldMembers")})),null==this.$reactRoot&&(this.$reactRoot=r("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-profile"),this},t.prototype.renderReactSection=function(){return w.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.localStorageKey=function(){return"orgFilteringState-"+this.model.id},t.prototype.saveFilter=function(e){return k.set(this.localStorageKey(),e)},t.prototype.getReactRoot=function(){return b.createElement(_,{},this.model.isFeatureEnabled("tags")?this.getFilterableBoardsComponent():this.getBoardsComponent())},t.prototype.getFilterableBoardsComponent=function(){var e;return e={key:this.model.id,id:this.model.id,tags:this.model.tagList.toJSON(),boards:this.getBoardItemsWithTags(),newBoard:i.me().canAddBoardsTo(this.model)?this.newBoard.bind(this):void 0,addTag:j(this,"addTag"),onFilterChange:j(this,"saveFilter"),initialFilterState:k.get(this.localStorageKey())},b.createElement(f,e)},t.prototype.getBoardsComponent=function(){var e;return e={items:this.getBoardItemsWithNoTags().map(j.choke(1,b,"createElement",c))},i.me().canAddBoardsTo(this.model)&&(e.createNewItem=b.createElement(a,{newBoard:j(this,"newBoard")})),b.createElement(d,e)},t.prototype.addTag=function(e){return O("Organization View","Boards Page","Open Create Tag Menu"),y.toggle({elem:e,view:o,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.newBoard=function(e){return O("Organization View","Boards Page","Open Create Board Menu"),y.toggle({elem:e,view:h,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.getVisibleBoards=function(){return this.model.boardList.models.filter(function(e){return e.isOpen()})},t.prototype.getBoardItemsWithTags=function(){return this.getVisibleBoards().map(j(this,"boardToModelForBoardItemWithTags"))},t.prototype.getBoardItemsWithNoTags=function(){return this.getVisibleBoards().map(j(this,"boardToModelForBoardItemWithNoTags"))},t.prototype.remove=function(){return w.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t.prototype.closeBCIntro=function(){i.me().dismiss("BCIntro-"+this.model.id),O("Organization View","Profile Page","Dismiss BC Intro Helper"),this.renderMainContent(),C.scrollToTop()},t}(v)},{}],597:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e(506),o=e(210),i=e(74),s=e(103),u=e(610),c=e(126),l=e("underscore"),d=e(39),h=e(493),m=e(43),p=e("moment"),f=e(117),g=e("xtend"),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)},t.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"},t.prototype.renderMainContent=function(){var e;return e={},e.hasCSV=this.model.isFeatureEnabled("csvExport"),this.$(".js-content").html(h.fill("org_export",e,{editable:this.model.editable()})),this.renderExports(),this.setActiveView(".js-org-export"),this},t.prototype.renderExports=function(){var e,t,n,r,o,a,u,c;if(t=this.model.toJSON({prefs:!0}),e=this.$(".js-list-exports").empty(),l.isEmpty(t.exports))r=h.fill("org_export_empty");else for(r="",u=t.exports,o=0,a=u.length;a>o;o++)n=u[o],t=l.clone(n),t.size=s.bytes(t.size),t.time=p(i.parse(t.startedAt)).calendar(),t.generating=null==t.exportUrl,c=f(["exports",t.status.stage]),null!=c?t.status=g(t.status,{stage:c}):d(new Error("Missing export stage for "+t.status.stage)),r+=h.fill("org_export_item",t);return e.append(r),this},t.prototype.export=function(e){return o({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:e},success:function(t){return function(n){return m("Organization","Export",e?"With Attachments":"Without Attachments"),null!=n?(t.model.get("exports").unshift(n),t.model.trigger("change:exports")):void 0}}(this),error:function(e){return function(e,t,n,o){return e.responseText.indexOf("in progress")>-1?r.show("ongoing org export","error","alert",5e3):o()}}(this)})},t.prototype.clickCreateNewExport=function(e){return c.stop(e),this.$("#includeAttachments").is(":checked")?this.export(!0):this.export(!1)},t.prototype.downloadExport=function(e){m("Organization","Download Export")},t}(u)},{}],598:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=e(114),i=e(496),s=e(493),a=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="link google apps domain",t.prototype.events={"click .js-link":"link"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(s.fill("org_link_ga_helper",e,{editable:this.model.editable()})),this},t.prototype.link=function(){a("Organization View","Members Page","Google Apps Marketplace link"),o.enabled()&&o.set("idOrganizationLinking",this.model.id)},t}(i)},{}],599:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e(496),i=e(493),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="li",t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0}),e.visIconClass=this.model.getPermLevel(),e.hasBusinessClass=this.model.isPremium(),this.$el.html(i.fill("organization_list_item",e)),this},t}(o)},{}],600:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),o=e(599),s=e(496),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.tagName="ul",t.prototype.className="org-list",t.prototype.initialize=function(e){this.listenTo(this.model.organizationList,{"add remove reset change:closed":this.frameDebounce(this.render)})},t.prototype.render=function(){var e;return this.$el.empty(),e=this.model.getSortedOrgs().map(function(e){return function(t){return e.subview(o,t)}}(this)),this.appendSubviews(e),this},t}(s)},{}],601:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e(29),o=e(6),i=e(103),s=e(544),u=e(610),l=e(493),c=e(101),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.renderMainContent=function(){var e,t;return this.model.isFeatureEnabled("orgCards")?(e=this.model.toJSON({prefs:!0}),t=e.name,e.memberData=this.options.member.toJSON(),e.memberData.bioHtml=i.markdownAsHtml(this.options.member.get("bio"),{textData:this.options.member.get("bioData")}),this.setActiveView(".js-org-members"),e.members=[],this.$(".js-content").html(l.fill("org_member_cards",e,{editable:this.model.editable()},{member:l.member,member_profile:l.member_profile_info})),this.defer(function(e){return function(){return e.renderCards()}}(this)),this):o.displayErrorPage({errorType:"notFound"})},t.prototype.renderCards=function(){var e,t,n,o,i,a,u,d;for(t=this.modelCache.find("Board",function(e){return function(t){var n;return t.idOrganization===(null!=(n=e.model)?n.idOrganization:void 0)&&t.isOpen()}}(this)),i=!1,a=0,u=t.length;u>a;a++)e=t[a],n=this.modelCache.find("Card",function(t){return function(n){var r;return n.get("idBoard")===e.id&&n.isOpen()&&(r=t.options.member.id,h.call(n.get("idMembers"),r)>=0)}}(this)),n.length&&(i=!0,this.$(".js-cards").append(this.subview(s,e,{hideOrg:!0}).render(n).el));return i||(d=c(this.model.isPremOrgAdmin(r.me())?"no assigned org cards.at all":"no assigned org cards.that you can see"),o={message:d,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-content").append(l.fill("empty_list",o))),this},t}(u)},{}],602:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty;m=e("underscore"),f=e(231),r=e(586),o=e(559),s=e(603),a=e(604),u=e(605),p=e(611),c=e("react"),l=e("react-dom"),d=e(487),g=e("recup"),v=e(488)("org_members"),y=e(43),h=e(126),b=e("xtend"),t.exports=i=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={filter:"",showAll:!1}}return w(t,e),t.prototype.render=v.renderable(function(){return v.div(".org-members-page-layout",function(e){return function(){return v.div(".org-members-page-layout-sidebar",function(){return v.addElement(e.orgSidebarPropsToElement())}),v.div(".org-members-page-layout-list",function(){return v.addElement(e.getMemberListElement())})}}(this))}),t.prototype.orgSidebarPropsToElement=function(){var e;return e=b(this.props.sidebar,{filter:this.state.filter,onFilterChange:function(e){return function(t){return e.setState({filter:t})}}(this),onShowAllChange:function(e){return function(t){return e.setState({showAll:t})}}(this)}),c.createElement(u,e)},t.prototype.getMemberListElement=function(){var e;return e={items:this.props.memberModels.map(f(this,"memberModelToMemberItemElement"))},c.createElement(a,e)},t.prototype.isVisibleMember=function(e){return(!e.hidden||this.state.showAll)&&(!this.state.filter||h.buildFuzzyMatcher(this.state.filter)(e.fullName))},t.prototype.memberModelToMemberItemElement=function(e){var t;return t=m.extend({isFilterMatch:this.isVisibleMember(e)},e),c.createElement(s,t)},t}(c.Component)},{}],603:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(488)("member_list_item_detail"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e,t,n,r,o,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B;return S=this.props,f=S.isVirtual,l=S.isDeactivated,s=S.fullName,B=S.username,M=S.showGoogleApps,a=S.gMail,h=S.isOrgMember,T=S.showActivity,t=S.allowTypeChange,x=S.orgMemberType,e=S.allowReactivate,p=S.isMe,o=S.canRemove,C=S.orgIsBC,j=S.ownsOrg,u=S.hidden,k=S.onViewActivity,w=S.onRoleChange,b=S.onRemoveOrDeactivate,r=S.avatarHash,n=S.avatarDomain,c=S.initials,m=S.isOrganizationAdmin,y=S.onReactivateClick,_=S.onUnhideMember,g=S.onHideMember,v=S.onInviteMember,d=S.isFilterMatch,i.div({class:i.classify({"member-list-item-detail":!0,hide:!d})},function(){return i.div({class:i.classify({member:!0,"member-no-menu":!0,"member-virtual":f,"member-deactivated":l})},function(){return r?i.img(".member-avatar",{height:"30",width:"30",src:[n,r,"30.png"].join("/"),srcSet:[n,r,"30.png 1x"].join("/")+", "+[n,r,"50.png 2x"].join("/"),alt:s+" ("+B+")",title:s+" ("+B+")"}):i.span(".member-initials",{title:s+" ("+B+")"},function(){return i.text(c)}),l||m&&i.span(".member-type.admin",{title:i.l("this-member-is-an-admin-of-this-organization")}),i.span(".member-gold-badge",{title:i.l("this-member-has-trello-gold")})}),i.div(".details",function(){return i.p(".name-line",function(){return i.span(".full-name",function(){return i.text(s)})}),i.p(".u-bottom.quiet",function(){return B&&i.span(".quiet.u-inline-block",function(){return i.format("at-username",{username:B})}),M&&a?(B&&i.text("- "),i.icon("google"),i.text(a)):void 0})}),i.div(".options",function(){if(h){if(T&&i.b(k,".option.quiet-button",function(){return i.format("activity")}),t?i.b(w,".option.button-link.role-button",function(){return i.text(x),i.icon("dropdown-menu")}):i.p(".option.status.quiet",function(){return i.text(x)}),e&&i.b(y,".option.quiet-button",function(){return i.format("reactivate")}),p)return i.b(b,{class:i.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!o})},function(){return C?i.icon("close","leave-ellipsis"):i.icon("close","leave")});if(j)return i.b(b,{class:i.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!o})},function(){return i.icon("close","remove-ellipsis")})}else if(M)return u?i.b(_,".option.quiet-button",function(){return i.format("always-show")}):i.b(g,".option.quiet-button",function(){return i.format("dismiss")}),i.b(v,".option.button-link.primary",function(){return i.icon("add","add-member")})})})}),t}(o.Component)},{}],604:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(488)("org_members"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.render=i.renderable(function(){var e;return e=this.props.items,i.div(function(){e.forEach(i.addElement)})}),t}(o.Component)},{}],605:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("react"),i=e(488)("org_members"),t.exports=r=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return s(t,e),t.prototype.render=i.renderable(function(){var e,t,n,r,o,s,a,u,c,l,d,p;return l=this.props,t=l.canManageMembers,e=l.canLinkGoogleApps,n=l.canShowAll,s=l.onLinkGoogleApps,c=l.openManageMembers,u=l.openBulkAdd,r=l.filter,o=l.onFilterChange,a=l.onShowAllChange,d=this.state.showingAll,p=function(e){return function(){return d=!e.state.showingAll,e.setState({showingAll:d}),a(d)}}(this),i.div(function(){return i.div(".org-members-page-navigation-list",function(){return i.div(".org-members-options",function(){return i.div(".org-members-page-navigation-list-header",function(){return i.format("search-team")}),i.hr(),i.input(".org-members-page-navigation-input",{style:{marginBottom:50},type:"text",placeholder:i.l("find-members-by-name-ellipsis"),value:r,onChange:function(e){return o(e.target.value)}}),t&&(i.div(".org-members-page-navigation-list-header",function(){return i.format("add-members")}),i.hr(),i.b(c,{class:"primary button-link autowrap"},function(){return i.icon("member","add-by-name-or-email")}),i.b(u,{class:"button-link autowrap"},function(){return i.icon("member","add-a-list-of-emails-or-usernames")})),e&&i.div(function(){return i.b(s,{class:"button-link"},function(){return i.icon("google","link-google-apps-domain")})}),n?i.b(p,".quiet-button",function(){return i.format(d?"hide-dismissed":"show-dismissed-accounts")}):void 0})})})}),t}(o.Component)},{}],606:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T,M,B,O,L,P=function(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},E={}.hasOwnProperty,A=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),S=e("underscore"),o=e(506),i=e(211),s=e(29),T=e(231),M=e(101),a=e(578),u=e(585),c=e(198),l=e(586),d=e(559),p=e(598),h=e(602),m=e(603),f=e(604),g=e(605),y=e(610),w=e("bluebird"),b=e(513),_=e("react"),k=e("react-dom"),C=e(487),B=e("recup"),x=e(611),O=e(488)("org_members"),L=e(43),j=e(126),t.exports=v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return P(t,e),t.prototype.initialize=function(){t.__super__.initialize.apply(this,arguments),this.getGoogleAppsData(),this.listenTo(this.model,{"change:memberships":this.frameDebounce(this.renderReactSection)})},t.prototype.isFullWidth=function(){return!0},t.prototype.renderMainContent=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$(".js-content").append(this.reactRoot),this.renderReactSection(),this.setActiveView(".js-org-members"),this},t.prototype.renderReactSection=function(){return k.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getReactRoot=function(){return _.createElement(C,{},this.getOrgMembersComponent())},t.prototype.getOrgMembersComponent=function(){var e;return e={memberModels:this.getMembers().map(T(this,"memberToModelForMemberItemElement")),sidebar:this.orgToOrgSidebarProps(),orgMemberList:this.getMembers()},_.createElement(h,e)},t.prototype.orgToOrgSidebarProps=function(){var e;return e={canManageMembers:this.model.editable(),canLinkGoogleApps:this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),canShowAll:this.model.isFeatureEnabled("googleApps")&&S.any(this.mappingsData,function(e){return function(t){var n;return(null!=(n=e.modelCache.findOne("Member","gMail",t.gMail))?n.get("hidden"):void 0)||t.hidden}}(this)),onLinkGoogleApps:this.startLinkingGoogleApps.bind(this),openManageMembers:this.openManageMembers.bind(this),openBulkAdd:this.openBulkAdd.bind(this)}},t.prototype.getGoogleAppsData=function(){return this.model.isLinkedToGoogleApps()&&this.model.editable()?this.model.getGoogleAppsMappings().then(function(e){return function(t){return e.mappingsData=t}}(this)).catch(function(e){return function(t){return e.googleAppsFetchFailed=!0}}(this)).finally(function(e){return function(){return e.renderMainContent()}}(this)).done():void 0},t.prototype.startLinkingGoogleApps=function(e){return L("Organization View","Members Page","Start Linking Google Apps Domain"),b.toggle({elem:e,view:p,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openManageMembers=function(e){L("Organization View","Members Page","Open Manage Members"),b.toggle({elem:e,view:u,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openBulkAdd=function(e){L("Organization View","Members Page","Open Bulk Add"),b.toggle({elem:e,view:a,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.memberToModelForMemberItemElement=function(e){var t,n;return t=this.model.getMemberType(e),n={isVirtual:"virtual"===t,isDeactivated:"deactivated"===t,fullName:e.get("fullName"),username:e.get("username"),showGoogleApps:this.model.isLinkedToGoogleApps()&&this.model.editable()&&null!=this.mappingsData,gMail:e.get("gMail"),isOrgMember:"public"!==t,showActivity:this.model.owned()&&"virtual"!==t,allowTypeChange:this.model.owned()&&"deactivated"!==t&&"unconfirmed"!==t&&"virtual"!==t,orgMemberType:M(["member types",t]),allowReactivate:this.model.owned()&&"deactivated"===t,isMe:s.isMe(e),canRemove:e.getMembershipData(this.model).canRemove,orgIsBC:this.model.isPremium(),ownsOrg:this.model.owned(),hidden:e.get("hidden"),onViewActivity:this.viewMemberActivity.bind(this,e),onRoleChange:this.changeRole.bind(this,e),onRemoveOrDeactivate:this.removeOrDeactivate.bind(this,e),avatarHash:e.get("avatarHash"),avatarDomain:window.avatarDomain,initials:e.get("initials"),isOrganizationAdmin:"admin"===t,onReactivateClick:this.reactivateMember.bind(this,e),onUnhideMember:this.unhideMember.bind(this,e),onHideMember:this.hideMember.bind(this,e),onInviteMember:this.inviteToOrg.bind(this,e)}},t.prototype.getMembers=function(){var e,t,n,r,o,i,s,a,u,l,d,p,h,m,f;if(p=S.clone(this.model.memberList.models),null!=this.mappingsData)for(m=this.mappingsData,r=0,s=m.length;s>r;r++)f=m[r],null!=f.idMember?(d=this.modelCache.get("Member",f.idMember),null==d?d=new c({id:f.idMember,fullName:f.fullName,gMail:f.gMail,initials:f.initials,hidden:f.hidden},{modelCache:this.modelCache}):d.set("gMail",f.gMail)):(d=this.modelCache.findOne("Member","gMail",f.gMail),null==d&&(d=new c({fullName:f.fullName,gMail:f.gMail,initials:f.initials,hidden:f.hidden
},{modelCache:this.modelCache}),f.idMember=d.cid)),A.call(p,d)<0&&p.push(d);for(h=S.sortBy(p,function(e){return e.get("fullName")}),t=[],o=0,a=h.length;a>o;o++)l=h[o],"deactivated"===this.model.getMemberType(l)&&t.push(l);for(n=[],i=0,u=h.length;u>i;i++)l=h[i],"virtual"===this.model.getMemberType(l)&&n.push(l);return e=S.difference(h,n,t),e.concat(t).concat(n)},t.prototype.inviteToOrg=function(e){return L("Organization View","Members Page","Add Google Apps Member"),w.try(function(t){return function(){return e.id?t.model.changeMemberRole(e,{type:"normal"}):t.model.addMemberRole({fullName:e.get("fullName"),email:e.get("gMail"),type:"normal"}).then(function(){return o.show("invitation sent","info","alert",3e3)})}}(this)).catch(i,function(e){o.showLiteralText(e.localizedMessage(),"error","alert",3e3),L("Invitations","Error: "+e.message)}).done()},t.prototype.hideMember=function(e){return e.get("gMail")?(e.set("hidden",!0),this.model.toggleMemberHidden(e,{type:"post"}),this.renderReactSection()):void 0},t.prototype.unhideMember=function(e){return e.get("gMail")?(e.set("hidden",!1),this.model.toggleMemberHidden(e,{type:"delete"}),this.renderReactSection()):void 0},t.prototype.reactivateMember=function(e,t){return L("Organization View","Members Page","Reactivate"),this.model.reactivateMember(e).catch(i,function(e){o.showLiteralText(e.message,"error","alert",3e3),L("Invitations","Error: "+e.message)}).done()},t.prototype.removeOrDeactivate=function(e,t){L("Organization View","Members Page","Remove or Deactivate Member Button"),b.toggle({elem:t,view:x,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.viewMemberActivity=function(e,t){L("Organization View","Members Page","View Member Activity"),b.toggle({elem:t,view:l,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.changeRole=function(e,t){L("Organization View","Members Page","Change Role Button"),b.toggle({elem:t,view:d,options:{model:e,parent:this.model,modelCache:this.modelCache}})},t}(y)},{}],607:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e("jquery"),i=e(496),s=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="board creation restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},t.prototype.events={"click a":"changeRestriction"},t.prototype.render=function(){var e;return e=this.model.toJSON({prefs:!0}),this.$el.html(s.fill("org_prefs_vis",e)),this},t.prototype.changeRestriction=function(e){var t,n,o;return t=r(e.target),n="boardVisibilityRestrict/"+t.closest("ul").attr("data-vis"),o=t.attr("data-restriction"),this.model.setPref(n,o)},t}(i)},{}],608:[function(e,t,n){var r,o,i,s,a,u,c,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;r=e("jquery"),o=e(210),i=e(18),u=e(496),c=e(826),l=e(493),a=e(126),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.viewTitleKey="org membership restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.renderRestrictions))},t.prototype.events={"click .js-form-submit-input":"addRestriction","submit .js-form":"addRestriction","click .js-restricted-address":"removeRestriction"},t.prototype.render=function(){var e;return this.$el.html(c({hasRestrictions:(null!=(e=this.model.get("prefs").orgInviteRestrict)?e.length:void 0)>0})),this.renderRestrictions(),this},t.prototype.renderRestrictions=function(){var e,t,n,r,o,i;if(e=this.$(".js-list").empty(),(null!=(r=this.model.get("prefs").orgInviteRestrict)?r.length:void 0)>0){for(o=this.model.get("prefs").orgInviteRestrict,t=0,n=o.length;n>t;t++)i=o[t],e.append(l.fill("org_pref_restriction",{restriction:i}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()},t.prototype.addRestriction=function(e){var t;return a.stop(e),t=this.$(".js-input-restricted").val(),/^@/.test(t)?t="*"+t:-1===t.indexOf("@")&&t.indexOf(".")>0&&(t="*@"+t),this.$(".js-loading").removeClass("hide"),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").val("").select().focus(),e.$(".js-loading").addClass("hide"),e.$(".js-errors").hide()}}(this),error:function(e){return function(t){return e.$(".js-loading").addClass("hide"),e.$(".js-errors").text(t.responseText).show()}}(this)})},t.prototype.removeRestriction=function(e){var t;return t=r(e.target).closest("a").attr("data-pattern"),r(e.target).closest("li").remove(),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:t},dataType:"json",success:function(e){return function(){return e.$(".js-input-restricted").select().focus(),e.$(".js-errors").hide()}}(this)})},t.prototype.enableSelfJoin=function(e){return this.model.changeSlackSelfJoin(!0)},t.prototype.disableSelfJoin=function(e){return this.model.changeSlackSelfJoin(!1)},t}(u)},{}],609:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;o=e(126),i=e(496),s=e(829),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.viewTitleKey="slack team restrictions",t.prototype.initialize=function(){return this.listenTo(this.model,"change:slack-association",this.render)},t.prototype.events={"click a":"setRestriction"},t.prototype.render=function(){var e;return e=this.model._slackAssociation,this.$el.html(s(e)),this},t.prototype.setRestriction=function(e){var t;o.stop(e),e.target.parentElement.classList.contains("active")||(t=e.target.parentElement.classList.contains("js-enable-admin-only"),this.model.changeSlackAdminOnlyLinking(t))},t}(i)},{}],610:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(e,t){function n(){this.constructor=e}for(var r in t)k.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},k={}.hasOwnProperty;o=e(29),i=e(580),s=e(103),r=e(65),u=e(513),c=e(490),l=e(126),d=e(496),f=e(106),g=e(817),y=e(493),b=e(43),h=e(100),p=e(101),m=e(39),w=e("xtend"),v=e(815),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return _(t,e),f(c,t),t.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs change:name",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.listenTo(this.model,"change:name",function(e){return function(){var t;return t=location.pathname.replace(/[^\/]+/,e.model.get("name")),history.replaceState(null,null,t)}}(this)),this.memberTypeMe=this.model.getMemberType(o.me())},t.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.isFullWidth=function(){return!1},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(n=null!=(t=e.paidAccount)?t.standing:void 0,e.hasAccount=r.hasAccount(n),e.accountActive=r.isActive(e.paidAccount),e.accountProblem=r.isProblem(n),e.accountInactive=r.isInactive(n)),e.isInOrg=this.model.isMember(o.me()),e.hasBusinessClass=this.model.isPremium(),e.isEnterprise=this.model.isEnterprise(),e.paysWithPurchaseOrder=this.model.paysWithPurchaseOrder(),e.isOrgAdmin=this.model.owned(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),e.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=l.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.isFullWidth=this.isFullWidth(),e.editable=this.model.editable(),e.hasUnlimitedPowerUps=this.model.isFeatureEnabled("plugins"),this.$el.empty(),this.$el.html(v(e)),this.renderDetails(),this.renderMainContent(),this},t.prototype.renderDetails=function(){var e;return e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),e.enterpriseUI=this.model.isFeatureEnabled("enterpriseUI"),e.isBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=l.sanitizeWebAddress(e.website),e.descriptionHtml=s.markdownAsHtml(e.desc,{textData:e.descData}),e.canEdit=this.model.owned(),this.$(".js-current-details").html(g(e)),this.model.editable()&&this.$(".js-profile-form").empty().append(y.fill("org_detail_profile_edit",e,{editable:this.model.editable()})),this},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,w(t.prototype.events,e||this.events))},t.prototype.membershipChange=function(){var e;return e=this.model.getMemberType(o.me()),e!==this.memberTypeMe?(this.memberTypeMe=e,this.render()):void 0},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeLogoInProfile=function(e){l.stop(e),b("Organization View","Open Change Logo Menu from Profile Image"),u.toggle({elem:this.$(".js-change-org-logo"),view:new i({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){l.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),b("Organization View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){l.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset(),b("Organization View","Cancel Edit Profile")},t.prototype.submitProfile=function(e){var t,n,r,o,i,s,a,u;if(l.stop(e),!this.disabled){for(t={},a=["displayName","name","website","desc"],r=0,i=a.length;i>r;r++)n=a[r],t[n]=this.$(".js-profile-form [name="+n+"]").val();for(t.name=t.name.toLowerCase().replace(/[^a-z0-9_]/g,""),u=["displayName","website"],o=0,s=u.length;s>o;o++)n=u[o],t[n]=t[n].trim();this.disableSubmit(),this.model.update(t,{waitForServer:!0},function(e){return function(t){var n;e.disabled=!1,e.$(".js-submit-profile").removeAttr("disabled"),t?(n=t.message.trim().toLowerCase(),e.$(".js-profile-form-error").removeClass("hide").text(h(n))):(e.$(".js-profile-form-error").addClass("hide"),e.cancelEditProfile(),b("Organization View","Changed Name and Details"))}}(this))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t}(d)},{}],611:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;r=e("jquery"),o=e(210),i=e(29),s=e(6),a=e(513),c=e(126),l=e(496),p=e(493),h=e(43),d=e(101),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.viewTitleKey=function(){return this.org.isPremium()?"remove or deactivate member":"remove member"},t.prototype.initialize=function(){return this.org=this.options.org},t.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},t.prototype.render=function(){var e,t;return t=this.org.getMemberType(this.model),e=this.model.toJSON(),e.orgMemberType=d(["member types",t]),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isOrgMember="public"!==t,e.isVirtual="virtual"===t,e.canDeactivate=this.org.isPremOrgAdmin(i.me())&&!e.isVirtual&&!e.isDeactivated,e.isMe=i.isMe(this.model),this.$el.html(p.fill("org_remove_or_deactivate_member",e)),this},t.prototype._checkIfLostVisibility=function(){return i.isMe(this.model)?s.navigate("/",{trigger:!0}):void 0},t.prototype.deactivateMember=function(e){c.stop(e),this.org.deactivateMember(this.model),this._checkIfLostVisibility(),a.hide()},t.prototype.removeMember=function(e){var t;c.stop(e),r(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(t="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(t="Soft Remove",this.org.memberList.remove(this.model)),h("Organization","Remove Member From Organization",t),a.hide(),this._checkIfLostVisibility()},t}(l)},{}],612:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(513),i=e(126),s=e(496),a=e(491)("org_filtering"),u=a.renderable(function(e){var t,n;return n=e.name,t=e.isDeleteable,a.form(".js-add-tag-form",function(){return a.label(function(){return a.format("name"),a.input(".js-add-tag-name.js-autofocus",{type:"text",value:n})}),a.input(".primary",{type:"submit",value:a.l("save")}),t?a.button(".negate.u-float-right.js-delete-tag",{type:"button"},function(){return a.format("delete")}):void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.events={"submit .js-add-tag-form":function(e){var t;e.preventDefault(),t=this.$(".js-add-tag-name").val().trim(),this.onSubmit(t)},"click .js-delete-tag":function(e){i.stop(e),this.onDelete()}},t.prototype.getName=function(){return""},t.prototype.render=function(){return this.$el.html(u({name:this.getName(),isDeleteable:null!=this.onDelete})),this},t}(s)},{}],613:[function(e,t,n){var r,o;r=e("react"),o=e(488)("org_account"),t.exports=r.createClass({displayName:"SettingSectionComponent",render:o.renderable(function(){var e,t,n,r,i,s,a;return a=this.props,i=a.header,r=a.contents,s=a.onChange,e=a.canChange,n=a.changeContent,t=a.changeClasses,o.div(".window-module.u-clearfix",function(){return o.div(".window-module-title",function(){return o.h3(".u-inline",function(){return o.addElement(i)})}),o.div(".setting-item",function(){return o.div(".setting-item-detail",function(){return o.addElement(r)}),o.div(".setting-item-action",function(){var r;return r={"button-link":!0,"u-text-align-center":!0,disabled:!e},n?o.div({class:t,onClick:s},function(){return o.addElement(n)}):o.b(s,{disabled:!e,class:o.classify(r)},function(){return o.format("change")})})})})})})},{}],614:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;u=e(101),r=e("react"),i=e(613),a=e(616),c=e(488)("org_account"),o="https://slack.com/oauth/authorize",s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.displayName="SlackComponent",t.prototype.render=c.renderable(function(){var e,t,n,r,s,u;return s=this.props,r=s.isAdmin,n=s.hasBC,u=s.slackAssociation,t=s.deleteSlackAssociation,e=s.changeSlackSelfJoin,c.div(function(s){return function(){var s,l,d,p,h,m,f,g;return u?(l=u.associated,p=u.canChange,s=u.adminOnly,g=u.teams,m=u.qs,h=c.render(function(){return c.div(function(){return c.p(function(){return c.format("link-your-trello-and-slack-teams-together"),c.text(" "),c.a(".quiet",{href:"http://help.trello.com/article/1049-slack-app",target:"slack_help"},function(){return c.format("learn-more")})}),p?void 0:c.p(".helper.u-float-left",function(){return c.format("you-need-to-be-an-admin-to-link-this-trello-team-to-a-slack-team")})})}),f=p?o+m:"#",d={"slack-button":"slack-button",disabled:!p},c.createElement(i,{header:c.render(function(){return c.format("slack-team-linking")}),contents:h,changeContent:c.render(function(){return c.a({href:f,disabled:!p},function(){return c.img({class:c.classify(d),alt:c.l("add-to-slack"),src:"https://platform.slack-edge.com/img/add_to_slack.png",srcSet:"https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"})})}),changeClasses:c.classify({"u.text-align-center":"u.text-align-center"})}),void(l&&g.forEach(function(o){return c.createElement(a,{icon:c.render(function(){return c.img({class:"slack-team-icon",alt:"Slack Team Icon",src:o.icon})}),header:c.render(function(){return c.div(function(){return c.text(o.name)})}),contents:c.render(function(){return c.div(function(){return c.div(function(){return c.p(function(){return c.format("this-team-is-linked-to-domain",{domain:o.domain})}),c.p({class:c.classify({quiet:!n||!r})},function(){return o.selfJoin?c.format("slack-members-self-join"):c.format("slack-members-invite-only"),c.icon("business-class",{class:"icon-business-class-color"})})}),p?void 0:c.p(".helper.u-float-left",function(){return c.format("you-need-to-be-an-admin-to-change-this-setting")})})}),canChange:p,isAdmin:r,hasBC:n,team:o,changeSlackSelfJoin:e,deleteSlackAssociation:t})}))):void c.createElement(i,{header:c.render(function(){return c.format("slack-team-linking")}),contents:c.render(function(){return c.format("loading")}),changeContent:c.render(function(){return c.a({href:o,disabled:!0,class:".button-link.u-text-align-center.disabled"},function(){return c.text("")})}),changeClasses:c.classify({"u.text-align-center":"u.text-align-center"})})}}(this))}),t}(r.Component),t.exports=s},{}],615:[function(e,t,n){var r,o;r=e("react"),o=e(488)("org_account"),t.exports=r.createClass({displayName:"SlackRestrictionsComponent",render:o.renderable(function(){var e,t,n,r;return n=this.props,t=n.isAdmin,e=n.hasBC,r=n.slackAssociation,o.div(".setting-item-detail",function(){return o.div(function(){return o.p(function(){return(null!=r?r.adminOnly:void 0)?o.format("slack-admin-only-linking"):o.format("slack-normal-member-linking")})}),e&&!t?o.p(".helper.u-float-left",function(){return o.format("you-need-to-be-an-admin-to-change-this-setting")}):void 0})})})},{}],616:[function(e,t,n){var r,o,i,s,a,u;s=e(231),r=e(513),o=e(485),i=e("react"),a=e(488)("org_account"),u=e(43),t.exports=i.createClass({displayName:"SlackTeamComponent",changeAssociatedSlack:function(e){var t,n,s,c,l,d,p,h;return p=this.props.team,n=p.domain,c=p.id,d=p.name,h=p.selfJoin,s=this.props.hasBC,l=this.props.isAdmin,t=s&&l,r.toggle({elem:e,getViewTitle:function(){return d},reactElement:i.createElement(o,{key:"slack team linking",items:[{onClick:function(e){return function(){return u("Slack Association","Unlink"),r.hide(),e.props.deleteSlackAssociation(c)}}(this),content:a.render(function(){return a.a({href:"#"},function(){return a.format("unlink"),a.span({className:"sub-name"},function(){return a.format("this-trello-team-will-no-longer-be-linked-to-domain",{domain:n})})})})},{content:a.render(function(){return a.hr()})},{content:a.render(function(){return a.p(function(){return a.format("who-can-join-team")})})},{onClick:function(e){return function(){return t?(u("Slack Association","SelfJoin"),r.hide(),e.props.changeSlackSelfJoin(!0,c)):void 0}}(this),content:a.render(function(){return a.a({class:a.classify({disabled:!t}),href:"#"},function(){return a.format("slack-self-join"),h&&a.icon("check"),a.span({className:"sub-name"},function(){return a.format("slack-team-members-can-join-team")})})})},{onClick:function(e){return function(){return t?(u("Slack Association","InviteOnly"),r.hide(),e.props.changeSlackSelfJoin(!1,c)):void 0}}(this),content:a.render(function(){return a.a({class:a.classify({disabled:!t}),href:"#"},function(){return a.format("slack-invite-only"),h||a.icon("check"),a.span({className:"sub-name"},function(){return a.format("slack-team-members-require-invite")})})})},{content:a.render(function(){return a.div(function(){return l?s?void 0:(a.hr(),a.icon("business-class",{class:"icon-business-class-color u-float-left"}),a.p(".slack-bc-upsell",function(){return a.format("slack-upgrade-to-business-class")})):(a.hr(),a.p(".helper",function(){return a.format("you-need-to-be-an-admin-to-change-this-setting")}))})})}]})})},render:a.renderable(function(){var e,t,n,r,o,i;return i=this.props,r=i.icon,n=i.header,t=i.contents,e=i.canChange,o=s(this,"changeAssociatedSlack"),a.div(".window-module.u-clearfix.slack-team",function(){return a.div(".u-float-left",function(){return a.addElement(r)}),a.div(function(){return a.div(".slack-team-header",function(){return a.h3(".u-inline",function(){return a.addElement(n)})}),a.div(".slack-team-body",function(){return a.div(".slack-team-detail",function(){return a.addElement(t)}),a.div(".slack-team-action",function(){var t;return t={"button-link":!0,"u-text-align-center":!0,disabled:!e},a.b(o,{disabled:!e,class:a.classify(t)},function(){return a.format("change")})})})})})})})},{}],617:[function(e,t,n){var r,o,i;r=e("react"),i=e(488)("org_account"),o=e(101),t.exports=r.createClass({displayName:"VisibilityContentsComponent",render:i.renderable(function(){var e,t,n;return t=this.props,e=t.canChange,n=t.visibility,i.div(function(){return i.div(function(){var e;switch(e=o(["org perms",n,"text"]),n){case"public":return i.p(function(){return i.icon("public"),i.format("public-helpertext",{helperText:e})});case"private":return i.p(function(){return i.icon("private"),i.format("private-helpertext",{helperText:e})});default:throw new Error("Unrecognized visibility setting: "+n)}}),e?void 0:i.p(".helper.u-float-left",function(){return i.format("you-need-to-be-an-admin-to-change-this-setting")})})})})},{}],618:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;o=e(483),i=e(636),s=e("bluebird"),a=e("underscore"),d=e(491)(),h=e("xtend"),p=d.renderable(function(e){var t,n,r;return t=e.icon,r=e.text,n=e.iconColor,null!=t&&d.span(".badge-icon.icon-sm.plugin-icon",{style:d.stylify({"background-image":d.urlify(t+"?color="+n)})}),r?d.span(".badge-text",function(){return d.text(r)}):void 0}),c={green:"plugin-color-green",red:"plugin-color-red",yellow:"plugin-color-yellow"},u=a.values(c).join(" "),l=function(e){return c[e]},t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.tagName="div",t.prototype.className="badge",t.prototype.initialize=function(e){this.pluginBadge=e.pluginBadge},t.prototype.renderBadge=function(e){return this.$el.html(p(e)),this.$el},t.prototype.render=function(){var e,t,n,r;return t=this.pluginBadge,n=l(t.color),r=null!=n?"fff":"999",e=this.renderBadge(h(t,{iconColor:r})),e.removeClass(u),null!=n&&e.addClass(n),this},t.prototype.updateBadge=function(e){return a.isEqual(this.pluginBadge,e)?void 0:(this.pluginBadge=e,this.render(e))},t}(i)},{}],619:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)m.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},m={}.hasOwnProperty;r=e("hearsay"),p=e(484),o=e(618),s=e(483),a=e(636),u=e(514),c=e("bluebird"),l=e("underscore"),d={},t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.tagName="span",t.prototype.badgeView=o,t.prototype.runnerOptions=function(){return{command:"card-badges",board:this.model.getBoard(),card:this.model}},t.prototype._cacheKey=function(){var e,t,n,r;return r=this.runnerOptions(),n=r.command,e=r.board,t=r.card,[n,null!=e?e.id:void 0,null!=t?t.id:void 0].join(":")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e;return null!=(e=d[this._cacheKey()])&&this.renderResolvedBadges(e),u.enqueue("plugin_badges_render_"+this.cid,function(e){return function(t){var n,o,i,a;return o=t.delayed,a=e.runnerOptions(),i=null,n=r.combine(p(a.board,a.card),e.model.snoop()),e.subscribe(n,function(){return s.all(a).then(function(t){var n,r,o;return i=t,o=[],n=function(){return i===t},r=function(){return n()?(e.renderResolvedBadges(o),d[e._cacheKey()]=o.map(function(e){return l.omit(e,"callback")})):void 0},e.cancelOnRemove(c.map(t,function(t,i){var a;return e.retain(t),null!=t.dynamic?(a=function(){var u;return u=t.dynamic().cancellable().then(function(t){var s;return o[i]=t,r(),t.refresh&&n()?(s=Math.max(10,t.refresh),s+=2*Math.random()-1,e.setTimeout(a,1e3*s)):void 0}).catch(s.Error.NotHandled,function(){return null}),e.cancelOnRemove(u),u})():o[i]=t})).cancellable().then(function(){return r()}).catch(c.CancellationError,function(){})}).done()})}}(this)),this},t.prototype.renderResolvedBadges=function(e){var t;return t=e.map(function(e){return function(t,n){var r;return r=e.subview(e.badgeView,e.model,{pluginBadge:t},n),r.updateBadge(t),r}}(this)),this.ensureSubviews(l.compact(t))},t}(a)},{}],620:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e("bluebird"),o=e(636),s=e(491)(),a=s.renderable(function(e){var t,n,r,o;switch(t=(null!=e?e:{}).content,t.type){case"iframe":o=t.url,r=t.height,n=t.context,s.iframe(".plugin-iframe",{src:o,style:r?"height:"+r+"px;":"height:200px"}),s.a(".plugin-board-bar-close-button.icon-lg.icon-close.js-close-board-bar",{href:"#"})}}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-board-bar",t.prototype.renderOnce=function(){return this.$el.html(a({content:this.content})),this.initIFrames(this.model),this},t}(o)},{}],621:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e(142),o=e(636),i=e(126),a=e(43),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName=function(){return null!=this.options.pluginButton.url?"a":"span"},t.prototype.attributes=function(){var e,t,n;return e=this.options.pluginButton,n=e.url,t=e.target,n&&s(n)?{href:n,target:null!=t?t:n}:void 0},t.prototype.initialize=function(e){return this.pluginButton=e.pluginButton,this.retain(this.pluginButton)},t.prototype.events={click:function(e){return a("Card Detail","Sidebar Plugin Button",this.pluginButton.text),i.stopPropagation(e),null!=this.pluginButton.callback?this.pluginButton.callback({el:e.currentTarget}).done():void 0}},t.prototype.template=function(){throw Error("no template specified")},t.prototype.renderOnce=function(){return this.$el.html(this.template(this.pluginButton)),this},t}(o)},{}],622:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;s=e("underscore"),o=e(483),a=e(484),i=e(636),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=null,t.prototype.renderContainer=function(){return this.$el},t.prototype.runnerOptions=function(){throw Error("runnerOptions not specified")},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=this.runnerOptions(),e=this.renderContainer(),this.subscribe(a(t.board,t.card),function(n){return function(){return o.all(t).then(function(t){var r;return n.$el.toggleClass("hide",0===t.length),n.removeSubviews(),r=s.sortBy(t,"text").map(function(e,t){return n.subview(n.buttonView,n.model,{pluginButton:e},t)}),n.appendSubviews(r,e)}).done()}}(this)),this},t}(i)},{}],623:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(491)(),r=e(621),s=i.renderable(function(e){var t,n;t=e.icon,n=e.text,t&&(i.span(".icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(t+"?color=999")})}),i.raw(" ")),i.text(n)}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.className="button-link",t}(r)},{}],624:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(622),o=e(623),s=e(491)("card_detail"),a=s.renderable(function(){return s.h3(function(){return s.format("plugins")}),s.div(".u-clearfix.js-button-list")}),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="div",t.prototype.className="window-module u-clearfix hide",t.prototype.buttonsSelector=".js-button-list",t.prototype.buttonView=o,t.prototype.renderContainer=function(){return this.$el.html(a()),this.$(".js-button-list")},t.prototype.runnerOptions=function(){return{command:"card-buttons",board:this.model.getBoard(),card:this.model}},t}(r)},{}],625:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;s=e(142),r=e(618),a=e(252),i=e(126),u=a.renderable(function(e){var t,n,r,o,i;return n=null!=e?e:{},t=n.callback,i=n.url,o=n.title,r=n.text,a.h3(".card-detail-item-header",function(){return a.text(o)}),i&&s(i)?a.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:i,target:i,title:r},function(){return a.text(r)}):t?a.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:"#",title:r},function(){return a.text(r)}):a.span(".card-detail-badge.plugin-card-detail-badge.js-badge",{title:r},function(){return a.text(r)})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.tagName="div",t.prototype.className="card-detail-item",t.prototype.renderBadge=function(e){return this.$el.html(u(e)),this.$(".js-badge")},t.prototype.events={"click .js-badge":function(e){return i.stopPropagation(e),null!=this.pluginBadge.callback?(e.preventDefault(),this.pluginBadge.callback({el:e.currentTarget}).done()):void 0}},t}(r)},{}],626:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(619),o=e(625),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="div",t.prototype.badgeView=o,t.prototype.runnerOptions=function(){return{command:"card-detail-badges",board:this.model.getBoard(),card:this.model}},t}(r)},{}],627:[function(e,t,n){var r,o,i,s,a,u,c,l;r=e(103),o=e(479),i=e("bluebird"),s=e("react"),u=e(488)(),l=e("xtend"),a=e("underscore"),c=u.renderable(function(e){var t;return t=(null!=e?e:{}).detailsHtml,u.div(".markeddown",function(){
return u.raw(t)})}),t.exports=s.createClass({displayName:"PluginGearComponent",keepInDOM:!0,propTypes:{io:s.PropTypes.instanceOf(o),model:s.PropTypes.object},getInitialState:function(){return{details:""}},componentDidMount:function(){i.props({details:this.props.io.getDetails()}).then(function(e){return function(t){return e.setState(t)}}(this))},render:function(){return c({detailsHtml:r.markdownAsHtml(this.state.details)})}})},{}],628:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(e,t){function n(){this.constructor=e}for(var r in t)x.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},x={}.hasOwnProperty;r=e("jquery"),v=e("underscore"),o=e(29),i=e(6),b=e(99),s=e(34),u=e(513),m=e("bluebird"),f=e(126),g=e(496),y=e(101),_=e(491)("board_power_ups"),k=e(43),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.initialize=function(){var e;return e=o.me(),this.listenTo(e.organizationList,"add remove reset change",this.frameDebounce(this.render)),this.createNewTeam=0===e.organizationList.length},t.prototype.events=function(){return{"click .js-team":"clickTeam","click .js-create-team":"clickCreateTeam","click .js-create":"clickCreateNewTeam","click .js-cancel":"clickCancelNewTeam"}},t.prototype.render=function(){return this.$el.html(_.render(function(e){return function(){var t,n;return e.createNewTeam?(t=e.model.memberList.length,_.div(".power-ups-create-team",function(){return _.p(function(){return _.format("first-create-your-business-class-team")}),_.p(function(){return _.label(function(){var e;return _.format("team-name"),e=1===t?{value:_.l("names-projects",{name:o.me().get("fullName")},{raw:!0})}:2===t?{placeholder:_.l("eg-names-projects",{name:o.me().get("fullName")},{raw:!0})}:{},_.input(".full.js-autofocus.js-name",e)}),t>1?_.label(".power-ups-create-team-add-members",function(e){return function(){return _.input(".js-add-members",{type:"checkbox",checked:!0}),_.format("add-the-members-of-this-board-to-the-team")}}(this)):void 0}),_.div(function(){return _.button(".primary.js-create",function(){return _.format("create")}),_.a(".power-ups-create-team-cancel.quiet-button.js-cancel",function(){return _.format("cancel")})}),_.hr()}),v.defer(function(){return e.$(".js-name").select().focus()})):(n=o.me().organizationList.sortBy(function(e){return e.get("displayName").toLowerCase()}),_.div(".power-ups-assign-to-team",function(){return _.p(function(){return _.format("this-board-is-not-in-a-team-yet"),_.text(" "),_.format("please-select-a-team-or-create-a-new-team-to-upgrade")})}),n.length>0&&_.ul(".power-ups-assign-to-team-list",function(){var t,r,o,i,s;for(s=[],r=0,o=n.length;o>r;r++)i=n[r],t=i.canAddBoard(e.model)?{class:"js-team","data-idOrganization":i.id}:{class:"disabled",title:_.l("team-restrictions-prevent-you-from-adding-this-board-to-this-team")},s.push(_.li(".power-ups-assign-to-team-list-item",t,function(){return _.div(".power-ups-assign-to-team-list-item-content",function(){return _.div(".power-ups-assign-to-team-list-item-logo",function(){var e;return e=i.get("logoHash"),e?_.img({src:logoDomain+"/"+e+"/30.png"}):_.span(".icon.icon-lg.icon-organization")}),_.div(".power-ups-assign-to-team-list-item-details",function(){return _.div(".power-ups-assign-to-team-list-item-name",function(){return _.text(i.get("displayName")),i.isFeatureEnabled("plugins")?(_.text(" "),_.icon("business-class",{class:"icon-business-class-color"})):void 0}),_.div(".power-ups-assign-to-team-list-item-member-count",function(){var e;return null!=(e=i.get("memberships"))?_.text(b("members",e.length)):void 0})})})}));return s}),_.div(".power-ups-assign-to-team-create.js-create-team",function(){return _.div(".power-ups-assign-to-team-create-content",function(){return _.format("create-a-new-team")})}))}}(this))),this},t.prototype.clickTeam=function(e){var t;return t=this.$(e.currentTarget).attr("data-idOrganization"),this.model.trigger("added-to-team"),m.fromNode(function(e){return function(n){return e.model.update("idOrganization",t,{waitForServer:!0},n)}}(this)).then(function(e){return function(){return i.navigate(i.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}}(this)).done()},t.prototype.clickCreateTeam=function(e){return this.createNewTeam=!0,this.render()},t.prototype.clickCancelNewTeam=function(e){return f.stop(e),this.model.trigger("cancel-add-to-team")},t.prototype.clickCreateNewTeam=function(e){var t,n;return n=this.$(".js-name").val(),/\S/.test(n)?(t={displayName:n},this.$(".js-create,.js-cancel").prop("disabled",!0).addClass("disabled"),o.me().organizationList.create(t,{modelCache:this.modelCache,silent:!0,success:function(e){return function(t){var n;return n=t.id,e.model.trigger("added-to-team"),e.model.update("idOrganization",n,{waitForServer:!0}),s.loadOrganizationMembersMinimal(n).then(function(){var n;return e.$(".js-add-members").prop("checked")?(n=e.model.getOrganization(),k("New Org","Create","Power-Ups Sidebar (with members)",t.id),m.map(e.model.memberList.models,function(e){return n.isMember(e)?void 0:n.changeMemberRole(e,{type:"normal"})},{concurrency:3})):k("New Org","Create","Power-Ups Sidebar (without members)",t.id)}).then(function(){return i.navigate(i.getBoardPowerUpsUpgradeUrl(e.model),{trigger:!0})}).done()}}(this)})):void 0},t}(g),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(_.render(function(e){return function(){return _.div(".power-ups-count-explanation",function(){return _.p(function(){return _.format("only-team-members-can-enable-power-ups")})})}}(this)))},t}(g),l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(_.render(function(e){return function(){return _.div(".power-ups-count-explanation",function(){return _.p(function(){return _.format("ask-an-admin-to-add-this-board-to-a-team")})}),_.div(".power-ups-board-admins",function(){return _.b(function(){return _.format("board-admins")}),_.ul(".power-ups-admin-list",function(){return e.model.memberList.filter(function(t){return e.model.ownedByMember(t)}).forEach(function(e){return _.li(".power-ups-admin-list-item",function(){return _.div(".power-ups-admin-list-item-avatar",function(){var t;return t=e.get("avatarHash"),t?_.img({src:avatarDomain+"/"+t+"/30.png"}):_.span(".icon.icon-lg.icon-member")}),_.div(".power-ups-admin-list-item-details",function(){return _.div(".power-ups-admin-list-item-name",function(){return _.text(e.get("fullName"))}),_.div(".power-ups-admin-list-item-username",function(){return _.text("@"+e.get("username"))})})})})})})}}(this)))},t}(g),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.className="power-ups-explainer power-ups-limit-reached",t.prototype.events={"click .js-ad":function(e){return k("Power-Ups Menu","Banner Ad","Get More Power-Ups Button")}},t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){var e,t;return t=i.getBoardPowerUpsUpgradeUrl(this.model),e=o.me(),this.$el.html(_.render(function(e){return function(){return _.p(".power-ups-limit-reached-message",function(){return _.format("it-looks-like-youve-reached-your-power-ups-limit-for-this-board")}),_.p(".power-ups-limit-reached-button",function(){return e.model.hasOrganization()?_.a(".button.primary.js-ad",{href:t},function(){return _.format("get-more-power-ups")}):_.a(".button.primary.js-add-to-team",{href:"#"},function(){return _.format("get-more-power-ups")})}),_.a(".power-ups-limit-reached-dont-show.js-disable-ad",{href:"#"},function(){return _.text("Don't show me this again")})}}(this)))},t}(g),w=_.renderable(function(){return _.div(function(){return _.div(".spinner.loading")})}),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.render=function(){return this.$el.html(w()),this},t}(g),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.viewTitleKey="power ups",t.prototype.noPadding=!0,t.prototype.className="plugin-enable-pop-over",t.prototype.initialize=function(){return this.listenTo(this.model,"cancel-add-to-team",function(e){return function(){return e.addToTeam=!1,e.render()}}(this)),this.listenTo(this.model,"added-to-team",function(e){return function(){return e.redirecting=!0,e.render()}}(this)),this.redirecting=!1,this.addToTeam=!1},t.prototype.events=function(){return{"click .js-add-to-team":function(e){return f.stop(e),this.addToTeam=!0,this.render()},"click .js-disable-ad":function(e){return f.stop(e),o.me().dismiss("PowerUpsInlineAd"),u.hide()}}},t.prototype.render=function(){return this.$el.empty(),this.redirecting?this.renderSpinner():this.addToTeam?this.renderAddToTeam():this.renderLimitAd(),this},t.prototype.renderSpinner=function(){return this.appendSubview(this.subview(h,this.model)),this},t.prototype.renderAddToTeam=function(){return this.model.hasOrganization()?(this.appendSubview(this.subview(d,this.model)),this):this.model.owned()?(s.loadMyOrganizations(),this.appendSubview(this.subview(c,this.model))):(this.appendSubview(this.subview(l,this.model)),this)},t.prototype.renderLimitAd=function(){return this.appendSubview(this.subview(p,this.model))},t}(g)},{}],629:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;r=e(621),i=e(491)(),s=i.renderable(function(e){var t,n;t=e.icon,n=e.text,t&&i.span(".board-header-btn-icon.icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(t+"?color=f6f6f6")})}),i.span(".board-header-btn-text.u-text-underline",function(){return i.text(n)})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.className="board-header-btn",t.prototype.template=s,t}(r)},{}],630:[function(e,t,n){var r,o,i,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e(622),o=e(629),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.tagName="span",t.prototype.className="board-header-plugin-btns",t.prototype.buttonView=o,t.prototype.runnerOptions=function(){return{command:"board-buttons",timeout:1e4,board:this.model}},t}(r)},{}],631:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;i=e("bluebird"),o=e(636),s=e(491)(),a=s.renderable(function(e){var t,n,r,o;switch(t=(null!=e?e:{}).content,t.type){case"iframe":o=t.url,r=t.height,n=t.context,s.iframe(".plugin-iframe",{src:o})}}),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.initialize=function(e){return this.content=e.content,this.retain(this.content)},t.prototype.className="plugin-overlay",t.prototype.renderOnce=function(){return this.$el.html(a({content:this.content})),this.initIFrames(this.model),this},t}(o)},{}],632:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),i=e(636),s=e(513),a=e(491)(),u=a.renderable(function(e){var t,n;null==e&&(e={}),n=e.url,t=e.height,a.iframe(".plugin-iframe",{src:n,style:t?"height:"+t+"px;":void 0})}),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.callback=e.callback,this.retain(this.callback)},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.vigor=t.VIGOR.NONE,t.prototype.renderOnce=function(){return this.$el.html(u(this.content)),this.initIFrames(this.model),this},t.prototype.handleIFrameMessage=function(e,t){switch(t){case"done":if(null!=this.callback)return this.callback({el:e});s.hide()}},t}(i)},{}],633:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(e,t){function n(){this.constructor=e}for(var r in t)_.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},_={}.hasOwnProperty;r=e("jquery"),p=e("underscore"),m=e(142),h=e(121),o=e("hearsay"),i=e(97),s=e(18),u=e(636),c=e(513),l=e("bluebird"),y=e(491)("plugin_popover"),d=e(126),b=e("xtend"),f=y.renderable(function(e){var t,n;null==e&&(e={}),n=e.showSearch,t=e.search,t&&n&&y.input(".js-search.js-autofocus",{type:"text",placeholder:t.placeholder}),y.div(".js-results")}),g=y.renderable(function(e){var t,n,r,o;r=e.search,n=e.noSearchResults,t=e.items,o=e.selectedIndex,n&&y.p(".empty.plugin-pop-over-search-empty",function(){r.empty?y.text(r.empty):y.format("no results")}),y.ul(".pop-over-list.js-list.navigable",function(){var e,n,r,i,s,a,u,c;for(n=0,i=t.length;i>n;n++)s=t[n],u=s.text,r=s.index,e=s.callback,c=s.url,a=r===o,y.li({class:y.classify({selected:a})},function(){var t;t=null!=e?{"data-index":r}:null!=c&&m(c)?{href:c,target:c}:void 0,y.a(t,function(){y.text(u)})})})}),v=y.renderable(function(e){var t;return t=(null!=e?e:{}).search,y.p(".quiet.plugin-pop-over-search-searching",function(){(null!=t?t.searching:void 0)?y.text(t.searching):y.format("searching")})}),t.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return w(t,e),t.prototype.initialize=function(e){return this.title=e.title,this.content=e.content,this.retain(this.content),this.searchText=this.slot("")},t.prototype.getViewTitle=function(){return this.title},t.prototype.keepInDOM=!0,t.prototype.events=function(){return{"click a[data-index]":function(e){var t,n;return t=parseInt(r(e.currentTarget).attr("data-index"),10),n=p.isFunction(this.content.items)?this.content.searchResults[t]:this.content.items[t],n.callback({el:e.currentTarget}).done()},"click a[href]":function(e){return c.hide()},"input .js-search":function(e){return this.searchText.set(r(e.currentTarget).val())},"mouseenter li":function(e){return d.selectMenuItem(this.$(".js-list"),"li",r(e.currentTarget))},keydown:function(e){var t,n;n=i.getKey(e),t=this.$(".js-list"),n===s.ArrowUp||n===s.ArrowDown?(d.stop(e),d.navMenuList(t,"li",n)):(n===s.Enter||n===s.Tab)&&(d.stop(e),t.find("li.selected a").click())}}},t.prototype.renderOnce=function(){var e,t,n,r;return r=p.isFunction(this.content.items),this.$el.html(f({search:this.content.search,showSearch:this.content.search&&(r||this.content.items.length>this.content.search.count)})),e=this.$el.find(".js-results"),n=function(e){return function(t){return l.try(function(){var n,o,i,s,a;return r?e.content.items({options:{search:t}}):(o=e.content.items,o=o.map(function(e,t){return b(e,{index:t})}),e.content.search&&(t&&(a=d.buildFuzzyMatcher(t),o=o.filter(function(e){var t,n;return n=e.text,t=e.alwaysVisible,t||a(n)})),null!=(i=null!=(s=e.content.search)?s.count:void 0)&&(n=0,o=p.filter(o,function(e,t){return e.alwaysVisible?!0:i>n?(n++,!0):!1}))),o)}).then(function(t){return r?(e.content.searchResults=t.map(function(e,t){return b(e,{index:t})}),e.retain(e.content.searchResults),e.content.searchResults):t})}}(this),this.content.search?(t=h(this.searchText,300),this.subscribe(t,function(t){return function(r){return e.html(v({search:t.content.search})),n(r).then(function(n){var r,o,i,s;return r=!p.any(n,function(e){var t;return t=e.alwaysVisible,!t}),s=null!=(o=null!=(i=n[0])?i.index:void 0)?o:-1,e.html(g({search:t.content.search,noSearchResults:r,items:n,selectedIndex:s}))}).done()}}(this))):(e.html(v()),n().then(function(t){return e.html(g({items:t,selectedIndex:0}))})),this},t}(u)},{}],634:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g={}.hasOwnProperty;r=e("jquery"),o=e(507),i=e(483),a=e(513),u=e("bluebird"),d=e(252),h=e(43),c=e(126),l=e(496),m=e("xtend"),p=d.renderable(function(e){d.ul(".pop-over-list",function(){var t,n,r,o,i,s;for(t=0,r=e.length;r>t;t++)i=e[t],o=i.name,s=i.url,n=i.id,d.li(function(){d.a(".js-remove",{"data-id-attachment":n},function(){d.text(o)})})})}),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.viewTitleKey="remove attachments",t.prototype.initialize=function(e){var t;return t=e.section,this.section=t},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.renderOnce=function(){var e;return e=this.model.getBoard(),u.map(this.section.claimed,function(t){return t.name&&t.name!==t.url?t:i.one({command:"format-url",board:e,options:{url:t.url}}).get("text").catch(i.Error.NotHandled,function(){return t.url}).then(function(e){return m(t,{name:e})})}).then(function(e){return function(t){return e.$el.html(p(t))}}(this)),this},t.prototype.confirmRemove=function(e){var t,n;return c.stop(e),t=r(e.currentTarget).attr("data-id-attachment"),n=this.model.attachmentList.get(t),o.pushView("remove attachment",{model:n,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return n.destroy(),h("Attachment","Delete Attachment",n.getType())}}(this)})},t}(l)},{}],635:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(e,t){function n(){this.constructor=e}for(var r in t)y.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},y={}.hasOwnProperty;r=e("jquery"),h=e("underscore"),o=e(507),i=e("hearsay"),l=e(513),s=e(483),a=e(634),c=e(636),d=e("bluebird"),m=e(491)("plugin_section"),g=e(43),p=e(126),f=m.renderable(function(e){var t;t=e.content,m.div(".window-module.u-clearfix",function(){var e,n;m.div(".window-module-title.window-module-title-no-divider",function(){m.span(".window-module-title-icon.icon-lg.plugin-section-icon.js-icon"),m.h3(".u-inline-block.plugin-section-title.js-title"),m.div(".window-module-title-options",function(){m.a(".quiet.js-remove",{href:"#"},function(){m.format("remove")})})}),"iframe"===t.type&&(n=t.url,e=t.height,m.div(".u-gutter",function(){m.iframe(".plugin-iframe.plugin-section",{src:n,style:m.stylify({height:e?e+"px;":void 0})})}))})}),t.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t.prototype.initialize=function(){return this.section=new i.Slot(null)},t.prototype.renderOnce=function(){var e;if(e=this.section.get(),null==e)throw Error("updateSection not called before render");return this.$el.html(f(e)),this.subscribe(this.section,function(e){return function(t){return d.resolve(h.result(t,"title")).then(function(t){return e.$(".js-title").text(t)}).catch(s.Error.Timeout,function(){}),d.resolve(h.result(t,"icon")).then(function(t){return e.$(".js-icon").css("background-image",m.urlify(t+"?color=999"))}).catch(s.Error.Timeout,function(){})}}(this)),this.initIFrames(this.model.getBoard(),this.model,this.section),this},t.prototype.updateSection=function(e){return this.retain(e),this.section.set(e)},t.prototype.events={"click .js-remove":"confirmRemove"},t.prototype.confirmRemove=function(e){var t,n;p.stop(e),n=this.section.get(),1===n.claimed.length?(t=this.model.attachmentList.get(n.claimed[0].id),o.toggle("remove attachment",{elem:this.$(e.currentTarget),model:t,confirmBtnClass:"negate",fxConfirm:function(e){return function(e){return t.destroy(),g("Attachment","Delete Attachment",t.getType())}}(this)})):l.toggle({elem:r(e.currentTarget),view:new a({model:this.model,section:n})})},t}(c)},{}],636:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty,d=[].slice;r=e("jquery"),a=e("underscore"),o=e("hearsay"),u=e(484),s=e(496),t.exports=i=function(e){function t(){this._retained=[],this._pendingPromises=[],this._eventListeners=[],t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype._retainCallback=function(e){return null!=e&&null!=this._retained&&(e.retain().done(),this._retained.push(e)),e},t.prototype.retain=function(e){a.isFunction(e)?this._retainCallback(e):a.isArray(e)?e.forEach(function(e){return function(t){return e.retain(t)}}(this)):a.isObject(e)&&this.retain(a.values(e))},t.prototype.cancelOnRemove=function(e){return null!=this._pendingPromises?(this._pendingPromises.push(e),e.then(function(t){return function(){return t._pendingPromises=a.without(t._pendingPromises,e)}}(this))):e.cancel(),e},t.prototype.remove=function(){var e,n,r,o,i,s,a,u,c,l,d,p,h,m,f;for(t.__super__.remove.apply(this,arguments),c=this._pendingPromises,n=0,i=c.length;i>n;n++)u=c[n],u.cancel();for(delete this._pendingPromises,l=this._eventListeners,r=0,s=l.length;s>r;r++)d=l[r],m=d.target,f=d.type,e=d.callback,m.removeEventListener(f,e);for(delete this._eventListeners,p=this._retained,o=0,a=p.length;a>o;o++)h=p[o],h.release().done();delete this._retained},t.prototype.addEventListener=function(e,t,n){return e.addEventListener(t,n),this._eventListeners.push({target:e,type:t,callback:n})},t.prototype.handleIFrameMessage=null,t.prototype.initIFrames=function(){var e,t,n,i,s;t=arguments[0],n=arguments[1],i=3<=arguments.length?d.call(arguments,2):[],e=this.$el.find("iframe.plugin-iframe"),s=o.combine.apply(o,i.concat(u(t,n))),a.each(e,function(e){return function(t){var n,o;o=s.use(),n=r(t),n.addClass("iframe-loading").one("load",function(r){n.removeClass("iframe-loading"),e.subscribe(s,function(){return t.contentWindow.postMessage("render","*")}),o(),null!=e.handleIFrameMessage&&e.addEventListener(window,"message",function(n){n.source===t.contentWindow&&e.handleIFrameMessage(t,n.data)})})}}(this))},t}(s)},{}],637:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(29),s=e(126),a=e(496),u=e(864),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.viewTitleKey="calendar settings",t.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},t.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},t.prototype.generationComplete=function(){return this.generating=!1,this.render()},t.prototype.generateNewFeedURL=function(e){return s.stop(e),this.generating=!0,this.model.generateCalendarKey(),this.render()},t.prototype.render=function(){var e,t,n;return n=this.model.toJSON({prefs:!0}).prefs,t=this.model.getPref("calendarKey"),e="https://"+location.host+"/calendar/"+(o.me().id+"/"+this.model.id+"/"+t+".ics"),t||(this.generating=!0,this.model.generateCalendarKey()),this.$el.html(u({isEnabled:n.calendarFeedEnabled,isGenerated:null!=t&&!this.generating,url:e,canChange:this.model.editable()})),this},t.prototype.focusInput=function(e){return this.$(".js-calendar-feed-url").focus().select()},t.prototype.selectFeedEnabled=function(e){var t,n;return s.stop(e),t=r(e.target).closest("a"),n="enabled"===t.attr("name"),this.model.setPref("calendarFeedEnabled",n)},t}(a)},{}],638:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(126),s=e(496),a=e(865),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="card aging settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-select:not(.disabled)":"selectMode"},t.prototype.render=function(){return this.$el.html(a({agingMode:this.model.getPref("cardAging"),canChange:this.model.editable()})),this},t.prototype.selectMode=function(e){var t,n;return i.stop(e),t=r(e.target).closest(".js-select"),n=t.attr("name"),this.model.setPref("cardAging",n)},t}(s)},{}],639:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),o=e(126),i=e(496),a=e(868),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.viewTitleKey="voting settings",t.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},t.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm"},t.prototype.render=function(){var e;return this.$el.html(a({canChange:this.model.editable(),canSetObservers:null!=(e=this.model.getOrganization())?e.isFeatureEnabled("observers"):void 0,canSetOrganization:this.model.hasOrganization(),canSetPublic:this.model.isPublic(),votingMode:this.model.getPref("voting")})),this},t.prototype.selectPerm=function(e){var t,n;return o.stop(e),t=r(e.target).closest(".js-voting-select"),n=t.attr("name"),this.model.setPref("voting",n)},t}(i)},{}],640:[function(e,t,n){var r,o,i,s,a,u,c,l=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty;r=e(464),i=e(408),s=e(496),a=e("underscore"),u=e(493),c=e(43),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.className="search-result-card",t.prototype.events={"click .list-card":"openCard"},t.prototype.render=function(){var e,t,n,o,s;return e=this.model.getBoard(),s=this.model.getList(),o=this.model.toJSON(),o=a.extend(o,{listName:s.get("name"),boardName:e.get("name"),permLevel:r.getPermLevelIconClassForBoard(e),archivedList:s.get("closed")}),n={hideMenu:!0,applyBoardCardFilter:!1},this.$el.html(u.fill("search_results_card",o)),t=this.subview(i,this.model,n),this.appendSubview(t,this.$(".js-list-card-container")),this},t.prototype.openCard=function(e){this.model.showDetail(),c("Search","Select Card")},t}(s)},{}],641:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(e,t){function n(){this.constructor=e}for(var r in t)C.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},C={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(324),s=e(640),a=e(6),u=e(510),l=e(642),d=e(34),p=e("bluebird"),h=e(644),m=e(646),f=e(269),g=e(126),v=e(496),y=e("underscore"),b=e(40),w=e(493),_=e(43),t.exports=c=function(e){function t(){this.results=null,this.serial=0,this.suggestSerial=0,this.idCardsLoaded=[],this.cardsLimit=a.isOnSearchPage()?12:8,this.cardsDesired=this.cardsLimit,this.noMoreCardMatches=!1,this.searchStates=["no-results","no-input","searching","search-results","err"],this.searchState="no-results",t.__super__.constructor.apply(this,arguments)}return k(t,e),t.prototype.viewTitleKey="search results",t.prototype.className="search-results-view",t.prototype.displayType="mod-search-over",t.prototype.hideHeader=!0,t.prototype.maxWidth="600",t.prototype.initialize=function(){var e,t,n;return n=function(e){return function(t){return e.dynamicDebounce(t,function(e){var t;return t=600,e.length<=1?3*t:e.length<=3?2*t:t})}}(this),t=n(this.update).bind(this),e=n(this.renderSearchedSuggestions).bind(this),this.listenTo(f,{"change:query":function(e,n){return t(n)},"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":function(t,n){return e(n)}}),this.listenTo(o.me().savedSearchList,"add remove reset change",this.renderSavedSearches)},t.prototype.events={"click .js-see-all-saved-searches":"seeAllSavedSearchesEvent","click .js-saved-search-name":"doSavedSearch","sortstop .js-saved-searches-list":"sortStop","click .js-save-this-search":"saveThisSearch","input .js-saved-search-name-input":"changeSearchName","submit .js-save-this-search-form":"confirmSave","click .js-save-this-search-cancel":"cancelSave","click .js-show-search-tips":"showTips","click .js-card-results .js-list a":"trackCardClick","click .js-member-results .js-list .js-select-member":"trackMemClick","click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard","click .js-open-help-query":"trackOpenHelpQuery","click .js-open-help a":"trackOpenHelp","click .js-business-class-link":"trackBusinessClassClick","click .js-gold-link":"trackGoldClick"},t.prototype.update=function(e){var t,n,r,o,i,s;this.err=null,this.results=y.isEmpty(e)?{}:null,++this.serial,s=this.serial,this.renderResults(),y.isEmpty(e)||(i={query:e,partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:this.cardsLimit+1,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},n=this.$(".js-open-help-query"),t=this.$(".js-open-help"),o=e.replace(/"/g,""),r=/\S/.test(o),t.toggleClass("hide",r),n.toggleClass("hide",!r).attr("href","http://help.trello.com/search?query="+encodeURIComponent(o)+"&source=trello-search").find(".js-query").text(o),d.loadSearchData(i).nodeify(function(e){return function(t,n){var r,o;return e.err=t,s!==e.serial?(o=y.pluck(null!=n&&null!=(r=n.options)?r.terms:void 0,"text"),void b("search","discarding search for "+o+", serial "+s)):(e.results=n,e.renderResults())}}(this)))},t.prototype.getMoreCards=function(e,t){var n;n=t.partial,p.try(function(t){return function(){var r,o;return t.idCardsLoaded.length<=t.cardsDesired&&!t.noMoreCardMatches?(r=Math.floor(t.cardsDesired/(t.cardsLimit+1)),o={query:e,partial:null!=n?n:!1,modelTypes:"cards",board_fields:"name,url,prefs",cards_limit:t.cardsLimit+1,cards_page:r,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover"},d.loadSearchData(o).then(function(e){var n;return t.idCardsLoaded=y.uniq(t.idCardsLoaded.concat(y.pluck(null!=(n=null!=e?e.cards:void 0)?n:[],"id")))}).catch(function(e){return t.err=e})):void 0}}(this)).then(function(e){return function(){return e.noMoreCardMatches=e.idCardsLoaded.length<=e.cardsDesired,e.renderCardResults(),e.$(".js-loading-cards").addClass("hide")}}(this)).done()},t.prototype.render=function(){var e;return e={savedSearchesEnabled:o.me().isFeatureEnabled("savedSearches")},this.$el.html(w.fill("search_instant_results",e)),this.update(f.getQuery()),this.renderSuggestions(),this.renderSearchedSuggestions(f.getSuggestionSearchTerm()),this},t.prototype.selectSuggestion=function(e){var t,n,o,i,s,a,u;g.stop(e),t=r(e.target).closest(".js-select-suggestion"),s=t.attr("data-suggestionphrase"),a=m.getKeywordMap()[s],o=f.getQuery(),n=m.inputIndex,i=g.removeWordAtIndex(o,n),u=g.stripExtraSpaces(i+" "+s),(null!=a?a.moreInputNeeded:void 0)||(u+=" "),f.clearSuggestions(),f.setQuery(u),f.clearSuggestionSearchTerm(),f.clearSuggestionSearchModelTypes(),
_("Search","Select Suggestion")},t.prototype.mouseleaveSuggestion=function(e){return this.$(".js-select-suggestion").removeClass("selected")},t.prototype.mouseenterSuggestion=function(e){return r(e.target).closest(".js-select-suggestion").addClass("selected")},t.prototype.renderSuggestions=function(){var e,t,n,r,o,i,s,a,u,c;if(c=f.getSuggestions(),n=c.length>0,e=this.$(".js-search-suggestions"),t=e.find(".js-search-suggestions-list").empty(),n){for(r="",o=0,s=c.length;s>o;o++)i=c[o],a=m.getSuggestionObjectContainingVariantOrKey(i),u=a.obj,u.phrase=a.key,r+=w.fill("search_suggetion",u);t.append(r),this.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}else e.addClass("hide");return this},t.prototype.renderSearchedSuggestions=function(e){var t,n,r,o;t=this.$(".js-search-suggestions").addClass("hide"),n=t.find(".js-search-suggestions-list").empty(),++this.suggestSerial,o=this.suggestSerial,""!==e&&(r={query:e,modelTypes:f.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},d.loadSearchData(r).nodeify(function(e){return function(r,i){var s,a,u,c,l,d,p,h,m,f,g,v,y,b,_;if(o===e.suggestSerial&&(a=(null!=i&&null!=(g=i.boards)?g.length:void 0)>0,u=(null!=i&&null!=(v=i.members)?v.length:void 0)>0,c=a||u,l="",c&&!r)){if(a)for(y=i.boards,d=0,h=y.length;h>d;d++)_=y[d],s=_,s.phrase='board:"'+_.name+'"',l+=w.fill("search_suggetion_board",s);else if(u)for(b=i.members,p=0,m=b.length;m>p;p++)_=b[p],s=_,s.phrase="@"+_.username,f={member:w.member},l+=w.fill("search_suggetion_member",s,"",f);return n.append(l),e.$(".js-select-suggestion").first().addClass("selected"),t.removeClass("hide")}}}(this)))},t.prototype.renderResults=function(){var e,t,n,o,i,s,a,u,c,l,d,p,h,m,g,v,b;for(this.idCardsLoaded=y.pluck(null!=(a=null!=(u=this.results)?u.cards:void 0)?a:[],"id"),this.noMoreCardMatches=this.idCardsLoaded.length<=this.cardsLimit,n=y.pluck(null!=(c=null!=(l=this.results)?l.boards:void 0)?c:[],"id"),o=y.pluck(null!=(d=null!=(p=this.results)?p.members:void 0)?d:[],"id"),i=y.pluck(null!=(h=null!=(m=this.results)?m.organizations:void 0)?h:[],"id"),this.searchState=null!=this.err?"err":""===f.getQuery()?"no-input":null==this.results?"searching":y.all([this.idCardsLoaded,n,o,i],y.isEmpty)?"no-results":(this.renderCardResults(),this.renderBoardResults(n),this.renderMemberResults(o),this.renderOrganizationResults(i),"search-results"),this.renderSavedSearches(),b={err:"js-err","no-input":"js-no-input",searching:"js-searching","no-results":"js-no-results","search-results":"js-search-results"},g=this.searchStates,t=0,s=g.length;s>t;t++)v=g[t],e=b[v],r(this.el.getElementsByClassName(e)).toggleClass("hide",v!==this.searchState);return this},t.prototype.renderSavedSearches=function(){var e,t,n,r,i,s;return i="no-input"===this.searchState,e=this.$(".js-save-this-search-menu"),r=!e.hasClass("hide"),this.$(".js-saved-search-links").toggleClass("hide",i||r),t=this.$(".js-saved-searches").toggleClass("hide",!i),i?(e.addClass("hide"),this.renderSavedSearchItems(t)):(s=f.getQuery(),n=y.find(o.me().savedSearchList.models,function(e){return e.toJSON().query===s}),null!=n&&this.$(".js-current-search-name").text(n.get("name")),this.$(".js-save-this-search").toggleClass("hide",null!=n),this.$(".js-current-search").toggleClass("hide",null==n)),this},t.prototype.renderSavedSearchItems=function(e){var t,n,i,s,a;return t=e.find(".js-saved-searches-list"),t.sortable({axis:"y",delay:"75",distance:"7",containment:".js-saved-searches-list",tolerance:"pointer",items:".saved-search",start:function(e,t){var n;return u.sorting=!0,n=r(t.helper).outerHeight(),r(t.placeholder).height(n)},stop:function(e){return function(){return e.defer(function(){return u.sorting=!1})}}(this)}),n=o.me(),s=n.savedSearchList.models,this.$(".js-no-saved-searches").toggleClass("hide",s.length>0),a=function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)i=s[e],n.push(this.subview(h,i,{parent:this}));return n}.call(this),t.empty(),this.appendSubviews(a,t),this},t.prototype.renderCardResults=function(){var e,t,n;return e=this.$(".js-card-results"),t=e.find(".js-list"),n=this.idCardsLoaded.slice(0,this.cardsDesired).map(function(e){return function(t){var n;return n=e.modelCache.get("Card",t),e.subview(s,n)}}(this)),this.ensureSubviews(n,t),e.toggleClass("hide",0===this.idCardsLoaded.length),this.$(".js-show-more-cards").toggleClass("hide",this.noMoreCardMatches),this},t.prototype.renderBoardResults=function(e){var t,n,r,o,s;return t=this.$(".js-board-results").addClass("hide"),e.length>0&&(n=t.find(".js-list").empty(),r=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],r.push(this.subview(i,this.modelCache.get("Board",o)));return r}.call(this),this.appendSubviews(r,n),t.removeClass("hide")),s=!1,this.$(".js-show-more-boards").toggleClass("hide",!s),this},t.prototype.renderMemberResults=function(e){var t,n,r,o,i;return t=this.$(".js-member-results").addClass("hide"),e.length>0&&(n=t.find(".js-list").empty(),o=function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(this.subview(l,this.modelCache.get("Member",r)));return o}.call(this),this.appendSubviews(o,n),t.removeClass("hide")),i=!1,this.$(".js-show-more-members").toggleClass("hide",!i),this},t.prototype.renderOrganizationResults=function(e){var t,n,r,o;return t=this.$(".js-org-results").addClass("hide"),e.length>0&&(o=function(){var t,r,o;for(o=[],t=0,r=e.length;r>t;t++)n=e[t],o.push(w.fill("organization_search_list_item",this.modelCache.get("Organization",n).toJSON()));return o}.call(this),t.removeClass("hide").find(".js-list").empty().append(o)),r=!1,this.$(".js-show-more-orgs").toggleClass("hide",!r),this},t.prototype.seeAllSavedSearchesEvent=function(){return this.clearSearch(),_("Search","Saved Search","See All Saved Searched (Go Back)")},t.prototype.clearSearch=function(){return f.setQuery("")},t.prototype.doSavedSearch=function(e){var t;return t=this.$(e.target).closest(".saved-search").find(".js-saved-search-query").text(),f.setQuery(t),_("Search","Saved Search","Open Saved Search")},t.prototype.sortStop=function(e,t){g.stopPropagation(e),t.item.trigger("movesavedsearch",[t]),_("Search","Saved Search","Reorder Saved Searches")},t.prototype.saveThisSearch=function(){return this.$(".js-saved-search-links").addClass("hide"),this.$(".js-save-this-search-menu").removeClass("hide"),this.$(".js-saved-search-name-input").val("").focus(),this.$(".js-save-this-search-submit").addClass("disabled")},t.prototype.changeSearchName=function(){var e,t;return t=this.$(".js-save-this-search-submit"),e=this.$(".js-saved-search-name-input"),t.toggleClass("disabled",0===e.val().trim().length),_("Search","See All Saved Searches")},t.prototype.confirmSave=function(e){var t,n;return g.preventDefault(e),this.$(".js-save-this-search-submit").hasClass("disabled")?void 0:(t=this.$(".js-saved-search-name-input").val().trim(),n=f.getQuery(),o.me().savedSearchList.saveSearch(t,n),this.cancelSave(),_("Search","Saved Search","Save"))},t.prototype.cancelSave=function(){return this.$(".js-saved-search-links").removeClass("hide"),this.$(".js-save-this-search-menu").addClass("hide"),_("Search","Saved Search","Cancel Save")},t.prototype.closeAllDeleteMenus=function(){var e,t,n,r,o;for(n=this.subviewsOfType(h),r=[],e=0,t=n.length;t>e;e++)o=n[e],r.push(o.cancelDeletion());return r},t.prototype.trackCardClick=function(){return _("Search","Select Item","Card")},t.prototype.trackMemClick=function(){return _("Search","Select Item","Member")},t.prototype.trackOrgClick=function(){return _("Search","Select Item","Team")},t.prototype.trackOpenHelpQuery=function(){return _("Search","Open Help with Query")},t.prototype.trackOpenHelp=function(){return _("Search","Open Help or Guide")},t.prototype.trackBusinessClassClick=function(){return _("Search","Click Business Class Link","Save Search Menu")},t.prototype.trackGoldClick=function(){return _("Search","Click Gold Link","Save Search Menu")},t.prototype.showTips=function(e){g.stop(e),this.$(".js-search-tips-helper").addClass("hide"),this.$(".js-search-tips-list").removeClass("hide"),_("Search","Show Tips")},t.prototype.showMoreCards=function(e){this.$(".js-loading-cards").removeClass("hide"),this.$(".js-show-more-cards").addClass("hide"),this.cardsDesired+=this.cardsLimit,this.getMoreCards(f.getQuery(),{partial:!0}),_("Search","Show More Cards")},t.prototype.showMoreBoards=function(e){},t.prototype.showMoreMembers=function(e){},t.prototype.showMoreOrgs=function(e){},t.prototype.highlightCard=function(e){var t;t=r(e.target).closest(".search-result-card").addClass("search-result-card-highlight-card"),t.closest(".js-list").addClass("search-result-card-highlight-section")},t.prototype.unHighlightCard=function(e){var t;t=r(e.target).closest(".search-result-card").removeClass("search-result-card-highlight-card"),t.closest(".js-list").removeClass("search-result-card-highlight-section")},t}(v)},{}],642:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("jquery"),i=e(564),s=e(126),a=e(496),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.tagName="li",t.prototype.className="search-result-member",t.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"},t.prototype.render=function(){return this.$el.empty(),this.appendSubview(this.subview(i,this.model,{linkName:!0})),this},t.prototype.blurMember=function(e){var t;t=r(e.target).closest(".item").removeClass("selected")},t.prototype.hoverMember=function(e){var t;t=r(e.target).closest(".item"),s.selectMenuItem(r(e.target).closest(".js-list"),".item",t)},t}(a)},{}],643:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e(513),i=e("bluebird"),s=e(564),a=e(126),u=e(496),c=e("underscore"),l=e(101),d=e(129),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.previousRender=null,t.prototype.renderSearchResults=function(e,t){var n,r,o,u,p,h,m;return this.$(".js-org-members").hide(),this.$el.find(".js-error").hide(),r=this.$el.find(".js-search-results"),n=r.find(".js-list").empty(),o=this.$el.find(".js-uninvited-search-results").hide().empty(),""===e?(this.clearSearchResults(),void this.loadingEl.hide()):(h=c.isEmpty(t),u=e.trim().length>=3,p=1===t.length&&a.checkEmail(e),this.$(".js-no-results").toggleClass("hide",!h),r.toggle(!h),!u&&h&&"function"==typeof this.renderOrgMembers&&this.renderOrgMembers(),this.helperEl.hide(),h||null!=t[0].id?(null!=(m=this.previousRender)&&m.cancel(),this.previousRender=i.resolve(t).map(function(e){return function(t){var n,r,o,i,s,a;return o=t.joined,a=t.similarity>0,delete t.joined,delete t.similarity,r={id:t.id},o?("ghost"===t.memberType?r.extraText=l("invited"):r.extraText=l("joined"),r.className="disabled"):null!=(s="function"==typeof(n=e.model).getOrganization?n.getOrganization():void 0)&&null!=(i=e.modelCache.get("Member",t.id))&&(null!=s?s.hasActiveMembership(i):void 0)&&(r.extraText=l("member-of-org",{orgName:s.get("displayName")},{raw:!0})),r.isKnownMember=a||p,d(e.modelCache,"enqueueDelta","Member",t).return(r)}}(this)).cancellable().tap(function(e){return function(){return e.deleteSubviewsOfType(s)}}(this)).each(function(e){return function(t){e.appendMemberToSearchResults(t)}}(this)).tap(function(e){return function(){var t;return e.loadingEl.hide(),t=e.$(".js-search-results .js-list li.js-autoselect:first"),a.selectMenuItem(e.$(".js-search-results .js-list"),"li",t)}}(this)).catch(i.CancellationError,function(){})):(this.renderEmailInviteToSearchResults(t[0]),r.hide(),void this.loadingEl.hide()))},t.prototype.appendMemberToSearchResults=function(e){var t,n,r,o,i;return r=this.modelCache.get("Member",e.id),i="function"==typeof(t=this.model).getOrganization?t.getOrganization():void 0,n=(null!=i?i.isPremOrgAdmin(r):void 0)?c.compact([e.className,"no-option"]).join(" "):e.className,o=this.subview(s,r,c.extend({showUnconfirmed:!0,showInactive:!0},e)),this.appendSubview(o,this.$(".js-search-results .js-list")),o.$("li").addClass(n)},t}(u)},{}],644:[function(e,t,n){var r,o,i,s,a,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e(29),i=e(126),s=e(496),a=e(493),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.className="saved-search",t.prototype.events={"click .js-delete-saved-search":"deleteSavedSearch","click .js-delete-saved-search-confirm":"confirmDeletion","click .js-delete-saved-search-cancel":"cancelDeletion",movesavedsearch:"moveSavedSearch"},t.prototype.render=function(){var e;return e=this.model.toJSON(),e.allowDelete=r.me().isFeatureEnabled("savedSearches")||"@me"!==e.query,this.$el.html(a.fill("saved_search",e)),this},t.prototype.deleteSavedSearch=function(e){return this.options.parent.closeAllDeleteMenus(),this.$(".js-saved-search-name").addClass("saved-search-item-faded"),this.$(".js-delete-saved-search").addClass("hide"),this.$(".js-delete-saved-search-menu").removeClass("hide"),this.defer(function(e){return function(){return e.$(".js-delete-saved-search-menu").addClass("saved-search-delete-menu-shown")}}(this))},t.prototype.confirmDeletion=function(e){return this.model.destroy()},t.prototype.cancelDeletion=function(e){return this.$(".js-saved-search-name").removeClass("saved-search-item-faded"),this.$(".js-delete-saved-search").removeClass("hide"),this.$(".js-delete-saved-search-menu").addClass("hide").removeClass("saved-search-delete-menu-shown")},t.prototype.moveSavedSearch=function(e,t){var n,o;return o=t.item.parent().children(),n=o.index(t.item),this.model.update("pos",i.calcPos(n,r.me().savedSearchList,this.model)),this.model.collection.sort({silent:!0})},t}(s)},{}],645:[function(e,t,n){var r,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(e,t){function n(){this.constructor=e}for(var r in t)b.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},b={}.hasOwnProperty;r=e("jquery"),o=e(6),i=e(641),s=e(97),a=e(18),u=e(513),c=e(646),d=e(269),p=e(494),h=e(126),m=e(496),f=e("underscore"),g=e(493),v=e(43),t.exports=l=function(e){function t(){this.fSearchOpen=!1,this.saveQueryDebounced=f.debounce(this.saveQuery,100),this.openSearchResultsViewDebounced=f.debounce(this.openSearchResultsView,100),this.autosuggestDebounced=f.debounce(this.autosuggest,100),p.addHandler(this,{scope:"search_box"}),t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.initialize=function(){return this.makeDebouncedMethods("renderInputState"),this.listenTo(d,{"change:query":this.renderInputQuery})},t.prototype.events={"keydown .js-search-input":"searchKeydown","input .js-search-input":"search","click .js-search-input":function(e){return h.stop(e),this.openSearchResultsView()},"focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"},t.prototype.render=function(){return this.$el.html(g.fill("header_search")),this.renderInputStateDebounced(),this.$(".js-search-input").val(d.getQuery()),this},t.prototype.renderInputQuery=function(){var e,t,n;e=this.$(".js-search-input"),n=e.val(),t=d.getQuery(),e.length>0&&n!==t&&(e.val(t),h.setCaretAtEnd(e))},t.prototype.renderInputState=function(){var e,t;t=this.fSearchOpen,e=this.hasInputValue(),this.$(".js-search-input").toggleClass("header-search-input-wide focus",t),this.$(".js-search-icon, .js-close-icon, .js-open-button").toggleClass("header-search-icon-dark",t),this.$(".js-search-icon").toggleClass("hide",t),this.$(".js-close-icon").toggleClass("hide",!t),this.$(".js-open-button").toggleClass("hide",!t)},t.prototype.hasInputValue=function(){var e;return(null!=(e=this.$(".js-search-input").val())?e.length:void 0)>0},t.prototype.shortcut=function(e){return e===a.ForwardSlash?(this.focusInput(),"Search"):void 0},t.prototype.focusInput=function(){var e;e=this.$(".js-search-input"),e.length&&h.setCaretAtEnd(e)},t.prototype.clearSearch=function(e){h.stop(e),u.hide(),this.closeSearch()},t.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur(),d.setQuery(""),this.fSearchOpen=!1,this.renderInputStateDebounced()},t.prototype.searchKeydown=function(e){var t,n,o,i;o=s.getKey(e),this.renderInputStateDebounced(),n=e.target.selectionStart===(i=e.target.selectionEnd)&&i===e.target.value.length,o===a.Enter||o===a.Tab||o===a.ArrowRight&&n?(t=r(".js-select-suggestion.selected").length,t&&(h.stop(e),r(".js-select-suggestion.selected").click())):(o===a.ArrowUp||o===a.ArrowDown)&&(t=r(".js-select-suggestion.selected").length,t&&(h.stop(e),h.navMenuList(r(".js-search-suggestions-list"),".js-select-suggestion",o)))},t.prototype.search=function(e){return this.autosuggestDebounced(),this.saveQueryDebounced(),this.openSearchResultsViewDebounced()},t.prototype.autosuggest=function(e){var t,n,r,o,i,s,a,u,l,p,m,g;t=this.$(".js-search-input"),m=h.getWordFromCaret(t).str,o=c.findUniqueKeywords(m),a=d.getQuery(),c.inputIndex=h.getCaretPosition(t),i=f.filter(o,function(e){var t;return t=c.getSuggestionObjectContainingVariantOrKey(e).obj.containsRegex,!t.test(a)}),d.setSuggestions(i),n=!1,l=c.getKeywordsWithSearchSuggest();for(r in l)if(p=l[r],u=p.containsRegex,u.test(m))return n=!0,g=p.suggestionsSearchModelTypes,d.setSuggestionSearchModelTypes(g),s=m.replace(RegExp("^"+r),""),void d.setSuggestionSearchTerm(s);n||(d.clearSuggestionSearchTerm(),d.clearSuggestionSearchModelTypes())},t.prototype.saveQuery=function(){var e;e=this.$(".js-search-input").val(),d.setQuery(e),/\/search/.test(location.pathname)&&o.navigate(o.getSearchUrl(e),{replace:!0})},t.prototype.getResultsView=function(){return this.subview(i,null,null,"headerSearchResultsView")},t.prototype.openSearchResultsView=function(){var e;this.fSearchOpen||o.isOnSearchPage()||(this.fSearchOpen=!0,e=this.$(".js-search-input"),e.focus(),h.setCaretAtEnd(e),u.show({elem:e,view:new i({model:this.model,modelCache:this.modelCache}),elActive:e,hidden:f.bind(this.closeSearch,this)})),this.fSearchOpen=!0,this.renderInputStateDebounced()},t.prototype.openSearchPage=function(e){var t;return h.stop(e),t=d.getQuery(),u.hide(),c.navigateToSearch(t,{trigger:!0}),v("Header","Open Search Page")},t}(m)},{}],646:[function(e,t,n){var r,o,i,s,a,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("jquery"),o=e(6),i=e(126),s=e("underscore"),a=e(101),t.exports=window.Search={navigateToSearch:function(e,t){var n;return n=(null!=t?t:{trigger:!1}).trigger,o.navigate(o.getSearchUrl(e),{trigger:n})},inputIndex:null,getSuggestionObjectContainingVariantOrKey:function(e){var t,n,r;if(n=this.getKeywordMap()[e],null!=n)return{key:e,obj:n};r=this.getKeywordsWithVariants();for(t in r)if(n=r[t],u.call(n.variants,e)>=0)return{key:t,obj:n};return{}},findKeywords:function(e){var t;return""===e?[]:t=s.filter(this.getKeywordsAndVariants(),function(t){return RegExp("^"+i.escapeForRegex(e)).test(t)})},findUniqueKeywords:function(e){var t,n;return t=this.findKeywords(e),n=s.uniq(t,!1,function(e){return function(t){return e.getSuggestionObjectContainingVariantOrKey(t).key}}(this))},_keywordsWith:function(e){var t,n;return s.object(function(){var r,o;r=this.getKeywordMap(),o=[];for(t in r)n=r[t],n.hasOwnProperty(e)&&o.push([t,n]);return o}.call(this))},getKeywordsWithVariants:function(){return null!=this._keywordsWithVariants?this._keywordsWithVariants:this._keywordsWithVariants=this._keywordsWith("variants")},getKeywordsWithSearchSuggest:function(){return null!=this._keywordsWithSearchSuggest?this._keywordsWithSearchSuggest:this._keywordsWithSearchSuggest=this._keywordsWith("suggestionsSearchModelTypes")},getKeywords:function(){return null!=this._keywords?this._keywords:this._keywords=s.keys(this.getKeywordMap())},getVariants:function(){var e,t;return null!=this._variants?this._variants:this._variants=s.flatten(function(){var n,r;n=this.getKeywordsWithVariants(),r=[];for(e in n)t=n[e],r.push(t.variants);return r}.call(this))},getKeywordsAndVariants:function(){return null!=this._keywordsAndVariants?this._keywordsAndVariants:this._keywordsAndVariants=this.getKeywords().concat(this.getVariants())},getKeywordMap:function(){return null!=this._keywordMap?this._keywordMap:this._keywordMap={"is:archived":{variants:["archived","is:closed","closed"],description:a("search.only include archived cards"),containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:a("search.only include open cards"),containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:a("search.only include cards on starred boards"),containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:a("search.only include cards with attachments"),containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:a("search.only include cards with a cover"),containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],description:a("search.only include cards that have a description"),containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:a("search.only include cards that have stickers"),containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:a("search.only include cards that have members assigned"),containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},"@me":{variants:["me"],description:a("search.only include cards assigned to me"),containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:a("search.only cards on a particular board"),containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:a("search.cards in the list with matching text"),containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:a("search.cards that match text in the name"),containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:a("search.cards that match text in the comment"),containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:a("search.cards that match text in a checklist"),containsRegex:/\bchecklist:\S*\b/},"description:":{moreInputNeeded:!0,description:a("search.cards that match text in the description"),containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:a("search.cards due in the next 24 hours"),containsRegex:/\bdue:day\b/},"due:week":{description:a("search.cards due in the next 7 days"),containsRegex:/\bdue:week\b/},"due:month":{description:a("search.cards due in the next 28 days"),containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:a("search.cards that are past due"),containsRegex:/\bdue:overdue\b/},"due:incomplete":{variants:["notcomplete","incomplete","stilldue"],description:a("search.cards that are incomplete"),containsRegex:/\bdue:incomplete\b/},"created:day":{description:a("search.cards created in the last 24 hours"),containsRegex:/\bcreated:day\b/},"created:week":{description:a("search.cards created in the last 7 days"),containsRegex:/\bcreated:week\b/},"created:month":{description:a("search.cards created in the last 28 days"),containsRegex:/\bcreated:month\b/},"edited:day":{description:a("search.cards edited in the last 24 hours"),containsRegex:/\bedited:day\b/},"edited:week":{description:a("search.cards edited in the last 7 days"),containsRegex:/\bedited:week\b/},"edited:month":{description:a("search.cards edited in the last 28 days"),containsRegex:/\bedited:month\b/}}}}},{}],647:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(29),i=e(507),a=e(649),u=e(126),t.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.toggleSelectable(),this.waitForId(this.model,function(e){return function(){return e.toggleSelectable()}}(this)),this.listenTo(this.model,"change:error",this.render)},t.prototype.events={"click .js-delete-sticker":"deleteSticker"},t.prototype.enabled=function(){var e;return o.me().isFeatureEnabled("customStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("customStickers"):void 0)},t.prototype.toggleSelectable=function(){var e;return e=null!=this.model.id,this.$el.toggleClass("js-draggable-sticker",e),this.$el.toggleClass("sticker-unselectable",!e)},t.prototype.deleteSticker=function(e){return u.stop(e),i.toggle("delete sticker",{elem:r(e.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"negate",fxConfirm:function(e){return function(t){return e.model.destroy()}}(this)})},t}(a)},{}],648:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e("jquery"),o=e(513),s=e(650),a=e(126),u=e("underscore"),t.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.initialize=function(){return this.listenTo(this.model,"stopEditing",this.stopEditing),this.listenTo(this.model,"startEditing",this.editSticker),this.listenTo(this.model,"disableEditing",this.disableEditing),this.listenTo(this.model,"enableEditing",this.enableEditing)},t.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker","mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"},t.prototype.showEditControls=function(){return!0},t.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")},t.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")},t.prototype.endCurrentEdit=function(){return r(document).off(".stickerrotate .stickermove .stickerautomove"),this.$el.removeClass("moving rotating"),r(".quick-card-editor").removeClass("invalid dragging")},t.prototype.stopEditing=function(e){var t,n,o,i,s;if(a.stop(e),this.isEditing()){for(this.endCurrentEdit(),this.$el.removeClass("editing"),r(".quick-card-editor").removeClass("quick-card-editor-editing-stickers"),o=this.model.collection.models,i=[],t=0,n=o.length;n>t;t++)s=o[t],i.push(s.trigger("enableEditing"));return i}},t.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")},t.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")},t.prototype.isMovingOrRotating=function(){return this.$el.is(".moving, .rotating")},t.prototype.saveStickerAttrs=function(e){var t,n,r,o,i,s,u,c,l;o=e.position,i=e.rotation,s=function(e){return Math.round(100*e)/100},l={zIndex:this.model.collection.nextZIndex(this.model)},o&&(t=this.$el.closest(".list-card"),n=t.find(".js-card-stickers"),c=n.width(),u=n.height(),l.left=s(parseFloat(this.$el.css("left"))/c*100),l.top=s(parseFloat(this.$el.css("top"))/u*100)),i&&(r=a.getElemTransformMatrix(this.$el.find(".sticker-image")),l.rotate=s(a.getMatrixDegrees(r)%360)),this.model.update(l)},t.prototype.mouseenter=function(e){this.isEditingDisabled()||this.isEditing()||this.isMovingOrRotating()||this.$el.addClass("hover")},t.prototype.mouseleave=function(e){this.$el.removeClass("hover")},t.prototype.editSticker=function(e){var t,n,i,s,c,l,d,p,h;if(null==e||1===e.which){for(a.stop(e),s=!1,null!=e&&"mousedown"===e.type&&(l=e.pageX,d=e.pageY,n=function(e){return function(){return r(document).off(".stickerautomove"),clearTimeout(t)}}(this),r(document).on("mousemove.stickerautomove",function(e){return function(t){return Math.pow(t.pageX-l,2)+Math.pow(t.pageY-d,2)>25?(s=!0,n(),e.startMove(t)):void 0}}(this)),r(document).on("mouseup.stickerautomove",n),t=this.setTimeout(n,1e3)),h=u.clone(this.model.collection.models),i=0,c=h.length;c>i;i++)p=h[i],p!==this.model&&(p.trigger("stopEditing"),p.trigger("disableEditing"));this.defer(function(e){return function(){return o.hide(),e.$el.addClass("editing"),r(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}},t.prototype.startRotate=function(e){var t,n,o,i,s,u;if(this.isEditing())return a.preventDefault(e),u={x:this.$el.offset().left+this.$el.width()/2,y:this.$el.offset().top+this.$el.height()/2},o={x:e.pageX,y:e.pageY},i=a.calcDistanceFromCenter(this.$el,o.x,o.y),s=0,n=a.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=n&&(s=a.getMatrixDegrees(n)),t=!1,r(document).on("mousemove.stickerrotate",function(e){return function(n){var c,l,d,p,h,m,f,g,v;t||(e.$el.removeClass("hover").addClass("rotating"),r(".quick-card-editor").addClass("dragging"),t=!0),g={x:n.pageX,y:n.pageY},l=4*a.calcDistanceFromCenter(e.$el,g.x,g.y),d=l-4*i,h=g.x-u.x,m=g.y-u.y,f=a.getDegrees(o.y-u.y,o.x-u.x),p=a.getDegrees(m,h),c=p-f,v=s+c,e.$el.find(".sticker-image").css({transform:"rotate("+v+"deg)","-webkit-transform":"rotate("+v+"deg)"})}}(this)),r(document).on("mouseup.stickerrotate",function(e){return function(){return t?(e.saveStickerAttrs({rotation:!0}),e.endCurrentEdit()):r(document).off(".stickerrotate")}}(this)),!1},t.prototype.startMove=function(e){var t,n,o,i,s,u,c,l,d,p,h,m,f;if(this.isEditing())return a.stop(e),t=this.$el.closest(".list-card"),n=t.find(".js-card-stickers"),h=n.offset(),l=h.left,d=h.top,f=this.$el.width(),m=this.$el.height(),p=n.width(),c=n.height(),o={left:-40,right:p-10,top:-40,bottom:c-10},null!=e?(s=this.$el.offset().left+this.$el.width()/2-e.pageX,u=this.$el.offset().top+this.$el.height()/2-e.pageY):(s=0,u=0),i=!1,r(document).on("mousemove.stickermove",function(e){return function(t){var n,a,c;return i||(e.$el.removeClass("hover").addClass("moving"),r(".quick-card-editor").addClass("dragging"),i=!0),n=t.pageX-l-f/2+s,a=t.pageY-d-m/2+u,c=!0,n>o.right&&(n=o.right,c=!1),n<o.left&&(n=o.left,c=!1),a>o.bottom&&(a=o.bottom,c=!1),a<o.top&&(a=o.top,c=!1),r(".quick-card-editor").toggleClass("invalid",!c),e.$el.css({left:n,top:a})}}(this)),r(document).on("mouseup.stickermove",function(e){return function(){return i?(e.saveStickerAttrs({position:!0}),e.endCurrentEdit()):r(document).off(".stickermove")}}(this)),!1},t.prototype.removeSticker=function(e){var t;this.isEditing()&&(t=u.once(function(e){return function(){e.stopEditing(),e.model.destroy(),e.$el.remove()}}(this)),this.$el.one("transitionEnd webkitTransitionEnd",t),this.setTimeout(t,100),this.$el.addClass("fade-out"))},t}(s)},{}],649:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;r=e(29),i=e(126),s=e(496),u=e(493),a=e(25),t.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker-select js-draggable-sticker",t.prototype.enabled=function(){var e;return!this.model.get("premium")||r.me().isFeatureEnabled("additionalStickers")||(null!=(e=this.options.org)?e.isFeatureEnabled("additionalStickers"):void 0);
},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.url=null!=(t=null!=(n=i.smallestPreviewBiggerThan(e.scaled,a))?n.url:void 0)?t:e.url,e.pending=null==e.image&&null==e.id&&null==e.error,this.$el.toggleClass("disabled",!this.enabled()).html(u.fill("sticker_select_item",e)).data("sticker",this.model),this},t}(s)},{}],650:[function(e,t,n){var r,o,i,s,a,u,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e(126),i=e(496),u=e(493),a=e(25),s=e(135),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.className="sticker",t.prototype.showEditControls=function(){return!1},t.prototype.render=function(){var e,t,n;return e=this.model.toJSON(),e.url=null!=(t=null!=(n=o.smallestPreviewBiggerThan(e.imageScaled,a))?n.url:void 0)?t:e.imageUrl,e.showEditControls=this.showEditControls(),this.$el.html(u.fill("sticker_on_card",e)).css({left:s(e.left)+"%",top:s(e.top)+"%"}),this},t}(i)},{}],651:[function(e,t,n){var r,o,i;i=e(491)("action"),r=e(735),o=e(781),t.exports=i.renderable(function(e,t,n){var s,a,u,c,l,d,p,h,m,f,g,v,y,b,w;return h=e.entities,g=e.saved,p=e.dateLastEdited,d=e.date,y=e.url,m=t.member,s=t.board,f=t.organization,l=t.canReply,u=t.canDelete,c=t.canEdit,a=t.canAttachLink,b=n.useEmbedly,w=n.usePreviews,v=n.showOptions,i.div(".phenom-creator",function(){return m?i.div(".member.js-show-mem-menu",{idmember:m.id},function(){return o(m)}):i.span(".icon-lg.icon-member")}),i.div(".phenom-desc",function(){var e,o,s;for(o=0,s=h.length;s>o;o++)e=h[o],r(e,t,n);return b&&i.div(".hide.embedly.js-embedly"),w?i.div(".hide.previews.js-previews"):void 0}),i.p(".phenom-meta.quiet",function(){var e,n,r,o;return g&&(y?i.a(".date.js-hide-on-sending.js-highlight-link",{dt:d,href:y}):i.span(".date.js-hide-on-sending",{dt:d,href:y})),p&&i.span(".js-date-title.js-hide-on-sending",{dt:p},function(){return i.text(" "),i.format("edited")}),i.span({class:i.classify({"js-spinner":!0,hide:g})},function(){return i.format("sending-ellipsis")}),s&&(e=t.boardPLevelAltText,n=t.boardPLevelIconClass,i.text(" - "),i.format("on-board-name",{url:s.url,name:s.name,boardPLevelAltText:e,boardPLevelIconClass:n})),f&&(r=t.orgPLevelAltText,o=t.orgPLevelIconClass,i.text(" - "),i.format("on-organization-name",{url:f.url,name:f.name,orgPLevelAltText:r,orgPLevelIconClass:o})),v?i.span(".js-hide-on-sending",function(){return l&&(i.text(" - "),i.a(".js-reply-to-action",{href:"#"},function(){return i.format("reply")})),c&&(i.text(" - "),i.a(".js-edit-action",{href:"#"},function(){return i.format("edit")})),a&&(i.text(" - "),i.a(".js-attach-link",{href:"#"},function(){return i.format("attach link")})),u?(i.text(" - "),i.a(".js-confirm-delete-action",{href:"#"},function(){return i.format("delete")})):void 0}):void 0})})},{}],652:[function(e,t,n){var r;r=e(491)("actions_empty"),t.exports=function(){return r.p(".empty-list",function(){return r.mustacheBlock("daysBack",function(){return r.format("no-actions-in-the-last-daysback-days",{daysBack:r.mustacheVar("daysBack")})}),r.mustacheBlockInverted("daysBack",function(){return r.format("no-actions")})})}},{}],653:[function(e,t,n){var r;r=e(491)("ad_business_class"),t.exports=function(){return r.format("check-out-business-class")}},{}],654:[function(e,t,n){var r;r=e(491)("ad_business_class_google_apps"),t.exports=function(){return r.span(".title",function(){return r.format("using-google-apps")}),r.span(".learn-more",function(){return r.a({href:"#"},function(){return r.format("learn-about-business-class-ellipsis")})})}},{}],655:[function(e,t,n){var r,o;o=e(491)("announcement"),r=function(e){var t;return t=["announcement"],e&&t.push(["announcement",e].join("-")),t.join(" ")},t.exports=o.renderable(function(e){var t,n,i,s;return t=e.url,i=e.title,n=e.html,s=e.type,o.div({class:r(s)},function(){o.h3(".announcement-header",function(){null!=t?o.a(".announcement-header-link",{target:"_blank",href:t},function(){return o.text(i)}):o.text(i)}),o.p(function(){return o.raw(n)}),null!=t&&o.p(".quiet",function(){return o.a({href:t,target:"_blank"},function(){return o.format("read-more-ellipsis")})})})})},{}],656:[function(e,t,n){var r;r=e(491)("archived_card_options"),t.exports=function(){return r.mustacheBlock("__ed",function(){return r.p(".quiet",{style:"margin-left: 8px;"},function(){return r.a(".js-reopen",{href:"#"},function(){return r.text(r.mustacheVar("reOpenText"))}),r.mustacheBlock("canDelete",function(){return r.text(" - "),r.a(".js-delete",{href:"#"},function(){return r.format("delete")})})})})}},{}],657:[function(e,t,n){var r;r=e(491)("archived_cards"),t.exports=function(){return r.div(".js-archive-items"),r.p(".empty-list.js-empty-message"),r.a(".show-more.js-more-cards",{href:"#"},function(){return r.format("load-more-cards")})}},{}],658:[function(e,t,n){var r;r=e(491)("archived_lists"),t.exports=function(){return r.ul(".archive-list.js-archive-items"),r.p(".js-empty-message.empty-list")}},{}],659:[function(e,t,n){var r;r=e(491)("atMention"),t.exports=function(){return r.span({class:"atMention"+r.mustacheBlock("isMe",function(){return" me"}),title:r.mustacheVar("fullName")},function(){return r.text(r.mustacheVar("atMention"))})}},{}],660:[function(e,t,n){var r,o;o=e(491)("attachment_thumb"),r=e(85),t.exports=o.renderable(function(e){var t,n,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k;t=e.canReply,n=e.canUseViewer,i=e.date,s=e.doDownload,a=e.edgeColor,u=e.editable,c=e.ext,d=e.imgSrc,h=e.isCover,m=e.name,f=e.openIconClass,g=e.openText,v=e.plugin,y=e.previewClass,w=e.removeText,l=e.url,p=null!=(b=r("renameAttachments"))?b.get("allowAttachmentRenaming"):void 0,k={"attachment-thumbnail-preview":!0,"js-open-viewer":n,"attachment-thumbnail-preview-is-cover":h},_={},d&&(_["background-image"]=o.urlify(d)),a&&(_["background-color"]=a),p?o.div({class:o.classify(k),style:o.stylify(_)},function(){y?o.span({class:["attachment-thumbnail-preview-service-logo",y].join(" ")}):d||(c?o.a(".attachment-thumbnail-preview-ext",{href:l,target:"_blank",title:m},function(){return o.text(c)}):o.span(".icon-lg.icon-attachment.attachment-thumbnail-preview-attachment-icon"))}):o.a({href:l,class:o.classify(k),target:"_blank",title:m,style:o.stylify(_)},function(){return y?o.span({class:["attachment-thumbnail-preview-service-logo",y].join(" ")}):d?o.span(".icon-lg.icon-attachment.attachment-thumbnail-preview-attachment-icon"):c?o.span(".attachment-thumbnail-preview-ext",function(){return o.text(c)}):void 0}),o.p({class:o.classify({"attachment-thumbnail-details":!0,"js-open-viewer":n&&!p,"attachment-renamable":p})},function(){p?(o.span(".js-attachment-name hide",function(){return o.text(m)}),o.textarea(".attachment-thumbnail-details-title.js-attachment-thumbnail-details",{maxlength:256},function(){return o.text(m)}),i&&o.span(".u-block.quiet",function(){return o.format("added",{date:i})})):o.a(".attachment-thumbnail-details-title.js-attachment-thumbnail-details",{href:l,title:m,target:"_blank"},function(){o.text(m),i&&o.span(".u-block.quiet",function(){return o.format("added",{date:i})})}),v&&o.span(".quiet.attatchment-thumbnail-details-powerup",function(){return o.a(".attachment-thumbnail-details-powerup-item.js-enable-power-up",{href:"#","data-plugin":v.name},function(){return v.icon&&o.span(".icon-sm.plugin-icon",{style:o.stylify({"background-image":o.urlify(v.icon+"?color=999")})}),o.text("Enable "+v.name+" Power-Up to see details")})}),o.span(".quiet.attachment-thumbnail-details-options",function(){var e;e={class:o.classify({"attachment-thumbnail-details-options-item":!0,"dark-hover":!0,"js-download":s}),href:l,target:"_blank"},s&&(e.download="download"),o.a(e,function(){return o.icon(f),o.text(" "),o.span(".attachment-thumbnail-details-options-item-text.js-direct-link",function(){return o.text(g)})}),u&&(o.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-make-cover",{href:"#"},function(){return o.icon("card-cover"),o.text(" "),o.span(".attachment-thumbnail-details-options-item-text",function(){return o.format("make-cover")})}),o.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-remove-cover",{href:"#"},function(){return o.icon("card-cover"),o.text(" "),o.span(".attachment-thumbnail-details-options-item-text",function(){return o.format("remove-cover")})}),o.a(".attachment-thumbnail-details-options-item.attachment-thumbnail-details-options-item-delete.dark-hover.js-confirm-delete",{href:"#"},function(){return o.icon("close"),o.text(" "),o.span(".attachment-thumbnail-details-options-item-text",function(){return o.text(w)})}),t&&o.a(".attachment-thumbnail-details-options-item.js-reply",{href:"#"},function(){return o.icon("comment"),o.text(" "),o.span(".attachment-thumbnail-details-options-item-text",function(){return o.format("comment")})}))})})})},{}],661:[function(e,t,n){var r;r=e(491)("attachment_thumb_processing"),t.exports=r.renderable(function(){return r.div(".attachment-thumbnail.attachment-thumbnail-processing.js-attachment-thumb-processing",function(){return r.format("processing-ellipsis")})})},{}],662:[function(e,t,n){var r;r=e(491)("attachment_viewer"),t.exports=function(){return r.div(".attachment-viewer-header.js-close-viewer",function(){return r.span(".icon-lg.icon-close.attachment-viewer-header-close-icon")}),r.div(".attachment-viewer-underlay.js-close-viewer"),r.div(".attachment-viewer-frames.js-frames"),r.div(".attachment-viewer-overlay",function(){return r.div(".attachment-viewer-frame-details.js-display-frame-details")}),r.a(".attachment-viewer-next-frame-btn.js-show-next-frame",function(){return r.span(".icon-lg.icon-forward.light.attachment-viewer-next-frame-btn-icon")}),r.a(".attachment-viewer-prev-frame-btn.js-show-prev-frame",function(){return r.span(".icon-lg.icon-back.light.attachment-viewer-prev-frame-btn-icon")})}},{}],663:[function(e,t,n){var r;r=e(491)("attachment_viewer_frame"),t.exports=function(){return r.div({class:"attachment-viewer-frame js-close-viewer "+r.mustacheVar("directionClass"),"data-idAttachment":r.mustacheVar("id")},function(){return r.div(".attachment-viewer-frame-preview-wrapper",function(){return r.div({class:"attachment-viewer-frame-preview"+r.mustacheBlock("isImage",function(){return" attachment-viewer-frame-preview-image-wrapper"})},function(){return r.mustacheBlock("isImage",function(){return r.img(".attachment-viewer-frame-preview-image.js-stop",{src:r.mustacheVar("url"),alt:r.mustacheVar("name")})}),r.mustacheBlock("isAudio",function(){return r.audio(".attachment-viewer-frame-preview-audio.js-stop",{controls:!0,name:r.mustacheVar("name")},function(){return r.source({src:r.mustacheVar("url"),type:"audio/"+r.mustacheVar("ext")})})}),r.mustacheBlock("isVideo",function(){return r.video(".attachment-viewer-frame-preview-video.js-stop",{controls:!0,name:r.mustacheVar("name"),src:r.mustacheVar("url")})}),r.mustacheBlock("isIFrameable",function(){return r.iframe(".attachment-viewer-frame-preview-iframe.js-stop",{src:r.mustacheVar("url")})}),r.mustacheBlock("isPlaceholder",function(){return r.p(".attachment-viewer-frame-preview-placeholder",function(){return r.format("there-is-no-preview-available-for-this-attachment-opentext",{url:r.mustacheVar("url"),openText:r.mustacheVar("openText")})})})})})})}},{}],664:[function(e,t,n){var r;r=e(491)("attachment_viewer_frame_details"),t.exports=function(){return r.div(".attachment-viewer-frame-details",function(){return r.h2(".attachment-viewer-frame-details-title",function(){return r.text(r.mustacheVar("name"))}),r.p(function(){return r.mustacheBlock("date",function(){return r.format("added",{date:r.mustacheVar("date")})}),r.mustacheBlock("meta",function(){return r.text(" - "),r.text(r.mustacheVar("meta"))})}),r.p(function(){return r.span(".js-meta",function(){var e;return e={href:r.mustacheVar("url"),target:"_blank"},r.mustacheBlock("doDownload",function(){return e.download=r.mustacheVar("name")}),r.a(e,function(){return r.span({class:"icon-sm icon-"+r.mustacheVar("openIconClass")+" light attachment-viewer-option-icon"}),r.text(r.mustacheVar("openText"))}),r.mustacheBlock("__ed",function(){return r.span({class:"js-cover-options"+r.mustacheBlockInverted("canMakeCover",function(){return" hide"})},function(){return r.span({class:"js-make-cover-box"+r.mustacheBlock("isCover",function(){return" hide"})},function(){return r.a(".js-make-cover",{href:"#"},function(){return r.icon("card-cover",{class:"light attachment-viewer-option-icon"}),r.format("make-cover")})}),r.span({class:"js-remove-cover-box"+r.mustacheBlockInverted("isCover",function(){return" hide"})},function(){return r.a(".js-remove-cover",{href:"#"},function(){return r.icon("card-cover",{class:"light attachment-viewer-option-icon"}),r.format("remove-cover")})})}),r.a(".js-open-delete-confirm",{href:"#"},function(){return r.icon("close",{class:"light attachment-viewer-option-icon"}),r.text(r.mustacheVar("removeButtonText"))})})}),r.span(".js-confirm-delete.hide",function(){return r.text(r.mustacheVar("removeMessageText")),r.a(".attachment-viewer-delete-link.js-delete",{href:"#"},function(){return r.text(r.mustacheVar("removeConfirmText"))}),r.a(".attachment-viewer-delete-link.js-close-delete-confirm",{href:"#"},function(){return r.text(r.mustacheVar("removeCancelText"))})})})})}},{}],665:[function(e,t,n){var r;r=e(491)("avatar_change"),t.exports=function(){return r.mustacheBlock("uploadedAvatarHash",function(){return r.a({class:"avatar-option js-use-uploaded-avatar "+r.mustacheBlock("avatarSource_upload",function(){return"active"}),href:"#"},function(){return r.img(".pic",{src:r.mustacheVar("__avatarDomain")+"/"+r.mustacheVar("uploadedAvatarHash")+"/50.png"}),r.span(".text",function(){return r.format("uploaded-picture"),r.icon("check")})}),r.hr()}),r.div(".js-grav.hide",function(){return r.a({class:"avatar-option js-use-gravatar "+r.mustacheBlock("avatarSource_gravatar",function(){return"active"}),href:"#"},function(){return r.img(".pic",{src:"https://secure.gravatar.com/avatar/"+r.mustacheVar("gravatarHash")+".png?s=50&r=PG&d=404"}),r.span(".text",function(){return r.format("gravatar"),r.icon("check")})}),r.hr()}),r.a({class:"avatar-option js-no-avatar "+r.mustacheBlock("avatarSource_none",function(){return"active"}),href:"#"},function(){return r.span(".pic.member",function(){return r.span(".member-initials",function(){return r.text(r.mustacheVar("initials"))})}),r.span(".text",function(){return r.format("initials-no-avatar"),r.icon("check")})}),r.hr(),r.mustacheBlock("canTakePhoto",function(){return r.a(".button-link.js-take-photo",{href:"#"},function(){return r.icon("camera","take-photo-with-camera")}),r.hr()}),r.p(".error.hide.js-error"),r.div(".uploader",function(){return r.form(".realfile",{action:"/1/member/"+r.mustacheVar("id")+"/avatar",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.input(".js-upload-avatar",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1",accept:"image/*;capture=camera"})}),r.a(".button-link.fakefile",function(){return r.mustacheBlock("uploadedAvatarHash",function(){return r.icon("attachment","upload-a-new-picture")}),r.mustacheBlockInverted("uploadedAvatarHash",function(){return r.icon("attachment","upload-a-picture")})})})}},{}],666:[function(e,t,n){var r;r=e(491)("badge"),t.exports=function(){return r.span({class:"badge-icon icon-sm icon-"+r.mustacheVar("icon")}),r.mustacheBlock("text",function(){return r.span(".badge-text",function(){return r.text(r.mustacheVar("text"))})})}},{}],667:[function(e,t,n){var r,o;o=e(491)("billing_contact"),r=e(27),t.exports=o.renderable(function(e){var t,n,i;return n=e.fullName,t=e.email,i=e.locale,o.div(".error",{style:"display:hidden"}),o.form(function(){return o.label({for:"billingContactFullName"},function(){return o.format("name")}),o.input(".text",{name:"billingContactFullName",type:"text",id:"billingContactFullName",value:n,maxlength:"50"}),o.label({for:"billingContactEmail"},function(){return o.format("email")}),o.input(".text",{name:"billingContactEmail",type:"text",id:"billingContactEmail",value:t}),o.label({for:"billingContactLocale"},function(){return o.format("language")}),o.select({name:"billingContactLocale",id:"billingContactLocale"},function(){var e,t,n,s,a,u,c;for(a=[],e=0,t=r.length;t>e;e++)s=r[e],c=s.code,n=s.name,u=c.toLowerCase()===i.toLowerCase(),a.push(o.option({value:c,selected:u},function(){return o.text(n)}));return a}),o.input(".primary.js-submit",{type:"submit",value:o.l("save")})})})},{}],668:[function(e,t,n){var r;r=e(491)("board"),t.exports=function(){return r.div(".board-main-content",function(){return r.div(".board-header.u-clearfix.js-board-header"),r.div(".board-canvas")}),r.div(".board-menu.js-fill-board-menu")}},{}],669:[function(e,t,n){var r;r=e(491)("board_archive"),t.exports=function(){return r.div(".archive-controls",function(){return r.div(".archive-controls-search",function(){return r.input(".js-search.js-autofocus",{type:"text",placeholder:r.l("search archive")})}),r.a(".archive-controls-switch.quiet-button.js-switch-section",{href:"#"})}),r.div(".spinner.loading.js-loading-spinner"),r.div(".archive-content.js-archive-content")}},{}],670:[function(e,t,n){var r;r=e(491)("board_background_options"),t.exports=function(){return r.p(".u-font-weight-bold.quiet",function(){return r.format("display-type")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select-option",{href:"#","data-background-display-type":"cover"},function(){return r.check(!r.mustacheVar("tile"),"cover")})}),r.li(function(){return r.a(".js-select-option",{href:"#","data-background-display-type":"tile"},function(){return r.check(r.mustacheVar("tile"),"tile")})})}),r.hr(),r.p(".u-font-weight-bold.quiet",function(){return r.format("board-text")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select-option",{href:"#","data-board-brightness":"dark"},function(){return r.check(r.mustacheVar("brightnessDark"),"light")})}),r.li(function(){return r.a(".js-select-option",{href:"#","data-board-brightness":"light"},function(){return r.check(r.mustacheVar("brightnessLight"),"dark")})})}),r.hr(),r.a(".quiet-button.js-delete-background",{href:"#"},function(){return r.format("delete-background")})}},{}],671:[function(e,t,n){var r;r=e(491)("board_background_selection"),t.exports=function(){return r.span({class:"background-box "+r.mustacheBlock("pending",function(){return"background-box-unselectable"})+r.mustacheBlock("tile",function(){return" background-tile"}),style:" "+r.mustacheBlock("backgroundImageThumbnail",function(){return'background-image: url("'+r.mustacheVar("backgroundImageThumbnail")+'")'})+"; "+r.mustacheBlock("color",function(){return"background-color: "+r.mustacheVar("color")+";"})+" "},function(){return r.mustacheBlock("attribution",function(){return r.a(".background-option.js-background-attribution",{href:r.mustacheVar("url"),target:"_blank",title:r.mustacheVar("url")},function(){return r.img({src:"https://a.trellocdn.com/images/d906fe5c1274c56c5571d49705547587/cc.png",style:"height: 14px; width: 14px; vertical-align: text-top;",title:r.mustacheVar("license")}),r.span(".text",{style:"margin-left: 2px;"},function(){return r.text(r.mustacheVar("name"))})})}),r.mustacheBlock("id",function(){return r.a(".background-option.js-options",function(){return r.icon("overflow-menu-horizontal",{class:"light",style:"vertical-align: bottom;"}),r.span(".text",function(){return r.format("options")})})}),r.mustacheBlock("error",function(){return r.span(".background-info",function(){return r.span(".text",function(){return r.text(r.mustacheVar("error"))})})}),r.mustacheBlock("pending",function(){return r.span(".background-info",function(){return r.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),r.span(".text",function(){return r.format("uploading-ellipsis")})})})})}},{}],672:[function(e,t,n){var r;r=e(491)("board_change_background"),t.exports=function(){return r.div(".board-backgrounds-section-tiles.u-clearfix",function(){return r.div(".board-backgrounds-section-tile.js-bg-colors",function(){return r.div(".image"),r.div(".title",function(){return r.format("colors")})}),r.div(".board-backgrounds-section-tile.js-bg-photos",function(){return r.div(".image"),r.div(".title",function(){return r.format("photos")})})}),r.hr(".board-menu-header-divider"),r.h2(function(){return r.format("custom")}),r.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list"+r.mustacheBlockInverted("enabled_customBoardBackgrounds",function(){return" disabled"})},function(){return r.div(".board-background-select.board-background-select-upload.js-uploader",function(){return r.form({action:"/1/member/"+r.mustacheVar("idMember")+"/customBoardBackgrounds",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.span(".background-box",function(){return r.span(".icon-lg.icon-add")}),r.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})})})})}},{}],673:[function(e,t,n){var r;r=e(491)("board_closed"),t.exports=r.renderable(function(e){var t,n,o,i;return i=e.name,o=e.deleting,n=e.canReopen,t=e.canDelete,r.div(".big-message.quiet",function(){return r.h1(function(){return r.format("name-is-closed",{name:i})}),o?r.format("deleting"):(n&&r.p(function(){return r.a(".js-reopen",{href:"#"},function(){return r.format("reopen")})}),t&&r.p({style:"margin-top: 64px"},function(){return r.a(".quiet.js-delete",{href:"#"},function(){return r.format("permanently-delete-board")})}),n||t?void 0:r.p(function(){return r.format("you-re-a-member-of-this-board-but-only-board-admins-are-able-to-re-open-it")}))})})},{}],674:[function(e,t,n){var r;r=e(491)("board_desc"),t.exports=function(){return r.div(".window-header.u-clearfix",function(){return r.span(".window-header-icon.icon-lg.icon-board"),r.div({class:"window-title non-empty u-inline "+r.mustacheBlock("__own",function(){return" editable "})+" ",attr:"name"},function(){return r.h2(".window-title-text.current.hide-on-edit",function(){return r.text(r.mustacheVar("name"))}),r.mustacheBlock("__own",function(){return r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})}),r.div(".edit.edit-heavy",function(){return r.textarea(".field.single-line",{type:"text"})})})})}),r.div(".window-main-col.window-main-col-full",function(){return r.div({class:"board-description u-clearfix"+r.mustacheBlock("__ed",function(){return" editable"}),attr:"desc"},function(){return r.div(".current.markeddown.hide-on-edit.u-bottom",function(){return r.mustacheBlockInverted("hasDesc",function(){return r.p(".u-bottom",function(){return r.mustacheBlock("__ed",function(){return r.a(".quiet.empty",{style:"padding: 100px 0;",href:"#"},function(){return r.format("no-description-click-to-edit")})}),r.mustacheBlockInverted("__ed",function(){return r.span(".quiet.empty",{style:"padding: 100px 0;"},function(){return r.format("no-description")})})})})}),r.mustacheBlock("__ed",function(){return r.mustacheBlock("hasDesc",function(){return r.p(".u-bottom.js-edit-desc",function(){return r.a(".quiet-button.mod-with-image.hide-on-edit",{href:"#"},function(){return r.icon("edit","edit-the-board-description",{class:"quiet-button-icon"})})})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})}),r.div(".board-description-edit.edit",function(){return r.p(".helper",function(){return r.format("markdown-accepted")}),r.textarea(".field")})})})})}},{}],675:[function(e,t,n){var r;r=e(491)("board_header"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d;return t=e.canRename,c=e.orgLogoUrl,l=e.orgLogoUrl2x,i=e.hasBusinessClass,u=e.orgDisplayName,a=e.name,d=e.orgName,s=e.isLoggedIn,n={"board-header-btn":!0,"board-header-btn-name":!0,"js-rename-board":t,"no-edit":!t,"board-header-btn-name-with-org-logo":c},o={"board-header-btn":!0,"board-header-btn-org-name":!0,"js-open-org-menu":!0,"board-header-btn-without-icon":!i},r.a({href:"#",class:r.classify(n)},function(){return c&&r.img({class:"board-header-btn-name-org-logo",src:c,srcSet:c+" 1x, "+l+" 2x"}),r.span(".board-header-btn-text",{dir:"auto"},function(){return r.text(a)})}),u&&r.a({href:"/"+d,class:r.classify(o)},function(){return i&&r.icon("business-class",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text",function(){return r.text(u)})}),r.div(".board-header-btns.mod-left",function(){return s&&r.a(".board-header-btn.js-star-board",{href:"#",title:r.l("click-to-star-or-unstar-this-board-starred-boards-show-up-at-the-top-of-your-boards-list"),"aria-label":r.l("star-or-unstar-board")},function(){return r.icon("star",{class:"board-header-btn-icon"})}),r.a(".board-header-btn.hide.js-open-desc.js-fill-desc",{href:"#"},function(){return r.icon("description",{class:"board-header-btn-icon"})}),r.a(".board-header-btn.perms-btn.js-change-vis",{href:"#",id:"permission-level"})}),r.div(".board-header-btns.mod-right",function(){return r.a(".board-header-btn.board-header-btn-filter-indicator.hide.js-filter-cards-indicator",{href:"#"},function(){return r.icon("filter",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("filtering-is-on")}),r.icon("close",{class:"board-header-btn-icon-close js-filter-card-clear"})}),r.a(".board-header-btn.sub-btn.hide.js-board-header-subscribed",{href:"#"},function(){return r.icon("subscribe",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("subscribed")})}),r.a(".board-header-btn.calendar-btn.hide.js-calendar",{href:"#"},function(){return r.icon("calendar",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("calendar")})}),r.span(".js-plugin-header-btns"),r.a(".board-header-btn.mod-show-menu.js-show-sidebar",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"board-header-btn-icon"}),r.span(".board-header-btn-text.u-text-underline",function(){return r.format("show-menu")})})})})},{}],676:[function(e,t,n){var r;r=e(491)("board_header_permissions"),t.exports=r.renderable(function(e){var t,n,o;return n=e.permIconClass,o=e.permText,r.span({class:r.classify((t={"board-header-btn-icon":!0,"icon-sm":!0},t["icon-"+n]=!0,t))}),r.span(".board-header-btn-text",function(){return r.text(o)})})},{}],677:[function(e,t,n){var r;r=e(491)("board_member_profile"),t.exports=function(){return r.div(".window-header.u-clearfix",function(){return r.span(".window-header-icon.icon-lg.icon-activity"),r.h2(".window-title",function(){return r.text(r.mustacheVar("fullName")),r.span(".quiet",{style:"margin-left: 3px"},function(){return r.format("username",{username:r.mustacheVar("username")})})})}),r.div(".window-main-col.window-main-col-full",function(){return r.div(".list-actions",function(){return r.p(".js-board-member-profile-no-activity",function(){return r.format("this-member-has-no-board-activity")})}),r.a(".show-more.js-more-actions",{href:"#"},function(){return r.format("load-more-activity")})})}},{}],678:[function(e,t,n){var r;r=e(491)("board_menu_activity"),t.exports=function(){return r.div(".segmented-control",function(e){return function(){return r.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},function(){return r.format("all")}),r.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},function(){return r.format("comments")})}}(this)),r.div(".phenom-list.js-list-activity"),r.a(".show-more.js-more-actions",{href:"#"},function(e){return function(){return r.format("load-more-activity")}}(this))}},{}],679:[function(e,t,n){var r;r=e(491)("board_menu_commenting"),t.exports=function(){return r.li(function(){return r.a(".js-select",{href:"#",name:"disabled"},function(){return r.check(r.mustacheVar("comments_disabled"),"disabled"),r.span(".sub-name",function(){return r.format("no-one-is-allowed-to-comment")})})}),r.li(function(){return r.a(".js-select",{href:"#",name:"members"},function(){return r.check(r.mustacheVar("comments_members"),"members"),r.span(".sub-name",function(){return r.format("allow-admins-and-normal-members-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("comments_showObservers",function(){return" disabled"}),name:"observers"},function(){return r.check(r.mustacheVar("comments_observers"),"members-and-observers"),r.span(".sub-name",function(){return r.format("allow-admins-normal-members-and-observers-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("orgCanSee",function(){return" disabled"}),name:"org"},function(){return r.check(r.mustacheVar("comments_org"),"organization-members"),r.span(".sub-name",function(){return r.format("allow-admins-normal-members-observers-and-organization-members-to-comment")})})}),r.li(function(){return r.a({href:"#",class:"js-select"+r.mustacheBlockInverted("permissionLevel_public",function(){return" disabled"}),name:"public"},function(){return r.check(r.mustacheVar("comments_public"),"public-members"),r.span(".sub-name",function(){return r.format("allow-any-trello-member-to-comment")})})})}},{}],680:[function(e,t,n){var r;r=e(491)("board_menu_default"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d,p,h,m,f;for(t=e.canAssign,i=e.canInviteMembers,s=e.canJoin,f=e.selfJoin,n=e.canChangeBackground,o=e.canEnablePowerUps,a=e.hasBCPowerUps,u=e.hasGoldPowerUps,r.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){return r.format("file-too-large-10mb-limit")}),m=[{key:"members",jsClass:"js-list-members"},{key:"team-members",jsClass:"js-list-team-members"},{key:"invited-members",jsClass:"js-list-invited-members"},{key:"non-team-members",jsClass:"js-list-non-team-members"},{key:"observers",jsClass:"js-list-observers"},{key:"deactivated-members",jsClass:"js-deactivated-members"}],c=0,p=m.length;p>c;c++)h=m[c],d=h.key,l=h.jsClass,r.div(".board-menu-member-section."+l,function(){return r.div(".board-menu-member-section-header.js-heading",function(){return r.format(d)}),r.div(".u-clearfix.js-list",{class:r.classify({"js-list-draggable-board-members":t})})});return r.div(".board-members-extras-button.u-clearfix.js-show-extra-members-button",function(){return r.a(".quiet-button.js-show-extra-members",{href:"#"},function(){return r.format("show-hidden-members")})}),r.div(".board-members-extras-button.u-clearfix.js-hide-extra-members-button",function(){return r.a(".quiet-button.js-hide-extra-members",{href:"#"},function(){return r.format("show-fewer-members")})}),i&&r.a(".button-link.mod-full.js-open-manage-board-members",{href:"#"},function(){return r.icon("add-member","add-members-ellipsis")}),s&&(r.a(".button-link.js-join-board",{href:"#",style:"margin-bottom: 0;"},function(){return r.icon("add-member","join-board")}),f&&r.p(".helper",{style:"margin-top: 8px;"},function(){return r.format("org-members-can-join-this-board")})),r.hr(),r.ul(".board-menu-navigation",function(){return n&&r.li(".board-menu-navigation-item.mod-background",function(){return r.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},function(){return r.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),r.raw("&nbsp;"),r.format("change-background")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-card-filter",{
href:"#"},function(){return r.icon("filter","filter-cards",{class:"board-menu-navigation-item-link-icon"})})}),o&&(r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},function(){return r.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),r.raw("&nbsp;"),a?r.icon("business-class",{class:"icon-business-class-color"}):u&&r.icon("trello-gold",{class:"icon-trello-gold-color"}),r.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count"),r.span(".board-menu-navigation-item-new.js-power-up-new",function(){return r.format("new")}),r.span(".board-menu-navigation-item-link-warning.js-power-up-disable-timer")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},function(){return r.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})})})),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},function(){return r.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"})})})}),r.hr(),r.a(".board-menu-section-header.js-open-activity",{href:"#"},function(){return r.span(".board-menu-section-header-icon.icon-lg.icon-activity"),r.span(".board-menu-section-header-title",function(){return r.format("activity")}),r.span(".board-menu-section-header-count.js-unread-activity-count")}),r.div(".js-menu-action-list"),r.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"})})},{}],681:[function(e,t,n){var r;r=e(491)("board_menu_email"),t.exports=r.renderable(function(e){var t,n,o,i,s,a;return t=e.commentsEnabled,n=e.email,o=e.listName,i=e.lists,s=e.position,a=e.positionName,t?(r.label({for:"boardEmail"},function(){return r.format("your-email-address-for-this-board")}),r.input(".non-empty.js-autofocus",{id:"boardEmail",type:"text",name:"boardEmail",readonly:"readonly",placeholder:r.l("loading-ellipsis"),value:n,style:"margin: 4px 0 8px;"}),r.a(".quiet-button.js-generate-address",{href:"#"},function(){return r.format("generate-a-new-email-address")}),r.a(".quiet-button.js-send-address",{href:"#"},function(){return r.format("email-me-this-address")}),r.hr(),r.label(function(){return r.format("your-emailed-cards-appear-in-ellipsis")}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-twothirds",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value",function(){return r.text(o)}),r.label(function(){return r.format("list")}),r.select(".js-select-list",function(){var e,t,n,o,s,a,u;for(a=[],e=0,n=i.length;n>e;e++)s=i[e],t=s.id,o=s.name,u=s.selected,a.push(r.optionSelected(u,{value:t},function(){return r.text(o)}));return a})}),r.div(".button-link.setting.form-grid-child.form-grid-child-third",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value",function(){return r.text(a)}),r.label(function(){return r.format("position")}),r.select(".js-select-position",function(){return r.optionSelected("top"===s,{value:"top"},function(){return r.format("top")}),r.optionSelected("bottom"===s,{value:"bottom"},function(){return r.format("bottom")})})})}),r.hr(),r.p(".u-bottom.quiet",function(){return r.format("tip-dont-share-this-email-address-anyone-who-has-it-can-add-cards-as-you-when-composing-emails-the-card-title-goes-in-the-subject-and-the-card-description-in-the-body-more-email-formatting-tips")})):(r.p(function(){return r.format("requires-comments-enabled")}),void r.p(function(){return r.format("enabled-by-enabling-comments")}))})},{}],682:[function(e,t,n){var r;r=e(491)("board_menu_invitations"),t.exports=function(){return r.li(function(){return r.a(".js-select",{href:"#",name:"admins"},function(){return r.check(r.mustacheVar("invitations_admins"),"admins"),r.span(".sub-name",function(){return r.format("allow-only-admins-to-add-and-remove-others")})})}),r.li(function(){return r.a(".js-select",{href:"#",name:"members"},function(){return r.check(r.mustacheVar("invitations_members"),"all-members"),r.span(".sub-name",function(){return r.format("allow-members-and-admins-to-add-and-remove-others")})})})}},{}],683:[function(e,t,n){var r;r=e(491)("board_menu_more"),t.exports=function(){return r.ul(".board-menu-navigation",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},function(){return r.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},function(){return r.icon("label","labels",{class:"board-menu-navigation-item-link-icon"})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},function(){return r.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})})})}),r.hr(),r.ul(".board-menu-navigation",function(){return r.mustacheBlock("editableByMember",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-email",{href:"#"},function(){return r.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"})})})}),r.mustacheBlock("__loggedIn",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},function(){return r.icon("subscribe",{class:"board-menu-navigation-item-link-icon"}),r.raw("&nbsp;"),r.span(".js-subscribed-state")})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},function(){return r.icon("board","copy-board",{class:"board-menu-navigation-item-link-icon"})})})}),r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-share",{href:"#"},function(){return r.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})})})}),r.mustacheBlock("canCloseOrLeave",function(){return r.hr(),r.ul(".board-menu-navigation",function(){return r.mustacheBlock("canCloseBoard",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},function(){return r.format("close-board-ellipsis")})})}),r.mustacheBlock("canLeaveBoard",function(){return r.li(".board-menu-navigation-item",function(){return r.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},function(){return r.format("leave-board-ellipsis")})})})})}),r.hr(),r.form(".u-gutter",function(){return r.label({for:"id-short-url"},function(){return r.format("link-to-this-board")}),r.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:r.mustacheVar("shortUrl")}),r.p(".quiet",function(){return r.span({class:"icon-sm icon-"+r.mustacheVar("pLevelClass"),title:r.mustacheVar("pLevelAltText")}),r.text(r.mustacheVar("helperText"))})})}},{}],684:[function(e,t,n){var r;r=e(491)("board_menu_more_activity_button"),t.exports=function(){return r.mustacheBlockInverted("hasCount",function(e){return function(){return r.format("view-all-activity-ellipsis")}}(this)),r.mustacheBlock("hasCount",function(e){return function(){return r.format("view-all-unread-activity-count-ellipsis",{count:r.mustacheVar("count")})}}(this))}},{}],685:[function(e,t,n){var r;r=e(491)("board_menu_settings"),t.exports=function(){return r.ul(".pop-over-list.inset",function(e){return function(){return r.li(function(){return r.a({class:"js-change-org"+r.mustacheBlockInverted("canChangeOrg",function(){return" disabled"}),href:"#"},function(){return r.mustacheBlock("setOrgNull",function(){return r.format("remove-from-organization")}),r.mustacheBlockInverted("setOrgNull",function(){return r.format("change-organization-ellipsis")}),r.mustacheBlock("orgDisplayName",function(){return r.span(".sub-name",function(){return r.text(r.mustacheVar("orgDisplayName"))})})})}),r.hr(),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-toggle-covers"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.mustacheBlockInverted("cardCovers",function(){return r.format("enable-card-cover-images")}),r.mustacheBlock("cardCovers",function(){return r.format("card-cover-images-enabled"),r.icon("check")}),r.span(".sub-name",function(){return r.format("show-images-on-front-of-cards")})})}),r.hr(),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-change-comments"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:r.mustacheVar("commentsDisplay")})})}),r.li(function(){return r.a({class:r.mustacheBlock("__own",function(){return"js-change-add-members"})+r.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return r.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:r.mustacheVar("invitationsDisplay")})})}),r.hr(),r.li(function(){return r.a({class:" "+r.mustacheBlock("__own",function(){return" js-toggle-org-mem-join "})+" "+r.mustacheBlockInverted("__own",function(){return" disabled "})+" "+r.mustacheBlockInverted("hasOrg",function(){return" disabled "})+" "+r.mustacheBlock("permissionLevel_private",function(){return" disabled "})+" ",href:"#"},function(){return r.check(r.mustacheVar("selfJoin_true"),"allow-org-members-to-join"),r.span(".sub-name",function(){return r.mustacheBlock("hasOrg",function(){return r.mustacheBlock("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-cant-be-private")})}),r.mustacheBlock("hasOrg",function(){return r.mustacheBlockInverted("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited")})}),r.mustacheBlockInverted("hasOrg",function(){return r.mustacheBlock("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org-and-the-board-cant-be-private")})}),r.mustacheBlockInverted("hasOrg",function(){return r.mustacheBlockInverted("permissionLevel_private",function(){return r.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org")})})})})})}}(this))}},{}],686:[function(e,t,n){var r;r=e(491)("board_menu_subscribed_state"),t.exports=function(){return r.check(r.mustacheVar("subscribed"),"subscribe")}},{}],687:[function(e,t,n){var r;r=e(491)("board_menu_vis"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b;n=e.current,u=e.isNewBoard,t=e.canChange,c=e.mustChange,i=e.hasSuperAdmins,o=e.hasOrg,d=e.orgName,f=e.privateRestricted,p=e.orgRestricted,g=e.publicRestricted,c&&d&&r.p(".quiet",function(){return r.format("illegal org visibility",{orgName:d})}),l=i?"with super admins":o?"with organization":"without organization",m={private:{iconClass:"icon-private",restricted:f},org:{iconClass:"icon-organization",restricted:p,invalid:u&&!o},public:{iconClass:"icon-public",restricted:g}},b=[];for(h in m)v=m[h],y=v.restricted,a=v.invalid,s=v.iconClass,b.push(r.li(function(){var e;return e=y||a||!t,r.a(".js-select",{class:r.classify({"light-hover":!e,disabled:e}),href:"#",name:h},function(){return r.span(".icon-sm.vis-icon",{class:s},function(){}),r.check(n===h,h),r.span(".sub-name",function(){var e;return e=null!=d?{orgName:d}:{},r.format(["permission subtext",l,h],e),t&&y?(r.raw(" "),r.span(".error",function(){return u?r.format(["illegal visibility","create"]):r.format(["illegal visibility","change"])})):void 0})})}));return b})},{}],688:[function(e,t,n){var r;r=e(491)("board_new"),t.exports=function(){return r.form(function(){return r.label({for:"boardNewTitle"},function(){return r.format("title")}),r.input(".non-empty.js-autofocus",{id:"boardNewTitle",type:"text",name:"name",placeholder:r.mustacheVar("placeholder"),value:r.mustacheVar("name"),dir:"auto"}),r.div({class:r.mustacheBlock("hideOrg",function(){return"hide"})},function(){return r.div(".u-clearfix",function(){return r.label(".u-float-left",{style:"margin-right: 8px;"},function(){return r.format("organization")}),r.mustacheBlock("canAddToOrgs",function(){return r.a(".icon-sm.icon-information.dark-hover.js-helper-add-org",{href:"#"})})}),r.mustacheBlockInverted("canAddToOrgs",function(){return r.p(".quiet",{style:"margin-bottom: 16px;"},function(){return r.format("organization-whisk-n-tsk"),r.text(" "),r.a(".js-create-org",{href:"#"},function(){return r.format("create-an-organization")})})}),r.select({name:"org-id",class:r.mustacheBlockInverted("canAddToOrgs",function(){return"hide"})},function(){return r.option({value:""},function(){return r.format("none")}),r.mustacheBlock("orgs",function(){return r.optionSelected(r.mustacheVar("selectOrg"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("displayName"))})})})}),r.input({type:"hidden",name:"permissionLevel",value:r.mustacheVar("pLevel")}),r.p(".quiet.js-vis-display"),r.ul(".pop-over-list.js-vis-chooser.hide"),r.p(".error.u-bottom.js-no-valid-org-privs.u-clearfix.hide"),r.mustacheBlock("isCopyBoard",function(){return r.div(".check-div.u-clearfix",{style:"margin-top: 10px;"},function(){return r.input({type:"checkbox",id:"idKeepCards",name:"cards",checked:!0}),r.label({for:"idKeepCards"},function(){return r.format("keep-cards")})}),r.p(".quiet",function(){return r.format("activity-and-members-will-not-be-copied")}),r.mustacheBlock("willRemovePowerUps",function(){return r.p(".quiet",function(){return r.format("power-ups-will-not-be-copied")})})}),r.input(".primary.wide.js-submit.disabled",{type:"submit",value:r.l("create")})})}},{}],689:[function(e,t,n){var r;r=e(491)("board_new_vis"),t.exports=function(){return r.format("this-board-will-be-visdisplaytext",{visIconClass:r.mustacheVar("visIconClass"),visDisplayText:r.mustacheVar("visDisplayText")}),r.text(" "),r.a(".js-change-vis",{href:"#"},function(){return r.format("change")})}},{}],690:[function(e,t,n){var r;r=e(491)("board_observer_count"),t.exports=function(){return r.a(".quiet-button.js-show-observers",{href:"#",style:"margin: 4px 0 0;"},function(){return r.text(r.mustacheVar("localizedObserverCount"))})}},{}],691:[function(e,t,n){var r;r=e(491)("board_sidebar"),t.exports=function(){return r.div(".board-menu-header.js-board-menu-title",function(){return r.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:r.l("go-back")}),r.h3(".board-menu-header-title.js-board-menu-title-text"),r.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:r.l("close-the-board-menu")}),r.hr(".board-menu-header-divider")}),r.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")}},{}],692:[function(e,t,n){var r;r=e(491)("boards_page_add_org_button"),t.exports=function(){return r.div(".boards-page-board-section.u-clearfix",function(){return r.a(".quiet-button.u-float-left.js-add-org-boards-page",{href:"#"},function(){return r.format("create-a-new-organization-ellipsis")})})}},{}],693:[function(e,t,n){var r;r=e(491)("boards_sidebar"),t.exports=r.renderable(function(){return r.div(".boards-drawer-header",function(){return r.h3(function(){return r.format("boards")})}),r.div(".board-drawer-content.u-fancy-scrollbar",function(){return r.input(".js-search-boards",{type:"text",placeholder:r.l("find-boards-by-name-ellipsis")}),r.div(".js-board-drawer-boards"),r.div(".js-board-drawer-buttons")})})},{}],694:[function(e,t,n){var r;r=e(491)("boards_sidebar"),t.exports=r.renderable(function(){return r.p(".quiet.u-text-align-center.hide",{style:"margin: 6px 4px 0 0; padding: 8px 12px;"},function(){return r.format("no-boards")}),r.div(".starred-sidebar-boards-list.js-starred-boards"),r.div(".js-recent-boards"),r.div(".js-all-boards")})},{}],695:[function(e,t,n){var r;r=e(491)("boards_sidebar"),t.exports=r.renderable(function(){return r.a(".quiet-button.js-add-board",{href:"#"},function(){return r.format("create-new-board-ellipsis")}),r.a(".quiet-button.hide.js-pin",{href:"#"},function(){return r.format("always-keep-this-menu-open")}),r.a(".quiet-button.hide.js-unpin",{href:"#"},function(){return r.format("don-t-keep-this-menu-open")}),r.a(".quiet-button.js-open-closed-boards",{href:"#"},function(){return r.format("see-closed-boards-ellipsis")})})},{}],696:[function(e,t,n){var r;r=e(491)("boards_sidebar"),t.exports=r.renderable(function(){return r.ul(".sidebar-boards-list.js-board-results")})},{}],697:[function(e,t,n){var r;r=e(491)("boards_sidebar"),t.exports=r.renderable(function(){return r.a(".quiet-button.js-add-board-with-name",{href:"#"})})},{}],698:[function(e,t,n){var r,o;o=e(491)("calendar_day"),r=function(){return o.div({class:"calendar-day js-expand-day "+o.mustacheBlock("isToday",function(){return"today"})},function(){return o.div(".day-header.u-clearfix.js-toggle-day",function(){return o.h3(".date",function(){return o.text(o.mustacheVar("date"))}),o.div(".quiet.num-cards",function(){return o.div(".day-cards-header")}),o.a(".close-button.icon-sm.icon-close.dark-hover",{href:"#"})}),o.div(".calendar-day-list.js-calendar-sortable.u-fancy-scrollbar"),o.mustacheBlock("__ed",function(){return o.a(".calendar-card-composer.quiet-button.js-open-card-composer",{href:"#"},function(){return o.format("add-a-card-ellipsis")})})})},t.exports=function(){return o.mustacheVar("monthView")?o.div(".calendar-day-spacer-div",r):r()}},{}],699:[function(e,t,n){var r;r=e(491)("calendar_day_list_header"),t.exports=function(){return r.span(".calendar-list-header",{name:r.mustacheVar("listID")},function(){return r.icon("list"),r.text(" "),r.text(r.mustacheVar("listName"))})}},{}],700:[function(e,t,n){var r;r=e(491)("calendar_month"),t.exports=function(){return r.table(".calendar-table")}},{}],701:[function(e,t,n){var r;r=e(491)("calendar_toolbar"),t.exports=function(){return r.div(".calendar-header",function(){return r.div(".calendar-header-toolbar",function(){return r.h2(".calendar-header-toolbar-title.js-calendar-header"),r.div(".calendar-header-toolbar-today",function(){return r.a(".button-link.today-button.js-today",{href:"#"},function(){return r.format("today")})}),r.div(".calendar-header-toolbar-nav",function(){return r.a(".button-link.js-left-arrow.left-arrow",{href:"#"},function(){return r.icon("up")}),r.a(".button-link.js-right-arrow.right-arrow",{href:"#"},function(){return r.icon("down")})}),r.div(".calendar-header-toolbar-close",function(){return r.a(".icon-lg.icon-close.dark-hover.js-close-calendar",{href:"#"})}),r.div(".calendar-header-toolbar-type",function(){return r.a(".button-link.js-week-view.week-button",{href:"#"},function(){return r.format("week")}),r.a(".button-link.js-month-view.month-button",{href:"#"},function(){return r.format("month")})})}),r.div(".days-of-week",function(){return r.mustacheBlock("days",function(){return r.div(".quiet",function(){return r.text(r.mustacheVar("."))})})})}),r.div(".calendar-content")}},{}],702:[function(e,t,n){var r;r=e(491)("calendar_week"),t.exports=function(){return r.div(".week-horizontal-canvas")}},{}],703:[function(e,t,n){var r;r=e(491)("cant_add_board_to_org"),t.exports=function(){return r.p(".quiet",function(){return r.mustacheBlock("isOrgAdmin",function(){return r.format("organization-displayname-does-not-allow-new-boards-you-can-change-this-on-the-organization-settings-page-by-clicking-on-board-creation-restrictions",{"organization.displayName":r.mustacheVar("organization.displayName"),orgSettingsUrl:r.mustacheVar("orgSettingsUrl")})}),r.mustacheBlockInverted("isOrgAdmin",function(){return r.format("organization-displayname-does-not-allow-new-boards-only-an-admin-of-the-organization-can-change-this-setting",{"organization.displayName":r.mustacheVar("organization.displayName")})})})}},{}],704:[function(e,t,n){var r;r=e(491)("card_attach_links"),t.exports=r.renderable(function(e){return r.div(".card-attach-link-list",function(){var t,n,o,i,s,a,u,c;for(a=[],o=0,i=e.length;i>o;o++)s=e[o],c=s.url,u=s.text,n=s.domain,t=s.attached,a.push(r.div(".card-attach-link-list-item",{class:r.classify({attached:t})},function(){return r.div(".card-attach-link-list-item-title",function(){return u?r.text(u):r.format("link to domain",{domain:n})}),r.div(".card-attach-link-list-item-url.quiet",function(){return r.text(c)}),t?r.div(".card-attach-link-list-item-attached.quiet",function(){return r.span(".icon-lg.icon-check")}):r.button(".card-attach-link-list-item-attach.js-attach",{"data-url":c,"data-text":u},function(){return r.format("attach")})}));return a})})},{}],705:[function(e,t,n){var r;r=e(491)("card_composer_inline"),t.exports=function(){return r.div(".list-card.js-composer",function(){return r.div(".list-card-details.u-clearfix",function(){return r.div(".list-card-labels.u-clearfix.js-list-card-composer-labels"),r.textarea(".list-card-composer-textarea.js-card-title",{dir:"auto"},function(){return r.text(r.mustacheVar("title"))}),r.div(".list-card-members.js-list-card-composer-members")})}),r.div(".cc-controls.u-clearfix",function(){return r.div(".cc-controls-section",function(){return r.input(".primary.confirm.mod-compact.js-add-card",{type:"submit",value:r.l("add")}),r.a(".icon-lg.icon-close.dark-hover.js-cancel",{href:"#"})}),r.div(".cc-controls-section.mod-right",function(){return r.a(".icon-lg.icon-overflow-menu-horizontal.dark-background-hover.js-cc-menu",{href:"#"})})})}},{}],706:[function(e,t,n){var r;r=e(491)("card_copy"),t.exports=function(){return r.mustacheBlock("loading",function(){return r.div(".spinner.loading.js-loading-card-actions")}),r.mustacheBlockInverted("loading",function(){return r.form(function(){return r.label(function(){return r.format("title")}),r.textarea(".js-autofocus",{name:"name",style:"margin-bottom: 12px;"},function(){return r.text(r.mustacheVar("name"))}),r.mustacheBlock("hasStuff",function(){return r.p({style:"margin-bottom: 4px;"},function(){return r.strong(function(){return r.format("keep-ellipsis")})}),r.mustacheBlock("hasChecklists",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepChecklists",type:"checkbox",name:"checklists",checked:!0}),r.label({for:"idKeepChecklists"},function(){return r.format("checklists-numchecklists",{numChecklists:r.mustacheVar("numChecklists")})})})}),r.mustacheBlock("hasLabels",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepLabels",type:"checkbox",name:"labels",checked:!0}),r.label({for:"idKeepLabels"},function(){return r.format("labels-numlabels",{numLabels:r.mustacheVar("numLabels")})})})}),r.mustacheBlock("hasMembers",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepMembers",type:"checkbox",name:"members",checked:!0}),r.label({for:"idKeepMembers"},function(){return r.format("members-nummembers",{numMembers:r.mustacheVar("numMembers")})})})}),r.mustacheBlock("hasAttachments",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepAttachments",type:"checkbox",name:"attachments",checked:!0}),r.label({for:"idKeepAttachments"},function(){return r.format("attachments-numattachments",{numAttachments:r.mustacheVar("numAttachments")})})})}),r.mustacheBlock("hasComments",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepComments",type:"checkbox",name:"comments",checked:!0}),r.label({for:"idKeepComments"},function(){return r.format("comments-numcomments",{numComments:r.mustacheVar("numComments")})})})}),r.mustacheBlock("hasStickers",function(){return r.div(".check-div.u-clearfix",function(){return r.input({id:"idKeepStickers",type:"checkbox",name:"stickers",checked:!0}),r.label({for:"idKeepStickers"},function(){return r.format("stickers-numstickers",{numStickers:r.mustacheVar("numStickers")})})})})}),r.br(),r.label(function(){return r.format("copy-to-ellipsis")}),r.mustachePartial("move_card_controls"),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("create-card")})})})}},{}],707:[function(e,t,n){var r,o,i;i=e(491)("card_detail"),r=e(722),o=e(781),t.exports=i.renderable(function(e){var t,n,s,a,u,c,l,d;return a=e.editable,l=e.name,t=e.canComment,c=e.me,u=e.loading,d=e.showActions,n=e.canSubscribe,s=e.canToggleDetails,i.div(".window-cover.hide.js-card-cover-box.js-open-card-cover-in-viewer",function(){return i.div(".window-cover-stickers.js-display-stickers")}),i.div(".window-archive-banner.hide.js-archive-banner",function(){return i.span(".icon-lg.icon-archive.window-archive-banner-icon"),i.p(".window-archive-banner-text",function(){return i.format("this-card-is-archived")})}),i.div(".window-archive-banner.hide.js-archived-list-banner",function(){return i.span(".icon-lg.icon-archive.window-archive-banner-icon"),i.p(".window-archive-banner-text",function(){return i.format("this-card-is-in-an-archived-list")})}),i.div(".window-header",function(){var e;return i.span(".window-header-icon.icon-lg.icon-card"),e={"window-title":!0},i.div({class:i.classify(e)},function(){var e;return i.h2(".card-detail-title-assist.js-title-helper",{dir:"auto"}),e={"mod-card-back-title":!0,"js-card-detail-title-input":!0},i.textarea({class:i.classify(e),disabled:!a,dir:"auto"})}),i.div(".window-header-inline-content.hide.quiet.js-current-list"),i.div(".window-header-inline-content.hide.js-subscribed-indicator-header",function(){return i.icon("subscribe")})}),i.div(".window-main-col",function(){return i.div(".card-detail-data.u-gutter",function(){return i.div(".card-detail-item.u-clearfix.hide.js-card-detail-members",function(){return i.h3(".card-detail-item-header",function(){return i.format("members")}),i.div(".js-card-detail-members-list")}),i.div(".card-detail-item.card-detail-item-labels.u-clearfix.hide.js-card-detail-labels",function(){return i.h3(".card-detail-item-header",function(){return i.format("labels")}),i.div(".u-clearfix.js-card-detail-labels-list")}),i.div(".card-detail-item.hide.js-card-detail-due-date",function(){return i.h3(".card-detail-item-header",function(){return i.format("due-date")}),i.span(".card-detail-badge.card-detail-due-date-badge.js-card-detail-due-date-badge",function(){return i.span(".card-detail-badge-due-date-complete-box.js-card-detail-due-date-badge-complete",function(){return i.span(".icon-sm.icon-check.card-detail-badge-due-date-complete-icon")}),i.text(" "),i.span(".js-date-text.card-detail-due-date-text")})}),i.div(".card-detail-item.hide.js-card-detail-votes",function(){return i.h3(".card-detail-item-header",function(){return i.format("votes")}),i.a(".card-detail-badge.is-clickable.js-card-detail-votes-badge.js-show-votes",{href:"#"})}),i.div(".card-detail-item.hide.js-card-detail-age",function(){return i.h3(".card-detail-item-header",function(){return i.format("last-updated")}),i.div(".card-detail-badge.date.mod-last-updated.js-card-detail-age-badge")}),i.div(".js-plugin-badges"),i.div({class:i.classify({"card-detail-item":!0,"card-detail-item-block":!0,"u-clearfix":!0,editable:a}),attr:"desc"},function(){return i.h3(".card-detail-item-header.hide.js-show-with-desc",function(){return i.format("description")}),a&&i.a(".card-detail-item-header-edit.hide-on-edit.js-show-with-desc.js-edit-desc",{href:"#"},function(){return i.format("edit")}),i.div(".description-content.js-desc-content",function(){return i.div(".description-content-fade-button",function(){return i.span(".description-content-fade-button-text",function(){return i.format("show-full-description")})}),i.div(".current.markeddown.hide-on-edit.js-card-desc.js-show-with-desc.hide",{dir:"auto"}),a?(i.p(".u-bottom",function(){return i.a(".quiet-button.mod-with-image.hide-on-edit.js-edit-desc.js-hide-with-desc",{href:"#"},function(){return i.icon("description","edit-the-description-ellipsis",{class:"quiet-button-icon"})})}),i.div(".card-detail-edit.edit",function(){return i.a(".helper.js-format-help",{href:"#"},function(){return i.format("formatting-help")}),i.textarea(".field")}),i.p(".edits-warning.quiet",function(){return i.format("you-have-unsaved-edits-on-this-field"),i.text(" "),i.a(".js-view-edits",{href:"#"},function(){return i.format("view-edits")}),i.text(" - "),i.a(".js-discard-edits",{href:"#"},function(){return i.format("discard")})}),i.p(".edits-error.error",function(){return i.format("edit-not-saved")})):void 0})})}),i.div(".js-plugin-sections"),i.div(".window-module.js-attachments-section.u-clearfix.hide",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-attachment"),i.h3(".u-inline-block",function(){return i.format("attachments")})}),i.div(".u-gutter",function(){return i.div(".u-clearfix.js-attachment-list"),i.p(".js-show-fewer-attachments.hide",function(){return i.a(".quiet-button.js-view-some-attachments",{href:"#"},function(){return i.format("show-fewer-attachments")})}),i.p(".js-show-more-attachments.hide",function(){return i.a(".quiet-button.js-view-all-attachments",{href:"#"})}),a?i.p(function(){return i.a(".quiet-button.js-attach",{href:"#"},function(){return i.format("add-an-attachment-ellipsis")})}):void 0})}),i.div(".checklist-list.window-module.js-checklist-list.js-no-higher-edits"),t&&i.div(".window-module.add-comment-section",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-comment"),i.h3(function(){return i.format("add-comment")}),i.span(".editing-members.js-editing-members.hide")}),i.div(".new-comment.js-new-comment",function(){return c&&i.div(".member.member-no-menu",function(){return o(c)}),i.form(function(){return i.div(".comment-frame",function(){return i.div(".comment-box",function(){return i.textarea(".comment-box-input.js-new-comment-input",{placeholder:i.l("write-a-comment-ellipsis"),tabindex:"1",dir:"auto"}),r(a)})}),i.div(".comment-controls.u-clearfix",function(){return i.input(".primary.confirm.mod-no-top-bottom-margin.js-add-comment",{disabled:"disabled",type:"submit",value:i.l("send"),tabindex:"3"})})}),i.div(".comment-too-long-warning",function(){return i.p(function(){return i.format("your-comment-is-too-long-you-can-add-it-as-a-text-attachment-or-truncate-it")}),i.input(".primary.js-attach-comment",{type:"submit",value:i.l("add-as-an-attachment"),tabindex:4}),i.input(".js-truncate-comment",{type:"submit",value:i.l("truncate"),tabindex:5})})})}),i.div(".window-module",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-activity"),i.h3(function(){return i.format("activity")}),s?i.div(".window-module-title-options",function(){return i.a(".quiet.hide.js-show-details",{href:"#"},function(){return i.format("show-details")}),i.a(".quiet.hide.js-hide-details",{href:"#"},function(){return i.format("hide-details")})}):void 0}),i.div(".js-list-actions"),u&&i.div(".spinner.loading.js-loading-card-actions"),i.p(".u-bottom",function(){return i.a(".show-more.hide.js-show-all-actions",{href:"#"},function(){return i.format("show-all-actions-ellipsis")})})})}),i.div(".window-sidebar",function(){return a&&i.div(".window-module.u-clearfix",function(){return i.h3(function(){return i.format("add")}),i.div(".u-clearfix",function(){return i.a(".button-link.js-change-card-members",{href:"#"},function(){return i.icon("member","members")}),i.a(".button-link.js-edit-labels",{href:"#"},function(){return i.icon("label","labels")}),i.a(".button-link.js-add-checklist-menu",{href:"#"},function(){return i.icon("checklist","checklist")}),i.a(".button-link.js-add-due-date",{href:"#"},function(){return i.icon("clock","due-date")}),i.a(".button-link.js-attach",{
href:"#"},function(){return i.icon("attachment","attachment")})})}),i.div(".js-plugin-buttons"),a?i.div(".window-module.other-actions.u-clearfix",function(){return i.h3(function(){return i.format("actions")}),i.div(".u-clearfix",function(){return i.a(".button-link.js-move-card",{href:"#"},function(){return i.icon("move","move")}),i.a(".button-link.js-copy-card",{href:"#"},function(){return i.icon("card","copy")}),i.div(".js-subscribe-sidebar-button"),i.div(".js-vote-sidebar-button"),i.hr(),i.a(".button-link.js-archive-card",{href:"#"},function(){return i.icon("archive","archive")}),i.a(".button-link.js-unarchive-card",{href:"#"},function(){return i.icon("refresh","send-to-board")}),i.a(".button-link.negate.hide.js-delete-card",{href:"#"},function(){return i.icon("remove","delete")})})}):d&&n&&i.div(".window-module.u-clearfix",function(){return i.h3(function(){return i.format("actions")}),i.div(".u-clearfix",function(){return i.div(".js-subscribe-sidebar-button"),i.div(".js-vote-sidebar-button")})}),i.div(".window-module.u-clearfix",function(){return i.p(".quiet.u-bottom",function(){return i.a(".quiet-button.js-more-menu",{href:"#"},function(){return i.format("share-and-more-ellipsis")})})})}),i.p(".dropzone",function(){return i.format("drop-files-to-upload")})})},{}],708:[function(e,t,n){var r;r=e(491)("card_detail_add_button"),t.exports=r.renderable(function(e){var t,n;return n=e.klass,t={"card-detail-item-add-button":!0,"dark-hover":!0},t[n]=!0,r.a({class:r.classify(t)},function(){return r.icon("add")})})},{}],709:[function(e,t,n){var r;r=e(491)("card_detail_list"),t.exports=r.renderable(function(e){var t,n;return t=e.editable,n=e.listName,r.p(".u-inline-block.u-bottom",function(){return r.format("in-list"),r.text(" "),r.a({href:"#",class:r.classify({"js-open-move-from-header":t,disabled:!t})},function(){return r.text(n)})})})},{}],710:[function(e,t,n){var r;r=e(491)("card_detail_more_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-print",{href:"#"},function(){return r.format("print-ellipsis")})}),r.li(function(){return r.a(".js-export-json",{href:r.mustacheVar("jsonURL")},function(){return r.format("export-json")})})}),r.mustachePartial("meta")}},{}],711:[function(e,t,n){var r;r=e(491)("card_detail_subscribe"),t.exports=r.renderable(function(e){var t,n;return n=e.subscribed,t={"button-link":!0,"is-on":n,"js-subscribe":!n,"js-unsubscribe":n},r.a({class:r.classify(t),title:r.l("subscribe-to-the-card-to-get-notifications-when-something-changes")},function(){return r.icon("subscribe","subscribe"),r.span(".on",function(){return r.icon("check",{class:"light"})})})})},{}],712:[function(e,t,n){var r;r=e(491)("card_detail_vote_btn_sidebar"),t.exports=r.renderable(function(e){var t,n,o;return t=e.canVote,o=e.voted,t?(n={"button-link":!0,"is-on":o,"js-unvote":o,"js-vote":!o},r.a({class:r.classify(n)},function(){return r.icon("vote","vote"),r.span(".on",function(){return r.icon("check",{class:"light"})})})):void 0})},{}],713:[function(e,t,n){var r,o,i;i=e(491)("card_in_list"),r=e(768),o=e(800),t.exports=i.renderable(function(e){var t,n,s,a,u,c,l,d;return n=e.hasStickers,a=e.labels,l=e.quickEdit,s=e.idShort,c=e.name,u=e.members,d=e.showEditor,t=e.badgesHTML,i.div(".list-card-cover.js-card-cover"),d&&i.icon("edit",{class:"list-card-operation dark-hover js-open-quick-card-editor js-card-menu"}),i.div(".list-card-stickers-area",{class:i.classify({hide:!n})},function(){return i.div(".stickers.js-card-stickers")}),i.div(".list-card-details",function(){return i.div(".list-card-labels.js-card-labels",function(){var e,t,n,o;for(o=[],e=0,n=a.length;n>e;e++)t=a[e],o.push(r({name:t.name,color:t.color,extraClasses:["mod-card-front"]}));return o}),l?i.textarea(".list-card-edit-title.js-edit-card-title",{dir:"auto"},function(){return i.text(c)}):i.a(".list-card-title.js-card-name",{dir:"auto"},function(){return s&&i.span(".card-short-id.hide",function(){return i.format("idshort",{idShort:s})}),i.text(c)}),i.div(".badges",function(){return i.span(".js-badges",function(){return i.raw(t)}),i.span(".js-plugin-badges")}),i.div(".list-card-members.js-list-card-members",function(){var e,t,n,r;for(r=[],e=0,t=u.length;t>e;e++)n=u[e],r.push(o(n));return r})}),i.p(".list-card-dropzone",function(){return i.format("drop-files-to-upload")})})},{}],714:[function(e,t,n){var r;r=e(491)("card_menu_meta"),t.exports=function(){return r.hr(),r.div(function(){return r.div(function(){return r.label(function(){return r.format("link-to-this-card"),r.text(" "),r.icon(r.mustacheVar("pLevelClass"),{title:r.mustacheVar("pLevelAltText")})}),r.input(".js-short-url.js-autofocus",{type:"text",readonly:"readonly",value:r.mustacheVar("shortUrl")}),r.hr()}),r.mustacheBlock("email",function(){return r.mustacheBlock("__ed",function(){return r.div(function(){return r.label(function(){return r.format("email-for-this-card")}),r.input(".js-email",{type:"text",readonly:"readonly",value:r.mustacheVar("email")}),r.p(".quiet",{stlye:"margin: 0 4px;"},function(){return r.l("emails-sent-to-this-address-will-appear-as-a-comment-by-you-on-the-card")}),r.hr()})})}),r.div(".quiet",function(){return r.mustacheBlock("idShort",function(){return r.p({style:"display: inline-block; margin: 0 8px 0 0;"},function(){return r.format("card-idshort",{idShort:r.mustacheVar("idShort")}),r.text(" ")})}),r.p({style:"display: inline-block; margin: 0;"},function(){return r.mustacheBlock("dateAdded",function(){return r.format("added",{dateAdded:r.mustacheVar("dateAdded")})}),r.mustacheBlock("__ed",function(){return r.text(" - "),r.a(".js-delete",{href:"#"},function(){return r.format("delete")})})})})})}},{}],715:[function(e,t,n){var r;r=e(491)("card_title_on_card_front"),t.exports=function(){return r.mustacheBlock("idShort",function(){return r.span(".card-short-id.hide",function(){return r.format("idshort",{idShort:r.mustacheVar("idShort")})})}),r.text(r.mustacheVar("name"))}},{}],716:[function(e,t,n){var r;r=e(491)("change_org_vis"),t.exports=function(){return r.li(function(){return r.a(".highlight-icon.js-select-members",{href:"#"},function(){return r.icon("private","private"),r.mustacheBlock("permissionLevel_private",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("privateText"))})})}),r.li(function(){return r.a(".highlight-icon.js-select-public",{href:"#"},function(){return r.icon("public","public"),r.mustacheBlock("permissionLevel_public",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("publicText"))})})})}},{}],717:[function(e,t,n){var r;r=e(491)("checklist"),t.exports=function(){return r.div({class:"window-module-title window-module-title-no-divider u-clearfix"+r.mustacheBlock("__ed",function(){return" ed grab"})},function(){return r.span(".window-module-title-icon.icon-lg.icon-checklist"),r.mustacheBlock("__ed",function(){return r.div(".editable.non-empty.checklist-title",{attr:"name"},function(){return r.h3(".current.hide-on-edit",{dir:"auto"},function(){return r.text(r.mustacheVar("name"))}),r.div(".window-module-title-options",function(){return r.mustacheBlock("__ed",function(){return r.a(".hide.hide-on-edit.quiet.js-show-checked-items",{href:"#",style:"margin: 0 8px;"}),r.a(".hide.hide-on-edit.quiet.js-hide-checked-items",{href:"#",style:"margin: 0 8px;"},function(){return r.format("hide-completed-items")}),r.a(".hide-on-edit.quiet.js-confirm-delete",{href:"#"},function(){return r.format("delete-ellipsis")})})}),r.div(".edit.edit-heavy",function(){return r.textarea(".field.full.single-line",{dir:"auto"})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})})})}),r.mustacheBlockInverted("__ed",function(){return r.h3(function(){return r.text(r.mustacheVar("name"))})})}),r.div(".checklist-progress",function(){return r.span(".checklist-progress-percentage.js-checklist-progress-percent",function(){return r.text("0%")}),r.div(".checklist-progress-bar",function(){return r.div(".checklist-progress-bar-current.js-checklist-progress-bar")}),r.span(".checklist-completed-text.hide.quiet.js-completed-message",function(){return r.format("everything-in-this-checklist-is-complete")})}),r.div(".checklist-items-list.js-checklist-items-list.js-no-higher-edits"),r.mustacheBlock("__ed",function(){return r.div(".checklist-new-item.u-gutter.js-new-checklist-item",function(){return r.textarea(".checklist-new-item-text.js-new-checklist-item-input",{placeholder:r.l("add-an-item-ellipsis")}),r.div(".checklist-add-controls.u-clearfix",function(){return r.input(".primary.confirm.mod-submit-edit.js-add-checklist-item",{type:"submit",value:r.l("add")}),r.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-checklist-item",{href:"#"}),r.a(".checklist-add-controls-option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return r.span(".icon-lg.icon-overflow-menu-horizontal")})})})})}},{}],718:[function(e,t,n){var r;r=e(491)("checklist_add_menu"),t.exports=r.renderable(function(e){var t;return t=e.checklistCards,r.form(function(){return r.label({for:"id-checklist"},function(){return r.format("title")}),r.input(".js-checklist-title.js-autofocus",{type:"text",id:"id-checklist",value:r.l("default-checklist-name"),"data-default":r.l("default-checklist-name"),dir:"auto"}),t.length>0&&r.span(function(){return r.label({for:"js-checklist-copy-source"},function(){return r.format("copy-items-from-ellipsis")}),r.select(".js-checklist-copy-source",function(){var e,n,o,i,s,a;for(r.option({value:"",selected:!0},function(){return r.format("none")}),a=[],n=0,o=t.length;o>n;n++)s=t[n],i=s.name,e=s.checklists,a.push(r.optgroup({label:i},function(){var t,n,o,s,a;for(a=[],n=0,o=e.length;o>n;n++)s=e[n],t=s.id,i=s.name,a.push(r.option({value:t},function(){return r.text(i)}));return a}));return a})}),r.input(".primary.wide.confirm.js-add-checklist",{type:"submit",value:r.l("add")})})})},{}],719:[function(e,t,n){var r;r=e(491)("checklist_item"),t.exports=function(){return r.div({class:"checklist-item-checkbox "+r.mustacheBlock("__ed",function(){return"enabled js-toggle-checklist-item"})},function(){return r.icon("check",{class:"checklist-item-checkbox-check"})}),r.div({class:"checklist-item-details non-empty "+r.mustacheBlock("__ed",function(){return"editable"}),attr:"name"},function(){return r.p(".checklist-item-details-text.current.hide-on-edit.markeddown.js-checkitem-name"),r.mustacheBlock("__ed",function(){return r.div(".edit.delete.convert.options-menu",function(){return r.textarea(".field.full.single-line.js-checkitem-input",{type:"text"})}),r.p(".edits-warning.quiet",function(){return r.format("you-have-unsaved-edits-on-this-field"),r.text(" "),r.a(".js-view-edits",{href:"#"},function(){return r.format("view-edits")}),r.text(" - "),r.a(".js-discard-edits",{href:"#"},function(){return r.format("discard")})})})})}},{}],720:[function(e,t,n){var r;r=e(491)("closed_boards"),t.exports=function(){return r.div(".window-header",function(){return r.span(".window-header-icon.icon-lg.icon-archive"),r.h2(".window-title",function(){return r.format("closed-boards")})}),r.div(".window-main-col",function(){return r.mustacheBlockInverted("empty",function(){return r.div(".window-module.u-clearfix",function(){return r.ul(".archive-list.u-gutter.js-archive-items")})}),r.mustacheBlock("empty",function(){return r.p(".empty-list",function(){return r.format("no-boards-have-been-closed")})})}),r.div(".window-sidebar",function(){return r.p(".helper",function(){return r.format("you-have-to-have-been-a-board-admin-to-re-open-or-delete-a-closed-board")})})}},{}],721:[function(e,t,n){var r;r=e(491)("comment_edit_controls"),t.exports=function(){return r.div(".edit-controls.u-clearfix",function(){return r.div(".js-too-long-warning.hide",function(){return r.p(function(){return r.format("your-comment-is-too-long")})}),r.div(".js-is-empty-warning.hide",function(){return r.p(function(){return r.format("must-have-at-least-one-character")})}),r.input(".primary.confirm.js-save-edit",{type:"submit",value:r.l("save"),tabindex:"2"}),r.a(".js-discard-comment-edits.icon-lg.icon-close.dark-hover.cancel",{href:"#"})})}},{}],722:[function(e,t,n){var r;r=e(491)("comment_options"),t.exports=r.renderable(function(e){return r.div(".comment-box-options",function(){return e&&r.a(".comment-box-options-item.js-comment-add-attachment",{href:"#",title:r.l("add-an-attachment-ellipsis")},function(){return r.icon("attachment")}),r.a(".comment-box-options-item.js-comment-mention-member",{href:"#",title:r.l("mention-a-member-ellipsis")},function(){return r.icon("mention")}),r.a(".comment-box-options-item.js-comment-add-emoji",{href:"#",title:r.l("add-emoji-ellipsis")},function(){return r.icon("emoji")}),r.a(".comment-box-options-item.js-comment-add-card",{href:"#",title:r.l("add-card-ellipsis")},function(){return r.icon("card")})})})},{}],723:[function(e,t,n){var r;r=e(491)("confirm"),t.exports=function(){return r.p(function(){return r.mustacheVar("html")?r.raw(r.mustacheVar("html")):r.text(r.mustacheVar("text"))}),r.input(".js-confirm.full",{type:"submit",class:r.mustacheVar("confirmBtnClass"),value:r.mustacheVar("confirmText")}),r.mustacheBlock("cancelText",function(){return r.input(".js-cancel.full",{type:"submit",value:r.mustacheVar("cancelText")})})}},{}],724:[function(e,t,n){var r;r=e(491)("confirm_merge"),t.exports=function(){return r.p(function(){return r.text(r.mustacheVar("text"))}),r.ul(".pop-over-member-list.js-member"),r.input(".js-confirm.full",{type:"submit",value:r.mustacheVar("confirmText")})}},{}],725:[function(e,t,n){var r;r=e(491)("connect_failed"),t.exports=function(){return r.text(r.mustacheVar("msg")),r.br(),r.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload()"},function(){return r.format("reload-page")})}},{}],726:[function(e,t,n){var r;r=e(491)("crop_photo"),t.exports=function(){return r.img(".crop-image"),r.button(".primary.js-done",function(){return r.format("looks-good")}),r.button(".js-back",function(){return r.format("try-again-ellipsis")})}},{}],727:[function(e,t,n){var r;r=e(491)("date_picker"),t.exports=r.renderable(function(e){var t,n;return t=e.canChangePowerUps,n=e.canEnableAdditionalPowerUps,r.div(".datepicker-select.u-clearfix",function(){return r.div(".datepicker-select-date",function(){return r.label(".datepicker-select-label",function(){return r.format("date"),r.input(".datepicker-select-input.js-dpicker-date-input.js-autofocus",{type:"text",placeholder:r.l("enter-date"),tabindex:101})})}),r.div(".datepicker-select-time",function(){return r.label(".datepicker-select-label",function(){return r.format("time"),r.input(".datepicker-select-input.js-dpicker-time-input",{type:"text",placeholder:r.l("enter-time"),tabindex:102})})})}),r.div(".pickers.js-dpicker-cal"),r.div(".datepicker-confirm-btns",function(){return r.input(".primary.wide.confirm",{type:"submit",value:r.l("save"),tabindex:103}),r.button(".negate.remove-date.js-remove-date",{type:"button",tabindex:104},function(){return r.format("remove")})}),r.div(".js-enable-cal.hide",function(){return r.hr(),n?(r.p(function(){return r.a(".quiet-button.mod-with-image.js-enable-calendar-powerup",{href:"#"},function(){return r.icon("power-up","enable-the-calendar-power-up",{class:"quiet-button-icon"})})}),r.p(".u-bottom.quiet",function(){return r.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})):r.p(".u-bottom.quiet",function(){return r.format("upgrade-to-business-class-to-enable-the-calendar-power-up"),r.text(" "),r.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})}),r.div(".js-cal-enabled.hide",function(){return r.hr(),r.p(".helper",function(){return t?r.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar-to-change-calendar-settings-click-power-ups-in-the-board-menu"):r.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar")})})})},{}],728:[function(e,t,n){var r;r=e(491)("dialog_close_button"),t.exports=function(){return r.a(".icon-lg.icon-close.dialog-close-button.js-close-window",{href:"#"})}},{}],729:[function(e,t,n){var r;r=e(491)("edit_controls"),t.exports=function(){return r.div(".edit-controls.u-clearfix",function(){return r.input(".primary.confirm.mod-submit-edit.js-save-edit",{type:"submit",value:r.l("save")}),r.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"}),r.a(".option.delete.js-delete-item",{href:"#"},function(){return r.format("delete")}),r.a(".option.convert.js-convert-item-to-card",{href:"#"},function(){return r.format("convert-to-card")}),r.a(".option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return r.span(".icon-lg.icon-overflow-menu-horizontal")})})}},{}],730:[function(e,t,n){var r;r=e(491)(),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d;for(u=e.members,l=[],o=0,a=u.length;a>o;o++)c=u[o],t=c.avatarHash,n=c.fullName,d=c.username,s=c.initials,i=c.icon,l.push(r.span(".edit-in-progress",function(){return r.span(".inline-member",function(){var e;return e=n+" ("+d+")",t?r.img(".inline-member-av",{src:[window.avatarDomain,t,"30.png"].join("/"),alt:e,title:e}):r.span(".quiet.initials",{title:e},function(){return r.text(s)})}),i?r.icon(i,{class:"icon"}):void 0}));return l})},{}],731:[function(e,t,n){var r;r=e(491)("embedly"),t.exports=function(){return r.div({class:"embed embed-"+r.mustacheVar("type")+" embed-provider-"+r.mustacheVar("provider_name")},function(){return r.mustacheBlockInverted("type_photo",function(){return r.mustacheBlock("requireHttps",function(){return r.raw(r.mustacheVar("htmlHttps"))}),r.mustacheBlockInverted("requireHttps",function(){return r.raw(r.mustacheVar("html"))})}),r.mustacheBlock("type_photo",function(){return r.a({href:r.mustacheVar("originalUrl"),target:"_blank"},function(){return r.img({src:r.mustacheVar("url")})})})})}},{}],732:[function(e,t,n){var r;r=e(491)("empty_list"),t.exports=function(){return r.p({class:"empty-list "+r.mustacheVar("classes"),style:r.mustacheVar("style")},function(){return r.text(r.mustacheVar("message"))})}},{}],733:[function(e,t,n){var r;r=e(491)("enterprise_detail"),t.exports=r.renderable(function(e){var t,n;return n=e.name,t=e.enforcesSso,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0}),href:"#"},function(){return r.span(".profile-image-icon.icon-lg.icon-organization")}),r.div(".tabbed-pane-header-details",function(){return r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(n),r.span(".window-title-extra",function(){return r.icon("enterprise"),r.format("enterprise")}),r.span(".window-title-extra",function(){return t?(r.icon("private"),r.format("sso-enforced")):(r.icon("public"),r.format("not-sso-enforced"))})})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return r.format("enterprise-admin")})})})}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div({class:r.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":!0})})})})},{}],734:[function(e,t,n){var r,o,i,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)u.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},u={}.hasOwnProperty;i=e(722),o=e("react"),s=e(488)("entity"),t.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.displayName="Entity",t.prototype.render=s.renderable(function(){var e,t,n,r,o,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,T;switch(b=this.props,c=b.entity,o=b.context,f=b.options,j=c.type,_=c.text,j){case"text":case"list":case"checklist":case"plugin":case"date":return s.span(function(){return s.text(_)});case"card":return S=c.url,s.a(".action-card",{href:S},function(){return s.text(_)});case"board":return S=c.url,s.a({href:S},function(){return s.text(_)});case"organization":return S=c.url,s.a({href:S},function(){return s.text(_||s.l("an-organization"))});case"checkItem":return m=c.nameHtml,m?s.raw(m):s.text(_);case"comment":return k=c.textHtml,t=o.canEdit,x=f.truncateComment,s.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":x},s.div({class:s.classify(e)},function(){return x&&s.div(".action-comment-fade-button.js-expand-comment"),s.div(".current-comment.js-friendly-links.js-open-card",function(){return s.raw(k)}),t?s.div(".comment-box",function(){return s.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return s.text(_)}),i()}):void 0})});case"label":return r=c.color,n={"card-label":!0},n[r+"-label"]=!0,C=_||r+" label (default)",s.span({class:s.classify(n),title:C},function(){return _?s.text(_):s.raw("&nbsp;")});case"attachment":return h=c.link,S=c.url,p=c.isTrelloAttachment,d=c.isTrello,l=c.id,h?p?s.a(".js-open-attachment-viewer",{href:S,"data-idattachment":l},function(){return s.text(_)}):d?s.a(".js-friendly-links",{href:S},function(){return s.text(_)}):s.a(".js-friendly-links",{href:S,target:"_blank"},function(){return s.text(_)}):s.span(".attachment-deleted",function(){return s.text(_)});case"attachmentPreview":return y=c.previewUrlForRes,g=c.originalUrl,l=c.id,w=f.showCompactAttachmentPreview,y?(n={"js-open-attachment-viewer":!w,"js-open-card":w,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":w},s.a({class:s.classify(n),href:g,target:"_blank","data-idattachment":l},function(){return s.img({class:s.classify(v),src:y})})):s.raw("&nbsp;");case"member":return l=c.id,e=c.avatarHash,T=c.username,s.span(".inline-member.js-show-mem-menu",{"data-idmember":l},function(){return e&&(C=_+" ("+T+")",s.img(".inline-member-av",{src:[window.avatarDomain,e,"30.png"].join("/"),alt:C,title:C})),s.span(".u-font-weight-bold",function(){return s.text(_)})});case"relDate":return u=c.date,a=c.current,s.span(".rel-date",{dt:u,text:_},function(){return s.text(a)});case"plugin":return s.text(s.mustacheVar("text"))}}),t}(o.Component)},{}],735:[function(e,t,n){var r,o;o=e(491)("entity"),r=e(722),t.exports=o.renderable(function(e,t,n){var i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S;switch(x=e.type,w=e.text,x){case"text":case"list":case"checklist":case"plugin":case"date":return o.text(w);case"card":return j=e.url,o.a(".action-card",{href:j},function(){return o.text(w)});case"board":return j=e.url,o.a({href:j},function(){return o.text(w)});case"organization":return j=e.url,o.a({href:j},w||o.l("an-organization"));case"checkItem":return f=e.nameHtml,f?o.raw(f):o.text(w);case"comment":return _=e.textHtml,s=t.canEdit,C=n.truncateComment,o.div(".comment-container",function(){var e;return e={"action-comment":!0,markeddown:!0,"js-comment":!0,"is-truncated":C},o.div({class:o.classify(e),dir:"auto"},function(){return C&&o.div(".action-comment-fade-button.js-expand-comment"),o.div(".current-comment.js-friendly-links.js-open-card",function(){return o.raw(_)}),s?o.div(".comment-box",function(){return o.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return o.text(w)}),r(!0)}):void 0})});case"label":return u=e.color,a={"card-label":!0},a[u+"-label"]=!0,k=w||u+" label (default)",o.span({class:o.classify(a),title:k},function(){return w?o.text(w):o.raw("&nbsp;")});case"attachment":return m=e.link,j=e.url,h=e.isTrelloAttachment,p=e.isTrello,d=e.id,m?h?o.a(".js-open-attachment-viewer",{href:j,"data-idattachment":d},function(){return o.text(w)}):p?o.a(".js-friendly-links",{href:j},function(){return o.text(w)}):o.a(".js-friendly-links",{href:j,target:"_blank"},function(){return o.text(w)}):o.span(".attachment-deleted",function(){return o.text(w)});case"attachmentPreview":return y=e.previewUrlForRes,g=e.originalUrl,d=e.id,b=n.showCompactAttachmentPreview,y?(a={"js-open-attachment-viewer":!b,"js-open-card":b,"js-friendly-links":!0},v={"attachment-image-preview":!0,"mod-compact-image-preview":b},o.a({class:o.classify(a),href:g,target:"_blank","data-idattachment":d},function(){return o.img({class:o.classify(v),src:y})})):o.raw("&nbsp;");case"member":return d=e.id,i=e.avatarHash,S=e.username,o.span(".inline-member.js-show-mem-menu",{idMember:d},function(){return i&&(k=w+" ("+S+")",o.img(".inline-member-av",{src:[window.avatarDomain,i,"30.png"].join("/"),alt:k,title:k})),o.span(".u-font-weight-bold",function(){return o.text(w)})});case"relDate":return l=e.date,c=e.current,o.span(".rel-date",{dt:l,text:w},function(){return o.text(c)});case"plugin":return o.text(o.mustacheVar("text"))}})},{}],736:[function(e,t,n){var r;r=e(491)("error"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d,p;switch(a=e.isLoggedIn,p=e.url,n=e.errorType,u=e.modelType,t=e.email,c=e.nextActionUrl,d=function(e){return r.div(".big-message.with-picture.quiet",function(){return r.img({src:"https://a.trellocdn.com/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png",width:"459",height:"238"}),r.h1(function(){return r.format("roooooo-are-you")}),r.p(function(){return r.format(e)}),r.div(".callout",function(){return r.ol(function(){return r.li(function(){return r.format("check-your-email-at-email",{email:t})}),r.li(function(){return r.format("look-for-an-email-with-the-subject-trello-account-confirmation")}),r.li(function(){return r.format("click-on-the-confirmation-link-done")})})}),r.p(function(){return r.format("dont-see-anything-from-us"),r.raw(" "),r.a(".quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-confirmation-link")})})})},l=function(e,t,n){return r.div(".big-message.quiet",function(){r.h1(function(){return r.format(e)}),a?r.p(function(){return r.format(n)}):r.p(function(){return r.format(t,{url:encodeURIComponent(p)})})})},s=function(e){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)}),r.p(function(){return r.format("ask-for-a-new-link")})})},i=function(e,t,n){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)}),r.p(function(){return r.a(".quiet",{href:n},function(){return r.format(t)})})})},o=function(e){return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format(e)})})},n){case"notFound":return l("page-not-found","this-page-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-page-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardNotFound":return l("board-not-found","this-board-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-board-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"cardNotFound":return l("card-not-found","this-card-may-be-on-a-private-board-you-may-be-able-to-view-it-by-logging-in","this-card-may-be-on-a-private-board-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardInvitationNotFound":return s("board-invitation-not-valid");case"orgInvitationNotFound":return s("org-invitation-not-valid");case"unconfirmedOrgNotFound":return d("please-confirm-your-email-address-to-view-this-org");case"unconfirmedBoardNotFound":return d("please-confirm-your-email-address-to-view-this-board");default:return r.div(".big-message.quiet",function(){return r.h1(function(){return r.format("page-not-found")})})}})},{}],737:[function(e,t,n){var r;r=e(491)("filter_cards"),t.exports=function(){return r.input(".js-input.js-autofocus",{type:"text",attr:"title",value:r.mustacheVar("title"),style:"margin-bottom: 0;"}),r.div(".js-filter-search-results")}},{}],738:[function(e,t,n){var r;r=e(491)("filter_cards_search_results"),t.exports=function(){return r.mustacheBlock("showHelper",function(){return r.p(".quiet",{style:"padding: 10px 8px 2px; margin-bottom: 0;"},function(){return r.format("type-to-filter-by-term-or-search-for-labels-members-or-due-times")})}),r.mustacheBlock("showLabels",function(){return r.hr(),r.ul({class:"label-list"+r.mustacheBlock("limitLabels",function(){return" limited"})},function(){return r.mustacheBlock("labels",function(){return r.li({class:"label-list-item"+r.mustacheBlock("isActive",function(){return" is-active"})},function(){return r.a(".label-list-item-link.js-toggle-label-filter",{href:"#","data-name":r.mustacheVar("color"),"data-idlabel":r.mustacheVar("id")},function(){return r.div(".label-list-item-link-label",function(){return r.span({class:"card-label mod-square card-label-"+r.mustacheVar("color")})}),r.mustacheBlock("name",function(){return r.span(".label-list-item-link-name",function(){return r.text(r.mustacheVar("name"))})}),r.mustacheBlockInverted("name",function(){return r.span(".label-list-item-link-name.mod-quiet",function(){return r.format("color-label-default",{color:r.mustacheVar("defaultColorName")})})}),r.icon("check",{class:"label-list-item-link-icon"})})})}),r.mustacheBlock("limitLabels",function(){return r.li(".label-list-item.js-show-all-labels-elem",function(){return r.a(".label-list-item-link.js-show-all-labels",{href:"#"},function(){return r.span(".label-list-item-link-name.mod-quiet",function(){return r.format("show-all-labels-remaininglabels-hidden",{remainingLabels:r.mustacheVar("remainingLabels")})})})})})})}),r.mustacheBlock("showMembers",function(){return r.hr(),r.ul({class:"pop-over-member-list checkable js-mem-list"+r.mustacheBlock("limitMembers",function(){return" limited"})},function(){return r.mustacheBlock("members",function(){return r.mustachePartial("select_member")})}),r.mustacheBlock("limitMembers",function(){return r.ul(".pop-over-member-list",function(){return r.li(".item",function(){return r.a(".name.quiet.js-show-all-members",{href:"#",style:"padding-left: 42px; font-weight: normal; margin-top: 4px;"},function(){return r.format("show-all-members-remainingmembers-hidden",{remainingMembers:r.mustacheVar("remainingMembers")})})})})})}),r.mustacheBlock("showDueTimes",function(){return r.hr(),r.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return r.mustacheBlock("dueOptions",function(){return r.li({class:"item "+r.mustacheBlock("isActive",function(){return" active"})},function(){return r.a(".js-due-filter",{href:"#",time:r.mustacheVar("time"),style:"padding-left: 40px;"},function(){return r.text(r.mustacheVar("desc")),r.icon("check")})})})})}),r.mustacheBlock("showMatchMode",function(){return r.hr(),r.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return r.mustacheBlock("modes",function(){return r.li({class:"item "+r.mustacheBlock("isActive",function(){return" active"})},function(){return r.a(".js-mode-filter",{href:"#",mode:r.mustacheVar("mode"),style:"padding-left: 40px;"},function(){return r.text(r.mustacheVar("desc")),r.icon("check")})})})})}),r.hr(),r.ul(".pop-over-list.inset.normal-weight",function(){return r.li(function(){return r.a({href:"#",class:"js-clear-all"+r.mustacheBlockInverted("isFiltering",function(){return" disabled"}),style:"padding-left: 40px;"},function(){return r.format("clear-filter")})})})}},{}],739:[function(e,t,n){var r;r=e(491)("formatting_help"),t.exports=function(){return r.p(function(){return r.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax")}),r.hr(),r.p(".quiet",function(){return r.format("first-level-header")}),r.code(function(){return r.format("making-scrambled-eggs-a-primer"),r.br(),r.text("\n    ===============================\n  ")}),r.hr(),r.p(".quiet",function(){return r.format("second-level-header")}),r.code(function(){return r.format("1-1-preparation"),r.br(),r.text("\n    ----------------\n  ")}),r.hr(),r.p(".quiet",function(){return r.format("paragraphs")}),
r.code(function(){return r.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk")}),r.hr(),r.p(".quiet",function(){return r.format("bold")}),r.code(function(){return r.format("carefully-crack-the-eggs")}),r.hr(),r.p(".quiet",function(){return r.format("emphasis")}),r.code(function(){return r.format("whisk-the-eggs-vigorously")}),r.hr(),r.p(".quiet",function(){return r.format("lists")}),r.code(function(){return r.format("ingredients"),r.br(),r.br(),r.format("eggs"),r.br(),r.format("oil"),r.br(),r.format("optional-milk")}),r.hr(),r.p(".quiet",function(){return r.format("links")}),r.code(function(){return r.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf")}),r.hr(),r.p(".quiet",function(){return r.format("images")}),r.code(function(){return r.format("the-finished-dish-https-example-com-eggs-png")})}},{}],740:[function(e,t,n){var r;r=e(491)("header_add_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-new-board",{href:"#"},function(){return r.format("create-board-ellipsis-a-board-is-a-collection-of-cards-ordered-in-a-list-of-lists-use-it-to-manage-a-project-track-a-collection-or-organize-anything")})}),r.li(function(){return r.a(".js-new-org",{href:"#"},function(){return r.format("create-personal-organization-ellipsis-an-organization-is-a-group-of-boards-and-people-use-it-to-group-boards-in-your-company-team-or-family")})}),r.li(function(){return r.a(".js-new-bc-org",{href:"#"},function(){return r.format("create-business-organization-ellipsis-with-business-class-your-team-has-more-security-administrative-controls-and-superpowers")})})})}},{}],741:[function(e,t,n){var r,o,i;i=e(491)("header_announcements"),r=e(655),o=e("locale").social,t.exports=i.renderable(function(e){var t,n,s,a;return e.forEach(r),n=e.length>0&&null!=(s=null!=(a=/^https?:\/\/(?:[-a-z]+\.)?blog\.trello\.com\/([^\/]+)/.exec(e[0].url))?a[1]:void 0)?s:"none",t="?utm_source=inapp&utm_medium=announcement&utm_campaign="+n,i.div(".announcement-elsewhere",function(){return i.p(".quiet",{style:"margin: 0 4px 5px;"},function(){return i.format("for-more-updates-check-out-ellipsis")}),i.a(".announcement-elsewhere-blog.js-blog",{target:"_blank",href:o.blog+t},function(){return i.span(".announcement-elsewhere-blog-icon.icon-lg.icon-board"),i.span(".u-text-underline",function(){return i.format("trello-blog")})}),i.a(".announcement-elsewhere-social.js-t",{target:"_blank",href:o.twitter},function(){return i.span(".icon-lg.icon-twitter")}),i.a(".announcement-elsewhere-social.js-fb",{target:"_blank",href:o.facebook},function(){return i.span(".icon-lg.icon-facebook")}),i.a(".announcement-elsewhere-social.js-g",{target:"_blank",href:o.google},function(){return i.span(".icon-lg.icon-google")})})})},{}],742:[function(e,t,n){var r;r=e(491)("header_boards_menu_button"),t.exports=function(){return r.a(".header-btn.header-boards.js-boards-menu",{href:"#"},function(){return r.span(".header-btn-icon.icon-lg.icon-board.light"),r.span(".header-btn-text",function(){return r.format("boards")})})}},{}],743:[function(e,t,n){var r;r=e(491)("header_channel_picker"),t.exports=function(){return r.mustacheBlock("cookie",function(){return r.p(function(){return r.format("you-have-a-version-cookie-set-this-is-a-feature-intended-for-client-developers-and-testers-and-will-prevent-you-from-changing-channels")}),r.input(".js-remove-cookie.wide.primary",{type:"button",value:r.l("remove-cookie")})}),r.mustacheBlockInverted("cookie",function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("channels",function(){return r.li(function(){return r.a(".js-select",{href:"#",name:r.mustacheVar("name")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlock("active",function(){return r.icon("check")})})})}),r.mustacheBlock("dev",function(){return r.hr(),r.li(function(){return r.a(".js-select-dev",{href:"#",name:r.mustacheVar("name")},function(){return r.format("pick-a-version")})}),r.hr(),r.pre({style:"margin-bottom: 0;"},function(){return r.text(r.mustacheVar("version"))})})})})}},{}],744:[function(e,t,n){var r;r=e(491)("header_enterprise_admin_dashboard__menu"),t.exports=r.renderable(function(e){var t,n;return t=e.enterpriseNames,n=e.url,r.ul(".pop-over-list",function(){var e,o,i,s;for(s=[],e=0,o=t.length;o>e;e++)i=t[e],s.push(r.li(function(){return r.a({href:n(i)},function(){return r.text(i)})}));return s})})},{}],745:[function(e,t,n){var r,o;o=e(491)("header_info_menu"),r=e("locale").social,t.exports=o.renderable(function(){var e;return o.div(".js-fill-tip"),o.a({class:"next-tip-link js-new-tip",href:"#"},o.l("get-new-tip")),o.hr(),e=function(e,t,n){return o.li(".meta-link-list-item",function(){return o.a({class:"meta-link-list-item-link js-meta-page-link",href:e,"data-metapagename":t,target:"_blank"},o.l(n))})},o.ul(".meta-link-list",function(){return e("/tour","Tour","tour"),e("/pricing","Pricing","pricing"),e("/platforms","Apps","apps"),e(r.blog,"Blog","blog"),o.span(".js-more-menu-button",function(){return o.li(".meta-link-list-item",function(){return o.a({class:"meta-link-list-item-link js-meta-page-more-link",href:"#"},o.l("more"))})}),o.span(".js-more-menu.hide",function(){return e("http://help.trello.com","Help","help"),e("/jobs","Jobs","jobs"),e("https://developers.trello.com","Developers","developers"),e("/about","About","about"),e("/legal","Legal","legal")})})})},{}],746:[function(e,t,n){var r,o,i;i=e(491)("header_invite"),r=window.avatarDomain,o=function(e,t,n){var o;return o=t+" ("+n+")",{src:[r,e,"30.png"].join("/"),alt:o,title:o}},t.exports=i.renderable(function(e){var t,n,r,s,a,u,c,l,d,p,h;return a=e.isInviter,r=e.ghost,l=e.modelName,c=e.memberAdder,t=e.avatarHash,n=e.fullName,h=e.username,d=e.modelType,u=e.isLoggedIn,s=e.isBoard,p=e.signupUrl,i.div(".invited-message",function(){return i.a(".js-ignore-invite.icon-lg.icon-close.dialog-close-button",{href:"#"}),i.h1(function(){return a?i.format("you-invited-ghost-fullname-to-collaborate-on-modelname",{"ghost.fullName":r.fullName,modelName:l}):c?i.format("fullname-has-invited-you-to-collaborate-on-modelname",{fullName:c.fullName,modelName:l}):i.format("youve-been-invited-to-collaborate-on-modelname",{modelName:l})}),u?(a||i.p({style:"min-height: 20px;"},function(){return r.email?(i.format("your-account"),t&&i.img(".inline-member-av",o(t,n,h)),i.text(" "),i.format("fullname-username-hasnt-logged-in-with-ghost-email",{fullName:n,username:h,"ghost.email":r.email})):void 0}),a?i.a(".button.js-create-new-account.primary",{href:p},function(){return i.format("create-new-account-for-ghost-fullname",{"ghost.fullName":r.fullName})}):(i.a(".button.js-join-model.primary",{href:"#"},function(){return s?i.format("add-this-email-to-my-account-and-join-board"):i.format("add-this-email-to-my-account-and-join-org")}),i.a(".button.js-create-new-account",{href:p},function(){return i.format("create-new-account")}))):i.a(".button.primary",{href:p},function(){return s?i.format("join-board"):i.format("join-org")})})})},{}],747:[function(e,t,n){var r;r=e(491)("header_logo"),t.exports=function(){return r.a(".header-logo.js-home-via-logo",{href:"/","aria-label":r.l("trello-home")},function(){return r.span(".header-logo-loading"),r.span(".header-logo-default")})}},{}],748:[function(e,t,n){var r;r=e(491)("header_member_menu"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c;return a=e.hasAccount,c=e.profileUrl,i=e.cardsUrl,n=e.billingUrl,t=e.accountUrl,o=e.canLogOut,s=function(e,t,n){return r.li(function(){var o;return o={class:n,href:e},r.a(o,function(){return r.format(t)})})},u=function(e){return r.ul(".pop-over-list",e)},u(function(){return s(c,"profile","js-profile"),s(i,"cards","js-cards"),a&&s(n,"billing","js-billing"),s(t,"settings","js-account")}),r.hr(),u(function(){return s("/contact","help","js-help"),s("/shortcuts","shortcuts","js-shortcuts"),s("#","change-locale","js-change-locale")}),r.hr(),u(function(){return r.li(function(){return r.a(".js-logout",{href:"#"},function(){r.format("log-out"),o||(r.br(),r.format("you-ll-need-to-set-a-password-first"))})})})})},{}],749:[function(e,t,n){var r;r=e(491)("header_notification_list_menu"),t.exports=function(){return r.mustacheBlockInverted("hasNotifications",function(){return r.p(".empty",{style:"padding: 24px 6px;"},function(){return r.format("no-notifications")})}),r.mustacheBlock("hasNotifications",function(){return r.ul(".pop-over-list.mod-add-top-margin",function(){return r.li(function(){return r.a(".js-view-all-notifications",{href:r.mustacheVar("noteUrl")},function(){return r.mustacheBlock("remainingUnread",function(){return r.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:r.mustacheVar("remainingUnread")})}),r.mustacheBlockInverted("remainingUnread",function(){return r.format("see-all-notifications")})})}),r.li(function(){return r.a(".js-change-email-frequency",{href:"#"},function(){return r.format("change-notification-email-frequency")})}),r.mustacheBlock("canAllowDesktopNotifications",function(){return r.li(function(){return r.a(".js-allow-desktop-notifications",{href:"#"},function(){return r.format("allow-desktop-notifications")})})})})})}},{}],750:[function(e,t,n){var r,o;o=e(491)("header_promo_nav"),r=e("locale").social,t.exports=function(){return o.nav(".promo-nav",function(){return o.a(".promo-nav-button",{href:"/"},function(){return o.format("home")}),o.a(".promo-nav-button",{href:"/tour"},function(){return o.format("tour")}),o.a(".promo-nav-button",{href:r.blog,target:"_blank"},function(){return o.format("blog")})})}},{}],751:[function(e,t,n){var r;r=e(491)("header_public_board"),t.exports=function(){return r.p(".u-bottom",function(){return r.mustacheBlock("interactionText",function(){return r.span(".u-inline-block",function(){return r.text(r.mustacheVar("interactionText"))})}),r.span(".u-inline-block",function(){return r.format("sign-up-for-free-or-learn-more-about-trello",{signupUrl:r.mustacheVar("signupUrl"),tourUrl:r.mustacheVar("tourUrl")})})})}},{}],752:[function(e,t,n){var r;r=e(491)("header_search"),t.exports=function(){return r.a(".header-btn.open-search-btn.js-open-search-page",{href:"/search",title:r.l("search-for-boards-cards-members-and-organizations")},function(){return r.span(".header-btn-icon.icon-lg.icon-search.light")}),r.div(".header-search",function(){return r.input(".header-search-input.js-search-input.js-disable-on-dialog",{type:"text",autocomplete:"off",autocorrect:"off",spellcheck:"false",value:r.mustacheVar("query")}),r.span(".header-search-icon.icon-lg.icon-search.light.js-search-icon"),r.span(".header-search-icon.header-search-icon-close.icon-lg.icon-close.light.hide.js-close-icon.js-search-close"),r.a(".header-search-icon.header-search-icon-open.icon-lg.icon-external-link.light.hide.js-open-button.js-open-search-page",{href:"#"})})}},{}],753:[function(e,t,n){var r;r=e(491)("header_signup_login"),t.exports=function(){return r.a(".header-btn.header-signup",{href:"/signup"+r.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+r.mustacheVar("escapedReturnUrl")})},function(){return r.format("sign-up")}),r.a(".header-btn.header-login.no-right-margin",{href:"/login"+r.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+r.mustacheVar("escapedReturnUrl")})},function(){return r.format("log-in")})}},{}],754:[function(e,t,n){var r;r=e(491)("header_two_factor_backups_banner"),t.exports=function(){return r.p(".u-bottom",function(){return r.format("generate-new-backup-codes")})}},{}],755:[function(e,t,n){var r;r=e(491)("header_user"),t.exports=function(){return r.mustacheBlock("__loggedIn",function(){return r.a(".header-btn.js-open-add-menu",{href:"#","aria-label":r.l("create-board-or-org")},function(){return r.span(".header-btn-icon.icon-lg.icon-add.light")}),r.a(".header-btn.header-member.js-open-header-member-menu",{href:"#","aria-label":r.l("member-menu")},function(){return r.span({class:"member"+r.mustacheBlock("hasCrown",function(){return" has-crown"})}),r.span(".header-btn-text.js-member-name")}),r.a(".header-btn.js-open-header-info-menu",{href:"#","aria-label":r.l("open-information-menu")},function(){return r.span(".header-btn-icon.icon-lg.icon-information.light")}),r.a(".header-btn.header-notifications.js-open-header-notifications-menu",{href:"#","aria-label":r.l("notifications-menu")},function(){return r.span(".header-btn-icon.icon-lg.icon-notification.light")}),r.mustacheBlock("isEnterpriseAdmin",function(){return r.a(".header-btn.header-enterprise-dashboard.js-open-enterprise-dashboard-menu",{href:"#","aria-label":r.l("enterprise-dashboard")},function(){return r.span(".header-btn-icon.icon-lg.icon-enterprise-dashboard.light")})}),r.mustacheBlock("showChannelPicker",function(){return r.a(".header-btn.header-btn-channel-picker.js-open-channel-picker",{href:"#","aria-label":r.l("switch-channels")},function(){return r.span(".header-btn-icon.icon-lg.icon-gear.light")})})}),r.mustacheBlockInverted("__loggedIn",function(){return r.mustachePartial("header_signup_login")})}},{}],756:[function(e,t,n){var r;r=e(491)("header_version_picker"),t.exports=function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("head")}),r.span(".value",function(){return r.text(r.mustacheVar("active.name"))}),r.label(function(){return r.format("head")}),r.select(".js-select-head",function(){return r.mustacheBlock("heads",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("value")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlock("selected",function(){return r.format("current")})})})})}),r.mustacheBlock("versions.2.value",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("version")}),r.span(".value",function(){return r.text(r.mustacheVar("active.version"))}),r.label(function(){return r.format("version")}),r.select(".js-select-version",function(){return r.mustacheBlock("versions",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("value")},function(){return r.text(r.mustacheVar("displayName")),r.mustacheBlockInverted("active",function(){return r.text(" "),r.format("disabled")}),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})}},{}],757:[function(e,t,n){var r;r=e(491)("header_warning_account_transfer_required_big"),t.exports=r.renderable(function(e){var t,n,o;return o=e.targetDate,t=e.enterpriseName,n=e.isAdmin,r.div(".centered-banner",function(){return r.div(".sso-notice",function(){return r.p(function(){return r.format("convert-to-enterprise-member",{enterpriseName:t,targetDate:o})}),r.p(function(){return n?r.format("admins-must-convert"):r.format("will-deactivate",{enterpriseName:t})})}),r.p(".u-bottom",function(){return r.button(".primary.wide.js-begin-transfer",{type:"button"},function(){return r.format("start-conversion")}),r.text(" "),r.a(".quiet.js-dismiss-account-transfer",{href:"#"},function(){return r.format("do-later")})})})})},{}],758:[function(e,t,n){var r;r=e(491)("header_warning_account_transfer_required_collapsed"),t.exports=r.renderable(function(e){var t,n,o;return n=e.overdue,o=e.remainingDays,t=e.enterpriseName,r.p(".u-bottom",function(){return r.p(function(){return n?r.format("account-conversion-overdue"):r.format("account-conversion-days-remaining",{remainingDays:o}),r.text(". "),r.a(".quiet",{href:"/enterprise/"+t+"/transfer-account"},function(){return n?r.format("convert-now"):r.format("start-conversion")})})})})},{}],759:[function(e,t,n){var r;r=e(491)("header_warning_account_transfer_required_delayed"),t.exports=r.renderable(function(e){var t;return t=e.enterpriseName,r.p(".u-bottom",function(){return r.p(function(){return r.format("no-converted-admin"),r.text(" "),r.a(".quiet",{href:"/enterprise/"+t+"/transfer-account"},function(){return r.format("convert-now")})})})})},{}],760:[function(e,t,n){var r;r=e(491)("header_warning_account_transfer_required_missed"),t.exports=r.renderable(function(){return r.p(".u-bottom",function(){return r.p(function(){return r.format("missed-transfer-date"),r.text(" "),r.a(".quiet",{href:"/transfer-account/missed-date"},function(){return r.format("convert-now")})})})})},{}],761:[function(e,t,n){var r;r=e(491)("header_warning_banner"),t.exports=function(){return r.p(".u-bottom",function(){return r.mustacheBlock("knownEmailProvider",function(){return r.format("please-confirm-your-email-address-email-check-your-inbox",{email:r.mustacheVar("email"),emailInboxUrl:r.mustacheVar("emailInboxUrl")}),r.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-email")})}),r.mustacheBlockInverted("knownEmailProvider",function(){return r.format("please-confirm-your-email-address-email",{email:r.mustacheVar("email")}),r.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return r.format("resend-email")})})})}},{}],762:[function(e,t,n){var r;r=e(491)("header_warning_password"),t.exports=function(){return r.p(".u-bottom",function(){return r.format("we-ve-automatically-created-an-account-for-email-with-the-username-username",{email:r.mustacheVar("email"),username:r.mustacheVar("username")}),r.a(".quiet.js-change-password",{href:"/my/account"},function(){return r.format("add-a-password")})})}},{}],763:[function(e,t,n){t.exports={actions_empty:e(652),ad_business_class:e(653),ad_business_class_google_apps:e(654),archived_card_options:e(656),archived_cards:e(657),archived_lists:e(658),atMention:e(659),attachment_viewer:e(662),attachment_viewer_frame:e(663),attachment_viewer_frame_details:e(664),avatar_change:e(665),badge:e(666),board:e(668),board_archive:e(669),board_background_options:e(670),board_background_selection:e(671),board_change_background:e(672),board_desc:e(674),board_header:e(675),board_header_permissions:e(676),board_member_profile:e(677),board_menu_activity:e(678),board_menu_commenting:e(679),board_menu_default:e(680),board_menu_invitations:e(682),board_menu_more:e(683),board_menu_more_activity_button:e(684),board_menu_settings:e(685),board_menu_subscribed_state:e(686),board_menu_vis:e(687),board_new:e(688),board_new_vis:e(689),board_observer_count:e(690),board_sidebar:e(691),boards_page_add_org_button:e(692),calendar_day:e(698),calendar_day_list_header:e(699),calendar_month:e(700),calendar_toolbar:e(701),calendar_week:e(702),cant_add_board_to_org:e(703),card_composer_inline:e(705),card_copy:e(706),card_detail_more_menu:e(710),card_menu_meta:e(714),card_title_on_card_front:e(715),change_org_vis:e(716),checklist:e(717),checklist_add_menu:e(718),checklist_item:e(719),closed_boards:e(720),comment_edit_controls:e(721),confirm:e(723),confirm_merge:e(724),connect_failed:e(725),crop_photo:e(726),dialog_close_button:e(728),edit_controls:e(729),embedly:e(731),empty_list:e(732),error:e(736),filter_cards:e(737),filter_cards_search_results:e(738),formatting_help:e(739),header_add_menu:e(740),header_boards_menu_button:e(742),header_channel_picker:e(743),header_logo:e(747),header_notification_list_menu:e(749),header_promo_nav:e(750),header_public_board:e(751),header_search:e(752),header_signup_login:e(753),header_two_factor_backups_banner:e(754),header_user:e(755),header_version_picker:e(756),header_warning_banner:e(761),header_warning_password:e(762),index:e(763),invitation:e(764),kiln_changeset_preview:e(766),kiln_changeset_thumbnail:e(767),label_edit_component:e(769),list:e(770),list_add:e(771),list_bulk_card_move:e(772),list_copy:e(773),list_menu:e(774),manage_members_select_role:e(776),member_account:e(778),member_application:e(779),member_application_list:e(780),member_billing_org_link:e(782),member_billing_org_link_list:e(783),member_boards_list_ad:e(784),member_cards_base:e(785),member_cards_board:e(786),member_cards_card:e(787),member_cards_date:e(788),member_cards_filter:e(789),member_detail_profile_edit:e(791),member_detail_profile_info:e(792),member_gold_earned:e(793),member_inline:e(795),member_list_item_detail:e(797),member_login:e(798),member_on_board_menu:e(799),member_on_card_menu:e(801),member_profile:e(802),member_profile_info:e(803),member_session:e(804),member_session_list:e(805),members_voted:e(806),menu:e(807),menu_base:e(808),move_card_controls:e(810),observer_list:e(811),org_boards_for_member:e(813),org_create:e(814),org_detail_profile_edit:e(816),org_detail_profile_info:e(817),org_export:e(818),org_export_empty:e(819),org_export_item:e(820),org_link_ga_helper:e(821),org_member_activity:e(822),org_member_cards:e(823),org_pref_restriction:e(824),org_prefs_nonorg_invites:e(825),org_prefs_vis:e(827),org_remove_or_deactivate_member:e(828),organization_list_item:e(830),organization_search_list_item:e(831),pop_over_ad:e(832),popover_add_email:e(833),popover_add_list:e(834),popover_auto_mentioner:e(835),popover_board_header_org_menu:e(836),popover_card_completer:e(837),popover_card_from_calendar:e(838),popover_change_board_org:e(839),popover_change_labels:e(840),popover_change_roles:e(841),popover_change_set_password:e(842),popover_change_user_info:e(843),popover_confirm_member_delete:e(844),popover_emoji_completer:e(845),popover_emoji_uploader:e(846),popover_filter_pos_results:e(847),popover_helper_new_board_add_org:e(848),popover_insertion_menu:e(849),popover_member_searcher:e(850),popover_move_card:e(851),popover_move_list:e(852),popover_org_logo:e(853),popover_rename_board:e(854),popover_select_members:e(855),popover_selector_menu:e(856),popover_set_email_freq:e(857),popover_share:e(858),power_up_item:e(859),power_up_item_details:e(860),power_ups_about_calendar:e(861),power_ups_about_card_aging:e(862),power_ups_about_voting:e(863),power_ups_detail_navbar:e(866),product_promo_button:e(869),quick_card_editor:e(870),saved_search:e(871),search_instant_results:e(872),search_results_card:e(873),search_suggetion:e(874),search_suggetion_board:e(875),search_suggetion_member:e(876),select_card:e(877),select_emoji:e(878),select_labels:e(879),select_member:e(880),select_org_to_upgrade:e(881),shortcuts:e(882),sticker_on_card:e(883),sticker_pack_selection_list:e(884),sticker_select:e(885),sticker_select_item:e(886),sticker_select_item_upload:e(887),sync_error:e(888),take_photo:e(889),tooltip_content:e(891),woof_header:e(892)}},{}],764:[function(e,t,n){var r,o;o=e(491)("invitation"),r=e(777),t.exports=function(){return o.div(".phenom.invitation",function(){return o.mustacheBlock("MemberInviter",function(){return o.div(".creator.member.no-menu",function(){return r(o.mustacheVar("MemberInviter"))})}),o.div(".phenom-desc",function(){return o.p(function(){return o.mustacheBlock("MemberInviter",function(){return o.format("fullname-created-an-invitation-to",{fullName:o.mustacheVar("fullName")})}),o.span(".invitee",function(){return o.mustacheBlock("MemberInvited",function(){return o.mustachePartial("member_inline")}),o.mustacheBlockInverted("MemberInvited",function(){return o.text(o.mustacheVar("email")),o.mustacheBlockInverted("email",function(){return o.format("someone-new")})})})})}),o.p(".phenom-meta.quiet",function(){return o.mustacheBlock("dateExpires",function(){return o.span(".expiration-date",function(){return o.format("expires",{dateExpires:o.mustacheVar("dateExpires")})})}),o.mustacheBlock("canRemove",function(){return o.text(" - "),o.a(".u-inline-block.js-remove-invitation",{href:"#"},function(){return o.format("delete-invitation")})})})})}},{}],765:[function(e,t,n){var r;r=e(491)("invite_add_name"),t.exports=r.renderable(function(e){var t,n,o,i;return n=e.email,o=e.fullName,t=e.canAddAsObserver,i=e.modelType,r.p(".quiet",function(){if("Board"===i)return r.format("we dont know that personboard",{email:n});if("Organization"===i)return r.format("we dont know that personteam",{email:n});throw new Error("Expected either Board or Organization as modelType; got "+i)}),r.p(".error.hide.js-name-error",function(){return r.format("full-name-must-be-more-than-4-characters")}),r.form(".js-email-data",function(){return r.label(function(){return r.format("full-name")}),r.input(".js-autofocus.js-full-name",{type:"text",value:o}),r.input(".js-email",{type:"hidden",value:n}),t&&r.span(".check-div.quiet.u-clearfix",{style:r.stylify({"margin-left":"24px","padding-top":"2px","font-size":"12px","line-height":"15px"})},function(){return r.input({type:"checkbox",id:"addAsObserver"}),r.label({for:"addAsObserver"},function(){return r.format("include-this-member-as-a-view-only-observer")})}),r.input(".wide.primary.js-send-email-invite",{type:"submit",value:r.l("send")})})})},{}],766:[function(e,t,n){var r;r=e(491)("kiln_changeset_preview"),t.exports=function(){var e,t;return t=null!=(e=r.mustacheVar("reviews"))?e:[],r.div(".attachment-extra-info-header",function(){var e;return e=0===t.length?"changeset-no-reviews":"changeset",r.format(e,{url:r.mustacheVar("url"),shortHash:r.mustacheVar("shortHash"),author:r.mustacheVar("author")}),r.mustacheBlock("reviews",function(){return r.span(".quiet",function(){return r.a({href:r.mustacheVar("url"),target:"_blank"},function(){return r.text(r.mustacheVar("status"))})})})}),r.div(".attachment-extra-info-details.markeddown",function(){return r.raw(r.mustacheVar("commitMessageHtml"))})}},{}],767:[function(e,t,n){var r;r=e(491)("kiln_changeset_thumbnail"),t.exports=function(){return r.span({title:r.mustacheVar("commitMessage")},function(){return r.text(r.mustacheVar("shortCommitMessage"))}),r.span(".block.quiet",function(){var e,t,n;return n=null!=(t=r.mustacheVar("reviews"))?t:[],e=r.mustacheVar("date"),0!==n.length||e?0===n.length&&e?r.format("no-reviews-date",{date:e}):n.length>0&&!e?r.format("reviews-no-date"):n.length>0&&e&&r.format("reviews-date",{date:e}):r.format("no-reviews-no-date"),r.mustacheBlock("reviews",function(){return r.span(function(){return r.a({href:r.mustacheVar("url"),target:"_blank"},function(){return r.text(r.mustacheVar("status"))})})})})}},{}],768:[function(e,t,n){var r;r=e(491)("label"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u;if(o=e.color,u=e.name,i=e.extraClasses,n={"card-label":!0},o&&(n["card-label-"+o]=!0),i)for(s=0,a=i.length;a>s;s++)t=i[s],n[t]=!0;return r.span({class:r.classify(n),title:null!=u?u:o+" label (default)"},function(){return u?r.text(u):r.raw("&nbsp;")})})},{}],769:[function(e,t,n){var r;r=e(491)("label_edit_component"),t.exports=function(){return r.label({for:"labelName"},function(){return r.format("name")}),r.input(".js-autofocus.js-label-name",{id:"labelName",type:"text",name:"name",value:r.mustacheVar("label.name")}),r.label(function(){return r.format("select-a-color")}),r.mustacheBlock("colors",function(){return r.span({class:"card-label mod-edit-label mod-clickable card-label-"+r.mustacheVar("color")+" palette-color js-palette-color","data-color":r.mustacheVar("color")},function(){return r.span({class:"card-label-color-select-icon icon-sm icon-check light "+r.mustacheBlockInverted("selected",function(){return"hide"})+" js-palette-select"})})}),r.p(".u-bottom",function(){return r.format("no-color")}),r.p(".u-bottom.quiet",function(){return r.format("this-wont-show-up-on-the-front-of-cards")}),r.div(".u-clearfix",function(){return r.input(".primary.wide.js-submit",{type:"submit",value:r.mustacheVar("submitText")}),r.div(".u-float-right.js-accessory-view-holder")})}},{}],770:[function(e,t,n){var r;r=e(491)("list"),t.exports=r.renderable(function(e){var t,n,o;return n=e.name,o=e.subscribed,t=e.loggedIn,r.div(".list.js-list-content",function(){var e;return e={"list-header":!0,"js-list-header":!0,"u-clearfix":!0,"is-menu-shown":t,"is-subscribe-shown":o},r.div({class:r.classify(e)},function(){var e;return e={"list-header-name":!0,"mod-list-name":!0,"js-list-name-input":!0},r.div(".list-header-target.js-editing-target"),r.h2(".list-header-name-assist.js-list-name-assist",{dir:"auto"},n),r.textarea({class:r.classify(e),spellcheck:"false",dir:"auto",maxLength:512},n),r.p(".list-header-num-cards.hide.js-num-cards"),r.div(".list-header-extras",function(){var e;return e={"list-header-extras-subscribe":!0,"js-list-subscribed":!0},o||(e.hide=!0),r.span({class:r.classify(e)},function(){return r.icon("subscribe")}),t?r.a(".list-header-extras-menu.dark-hover.js-open-list-menu",{href:"#"},function(){return r.icon("overflow-menu-horizontal")}):void 0})}),r.a(".open-card-composer.js-open-card-composer",{href:"#"},function(){return r.format("add-a-card-ellipsis")})})})},{}],771:[function(e,t,n){var r;r=e(491)("list_add"),t.exports=function(){return r.form(function(){return r.span(".placeholder.js-open-add-list",function(){return r.format("add-a-list-ellipsis")}),r.input(".list-name-input",{type:"text",name:"name",placeholder:r.l("add-a-list-ellipsis"),autocomplete:"off",dir:"auto",maxLength:512}),r.div(".list-add-controls.u-clearfix",function(){return r.input(".primary.mod-list-add-button.js-save-edit",{type:"submit",value:r.l("save")}),r.a(".icon-lg.icon-close.dark-hover.js-cancel-edit",{href:"#"})})})}},{}],772:[function(e,t,n){var r;r=e(491)("list_bulk_card_move"),t.exports=function(){return r.form(function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("lists",function(){return r.li(function(){return r.a({href:"#",class:"js-select-list highlight-icon "+r.mustacheBlock("current",function(){return" disabled"}),name:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("current",function(){return r.text(" "),r.format("current")})})})})})})}},{}],773:[function(e,t,n){var r;r=e(491)("list_copy"),t.exports=function(){return r.label(function(){return r.format("name")}),r.textarea(".js-autofocus",{name:"name"},function(){return r.text(r.mustacheVar("name"))}),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("create-list")})}},{}],774:[function(e,t,n){var r;r=e(491)("list_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("__ed",function(){return r.li(function(){return r.a(".js-add-card",{href:"#"},function(){return r.format("add-card-ellipsis")})}),r.li(function(){return r.a(".js-copy-list",{href:"#"},function(){return r.format("copy-list-ellipsis")})}),r.li(function(){return r.a(".js-move-list",{href:"#"},function(){return r.format("move-list-ellipsis")})})}),r.li(function(){return r.a(".highlight-icon.js-list-subscribe",{href:"#"},function(){return r.check(r.mustacheVar("subscribed"),"subscribe")})})}),r.mustacheBlock("__ed",function(){return r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-move-cards",{href:"#"},function(){return r.format("move-all-cards-in-this-list-ellipsis")})}),r.li(function(){return r.a(".js-archive-cards",{href:"#"},function(){return r.format("archive-all-cards-in-this-list-ellipsis")})})})}),r.mustacheBlock("__ed",function(){return r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-close-list",{href:"#"},function(){return r.format("archive-this-list")})})})})}},{}],775:[function(e,t,n){var r;r=e(491)("manage_members"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d,p,h;return n=e.canInviteMembers,h=e.placeholder,o=e.disableAddingExternalMembers,i=e.isBCOrgAdmin,d=e.orgSettingsURL,t=e.canAddMembers,l=e.orgName,a=e.isPerUser,s=e.isMonthly,u=e.isYearly,p=e.perUserPrice,c=e.orgMemsView,null==l&&(l=""),n&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:h}),r.div(".spinner.small.hide.js-loading")}),r.div(".manage-member-section.js-helper",function(){return r.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return r.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")})})),o&&(r.div(".search-with-spinner",function(){return r.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",
placeholder:h}),r.div(".spinner.small.hide.js-loading")}),r.p(".warning",function(){return i?r.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:d}):r.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})),r.div(".manage-member-section.hide.js-board-members",function(){return r.ul(".pop-over-member-list.options.js-list")}),r.div(".manage-member-section.hide",function(){return r.h4(function(){return r.format("error")}),r.p(".error",function(){return r.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),r.div(".manage-member-section.hide.js-error",function(){return r.p(".error",{style:"margin: 16px 8px 6px;"})}),t&&(r.div(".manage-member-section.hide.js-uninvited-search-results"),r.div(".manage-member-section.hide.js-search-results",function(){return r.h4(function(){return r.format("select-to-add")}),r.ul(".pop-over-member-list.options.js-list")}),r.div(".manage-member-section.hide.js-no-results",function(){return r.p(".quiet.u-text-align-center",{style:"padding: 16px 4px;"},function(){return r.format("no-results")})}),r.div(".manage-member-section.hide.js-org-members",function(){return r.h4(function(){return r.format("orgname-members",{orgName:l})}),r.ul(".pop-over-member-list.options.u-clearfix.js-list",{class:r.classify({collapsed:c}),style:r.stylify({"margin-bottom":c?"8px":void 0})}),r.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),r.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return r.format("view-all-members")})})),n&&r.div(".js-ad"),a&&(r.hr(),r.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return s&&r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:p}),u?r.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:p}):void 0})),n?(r.hr(),r.a(".quiet-button.js-show-invitation-link",{href:"#"},function(){return r.format("you-can-also-invite-people-by-giving-them-a-special-link")}),r.div(".manage-member-invitation-link.hide.js-invitation-link-container",function(){return r.p(function(){return r.format("anyone-you-share-this-link-with-will-be-able-to-join")}),r.input(".js-invitation-link",{type:"text",readonly:"readonly",placeholder:r.l("loading")}),r.a(".quiet-button.js-deactivate-link",{href:"#"},function(){return r.format("disable-this-link")})})):void 0})},{}],776:[function(e,t,n){var r;r=e(491)("manage_members_select_role"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("showAdmin",function(){return r.li(function(){return r.a(".js-invite.js-select-admin",{href:"#"},function(){return r.format("admin-roletext-admin",{roleText_admin:r.mustacheVar("roleText_admin")})})})}),r.li(function(){return r.a(".js-invite.js-select-member",{href:"#"},function(){return r.format("normal-roletext-normal",{roleText_normal:r.mustacheVar("roleText_normal")})})}),r.mustacheBlock("showObserver",function(){return r.li(function(){return r.a(".js-invite.js-select-observer",{href:"#"},function(){return r.format("observer"),r.icon("business-class"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_observer"))})})})})})}},{}],777:[function(e,t,n){var r,o;o=e(491)("member"),r=window.avatarDomain,t.exports=o.renderable(function(e){var t,n,i,s,a,u,c;return t=e.avatarHash,n=e.fullName,c=e.username,i=e.initials,a=e.isDeactivated,s=e.isBoardAdmin,u=e.isOrganizationAdmin,t?o.img(".member-avatar",{height:"30",width:"30",src:[r,t,"30.png"].join("/"),srcset:[[r,t,"30.png 1x"].join("/"),[r,t,"50.png 2x"].join("/")].join(", "),alt:n+" ("+c+")",title:n+" ("+c+")"}):o.span(".member-initials",{title:n+" ("+c+")"},function(){return o.text(i)}),a||(s&&o.span(".member-type.admin",{title:o.l("this-member-is-an-admin-of-this-board")}),u&&o.span(".member-type.admin",{title:o.l("this-member-is-an-admin-of-this-organization")})),o.span(".member-gold-badge",{title:o.l("this-member-has-trello-gold")})})},{}],778:[function(e,t,n){var r;r=e(491)("member_account"),t.exports=function(){return r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("account-details")})}),r.a(".big-link.js-change-name-and-bio",{href:"#"},function(){return r.span(".text",function(){return r.format("change-name-initials-or-bio")})}),r.a(".big-link.js-change-avatar",{href:"#"},function(){return r.span(".text",function(){return r.format("change-avatar")})}),r.a(".big-link.js-change-password",{href:"#"},function(){return r.span(".text",function(){return r.mustacheBlock("hasPassword",function(){return r.format("change-password")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("set-password")})})}),r.a(".big-link.js-change-locale",{href:"#"},function(){return r.span(".text",function(){return r.format("change-locale")})})}),r.mustacheBlock("showMobileLoginPassword",function(){return r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("mobile-application-sign-in")})}),r.div(".u-gutter",function(){return r.input(".js-mobile-temp-password",{type:"button",value:r.l("generate-mobile-login-password")})})})}),r.div(".window-module.js-credentials-section",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("credentials")})}),r.div(".js-credentials-list.u-gutter",function(){return r.div(".spinner.loading")}),r.div(".u-gutter",function(){return r.input(".js-add-email",{type:"button",value:r.l("add-a-new-email-address")})})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("notifications")})}),r.a(".big-link.js-change-email-freq",{href:"#"},function(){return r.span(".text",function(){return r.format("change-notification-email-frequency")})}),r.mustacheBlock("canAllowDesktopNotifications",function(){return r.a(".big-link.js-allow-desktop-notifications",{href:"#"},function(){return r.span(".text",function(){return r.format("allow-desktop-notifications")})})})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("accessibility")})}),r.a(".big-link.js-toggle-cb-mode",{href:"#"},function(){return r.span(".text",function(){return r.mustacheBlock("cbEnabled",function(){return r.format("disable-color-blind-friendly-mode")}),r.mustacheBlockInverted("cbEnabled",function(){return r.format("enable-color-blind-friendly-mode")})})})}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("applications")})}),r.div(".js-member-applications",function(){return r.div(".spinner.loading")})}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("sessions")})}),r.div(".js-member-sessions.u-gutter",function(){return r.div(".spinner.loading")})}),r.div(".window-module.u-clearfix",function(){return r.div(".window-module-title",function(){return r.h3(function(){return r.format("two-factor-auth")})}),r.a(".big-link.js-configure-2fa",{href:"/2fa"},function(){return r.span(".text",function(){return r.format("configure-two-factor-authentication")})})}),r.div(".window-module",function(){return r.a(".quiet-button.u-gutter.js-confirm-delete-member",{href:"#",style:"margin-top: 32px;"},function(){return r.format("permanently-delete-your-entire-account-forever")})})}},{}],779:[function(e,t,n){var r;r=e(491)("member_application"),t.exports=function(){return r.div(".member-applications-list-item-details",function(){return r.h5(function(){return r.mustacheBlock("identifier",function(){return r.text(r.mustacheVar("identifier"))}),r.mustacheBlockInverted("identifier",function(){return r.format("unknown-application")})}),r.ul(".quiet",function(){return r.mustacheBlock("permissions",function(){return r.li(function(){return r.text(r.mustacheVar("."))})})}),r.p(".quiet",function(){return r.format("approved-dateapproved",{dateApproved:r.mustacheVar("dateApproved")}),r.br(),r.mustacheBlock("neverExpires",function(){return r.format("never-expires")}),r.mustacheBlockInverted("neverExpires",function(){return r.format("expires-dateexpires",{dateExpires:r.mustacheVar("dateExpires")})})})}),r.div(".member-applications-list-item-button",function(){return r.input(".js-revoke",{type:"button",value:r.l("revoke")})})}},{}],780:[function(e,t,n){var r;r=e(491)("member_application_list"),t.exports=function(){return r.mustacheBlockInverted("hasTokens",function(){return r.p(".big-link.none",function(){return r.format("no-applications-are-using-your-trello-account")})}),r.mustacheBlock("hasTokens",function(){return r.div(".member-applications-list.u-gutter.js-list-member-applications")})}},{}],781:[function(e,t,n){var r;r=e(491)("member"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d;return t=e.avatarHash,d=e.username,i=e.fullName,s=e.initials,u=e.isDeactivated,a=e.isBoardAdmin,c=e.isOrganizationAdmin,l=i+" ("+d+")",t?(n=[window.avatarDomain,t,"30.png"].join("/"),o=[window.avatarDomain,t,"50.png"].join("/"),r.img({class:"member-avatar",height:"30",width:"30",src:n,srcset:n+" 1x, "+o+" 2x",alt:l,title:l})):r.span(".member-initials",{title:l},function(){return r.text(s)}),u||(a&&r.span(".member-type.admin",{title:r.l("this-member-is-an-admin-of-this-board")}),c&&r.span(".member-type.admin",{title:r.l("this-member-is-an-admin-of-this-organization")})),r.span(".member-gold-badge",{title:r.l("this-member-has-trello-gold")})})},{}],782:[function(e,t,n){var r;r=e(491)("member_billing_org_link"),t.exports=function(){return r.li(function(){return r.a({href:r.mustacheVar("billingLink")},function(){return r.format("displayname-billing-page",{displayName:r.mustacheVar("displayName")})})})}},{}],783:[function(e,t,n){var r;r=e(491)("member_billing_org_link_list"),t.exports=function(){return r.div(".u-gutter.markeddown",function(){return r.div({style:"max-width: 450px;"},function(){return r.h3(function(){return r.format("looking-for-your-organization-s-billing-page")}),r.ul(".js-org-link-list"),r.p(".quiet",function(){return r.format("this-is-your-personal-billing-page-you-can-manage-the-billing-for-your-business-class-organizations-on-the-above-pages")})}),r.hr()})}},{}],784:[function(e,t,n){var r;r=e(491)("member_boards_list_ad"),t.exports=function(){return r.text(r.mustacheVar("copyHtml")),r.icon("close",{class:"dark-hover ad-close js-close-ad",href:"#"})}},{}],785:[function(e,t,n){var r;r=e(491)("member_cards_base"),t.exports=function(){return r.div(".window-module.u-gutter",function(){return r.a(".quiet-button.mod-with-image.js-toggle-sort",{href:"#"},function(){return r.icon("overflow-menu-horizontal",{class:"quiet-button-icon"}),r.span(".js-sort-text")})}),r.div(".js-cards-content")}},{}],786:[function(e,t,n){var r;r=e(491)("member_cards_board"),t.exports=function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-board"),r.h3(function(){return r.a({href:r.mustacheVar("boardUrl")},function(){return r.text(r.mustacheVar("name"))})}),r.mustacheBlock("org",function(){return r.a(".u-inline-block.quiet",{style:"margin: 0 2px;",href:"/"+r.mustacheVar("name")},function(){return r.text(r.mustacheVar("displayName"))})}),r.span({class:"icon-sm icon-"+r.mustacheVar("permissionLevel")})}),r.div(".card-grid.u-gutter.u-clearfix.js-list")}},{}],787:[function(e,t,n){var r;r=e(491)("member_cards_card"),t.exports=function(){return r.div(".js-card"),r.p(".list-card-position.quiet",function(){return r.mustacheBlock("showBoard",function(){return r.format("in-listname-on-boardname",{listName:r.mustacheVar("listName"),boardName:r.mustacheVar("boardName")})}),r.mustacheBlockInverted("showBoard",function(){return r.format("in-listname",{listName:r.mustacheVar("listName")})})})}},{}],788:[function(e,t,n){var r;r=e(491)("member_cards_date"),t.exports=function(){return r.div(".window-module-title",function(){return r.span({class:"window-module-title-icon icon-lg icon-"+r.mustacheVar("iconType")}),r.h3(function(){return r.text(r.mustacheVar("header"))})}),r.div(".card-grid.u-gutter.u-clearfix.js-list")}},{}],789:[function(e,t,n){var r;r=e(491)("member_cards_filter"),t.exports=function(){return r.ul(".pop-over-list.checkable",function(){return r.li({class:r.mustacheBlock("board",function(){return"active"})},function(){return r.a(".highlight-icon.js-sort-by-board",{href:"#"},function(){return r.check(r.mustacheVar("board"),"sort-by-board")})}),r.li({class:r.mustacheBlock("date",function(){return"active"})},function(){return r.a(".highlight-icon.js-sort-by-due-date",{href:"#"},function(){return r.check(r.mustacheVar("date"),"sort-by-due-date")})})})}},{}],790:[function(e,t,n){var r;r=e(491)("member_detail"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d;return l=e.showOrgs,n=e.avatarHash,i=e.fullName,a=e.hasCrown,o=e.editable,u=e.initials,d=e.username,c=e.isMe,s=e.hasAccount,t=e.accountProblem,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":o,"js-change-avatar-profile":o,"is-gold":a}),href:"#"},function(){return n?r.img(".profile-image-image",{src:[avatarDomain,n,"170.png"].join("/"),alt:i}):r.span(".profile-image-initials",function(){return r.text(u)}),r.span(".profile-image-change-text",function(){return r.format("change-avatar")})}),r.div(".tabbed-pane-header-details",function(){return r.div(".js-current-details"),o?r.form(".js-profile-form.hide"):void 0})})}),r.div(".tabbed-pane-nav.u-clearfix",function(){return r.ul(function(){r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-profile",{href:["",d].join("/")},function(){return r.format("profile")})}),r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-cards",{href:["",d,"cards"].join("/")},function(){return r.format("cards")})}),c&&(r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-member-account",{href:["",d,"account"].join("/")},function(){return r.format("settings")})}),t?r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return r.format("billing-issue")})}):s?r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return r.format("billing")})}):r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return r.span(".icon-lg.icon-trello-gold.mod-inline.icon-trello-gold-color"),r.text(" "),r.format("trello-gold")})}))})}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div(".tabbed-pane-main-col-wrapper.js-content")})})},{}],791:[function(e,t,n){var r;r=e(491)("member_detail_profile_edit"),t.exports=function(){return r.p(".error.js-profile-form-error.hide"),r.label(function(){return r.format("full-name")}),r.input({type:"text",name:"fullName",value:r.mustacheVar("fullName"),dir:"auto",maxLength:128}),r.label(function(){return r.format("username")}),r.input({type:"text",name:"username",value:r.mustacheVar("username"),maxLength:100}),r.label(function(){return r.format("initials")}),r.input({type:"text",name:"initials",value:r.mustacheVar("initials"),maxLength:8}),r.label(function(){return r.format("bio-optional")}),r.textarea({name:"bio",dir:"auto",maxLength:16384},function(){return r.text(r.mustacheVar("bio"))}),r.input(".primary.wide.js-submit-profile",{type:"submit",value:r.l("save")}),r.input(".js-cancel-edit-profile",{type:"button",value:r.l("cancel")})}},{}],792:[function(e,t,n){var r;r=e(491)("member_detail_profile_info"),t.exports=function(){return r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(r.mustacheVar("fullName"))}),r.p(".window-title-extra.quiet",function(){return r.format("at-username",{username:r.mustacheVar("username")})}),r.mustacheBlock("hasCrown",function(){return r.span(".member-profile-gold-badge",function(){return r.icon("trello-gold",{class:"member-profile-gold-badge-icon"}),r.mustacheBlock("__ed",function(){return r.format("you-ve-got-trello-gold")}),r.mustacheBlockInverted("__ed",function(){return r.format("has-trello-gold")})})})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return r.mustacheBlock("bioHtml",function(){return r.raw(r.mustacheVar("bioHtml"))})}),r.mustacheBlock("__ed",function(){return r.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return r.icon("edit","edit-profile")})})}},{}],793:[function(e,t,n){var r;r=e(491)("member_gold_earned"),t.exports=r.renderable(function(e){var t,n,o,i,s;return n=e.hasInvitations,o=e.joinedNames,i=e.localizedCongratulations,s=e.showClose,t=e.hasGold,r.div(".window-module.gold-earned-modal",function(){return s&&r.a(".icon-lg.icon-close.dark-hover.gold-earned-modal-close.js-close-modal",{href:"#"}),r.img(".gold-earned-modal-image",{src:"https://a.trellocdn.com/images/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png"}),r.h1(function(){return n?r.format("youve-earned-trello-gold"):r.format("youve-got-trello-gold")}),r.p(function(){return r.text(i)}),r.p(function(){return r.format("the-following-people-have-joined-trello-on-your-recommendation-or-invite"),r.ul(function(){return o.forEach(function(e){return r.li(function(){return r.text(e)})})})}),r.p(".gold-earned-modal-learn-more.quiet",function(){return r.a({href:"/gold"},function(){return r.format("learn-more-about-trello-gold")})}),t||r.a(".gold-earned-modal-button.button.primary.js-start-using-gold",{href:"#"},function(){return r.format("start-using-trello-gold")}),s?r.p(".quiet",{style:"margin-top: 16px;"},function(){return r.format("you-can-visit-your-account-settings-page-later-to-redeem-your-credits"),r.a(".js-close-modal",{href:"#"},function(){return r.text(" "),r.format("okay-thanks-close-this-header-thing")})}):void 0})})},{}],794:[function(e,t,n){var r;r=e(491)("member_gold_intro"),t.exports=r.renderable(function(e){var t;return t=e.hasThreePowerups,r.div(".product-intro-modal.gold-intro",function(){var e,n;return n=0,e=function(){return n+=1,r.span(".product-intro-number",function(){return r.text(n.toString())})},r.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),r.div(".product-intro-header",function(){return r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png",alt:"Trello Gold"})}),r.hr(),r.h2(function(){return r.format("yessssss-youve-got-trello-gold")}),r.p(function(){return r.format("here-s-what-you-need-to-know-to-get-started-ellipsis")}),t&&r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("more-power-ups")}),r.p(function(){return r.format("you-can-turn-on-up-to-three-power-ups-on-each-of-your-boards")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("stickers")}),r.p(function(){return r.format("check-out-the-stickers-pane-on-the-menu-of-any-board-you-can-view-and-stick-additional-stickers-and-upload-your-own-from-there")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("board-backgrounds")}),r.p(function(){return r.format("check-out-the-settings-pane-in-the-menu-of-any-board-and-select-change-board-background-from-there-you-can-view-and-use-additional-backgrounds-and-upload-your-own")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("larger-attachments")}),r.p(function(){return r.format("you-can-now-upload-files-up-to-250mb-just-select-a-file-via-attach-file-ellipsis-on-the-back-of-the-card-or-drag-and-drop-from-your-desktop")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("uploading-custom-emoji")}),r.p(function(){return r.format("while-on-a-card-open-the-comment-field-click-the-menu-button-in-the-bottom-right-hand-corner-and-select-upload-emoji-you-can-upload-images-and-name-the-emoji-from-there")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("billing-page")}),r.p(function(){return r.format("check-out-the-billing-tab-for-future-reference-you-can-see-when-your-account-will-renew-update-your-credit-card-info-see-billing-history-and-so-on-if-you-signed-up-via-credits-you-can-check-when-your-credits-expire-and-you-can-enter-a-credit-card-and-sign-up-for-a-subscription")})}),r.p(function(){return r.format("this-will-be-in-the-trello-gold-user-guide-for-future-reference-enjoy-and-thanks-for-upgrading")}),r.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return r.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return r.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})})},{}],795:[function(e,t,n){var r;r=e(491)("member_inline"),t.exports=function(){return r.mustacheBlock("avatarHash",function(){return r.img(".inline-member-av",{src:r.mustacheVar("__avatarDomain")+"/"+r.mustacheVar("avatarHash")+"/30.png",alt:r.mustacheVar("fullName")+" ("+r.mustacheVar("username")+")",title:r.mustacheVar("fullName")+" ("+r.mustacheVar("username")+")"})}),r.span(".u-font-weight-bold",function(){return r.text(r.mustacheVar("fullName"))})}},{}],796:[function(e,t,n){var r;r=e(491)("member_large_avatar"),t.exports=r.renderable(function(e){var t,n,o,i;return t=e.avatarHash,n=e.fullName,i=e.username,o=n+" ("+i+")",r.img({src:[window.avatarDomain,t,"original.png"].join("/"),alt:o,title:o})})},{}],797:[function(e,t,n){var r,o;o=e(491)("member_list_item_detail"),r=e(777),t.exports=function(){return o.div({class:"member member-no-menu"+o.mustacheBlock("isVirtual",function(){return" member-virtual"})+o.mustacheBlock("isDeactivated",function(){return" member-deactivated"})},function(){return r(o.mustacheVar("."))}),o.div(".details",function(){return o.p(".name-line",function(){return o.span(".full-name",function(){return o.text(o.mustacheVar("fullName"))})}),o.p(".u-bottom.quiet",function(){return o.mustacheBlock("username",function(){return o.span(".quiet.u-inline-block",function(){return o.format("at-username",{username:o.mustacheVar("username")})})}),o.mustacheBlock("showGoogleApps",function(){return o.mustacheBlock("gMail",function(){return o.mustacheBlock("username",function(){return o.text("- ")}),o.icon("google"),o.text(o.mustacheVar("gMail"))})})})}),o.div(".options",function(){return o.mustacheBlock("isOrgMember",function(){return o.mustacheBlock("showActivity",function(){return o.a(".option.quiet-button.js-view-activity",{href:"#"},function(){return o.format("activity")})}),o.mustacheBlock("allowTypeChange",function(){return o.a(".option.button-link.role-button.js-change-role",{href:"#"},function(){return o.text(o.mustacheVar("orgMemberType")),o.icon("overflow-menu-horizontal")})}),o.mustacheBlockInverted("allowTypeChange",function(){return o.p(".option.status.quiet",function(){return o.text(o.mustacheVar("orgMemberType"))})}),o.mustacheBlock("allowReactivate",function(){return o.a(".option.quiet-button.js-reactivate",{href:"#"},function(){return o.format("reactivate")})}),o.mustacheBlock("isMe",function(){return o.a({class:"option button-link remove-button js-remove-or-deactivate "+o.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return o.mustacheBlock("orgIsBC",function(){return o.icon("close","leave-ellipsis")}),o.mustacheBlockInverted("orgIsBC",function(){return o.icon("close","leave")})})}),o.mustacheBlockInverted("isMe",function(){return o.mustacheBlock("ownsOrg",function(){return o.a({class:"option button-link remove-button js-remove-or-deactivate "+o.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return o.icon("close","remove-ellipsis")})})})}),o.mustacheBlockInverted("isOrgMember",function(){return o.mustacheBlock("showGoogleApps",function(){return o.mustacheBlockInverted("hidden",function(){return o.a(".option.quiet-button.js-hide-member",{href:"#"},function(){return o.format("dismiss")})}),o.mustacheBlock("hidden",function(){return o.a(".option.quiet-button.js-unhide-member",{href:"#"},function(){return o.format("always-show")})}),o.a(".option.button-link.primary.js-invite-to-org",{href:"#"},function(){return o.icon("add","add-member")})})})})}},{}],798:[function(e,t,n){var r;r=e(491)("member_login"),t.exports=function(){return r.p(".member-login-email.u-bottom",function(){return r.text(r.mustacheVar("email"))}),r.mustacheBlock("primary",function(){return r.p(".u-bottom.quiet",function(){return r.format("primary-email")})}),r.mustacheBlockInverted("primary",function(){return r.a(".js-primary.u-bottom.quiet",{href:"#"},function(){return r.format("set-as-primary-email")})}),r.p(".member-login-date-added.u-bottom.quiet",function(){return r.format("added",{dateAdded:r.mustacheVar("dateAdded")})}),r.mustacheBlockInverted("primary",function(){return r.icon("close",{class:"member-login-remove dark-hover js-remove"})})}},{}],799:[function(e,t,n){var r;r=e(491)("member_on_board_menu"),t.exports=function(){return r.li(function(){return r.mustacheBlock("type",function(){return r.a({class:r.mustacheBlock("canChangeRole",function(){return"js-change-role"})+r.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return r.format("change-permissions-ellipsis-type",{type:r.mustacheVar("type")})})}),r.mustacheBlockInverted("type",function(){return r.a({class:r.mustacheBlock("canChangeRole",function(){return"js-change-role"})+r.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return r.format("change-permissions-ellipsis")})})}),r.li(function(){return r.a({href:r.mustacheVar("boardProfileUrl")},function(){return r.format("view-member-s-board-activity")})}),r.mustacheBlock("canRemove",function(){return r.li(function(){return r.a(".js-remove-member",function(){return r.mustacheBlock("isMe",function(){return r.format("leave-board-ellipsis")}),r.mustacheBlockInverted("isMe",function(){return r.format("remove-from-board-ellipsis")})})})}),r.mustacheBlockInverted("canRemove",function(){return r.mustacheBlock("isMe",function(){return r.mustacheBlock("isMoreThanOneMember",function(){return r.mustacheBlock("memberIsAdmin",function(){return r.li(function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-can-t-leave-because-you-are-the-only-admin-to-make-another-user-an-admin-click-their-avatar-select-change-permissions-ellipsis-and-select-admin")})})})})})}),r.mustacheBlock("isGhost",function(){return r.li(function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("this-user-will-be-able-to-access-this-board-once-they-sign-up-with-trello-and-confirm-their-email-address")})})})}},{}],800:[function(e,t,n){var r,o;o=e(491)("member_on_card"),r=e(777),t.exports=o.renderable(function(e){var t,n,i,s,a,u,c,l,d;return t=e.avatarHash,n=e.fullName,i=e.id,s=e.initials,u=e.isDeactivated,a=e.isBoardAdmin,c=e.isOrganizationAdmin,l=e.isVirtual,d=e.username,o.div(".member.js-member-on-card-menu",{class:o.classify({"member-deactivated":u,"member-virtual":l}),"data-idmem":i},function(){return r({avatarHash:t,fullName:n,initials:s,isDeactivated:u,isBoardAdmin:a,isOrganizationAdmin:c,username:d})})})},{}],801:[function(e,t,n){var r;r=e(491)("member_on_card_menu"),t.exports=function(){return r.mustacheBlock("__ed",function(){return r.li(function(){return r.a(".js-remove-member",function(){return r.format("remove-from-card")})})})}},{}],802:[function(e,t,n){var r;r=e(491)("member_profile"),t.exports=function(){return r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-organization"),r.h3(function(){return r.format("organizations")})}),r.div(".u-gutter.js-list-orgs")}),r.div(".window-module",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-activity"),r.h3(function(){return r.format("activity")})}),r.div(".list-actions"),r.p(".u-bottom",function(){return r.a(".show-more.js-more-actions",{href:"#"},function(){return r.format("load-more-activity")})})})}},{}],803:[function(e,t,n){var r,o;o=e(491)("member_profile_info"),r=e(777),t.exports=function(){return o.div(".member-profile-info.u-clearfix",{name:o.mustacheVar("username")},function(){return o.div(".member",function(){return r(o.mustacheVar("."))}),o.div(".info",function(){return o.h3(".u-bottom",function(){return o.a(".js-profile",{href:"/"+o.mustacheVar("username")},function(){return o.text(o.mustacheVar("fullName"))})}),o.p(".quiet.u-bottom",function(){return o.format("at-username",{username:o.mustacheVar("username")})}),o.mustacheBlock("bio",function(){return o.p(".member-profile-info-bio.quiet",{title:o.mustacheVar("bio")},function(){return o.raw(o.mustacheVar("bioHtml"))})}),o.p(".quiet.u-bottom",function(){return o.mustacheBlock("showMemberOptions",function(){return o.mustacheBlock("orgCardsUrl",function(){return o.a({href:o.mustacheVar("orgCardsUrl")},function(){return o.format("view-org-cards")})}),o.mustacheBlock("__ed",function(){return o.span(function(){return o.a(".js-remove-mem",{href:"#"},function(){return o.format("remove-from-org")})})})})})})})}},{}],804:[function(e,t,n){var r;r=e(491)("member_session"),t.exports=function(){return r.mustacheBlock("type_support",function(){return r.p(".u-bottom",function(){return r.format("authorization-for-trello-support-ticket-data-ticket",{"data.ticket":r.mustacheVar("data.ticket")}),r.br(),r.span(".quiet",function(){return r.format("expires",{dateExpires:r.mustacheVar("dateExpires")}),r.raw(" "),r.a(".quiet.js-revoke",{href:"#"},function(){return r.format("revoke")})})})}),r.mustacheBlockInverted("type_support",function(){return r.p(".u-bottom",function(){return r.strong(function(){return r.text(r.mustacheVar("ipAddress"))}),r.span(".quiet"),r.br(),r.span(".quiet",function(){return r.mustacheBlock("isRecent",function(){return r.mustacheBlock("isCurrent",function(){return r.format("last-used-less-than-an-hour-ago-current-session")}),r.mustacheBlockInverted("isCurrent",function(){return r.format("last-used-less-than-an-hour-ago")})}),r.mustacheBlockInverted("isRecent",function(){return r.mustacheBlock("isCurrent",function(){return r.format("last-used-current-session",{dateLastUsed:r.mustacheVar("dateLastUsed")})}),r.mustacheBlockInverted("isCurrent",function(){return r.format("last-used",{dateLastUsed:r.mustacheVar("dateLastUsed")})})})})})})}},{}],805:[function(e,t,n){var r;r=e(491)("member_session_list"),t.exports=function(){return r.div(".js-sessions"),r.input(".js-log-out-other",{type:"button",value:r.l("log-out-other-sessions")})}},{}],806:[function(e,t,n){var r,o;o=e(491)("members_voted"),r=e(777),t.exports=function(){return o.mustacheBlock("loading",function(){return o.p(".quiet.u-text-align-center",{style:"margin: 24px 0;"},function(){return o.format("loading-ellipsis")})}),o.mustacheBlockInverted("loading",function(){return o.div({class:"list-voters u-clearfix "+o.mustacheBlock("fewMembers",function(){return"compact"})},function(){return o.mustacheBlock("members",function(){return o.div(".voter",function(){return o.div(".member.member-no-menu",function(){return r(o.mustacheVar("."))}),o.mustacheBlock("fewMembers",function(){return o.p(".title",function(){return o.text(o.mustacheVar("fullName")),
o.text(" "),o.span(".quiet",function(){return o.format("username",{username:o.mustacheVar("username")})})})})})})}),o.mustacheBlock("moreMembers",function(){return o.a(".show-more.mod-compact.js-more-members-voted",{href:"#"},function(){return o.format("show-all-voters-lengthdiff-more",{lengthDiff:o.mustacheVar("lengthDiff")})})}),o.mustacheBlock("canVote",function(){return o.hr(),o.mustacheBlock("voted",function(){return o.a(".quiet-button.u-text-align-center.js-unvote",{href:"#"},function(){return o.format("remove-your-vote")})}),o.mustacheBlockInverted("voted",function(){return o.button(".button.primary.full.js-vote",{href:"#"},function(){return o.format("vote")})})})})}},{}],807:[function(e,t,n){var r;r=e(491)("menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.ul(".dynamic-pop-over-list")}),r.mustacheBlock("menu_cards",function(){return r.li(function(){return r.a({class:r.mustacheVar("js_class"),href:r.mustacheBlock("url",function(){return r.mustacheVar("url")})+r.mustacheBlockInverted("url",function(){return"#"})},function(){return r.text(r.mustacheVar("name"))})})})})}},{}],808:[function(e,t,n){var r;r=e(491)("menu_base"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.ul(".boards-pop-over-list")}),r.raw(r.mustacheVar("content"))})}},{}],809:[function(e,t,n){var r;r=e(491)("mini_profile"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c;return t=e.avatarHash,i=e.fullName,c=e.username,s=e.initials,n=e.bio,o=e.email,u=e.showEmail,a=e.isMe,r.div(".mini-profile",function(){return r.div(".mini-profile-member.member-large",function(){var e;return a?r.a(".av-btn.change.js-change-av",{href:"#"},function(){return r.format("change")}):t&&r.a(".av-btn.js-view-large",{href:"#"}),e=i+" ("+c+")",t?r.img(".member-avatar",{height:"50",width:"50",src:[window.avatarDomain,t,"50.png"].join("/"),alt:e,title:e}):r.span(".member-initials",{title:e},function(){return r.text(s)})}),r.div(".mini-profile-info",function(){return r.h3(".mini-profile-info-title",function(){return r.a(".mini-profile-info-title-link.js-profile",{href:"/"+c},function(){return r.text(i)})}),r.p(".quiet.u-bottom",function(){return r.format("at-username",{username:c})}),n&&r.p(".mini-profile-info-bio.quiet",function(){return r.text(n)}),u&&r.p(".u-bottom.quiet",function(){return r.text(o)}),a?r.p(".u-bottom",function(){return r.a(".quiet.js-edit-profile",{href:"#"},function(){return r.format("edit-profile-info")})}):void 0})})})},{}],810:[function(e,t,n){var r;r=e(491)("move_card_controls"),t.exports=function(){return r.mustacheBlockInverted("hideBoard",function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("board")}),r.span(".value.js-board-value"),r.label(function(){return r.format("board")}),r.select(".js-select-board",function(){return r.mustacheBlock("organizations",function(){return r.optgroup({label:r.mustacheVar("displayName")},function(){return r.mustacheBlock("boards",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})})}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-threequarters",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value"),r.label(function(){return r.format("list")}),r.select(".js-select-list")}),r.div(".button-link.setting.form-grid-child.form-grid-child-quarter",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-position")})})}},{}],811:[function(e,t,n){var r;r=e(491)("observer_list"),t.exports=function(){return r.ul({class:"pop-over-member-list js-list "+r.mustacheBlock("__ed",function(){return"js-list-draggable-board-members"})})}},{}],812:[function(e,t,n){var r;r=e(491)("org_bc_intro"),t.exports=r.renderable(function(e){var t,n,o;return o=e.isEnterprise,t=e.hasCSVExport,n=e.hasGoldMembers,r.div(".product-intro-modal.bc-intro",function(){var e,i;return i=0,e=function(){return i+=1,r.span(".product-intro-number",function(){return r.text(i.toString())})},r.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),r.div(".product-intro-header",function(){return o?r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/c44c457cc4c18c2cb7d1cb3b27effeda/trello-enterprise-with-text.png",alt:"Trello Enterprise"}):r.img(".product-intro-logo",{src:"https://a.trellocdn.com/images/65f97b9241872243c0b94f8bfa08a66a/trello-business-class-with-text.png",alt:"Trello Business Class"})}),r.hr(),r.div(".product-intro-section",function(){return r.h2(function(){return o?r.format("welcome-to-enterprise"):r.format("welcome-to-business-class")}),r.p(function(){return r.format("to-get-started")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("visit-the-members-tab-to-manage-members")}),r.p(function(){return r.format("you-can-link-your-google-apps-domain-change-roles-and-deactivate-members-and-view-member-activity-on-the-members-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("check-out-the-organization-settings-page")}),r.p(function(){return r.format("to-check-out-organization-and-board-invite-restrictions-and-board-creation-restrictions-click-the-organization-settings-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("organize-your-boards-with-collections")}),r.p(function(){return r.format("scroll-down-on-this-page-to-see-your-teams-boards-and-click-create-a-collecction")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("supercharge-your-boards-with-Power-Ups")}),r.p(function(){return r.format("open-the-power-ups-menu-in-the-menu-on-the-right-side-of-your-teams-boards-to-integrate-trello")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("create-bulk-exports-in-one-click")}),r.p(function(){return t?r.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-csv-and-json-format"):r.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-json-format")})}),n&&r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("use-board-backgrounds-and-stickers")}),r.p(function(){return r.format("open-the-board-menu-and-select-stickers-or-change-background-you-ll-see-additional-stickers-and-backgrounds-plus-you-can-upload-your-own")})}),o||r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("for-billing-info-ellipsis")}),r.p(function(){return r.format("to-see-billing-history-change-a-credit-card-or-change-the-billing-contact-click-the-billing-tab-above")})}),r.div(".product-intro-section",function(){return e(),r.h3(function(){return r.format("check-the-user-guide")}),r.p({style:"margin-bottom: 0;"},function(){return o?r.format("everything-else-is-outlined-in-the-enterprise-user-guide"):r.format("everything-else-is-outlined-in-the-business-class-user-guide-business-class-features-are-usually-marked-with-this-icon")})}),r.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return r.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return r.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})})},{}],813:[function(e,t,n){var r;r=e(491)("org_boards_for_member"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("boards",function(){return r.li(function(){return r.a({href:r.mustacheVar("url")},function(){return r.text(r.mustacheVar("name")),r.text(" "),r.span(".quiet",function(){return r.format("membertype",{memberType:r.mustacheVar("memberType")})})})})})})}},{}],814:[function(e,t,n){var r;r=e(491)("org_create"),t.exports=function(){return r.form(function(){return r.p(".error",{style:"display:none"}),r.label({for:"org-display-name"},function(){return r.format("name")}),r.input(".js-autofocus.js-display-name",{type:"text",name:"displayName",id:"org-display-name",value:r.mustacheVar("displayName"),dir:"auto"}),r.label({for:"org-desc"},function(){return r.format("description-optional")}),r.textarea({id:"org-desc",name:"desc",dir:"auto"},function(){return r.text(r.mustacheVar("desc"))}),r.input(".primary.wide.js-save",{type:"submit",value:r.l("create")})}),r.hr(),r.p(".quiet",function(){return r.format("an-organization-is-a-group-of-boards-and-people-it-helps-keep-your-company-team-or-family-organized")}),r.p(".quiet.u-bottom",function(){return r.format("business-class-gives-your-organization-more-security-administrative-controls-and-superpowers"),r.text(" "),r.a(".js-business-class",{href:"/business-class",target:"_blank"},function(){return r.format("learn-more")})})}},{}],815:[function(e,t,n){var r;r=e(491)("org_detail"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d,p,h;return p=e.name,n=e.editable,d=e.logoHash,a=e.isEnterprise,h=e.paysWithPurchaseOrder,s=e.isBusinessClassAdmin,c=e.isInOrg,l=e.isOrgAdmin,o=e.hasAccount,t=e.accountProblem,u=e.isFullWidth,i=e.hasUnlimitedPowerUps,r.div(".tabbed-pane-header",function(){return r.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return r.a({class:r.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":n,"js-change-org-logo":n}),href:"#"},function(){return d?r.img(".profile-image-image",{src:[logoDomain,d,"170.png"].join("/")}):r.span(".profile-image-icon.icon-lg.icon-organization"),r.span(".profile-image-change-text",function(){return r.format("change-logo")})}),r.div(".tabbed-pane-header-details",function(){return r.div(".js-current-details"),n?r.form(".js-profile-form.hide"):void 0})})}),r.div(".tabbed-pane-nav.u-clearfix",function(){return r.ul(function(){var e;r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-profile",{href:["",p].join("/")},function(){return r.format("boards")})}),r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-members",{href:["",p,"members"].join("/")},function(){return r.format("members")})}),s&&r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-export",{href:["",p,"export"].join("/")},function(){return r.icon("business-class"),r.format("export")})}),c&&r.li(".tabbed-pane-nav-item",function(){return r.a(".tabbed-pane-nav-item-button.js-org-account",{href:["",p,"account"].join("/")},function(){return r.format("settings")})}),!c||a||h||(e=["",p,"billing"].join("/"),r.li(".tabbed-pane-nav-item",function(){return o?t?r.a(".tabbed-pane-nav-item-button.js-billing",{href:e},function(){return r.format("billing-issue")}):r.a(".tabbed-pane-nav-item-button.js-billing",{href:e},function(){return r.format("billing")}):i?void 0:r.a(".tabbed-pane-nav-item-button.dark-hover.js-billing",{href:e},function(){return r.span(".icon-sm.icon-business-class.mod-inline.icon-business-class-color"),r.text(" "),r.format("business class")})}))})}),r.div(".tabbed-pane-main-col.u-clearfix",function(){return r.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return r.span(".tabbed-pane-main-col-loading-spinner.spinner")}),r.div({class:r.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":u})})})})},{}],816:[function(e,t,n){var r;r=e(491)("org_detail_profile_edit"),t.exports=function(){return r.p(".error.js-profile-form-error.hide"),r.label(function(){return r.format("name")}),r.input({type:"text",name:"displayName",value:r.mustacheVar("displayName"),dir:"auto"}),r.label(function(){return r.format("short-name")}),r.input({type:"text",name:"name",value:r.mustacheVar("name")}),r.label(function(){return r.format("website")}),r.input({type:"text",name:"website",value:r.mustacheVar("website")}),r.label(function(){return r.format("description-optional")}),r.textarea({name:"desc",dir:"auto"},function(){return r.text(r.mustacheVar("desc"))}),r.input(".primary.wide.js-submit-profile",{type:"submit",value:r.l("save")}),r.input(".js-cancel-edit-profile",{type:"button",value:r.l("cancel")})}},{}],817:[function(e,t,n){var r;r=e(491)("org_detail_profile_info"),t.exports=r.renderable(function(e){var t,n,o,i,s,a,u,c,l,d,p,h;return i=e.displayName,s=e.enterpriseUI,a=e.isBusinessClass,d=e.permissionLevel,c=e.pLevelAltText,l=e.pLevelDisplayText,o=e.descriptionHtml,h=e.websiteHref,p=e.website,t=e.accountProblem,u=e.name,n=e.canEdit,r.div(".tabbed-pane-header-details-name",function(){return r.h1(".u-inline",function(){return r.text(i)}),s?r.span(".window-title-extra",function(){return r.icon("enterprise"),r.format("enterprise")}):a&&r.span(".window-title-extra",function(){return r.icon("business-class"),r.format("business-class")}),r.span(".window-title-extra",function(){return r.icon(d,{title:c}),r.text(l)})}),r.div(".tabbed-pane-header-details-content",{dir:"auto"},function(){return null!=o&&r.raw(o),null!=h&&r.p(function(){return r.a({href:h},function(){return r.text(p)})}),t?r.div({style:"padding: 4px 8px; background-color: orange; margin-bottom: 8px;"},function(){return r.p(".u-bottom",function(){return r.format("oops-there-is-a-problem-with-your-billing-information-visit-billing-to-fix-it",{name:u})})}):void 0}),n?r.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return r.icon("edit","edit-profile")}):void 0})},{}],818:[function(e,t,n){var r;r=e(491)("org_export"),t.exports=function(){return r.div(".window-module.org-export-header",function(){return r.button(".org-export-header-button.primary.js-create-new-export",function(){return r.format("create-new-export")}),r.div(".org-export-header-options.u-clearfix",function(){return r.input({id:"includeAttachments",type:"checkbox"}),r.label(".quiet.u-inline.u-font-weight-normal",{for:"includeAttachments"},function(){return r.format("include-raw-attachments-ellipsis")})}),r.p(".quiet.org-export-header-text",function(){return r.mustacheBlock("hasCSV",function(){return r.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-csv-and-json-formats-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")}),r.mustacheBlockInverted("hasCSV",function(){return r.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-json-format-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")})})}),r.div(".window-module.org-export-list",function(){return r.div(".window-module-title",function(){return r.span(".window-module-title-icon.icon-lg.icon-archive"),r.h3(function(){return r.format("exports")})}),r.div(".u-gutter.u-clearfix.js-list-exports")})}},{}],819:[function(e,t,n){var r;r=e(491)("org_export_empty"),t.exports=function(){return r.p(".quiet",{style:"padding: 7px 0;"},function(){return r.format("no-exports-click-create-new-export-to-generate-a-new-one")})}},{}],820:[function(e,t,n){var r;r=e(491)("org_export_item"),t.exports=function(){return r.div({class:"org-export-list-item u-clearfix"+r.mustacheBlock("generating",function(){return" org-export-list-item-generating"})},function(){return r.mustacheBlock("generating",function(){return r.p(".org-export-list-item-title",function(){return r.mustacheBlock("status",function(){return r.text(r.mustacheVar("stage")),r.mustacheBlock("total",function(){return r.format("progress-of-total",{progress:r.mustacheVar("progress"),total:r.mustacheVar("total")})})}),r.mustacheBlockInverted("status",function(){return r.format("creating-new-export-ellipsis")})})}),r.mustacheBlockInverted("generating",function(){return r.p(".org-export-list-item-title",function(){return r.mustacheBlock("attachments",function(){return r.format("time-size-includes-attachments",{time:r.mustacheVar("time"),size:r.mustacheVar("size")})}),r.mustacheBlockInverted("attachments",function(){return r.format("time-size",{time:r.mustacheVar("time"),size:r.mustacheVar("size")})})}),r.a(".button-link.org-export-list-item-button.js-download-export",{href:r.mustacheVar("exportUrl"),target:"_blank"},function(){return r.format("download")})})})}},{}],821:[function(e,t,n){var r;r=e(491)("org_link_ga_helper"),t.exports=function(){return r.div(".ga-link-helper-section",function(){return r.p(function(){return r.format("1-first-you-must-enable-administrative-api-access-for-your-google-apps-domain-you-can-find-instructions-for-doing-so-here")}),r.p(function(){return r.format("2-next-you-ll-need-to-add-the-trello-business-class-app-from-the-google-apps-marketplace-to-your-domain-the-button-below-will-get-you-there")}),r.p(function(){return r.format("3-when-there-be-sure-you-are-signed-in-to-the-google-account-with-the-correct-domain-you-want-to-use-click-the-integrate-with-google-button-then-follow-the-prompts")}),r.p(function(){return r.format("4-you-ll-see-other-users-from-your-google-apps-domain-on-this-page-when-configured-correctly")})}),r.a(".button.js-link",{style:"width: 100%; padding: 7px 0;",target:"_blank",href:"https://chrome.google.com/webstore/detail/trello-business-class/hmhbhkhihjbjgghmkhhniddhlojffhil"},function(){return r.format("go-to-google-apps-marketplace")})}},{}],822:[function(e,t,n){var r;r=e(491)("org_member_activity"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.mustacheBlock("hasBoards",function(){return r.a(".js-view-org-boards-for-member",{href:"#"},function(){return r.format("on-boardcount",{boardCount:r.mustacheVar("boardCount")})})}),r.mustacheBlockInverted("hasBoards",function(){return r.a(".disabled",{href:"#"},function(){return r.format("on-boardcount",{boardCount:r.mustacheVar("boardCount")})})})}),r.mustacheBlock("orgCardsUrl",function(){return r.li(function(){return r.a(".js-view-member-org-cards",{href:r.mustacheVar("orgCardsUrl")},function(){return r.format("view-members-org-cards")})})})}),r.mustacheBlock("lastActive",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("fullname-was-last-active-in-this-organization",{fullName:r.mustacheVar("fullName"),lastActive:r.mustacheVar("lastActive")})})})}},{}],823:[function(e,t,n){var r;r=e(491)("org_member_cards"),t.exports=function(){return r.div(".window-module",function(){return r.mustacheBlock("memberData",function(){return r.mustachePartial("member_profile")})}),r.div(".js-cards")}},{}],824:[function(e,t,n){var r;r=e(491)("org_pref_restriction"),t.exports=function(){return r.li(function(){return r.text(r.mustacheVar("restriction")),r.a(".dark-hover.js-restricted-address",{href:"#","data-pattern":r.mustacheVar("restriction")},function(){return r.icon("close",{class:"option close"})})})}},{}],825:[function(e,t,n){var r;r=e(491)("org_prefs_nonorg_invites"),t.exports=r.renderable(function(e){var t;return t=e.externalMembersDisabled,r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-be-added-to-team-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",function(){return r.li({class:r.classify({active:t})},function(){return r.a({href:"#"},function(){return r.format("only-team-members")})}),r.li({class:r.classify({active:!t})},function(){return r.a({href:"#"},function(){return r.format("anybody")})})})})})},{}],826:[function(e,t,n){var r;r=e(491)("org_prefs_restrict_invites"),t.exports=r.renderable(function(e){var t,n,o;return t=e.hasRestrictions,n=e.hasSlack,o=e.slackSelfJoin,r.div(function(){return r.div(".pop-over-sub-heading",function(){return r.format("email-domain-restrictions")}),r.form(".form-grid.js-form",function(){return r.div(".form-grid-child-threequarters.u-relative",function(){return r.input(".js-input-restricted.js-autofocus",{type:"text",placeholder:r.l("add-a-domain-or-address-ellipsis"),style:"margin-bottom: 6px;"}),r.span(".spinner.small.hide.js-loading",{style:"position: absolute; top: 12px; right: 8px; z-index: 2;"})}),r.div(".form-grid-child-quarter",function(){return r.input(".mod-inline-with-text-input.primary.js-form-submit-input",{type:"submit",value:r.l("add")})})}),r.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return r.format("choose-which-email-domains-and-addresses-can-be-added-to-the-organization-for-example-if-you-only-wanted-users-with-trello-com-email-addresses-to-be-able-to-be-added-to-the-organization-enter-trello-com")}),r.p(".error.u-bottom.js-errors",{style:"display: none; margin-top: 8px;"}),r.div(".manage-member-section.js-restriction-list",{style:r.stylify({"margin-top":"16px",display:t?"block":"none"})},function(){return r.h4(function(){return r.format("allowed-domains-and-addresses")}),r.ul(".closeable-list.js-list")})})})},{}],827:[function(e,t,n){var r;r=e(491)("org_prefs_vis"),t.exports=function(){return r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-public-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"public"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_public_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})}),r.hr(),r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-organization-visible-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"org"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_org_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})}),r.hr(),r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-create-private-boards")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"private"},function(){return r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_org",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"org"},function(){return r.format("any-organization-member")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_admin",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"admin"},function(){return r.format("only-organization-admins")})}),r.li({class:r.mustacheBlock("boardVisibilityRestrict_private_none",function(){return"active"})},function(){return r.a({href:"#","data-restriction":"none"},function(){return r.format("nobody")})})})})}},{}],828:[function(e,t,n){var r;r=e(491)("org_remove_or_deactivate_member"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(".u-clearfix",function(){return r.a(".js-soft-remove",{href:"#"},function(){return r.span(".u-clearfix",function(){return r.mustacheBlock("isMe",function(){return r.format("leave-organization")}),r.mustacheBlockInverted("isMe",function(){return r.format("remove-from-organization")})}),r.span(".sub-name",function(){return r.mustacheBlock("isDeactivated",function(){return r.format("remove-all-access-to-the-organization-and-all-boards")}),r.mustacheBlockInverted("isDeactivated",function(){return r.mustacheBlock("orgIsBC",function(){return r.format("remove-all-access-to-the-organization")}),r.mustacheBlockInverted("orgIsBC",function(){return r.format("remove-all-access-to-the-organization-the-member-will-remain-on-all-their-boards-in-this-organization-they-will-receive-a-notification")})})})}),r.mustacheBlock("orgIsBC",function(){return r.mustacheBlockInverted("isDeactivated",function(){return r.mustacheBlockInverted("isMe",function(){return r.span(".check-div.quiet.u-clearfix",{style:"margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"},function(){return r.input({type:"checkbox",id:"hardRemove",name:"hard",checked:!0}),r.label({for:"hardRemove"},function(){return r.format("check-this-box-to-remove-the-member-from-all-boards")})})})})})}),r.mustacheBlock("canDeactivate",function(){return r.mustacheBlockInverted("isMe",function(){return r.li(".u-clearfix",function(){return r.a(".js-deactivate",{href:"#"},function(){return r.format("deactivate-disable-members-access-to-organization-boards-but-allow-other-organization-members-to-see-what-the-cards-and-boards-the-member-was-on")})})})})})}},{}],829:[function(e,t,n){var r;r=e(491)("org_slack_restrictions"),t.exports=r.renderable(function(e){var t;return t=e.adminOnly,r.div({style:"margin: 12px 0 0;"},function(){return r.p(function(){return r.format("who-can-link-slack-teams")}),r.ul(".pop-over-list.checkable.left-check.normal-weight",function(){return r.li({class:r.classify({active:!t,"js-disable-admin-only":!0})},function(){return r.a({href:"#"},function(){return r.format("any-team-member"),r.span(".icon-sm.icon-check")})}),r.li({class:r.classify({active:t,"js-enable-admin-only":!0})},function(){return r.a({href:"#"},function(){return r.format("only-team-admins"),r.span(".icon-sm.icon-check")})})})})})},{}],830:[function(e,t,n){var r;r=e(491)("organization_list_item"),t.exports=function(){return r.a({href:r.mustacheVar("url")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("displayName"))}),r.mustacheBlock("hasBusinessClass",function(){return r.icon("business-class")}),r.span({class:"icon-sm icon-"+r.mustacheVar("visIconClass")})})}},{}],831:[function(e,t,n){var r;r=e(491)("organization_search_list_item"),t.exports=function(){return r.li(function(){return r.a(".link-item",{href:"/"+r.mustacheVar("name")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("displayName"))})})})}},{}],832:[function(e,t,n){var r;r=e(491)("pop_over_ad"),t.exports=function(){return r.a(".icon-sm.icon-close.dark-hover.ad-close.js-close-ad",{href:"#"}),r.mustacheBlock("iconClass",function(){return r.span({class:"pop-over-ad-icon "+r.mustacheVar("iconClass")})}),r.div(".ad-copy",function(){return r.raw(r.mustacheVar("copyHtml"))})}},{}],833:[function(e,t,n){var r;r=e(491)("popover_add_email"),t.exports=function(){return r.form(function(){return r.p(".error",{id:"account-error"}),r.div(".field",function(){return r.label({for:"email"},function(){return r.format("new-email-address")}),r.input({id:"email",type:"email",name:"email",value:""})}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("send-confirmation-email")})}),r.hr(),r.p(".quiet.u-bottom",function(){return r.format("we-ll-send-an-email-to-the-address-you-enter-click-the-link-in-the-email-to-confirm-the-address")})}},{}],834:[function(e,t,n){var r;r=e(491)("popover_add_list"),t.exports=function(){return r.form(function(){return r.div(".form-grid",function(){return r.div(".form-grid-child.form-grid-child-threequarters",function(){return r.label({for:"list-name"},function(){return r.format("name")}),r.input(".js-list-name.js-autofocus",{type:"text",id:"list-name",value:r.l("default-list-name"),style:"margin-bottom: 0;"})}),r.div(".form-grid-child.form-grid-child-quarter",function(){return r.div(".button-link.setting",{style:"margin-top: 4px;"},function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-list-pos")})})}),r.input(".primary.wide.js-add-list",{type:"submit",value:r.l("add")})})}},{}],835:[function(e,t,n){var r;r=e(491)("popover_auto_mentioner"),t.exports=function(){return r.mustacheBlock("button",function(){return r.input(".js-filter-mentionables.js-autofocus",{type:"text",placeholder:r.l("search-members-ellipsis")})}),r.p(".quiet.js-empty-list.hide",{style:"padding: 8px 8px 0;"},function(){return r.format("no-matching-members")}),r.ul(".pop-over-member-list.js-available-members"),r.mustacheBlock("button",function(){return r.div(".js-select-multiple-options.hide",function(){return r.hr(),r.ul(".pop-over-list",function(){return r.mustacheBlock("showAllCardMembers",function(){return r.li(function(){return r.a(".js-select-all-card-members",{href:"#"},function(){return r.format("mention-all-card-members")})})}),r.mustacheBlock("showAllBoardMembers",function(){return r.li(function(){return r.a(".js-select-all-board-members",{href:"#"},function(){return r.format("mention-all-board-members")})})}),r.mustacheBlock("showAllCommenters",function(){return r.li(function(){return r.a(".js-select-all-commenters",{href:"#"},function(){return r.format("mention-all-commenters")})})})})})})}},{}],836:[function(e,t,n){var r;r=e(491)("popover_board_header_org_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.mustacheBlock("canChangeOrg",function(){return r.li(function(){return r.a(".js-change-org",{href:"#"},function(){return r.mustacheBlock("setOrgNull",function(){return r.format("remove-from-organization")}),r.mustacheBlockInverted("setOrgNull",function(){return r.format("change-organization-ellipsis")})})})}),r.li(function(){return r.a(".js-view-org",{href:"/"+r.mustacheVar("name")},function(){return r.format("view-organization-page")})})})}},{}],837:[function(e,t,n){var r;r=e(491)("popover_card_completer"),t.exports=function(){return r.mustacheBlock("button",function(){return r.input(".js-search.js-autofocus",{type:"text",placeholder:r.l("search-for-a-card-ellipsis")})}),r.div({class:"js-loading"+r.mustacheBlock("hideLoading",function(){return" hide"})},function(){return r.span(".loading.spinner")}),r.div(".js-results",function(){return r.ul(".pop-over-list.navigable.js-card-list")}),r.div(".js-no-results.hide",function(){return r.p(".u-bottom",function(){return r.format("no-results")})})}},{}],838:[function(e,t,n){var r;r=e(491)("popover_card_from_calendar"),t.exports=function(){return r.div(function(){return r.textarea(".js-card-title",function(){return r.text(r.mustacheVar("title"))})}),r.div(".button-link.list-button-link.setting",function(){return r.span(".label",function(){return r.format("list")}),r.span(".value.js-list-value"),r.label(function(){return r.format("list")}),r.select(".js-select-list")}),r.div(".button-link.pos-button-link.setting",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-position")}),r.input(".primary.wide.js-add-card",{type:"submit",value:r.l("add")})}},{}],839:[function(e,t,n){var r;r=e(491)("popover_change_board_org"),t.exports=function(){return r.form(function(){return r.label(function(){return r.format("organization")}),r.select(".js-org",function(){return r.optionSelected(!r.mustacheVar("orgs"),{value:""},function(){return r.format("none")}),r.mustacheBlock("orgs",function(){return r.optionSelected(r.mustacheVar("select"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("displayName"));
})})}),r.mustacheBlock("isPrivate",function(){return r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-visible",{type:"checkbox",checked:"checked"}),r.format("make-board-visible-to-organization")})})}),r.mustacheBlockInverted("allowsSelfJoin",function(){return r.div(".check-div.js-check-div",function(){return r.label(function(){return r.input(".js-make-org-joinable",{type:"checkbox",checked:"checked"}),r.format("allow-any-org-member-to-join-this-board")})})}),r.input(".js-submit.wide.primary",{type:"submit",value:r.l("change")})})}},{}],840:[function(e,t,n){var r;r=e(491)("popover_change_labels"),t.exports=function(){return r.input(".js-autofocus.js-label-search",{type:"text",placeholder:r.l("search-labels-ellipsis"),value:r.mustacheVar("searchInit"),autocomplete:"off"}),r.ul(".edit-labels-pop-over.js-labels-list"),r.mustacheBlock("__ed",function(){return r.div(function(){return r.a(".quiet-button.full.js-add-label",{href:"#"},function(){return r.format("create-a-new-label")}),r.a(".quiet-button.full.hide.js-show-more",{href:"#"},function(){return r.format("show-more-labels")}),r.hr(),r.a(".quiet-button.full.js-toggle-color-blind-mode",{href:"#"},function(){return r.mustacheBlock("isColorBlindEnabled",function(){return r.format("disable-color-blind-friendly-mode")}),r.mustacheBlockInverted("isColorBlindEnabled",function(){return r.format("enable-color-blind-friendly-mode")})})})})}},{}],841:[function(e,t,n){var r;r=e(491)("popover_change_roles"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a({class:r.mustacheBlock("canMakeAdmin",function(){return"js-make-admin highlight-icon"})+r.mustacheBlockInverted("canMakeAdmin",function(){return" disabled"})},function(){return r.check(r.mustacheVar("memberIsAdmin"),"admin"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_admin"))})})}),r.li(function(){return r.a({class:r.mustacheBlock("canMakeMember",function(){return"highlight-icon js-make-member "})+r.mustacheBlockInverted("canMakeMember",function(){return" disabled"})},function(){return r.check(r.mustacheVar("memberIsNormal"),"normal"),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_normal"))})})}),r.mustacheBlock("showObserver",function(){return r.li(function(){return r.a({class:r.mustacheBlock("canMakeObserver",function(){return"highlight-icon js-make-observer "})+r.mustacheBlockInverted("canMakeObserver",function(){return" disabled"})},function(){return r.format("observer"),r.icon("business-class"),r.mustacheBlock("memberIsObserver",function(){return r.icon("check")}),r.span(".sub-name",function(){return r.text(r.mustacheVar("roleText_observer"))})})})})}),r.mustacheBlockInverted("isMoreThanOneAdmin",function(){return r.mustacheBlock("memberIsAdmin",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-can-t-change-roles-because-there-must-be-at-least-one-admin")})})})}},{}],842:[function(e,t,n){var r;r=e(491)("popover_change_set_password"),t.exports=function(){return r.form(function(){return r.mustacheBlock("hasPassword",function(){return r.label({for:"o_password"},function(){return r.format("old-password")}),r.input({id:"o_password",type:"password",name:"oldpassword",value:""})}),r.label({for:"password1"},function(){return r.mustacheBlock("hasPassword",function(){return r.format("new-password")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("password")})}),r.input({id:"password1",type:"password",name:"password",value:""}),r.label({for:"password2"},function(){return r.mustacheBlock("hasPassword",function(){return r.format("new-password-again")}),r.mustacheBlockInverted("hasPassword",function(){return r.format("password-again")})}),r.input({id:"password2",type:"password",name:"password2",value:""}),r.p(".error",{id:"password-error"}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("save")})}),r.mustacheBlockInverted("hasPassword",function(){return r.hr(),r.p(".quiet.u-bottom",function(){return r.format("you-havent-set-a-password-yet-you-can-set-a-password-so-you-can-log-onto-trello-with-just-your-username-or-email-address")})})}},{}],843:[function(e,t,n){var r;r=e(491)("popover_change_user_info"),t.exports=function(){return r.form(function(){return r.p(".error",{id:"account-error"}),r.div(".field",function(){return r.label({for:"fullName"},function(){return r.format("full-name")}),r.input({id:"fullName",type:"text",name:"fullName",value:r.mustacheVar("fullName")})}),r.div(".field",function(){return r.label({for:"initials"},function(){return r.format("initials")}),r.input({id:"initials",type:"text",name:"initials",value:r.mustacheVar("initials")})}),r.div(".field",function(){return r.label({for:"username"},function(){return r.format("username")}),r.input({id:"username",type:"text",name:"username",value:r.mustacheVar("username"),required:!0,autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),r.div(".field",function(){return r.label({for:"bio"},function(){return r.format("bio")}),r.textarea({id:"bio",type:"text",name:"bio"},function(){return r.text(r.mustacheVar("bio"))})}),r.input(".primary.js-save-changes",{type:"submit",value:r.l("save")})}),r.hr(),r.p(".quiet.u-bottom",function(){return r.format("your-initials-are-used-in-place-of-your-avatar-if-your-avatar-is-not-set-usernames-require-a-minimum-of-3-characters-alphanumeric-only")})}},{}],844:[function(e,t,n){var r;r=e(491)("popover_confirm_member_delete"),t.exports=function(){return r.p(function(){return r.format("deleting-your-member-account-username-will-be-permanent",{username:r.mustacheVar("username")})}),r.p(function(){return r.b(function(){return r.format("you-will-lose-access-to-your-boards-and-organizations")})}),r.p(function(){return r.format("would-you-like-us-to-send-an-email-to-email-that-contains-a-link-that-you-can-use-to-delete-your-account",{email:r.mustacheVar("email")})}),r.input(".js-delete-member",{type:"submit",value:r.l("send-the-email")}),r.input(".js-cancel-delete",{type:"submit",value:r.l("never-mind")})}},{}],845:[function(e,t,n){var r;r=e(491)("popover_emoji_completer"),t.exports=function(){return r.mustacheBlock("button",function(){return r.input(".js-filter-emoji.js-autofocus",{type:"text",placeholder:r.l("search-for-emoji-ellipsis")})}),r.div(".js-results",function(){return r.ul(".pop-over-emoji-list.js-available-emoji"),r.hr(),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-upload-emoji",{href:"#","data-emojiname":""},function(){return r.format("upload-emoji")})})})}),r.div(".js-no-results.hide",function(){return r.p(".u-bottom.js-no-matching-emoji-helper"),r.a(".button.primary.full.js-upload-emoji",{href:"#","data-emojiname":""})})}},{}],846:[function(e,t,n){var r;r=e(491)("popover_emoji_uploader"),t.exports=function(){return r.mustacheBlockInverted("canUpload",function(){return r.div(".warning",function(){return r.mustacheBlockInverted("hasGold",function(){return r.p(function(){return r.format("you-can-upload-custom-emoji-with-trello-gold-learn-more-about-trello-gold")})}),r.mustacheBlockInverted("hasBCGold",function(){return r.p(".u-bottom",function(){return r.format("you-can-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})}),r.hr()}),r.form({action:"/1/member/"+r.mustacheVar("id")+"/customEmoji",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.label({for:"emojiImage"},function(){return r.format("upload-image")}),r.input(".js-upload-emoji-file.upload-emoji",{id:"emojiImage",type:"file",name:"file",tabindex:"-1",accept:"image/*"}),r.label({for:"emojiName"},function(){return r.format("emoji-name")}),r.input(".js-emoji-name",{id:"emojiName",type:"text",name:"name",value:r.mustacheVar("emojiName")}),r.p(".quiet",function(){return r.format("the-name-will-default-to-the-name-of-the-uploaded-file-you-can-change-it-here-though")}),r.p(".warning.hide.js-invalid-name",function(){return r.format("the-emoji-name-can-only-contain-letters-numbers-and-underscores")}),r.div(".js-emoji-preview",{style:"margin-bottom: 12px;"},function(){return r.p({style:"margin-bottom: 4px;"},function(){return r.strong(function(){return r.format("preview")})}),r.span(".js-emoji-preview-name",function(){return r.text(r.mustacheVar("emojiName"))}),r.text("  "),r.img(".js-emoji-preview.emoji")}),r.input(".primary.wide.js-upload-emoji",{type:"submit",value:r.l("create-custom-emoji")}),r.div(".error.hide",function(){return r.format("upload-failed")})}),r.mustacheBlock("canUpload",function(){return r.mustacheBlockInverted("hasBCGold",function(){return r.hr(),r.p(".u-bottom",function(){return r.format("you-can-also-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})})}},{}],847:[function(e,t,n){var r;r=e(491)("popover_filter_pos_results"),t.exports=function(){return r.ul(".pop-over-list.navigable.normal-weight.js-pos-results",function(){var e;return e=[["js-select-pos-keyword",r.mustacheVar("keywordList")],["js-select-pos-pos",r.mustacheVar("indexList")],["js-select-pos-list",r.mustacheVar("listList")]],e.forEach(function(e){var t,n;return t=e[0],n=e[1],n.forEach(function(e){return r.li(function(){return r.a({href:"#",name:e.value,class:t},function(){return r.format("position-in-list",{index:e.indexString,listName:e.listName})})})})})})}},{}],848:[function(e,t,n){var r;r=e(491)("popover_helper_new_board_add_org"),t.exports=function(){return r.p(function(){return r.format("an-organization-is-a-collection-of-members-and-boards-they-make-sharing-and-working-within-a-group-even-easier")}),r.a(".button.js-create-org",{href:"#"},function(){return r.format("create-an-organization")})}},{}],849:[function(e,t,n){var r;r=e(491)("popover_insertion_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-open-emoji-selector",{href:"#"},function(){return r.format("select-emoji-ellipsis")})}),r.li(function(){return r.a(".js-open-mention-selector",{href:"#"},function(){return r.format("mention-member-ellipsis")})})})}},{}],850:[function(e,t,n){var r;r=e(491)("popover_member_searcher"),t.exports=function(){return r.mustacheBlock("showSearch",function(){return r.input(".js-filter-members.js-autofocus",{type:"text",placeholder:r.l("search-members-ellipsis")})}),r.ul(".pop-over-member-list.checkable.js-members-list")}},{}],851:[function(e,t,n){var r;r=e(491)("popover_move_card"),t.exports=function(){return r.mustachePartial("move_card_controls"),r.input(".primary.wide.js-submit",{type:"submit",value:r.l("move")})}},{}],852:[function(e,t,n){var r;r=e(491)("popover_move_list"),t.exports=function(){return r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("board")}),r.span(".value.js-board-value"),r.label(function(){return r.format("board")}),r.select(".js-select-board",function(){return r.mustacheBlock("organizations",function(){return r.optgroup({label:r.mustacheVar("displayName")},function(){return r.mustacheBlock("boards",function(){return r.optionSelected(r.mustacheVar("selected"),{value:r.mustacheVar("id")},function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("selected",function(){return r.text(" "),r.format("current")})})})})})})})}),r.div(".form-grid",function(){return r.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return r.span(".label",function(){return r.format("position")}),r.span(".value.js-pos-value"),r.label(function(){return r.format("position")}),r.select(".js-select-list-pos")})}),r.input(".primary.wide.js-commit-position",{type:"submit",value:r.l("move")})}},{}],853:[function(e,t,n){var r;r=e(491)("popover_org_logo"),t.exports=function(){return r.p(".error.hide.js-error"),r.div(".uploader",function(){return r.form(".realfile",{action:"/1/organization/"+r.mustacheVar("id")+"/logo",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.input(".js-upload-logo",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1"})}),r.a(".button-link.fakefile",function(){return r.icon("organization","upload-a-new-logo")})}),r.mustacheBlock("logoHash",function(){return r.hr(),r.a(".quiet-button.js-remove-logo",{href:"#"},function(){return r.format("remove-logo")})})}},{}],854:[function(e,t,n){var r;r=e(491)("popover_rename_board"),t.exports=function(){return r.form(function(){return r.label(function(){return r.format("name")}),r.input(".js-board-name.js-autofocus",{type:"text",value:r.mustacheVar("boardName"),dir:"auto"}),r.input(".primary.wide.js-rename-board",{type:"submit",value:r.l("rename")})})}},{}],855:[function(e,t,n){var r;r=e(491)("popover_select_members"),t.exports=r.renderable(function(e){var t,n;return t=e.includeOrgMembers,n=function(e){return t&&r.h4(function(){return r.format(e)}),r.div(".js-loading",function(){return r.p(".empty",{style:"padding: 24px 6px"},function(){return r.format("loading")})}),r.div(".js-no-results.hide",function(){return r.p(".empty",{style:"padding: 24px 6px"},function(){return r.format("no-results")})}),r.ul(".pop-over-member-list.checkable.u-clearfix.js-mem-list")},r.input(".js-search-mem.js-autofocus",{type:"text",placeholder:r.l("search-members")}),r.div(".manage-member-section.js-board-members",function(){return n("board-members")}),t?(r.div(".manage-member-section.js-org-members",function(){return n("team-members")}),r.div(".js-show-org-members",function(){return r.a(".quiet-button",{href:"#",style:"margin-top: 8px;"},function(){return r.format("show-team-members")})})):void 0})},{}],856:[function(e,t,n){var r;r=e(491)("popover_selector_menu"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-mem-selector",{href:"#"},function(){return r.format("members-ellipsis")})}),r.li(function(){return r.a(".js-label-selector",{href:"#"},function(){return r.format("labels-ellipsis")})}),r.li(function(){return r.a(".js-pos-selector",{href:"#"},function(){return r.format("position-ellipsis")})})})}},{}],857:[function(e,t,n){var r;r=e(491)("popover_set_email_freq"),t.exports=function(){return r.ul(".pop-over-list",{name:"minutesBetweenSummaries"},function(){return r.li(function(){return r.a(".highlight-icon",{value:"-1"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_-1"),"never"),r.span(".sub-name",function(){return r.format("don-t-send-emails")})})}),r.li(function(){return r.a(".highlight-icon",{value:"60"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_60"),"periodically"),r.span(".sub-name",function(){return r.format("send-emails-about-once-an-hour")})})}),r.li(function(){return r.a(".highlight-icon",{value:"1"},function(){return r.check(r.mustacheVar("minutesBetweenSummaries_1"),"instantly"),r.span(".sub-name",function(){return r.format("send-emails-as-soon-as-possible")})})})})}},{}],858:[function(e,t,n){var r;r=e(491)("popover_share"),t.exports=function(){return r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-print",{href:"#",title:r.l("print-using-the-browser-s-print-function-you-can-use-file")},function(){return r.format("print-ellipsis")})}),r.mustacheBlock("hasCsvExport",function(){return r.li(function(){return r.a(".js-export-csv",{href:r.mustacheVar("csvURL"),title:r.l("export-the-board-data-in-csv-format")},function(){return r.format("export-csv")})})}),r.li(function(){return r.a(".js-export-json",{href:r.mustacheVar("jsonURL"),title:r.l("export-the-board-data-in-json-format")},function(){return r.format("export-json")})})}),r.mustacheBlockInverted("hasCsvExport",function(){return r.hr(),r.p(".quiet",{style:"margin: 16px 8px 8px;"},function(){return r.mustacheBlock("needsUpgradeForCsv",function(){return r.a({href:r.mustacheVar("upgradeUrl")},function(){return r.format("there-s-an-update-to-business-class-available-with-csv-export")})}),r.mustacheBlockInverted("needsUpgradeForCsv",function(){return r.format("looking-for-csv-export-check-out-business-class")})})})}},{}],859:[function(e,t,n){var r;r=e(491)("power_up_item"),t.exports=function(){return r.div(".power-up-item-icon",function(){return r.img(".power-up-item-icon-image.mod-rounded",{src:r.mustacheVar("iconSrc"),alt:"Power-Up Icon"}),r.icon("check",{class:"power-up-item-enabled-icon"})}),r.div(".power-up-item-details",function(){return r.h4(".power-up-item-details-header.js-show-details",function(){return r.text(r.mustacheVar("displayName")),r.icon("information",{class:"power-up-item-details-info-icon"})})}),r.div(".power-up-item-actions",function(){return r.a(".power-up-item-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return r.icon("gear")}),r.mustacheBlock("canEnable",function(){return r.mustacheBlock("upgradeUrl",function(){return r.a(".power-up-item-actions-button.mod-upgrade.button-link",{href:r.mustacheVar("upgradeUrl")},function(){return r.format("upgrade")})}),r.mustacheBlockInverted("upgradeUrl",function(){return r.a(".power-up-item-actions-button.mod-upgrade.button-link.js-add-to-team",function(){return r.format("upgrade")})}),r.a(".power-up-item-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return r.format("enable")}),r.a(".power-up-item-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return r.format("disable")}),r.a(".power-up-item-actions-button.mod-fake-enable.button-link.js-fake-enable",{href:"#"},function(){return r.format("enable")})})})}},{}],860:[function(e,t,n){var r;r=e(491)("power_up_item_details"),t.exports=function(){return r.mustacheVar("isGrandfathered")&&r.p(".power-up-grandfathered",function(){return r.format("power-up-was-enabled-on-this-board-before-some-recent-changes-we-made",{name:r.mustacheVar("displayName")}),r.text(" ")}),r.p(function(){return r.text(r.mustacheVar("about"))}),r.mustacheBlock("showScreenshots",function(){return r.h4(function(){return r.format("screenshots")}),r.mustacheBlock("screenshots",function(){return r.img({src:r.mustacheVar("."),alt:r.mustacheVar("name")+" Screenshot"})})})}},{}],861:[function(e,t,n){var r;r=e(491)("power_ups_about_calendar"),t.exports=function(){return r.format("enable-the-calendar-power-up-to-gain-access-to-the-trello-calendar-view-display-cards-with-due-dates-in-a-weekly-or-monthly-format-for-a-time-based-overview-of-cards-most-useful-for-time-sensitive-projects-and-projects-with-multiple-due-dates")}},{}],862:[function(e,t,n){var r;r=e(491)("power_ups_about_card_aging"),t.exports=function(){return r.format("cards-will-visibly-age-as-time-passes-without-any-activity-regular-mode-will-cause-old-cards-to-become-progressively-more-transparent-pirate-mode-will-cause-old-cards-to-crack-and-tear-like-an-old-treasure-map-once-cards-have-new-activity-on-them-their-age-counter-is-reset-and-they-appear-new-again-age-thresholds-are-1-2-and-4-weeks")}},{}],863:[function(e,t,n){var r;r=e(491)("power_ups_about_voting"),t.exports=function(){return r.format("enable-this-power-up-to-allow-users-to-vote-on-your-cards-votes-are-stored-and-synchronized-between-all-users-sharing-this-board-choose-between-multiple-permission-levels-for-which-users-can-vote-on-cards-view-the-number-of-votes-on-each-card-from-the-main-trello-list-pane-or-in-a-cards-detail-pane")}},{}],864:[function(e,t,n){var r;r=e(491)("power_ups_calendar_prefs"),t.exports=r.renderable(function(e){var t,n,o,i;return n=e.isEnabled,o=e.isGenerated,i=e.url,t=e.canChange,r.h4(function(){return r.format("enable-icalendar-feed")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select.js-calendar-pref-feed",{href:"#",class:r.classify({disabled:!t}),name:"enabled"},function(){return r.span(".name",function(){return r.format("enabled")}),n?r.icon("check"):void 0})}),r.li(function(){return r.a(".js-select.js-calendar-pref-feed",{href:"#",class:r.classify({disabled:!t}),name:"disabled"},function(){return r.span(".name",function(){return r.format("disabled")}),n?void 0:r.icon("check")})})}),n?(r.hr(),r.h4(function(){return r.format("your-personal-icalendar-feed")}),r.input(".full.js-calendar-feed-url",{type:"text",value:o?i:r.format("generating")}),r.div(function(){return r.a(".button.js-regen-calendar-url",{href:"#"},function(){return o?r.format("regenerate-your-feed-url"):r.format("generating")})})):void 0})},{}],865:[function(e,t,n){var r;r=e(491)("power_ups_card_aging_prefs"),t.exports=r.renderable(function(e){var t,n;return t=e.agingMode,n=e.canChange,r.h2(function(){return r.format("how-do-you-want-the-aged-cards-to-look")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-select",{href:"#",class:r.classify({disabled:!n}),name:"regular"},function(){return r.span(".name",function(){return r.format("regular-mode")}),"regular"===t&&r.icon("check"),r.span(".sub-name",function(){return r.format("older-cards-become-more-transparent")})})}),r.li(function(){return r.a(".js-select",{href:"#",class:r.classify({disabled:!n}),name:"pirate"},function(){return r.span(".name",function(){return r.format("pirate-mode")}),"pirate"===t&&r.icon("check"),r.span(".sub-name",function(){return r.format("older-cards-crackle-and-tear")})})})})})},{}],866:[function(e,t,n){var r;r=e(491)("power_ups_detail_navbar"),t.exports=function(){return r.a({class:"nav-item js-toolbar-select "+r.mustacheBlock("screenshots",function(){return"active"}),href:"#",name:"screenshots"},function(){return r.format("screenshots")}),r.a({class:"nav-item js-toolbar-select "+r.mustacheBlock("settings",function(){return"active"}),href:"#",name:"settings"},function(){return r.format("settings")})}},{}],867:[function(e,t,n){var r;r=e(491)("board_power_ups"),t.exports=r.renderable(function(e){var t,n,o;return n=e.partOfTeam,o=e.upgradeUrl,t=e.hasGold,r.h4(".power-ups-upgrade-header",function(){return r.format("exceeded-power-ups-limit")}),t?r.p(".power-ups-upgrade-text",function(){return r.format("as-a-gold-member-three-power-ups")}):r.p(".power-ups-upgrade-text",function(){return r.format("as-a-free-member-one-power-up")}),r.p(".power-ups-upgrade-text",function(){return r.format("power-ups-exceeds-your-limit")}),r.p(".power-ups-upgrade-text",function(){return r.format("continue-using-upgrade-to-bc")}),r.div(".power-ups-upgrade-action",function(){return n?r.a(".button.primary",{href:o},function(){return r.format("lets-do-this")}):r.button(".button.primary.js-upgrade",function(){return r.format("lets-do-this")})}),r.div(".power-ups-upgrade-action",function(){return r.a(".power-ups-upgrade-cancel.js-go-back",{href:"#"},function(){return r.format("no-thanks")})})})},{}],868:[function(e,t,n){var r;r=e(491)("power_ups_voting_prefs"),t.exports=r.renderable(function(e){var t,n,o,i,s;return t=e.canChange,n=e.canSetObservers,o=e.canSetOrganization,i=e.canSetPublic,s=e.votingMode,r.h4(function(){return r.format("who-is-allowed-to-vote-on-cards")}),r.ul(".pop-over-list",function(){return r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t}),name:"members"},function(){return r.span(".name",function(){return r.format("members")}),"members"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-on-all-boards")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!n}),name:"observers"},function(){return r.span(".name",function(){return r.format("members-and-observers")}),"observers"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-only-on-boards-with-observers")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!o}),name:"org"},function(){return r.span(".name",function(){return r.format("organization-members")}),"org"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-only-on-boards-within-an-organization")})})}),r.li(function(){return r.a(".js-voting-select",{href:"#",class:r.classify({disabled:!t||!i}),name:"public"},function(){return r.span(".name",function(){return r.format("public-members")}),"public"===s&&r.icon("check"),r.span(".sub-name",function(){return r.format("available-on-public-boards")})})})})})},{}],869:[function(e,t,n){var r;r=e(491)("product_promo_button"),t.exports=function(){return r.div(".product-promo-button-overlay",function(){return r.span(".product-promo-button",function(){return r.format("get-business-class")})})}},{}],870:[function(e,t,n){var r,o;o=e(491)("quick_card_editor"),r=e(713),t.exports=function(){return o.span(".icon-lg.icon-close.quick-card-editor-close-icon.js-close-editor"),o.div(".quick-card-editor-card",{style:"top: "+o.mustacheVar("top")+"px; left: "+o.mustacheVar("left")+"px; width: "+o.mustacheVar("width")+"px;"},function(){return o.div(".list-card.list-card-quick-edit.js-stop",{style:"width: "+o.mustacheVar("width")+"px;"},function(){return r(o.mustacheVar("."))}),o.input(".primary.wide.js-save-edits",{type:"submit",value:o.l("save")}),o.div({class:"quick-card-editor-buttons"+o.mustacheBlock("leftButtons",function(){return" quick-card-editor-buttons-left"})},function(){return o.a(".quick-card-editor-buttons-item.js-edit-labels",{href:"#"},function(){return o.icon("label",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("edit-labels")})}),o.a(".quick-card-editor-buttons-item.js-edit-members",{href:"#"},function(){return o.icon("member",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("change-members")})}),o.a(".quick-card-editor-buttons-item.js-move-card",{href:"#"},function(){return o.icon("move",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("move")})}),o.a(".quick-card-editor-buttons-item.js-copy-card",{href:"#"},function(){return o.icon("card",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("copy")})}),o.a(".quick-card-editor-buttons-item.js-edit-due-date",{href:"#"},function(){return o.icon("clock",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("change-due-date")})}),o.mustacheBlockInverted("closed",function(){return o.a(".quick-card-editor-buttons-item.js-archive",{href:"#"},function(){return o.icon("archive",{class:"light"}),o.span(".quick-card-editor-buttons-item-text",function(){return o.format("archive")})})})})})}},{}],871:[function(e,t,n){var r;r=e(491)("saved_search"),t.exports=function(){return r.a(".saved-search-item.js-saved-search-name",{href:"#"},function(){return r.span(".saved-search-item-name",function(){return r.text(r.mustacheVar("name"))}),r.text(" "),r.span(".saved-search-query.quiet.js-saved-search-query",function(){return r.text(r.mustacheVar("query"))})}),r.mustacheBlock("allowDelete",function(){return r.a(".saved-search-delete.dark-hover.quiet.js-delete-saved-search",{href:"#"},function(){return r.icon("close")}),r.span(".saved-search-delete-menu.quiet.hide.js-delete-saved-search-menu",function(){return r.format("are-you-sure-you-want-to-delete"),r.a(".saved-search-delete-menu-item.js-delete-saved-search-confirm",{href:"#"},function(){return r.format("yes-delete")}),r.a(".saved-search-delete-menu-item.js-delete-saved-search-cancel",{href:"#"},function(){return r.format("no-keep-this")})})})}},{}],872:[function(e,t,n){var r;r=e(491)("search_instant_results"),t.exports=function(){var e;return e=function(e){return r.format(e,{archived:"archived",attachments:"attachments",board:"board",checklist:"checklist",comment:"comment",cover:"cover",created:"created",day:"day",description:"description",due:"due",edited:"edited",has:"has",id:"id",is:"is",label:"label",list:"list",member:"member",members:"members",month:"month",name:"name",open:"open",overdue:"overdue",starred:"starred",stickers:"stickers",week:"week"})},r.div(".search-header-options",function(){return r.div(".js-saved-search-links",function(){return r.a(".quiet.dark-hover.search-header-options-option.js-see-all-saved-searches",{href:"#"},function(){return r.icon("back","back-to-saved-searches")}),r.a(".quiet.dark-hover.search-header-options-option.js-save-this-search",{href:"#"},function(){return r.icon("star","save-this-search")}),r.span(".quiet.search-header-options-option.mod-save.js-current-search.hide",{href:"#"},function(){return r.icon("star"),r.span(".js-current-search-name")})})}),r.mustacheBlock("picker",function(){return r.div(".js-search-results.u-clearfix.u-relative.hide",function(){return r.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return r.div(".js-search-results-title.results-title"),r.div(".js-list")})})}),r.mustacheBlockInverted("picker",function(){return r.div(".search-results-section.js-save-this-search-menu.hide",function(){return r.mustacheBlock("savedSearchesEnabled",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("what-would-you-like-to-call-this-search")})}),r.form(".js-save-this-search-form",function(){return r.input(".js-saved-search-name-input",{type:"text",style:"margin-bottom: 4px;"}),r.input(".primary.js-save-this-search-submit",{type:"submit",value:r.l("save")}),r.a(".quiet.js-save-this-search-cancel",{href:"#",style:"margin-left: 6px;"},function(){return r.format("nevermind")})})}),r.mustacheBlockInverted("savedSearchesEnabled",function(){return r.h2(function(){return r.format("upgrade-to-add-new-saved-searches")}),r.p({style:"font-size: 16px; line-height: 1.2;"},function(){return r.format("you-can-add-new-saved-searches-with-trello-gold-or-get-saved-searches-for-your-entire-organization-with-business-class")}),r.p(function(){return r.a(".button.js-gold-link",{target:"_blank",href:"/gold"},function(){return r.format("check-out-trello-gold")}),r.a(".button.js-business-class-link",{target:"_blank",href:"/business-class"},function(){return r.format("check-out-business-class")})}),r.hr()})}),r.div(".search-results-section.js-search-suggestions.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("did-you-mean-ellipsis")})}),r.div(".js-search-suggestions-list")}),r.div(".search-results-section.js-saved-searches.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("saved-searches")})}),r.p(".quiet.hide.js-no-saved-searches",function(){return r.format("you-have-no-saved-searches-to-save-a-search-start-searching-and-click-save-this-search-in-the-upper-corner")}),r.div(".js-saved-searches-list"),r.hr()}),r.div(".js-search-results.u-clearfix.u-relative.hide",function(){return r.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return r.div(".search-results-section-header.u-clearfix",function(){return r.h4(function(){return r.format("cards")})}),r.div(".js-list"),r.span(".search-loading.hide.js-loading-cards",{href:"#"},function(){return r.format("loading-ellipsis")}),r.a(".show-more.hide.js-show-more-cards",{href:"#"},function(){return r.format("show-more-cards-ellipsis")})}),r.div(".search-results-section.js-board-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("boards")})}),r.ul(".board-results-list.js-list"),r.a(".show-more.hide.js-show-more-boards",{href:"#"},function(){return r.format("show-more-boards-ellipsis")})}),r.div(".search-results-section.js-member-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("members")})}),r.ul(".js-list.pop-over-member-list"),r.a(".show-more.hide.js-show-more-members",{href:"#"},function(){return r.format("show-more-members-ellipsis");
})}),r.div(".search-results-section.js-org-results.u-clearfix.hide",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("organizations")})}),r.ul(".org-list.js-list"),r.a(".show-more.hide.js-show-more-orgs",{href:"#"},function(){return r.format("show-more-organizations-ellipsis")})})})}),r.div(".search-tips.hide.js-no-input",function(){return r.p(".search-tips-helper.quiet.js-search-tips-helper",function(){return e("refine-your-search-with-operators-like-at-member-label-is-archived-and-has-attachments"),r.text(" "),r.a(".js-show-search-tips",{href:"#"},function(){return r.format("learn-more-ellipsis")})}),r.div(".search-tips-list.js-search-tips-list.hide",function(){return r.p(".quiet",function(){return e("search-operators-help-you-find-specific-cards-and-create-highly-tailored-lists-trello-will-suggest-operators-for-you-as-you-type-but-here-s-a-full-list-to-keep-in-mind-you-can-add-to-any-operator-to-do-a-negative-search-such-as-has-members-to-search-for-cards-without-any-members-assigned")}),r.dl(function(){return r.dt(function(){return r.format("at-name")}),r.dd(function(){return e("returns-cards-assigned-to-a-member-if-you-start-typing-at-trello-will-suggest-members-for-you-member-also-works-at-me-will-include-only-your-cards")}),r.dt(function(){return r.format("label")}),r.dd(function(){return e("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works")}),r.dt(function(){return e("board-id")}),r.dd(function(){return e("returns-cards-within-a-specific-board-if-you-start-typing-board-trello-will-suggest-boards-for-you-you-can-search-by-board-name-too-such-as-board-trello-to-search-only-cards-on-boards-with-trello-in-the-board-name")}),r.dt(function(){return e("list-name")}),r.dd(function(){return e("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name")}),r.dt(function(){return e("has-attachments")}),r.dd(function(){return e("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect")}),r.dt(function(){return e("due-day")}),r.dd(function(){return e("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days")}),r.dt(function(){return e("created-day")}),r.dd(function(){return e("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days")}),r.dt(function(){return e("edited-day")}),r.dd(function(){return e("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days")}),r.dt(function(){return e("description-checklist-comment-and-name")}),r.dd(function(){return e("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment")}),r.dt(function(){return e("is-open-and-is-archived")}),r.dd(function(){return r.format("returns-cards-that-are-either-open-or-archived-trello-returns-both-types-by-default")}),r.dt(function(){return e("is-starred")}),r.dd(function(){return r.format("only-include-cards-on-starred-boards")})})})}),r.div(".search-warning.hide.js-no-results",function(){return r.format("no-results")}),r.p(".search-warning.hide.js-searching",function(){return r.format("searching-ellipsis")}),r.p(".search-warning.hide.js-err",function(){return r.format("your-search-produced-an-error")}),r.div(".search-results-section.js-help.u-clearfix",function(){return r.div(".search-results-section-header",function(){return r.h4(function(){return r.format("looking-for-help-using-trello")})}),r.a(".js-open-help-query.hide",{href:"http://help.trello.com?source=trello-search",target:"help"},function(){return r.format("search-our-help-site-for")}),r.span(".js-open-help",function(){return r.format("visit-our-help-site-or-read-the-guide")})})}},{}],873:[function(e,t,n){var r;r=e(491)("search_results_card"),t.exports=function(){return r.div(".search-result-card-container.js-list-card-container",function(){return r.div(".search-result-card-container-fade")}),r.div(".search-result-card-details",function(){return r.p(".u-bottom",function(){return r.a(".search-result-card-details-name",{href:r.mustacheVar("url")},function(){return r.text(r.mustacheVar("name"))})}),r.p(".u-bottom.quiet",function(){return r.format("in-listname-archived-on-boardname",{listName:r.mustacheVar("listName"),archived:r.mustacheVar("archived"),boardName:r.mustacheVar("boardName"),permLevel:r.mustacheVar("permLevel")})})}),r.a(".search-result-card-hover-target",{href:r.mustacheVar("url")})}},{}],874:[function(e,t,n){var r;r=e(491)("search_suggetion"),t.exports=function(){return r.a(".search-suggestion.js-select-suggestion",{href:"#","data-suggestionphrase":r.mustacheVar("phrase")},function(){return r.span(".search-suggestion-string",function(){return r.text(r.mustacheVar("phrase"))}),r.span(".search-suggestion-desc",function(){return r.text(r.mustacheVar("description"))})})}},{}],875:[function(e,t,n){var r;r=e(491)("search_suggetion_board"),t.exports=function(){return r.a(".search-suggestion.search-suggestion-board.js-select-suggestion",{href:"#","data-suggestionphrase":r.mustacheVar("phrase")},function(){return r.span(".search-suggestion-board-image"),r.span(".search-suggestion-dec",function(){return r.format("cards-on-the-board-name",{name:r.mustacheVar("name")})})})}},{}],876:[function(e,t,n){var r,o;o=e(491)("search_suggetion_member"),r=e(777),t.exports=function(){return o.a(".search-suggestion.search-suggestion-member.js-select-suggestion",{href:"#","data-suggestionphrase":o.mustacheVar("phrase")},function(){return o.span(".member.search-suggestion-member-av",function(){return r(o.mustacheVar("."))}),o.span(function(){return o.format("cards-assigned-to-fullname",{fullName:o.mustacheVar("fullName")})})})}},{}],877:[function(e,t,n){var r;r=e(491)("select_card"),t.exports=function(){return r.li(".item",function(){return r.a(".name.js-select-card",{href:"#",title:r.mustacheVar("name"),id:r.mustacheVar("id")},function(){return r.span(".item-name",function(){return r.text(r.mustacheVar("name")),r.mustacheBlock("closed",function(){return r.text(" "),r.span(".quiet",function(){return r.format("archived")})})}),r.mustacheBlock("boardName",function(){return r.span(".sub-name",function(){return r.format("in-boardname",{boardName:r.mustacheVar("boardName")})})})})})}},{}],878:[function(e,t,n){var r;r=e(491)("select_emoji"),t.exports=function(){return r.li(".item",function(){return r.a(".name.js-select-emoji",{href:"#",title:r.mustacheVar("name")},function(){return r.img(".emoji",{src:r.mustacheVar("image")}),r.span(".emoji-name",{name:r.mustacheVar("name")},function(){return r.text(r.mustacheVar("name"))})})})}},{}],879:[function(e,t,n){var r;r=e(491)("select_labels"),t.exports=function(){return r.mustacheBlock("labels",function(){return r.li(function(){return r.mustacheBlock("__ed",function(){return r.a(".card-label-edit-button.icon-sm.icon-edit.js-edit-label",{href:"#","data-idlabel":r.mustacheVar("id")})}),r.span({class:"card-label mod-selectable card-label-"+r.mustacheVar("color")+" "+r.mustacheBlock("isActive",function(){return"active"})+" js-select-label","data-idlabel":r.mustacheVar("id"),"data-color":r.mustacheVar("color")},function(){return r.mustacheBlock("name",function(){return r.text(r.mustacheVar("name"))}),r.icon("check",{class:"card-label-selectable-icon light"})})})})}},{}],880:[function(e,t,n){var r,o;o=e(491)("select_member"),r=e(777),t.exports=function(){return o.li({class:"item"+o.mustacheBlock("isActive",function(){return" active"})+o.mustacheBlock("unconfirmed",function(){return" unconfirmed"})+o.mustacheBlock("inactive",function(){return" inactive"})+o.mustacheBlock("isKnownMember",function(){return" js-autoselect"})+" js-member-item"+o.mustacheBlock("disabled",function(){return" disabled"})},function(){return o.a({href:o.mustacheBlock("url",function(){return o.mustacheVar("url")})+o.mustacheBlockInverted("url",function(){return"#"}),class:"name js-select-member "+o.mustacheBlock("extraText",function(){return"multi-line"}),idMember:o.mustacheVar("id"),title:o.mustacheVar("fullName")+o.mustacheBlock("username",function(){return" ("+o.mustacheVar("username")+")"}),autocompleteText:o.mustacheVar("username")},function(){return o.span({class:"member js-member"+o.mustacheBlock("isVirtual",function(){return" virtual"})},function(){return r(o.mustacheVar("."))}),o.span(".full-name",{name:o.mustacheVar("fullName")+o.mustacheBlock("username",function(){return" ("+o.mustacheVar("username")+")"})},function(){return o.text(o.mustacheVar("fullName")),o.text(" "),o.mustacheBlock("username",function(){return o.format("username",{username:o.mustacheVar("username")})})}),o.mustacheBlock("extraText",function(){return o.div(".extra-text.quiet",function(){return o.format("extratext",{extraText:o.mustacheVar("extraText")})})}),o.icon("check",{class:"checked-icon"}),o.icon("forward",{class:"light option js-open-option"}),o.mustacheBlock("inactive",function(){return o.span(".quiet.sub-name",function(){return o.format("inactive-account")})}),o.mustacheBlock("unconfirmed",function(){return o.span(".quiet.sub-name",function(){return o.format("unconfirmed-user")})})})})}},{}],881:[function(e,t,n){var r,o;o=e(491)("select_org_to_upgrade"),r=e(99),t.exports=function(){return o.div(".select-org-to-upgrade",function(){return o.h2(".select-org-to-upgrade-header",function(){return o.format("select-an-organization-to-upgrade-to-business-class")}),o.ul(".select-org-to-upgrade-list",function(){return o.mustacheBlock("orgs",function(){return o.li(".select-org-to-upgrade-list-item",function(){return o.a({href:o.mustacheVar("orgUrl"),class:"select-org-to-upgrade-list-item-link"+o.mustacheBlock("isDisabled",function(){return" disabled js-disabled"})},function(){return o.mustacheBlock("logoHash",function(){return o.img(".select-org-to-upgrade-list-item-link-image",{src:o.mustacheVar("__logoDomain")+"/"+o.mustacheVar("logoHash")+"/30.png",alt:o.mustacheVar("displayName")+" logo"})}),o.mustacheBlockInverted("logoHash",function(){return o.span(".icon-lg.icon-organization.select-org-to-upgrade-list-item-link-image")}),o.span(".select-org-to-upgrade-list-item-link-name",function(){return o.text(o.mustacheVar("displayName"))}),o.span(".select-org-to-upgrade-list-item-link-details.quiet",function(){return o.text(r("members",o.mustacheVar("memberCount"))),o.text(". "),o.mustacheBlock("isPremium",function(){return o.mustacheBlockInverted("needsBCUpgrade",function(){return o.format("this-organization-already-has-business-class")}),o.mustacheBlock("needsBCUpgrade",function(){return o.mustacheBlock("isAdmin",function(){return o.format("an-update-is-available")}),o.mustacheBlockInverted("isAdmin",function(){return o.format("an-update-is-available-you-need-to-be-an-admin-to-upgrade")})})})})})})})}),o.mustacheBlockInverted("orgs",function(){return o.p({style:"margin: 24px 0;"},function(){return o.format("you-don-t-have-any-organizations"),o.raw(" "),o.a(".js-create-org",{href:"#"},function(){return o.format("click-here-to-create-one")})})})})}},{}],882:[function(e,t,n){var r,o;o=e(491)("shortcuts"),r=function(e,t,n){return o.div(".shortcut-list-item",function(){return o.h3(".shortcut-list-item-header",function(){return o.format(t)}),o.div(".shortcut-list-item-keys",function(){var t,n,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(o.span(".keyboard-key",function(){return o.text(n)}));return i}),o.div(".short-list-item-desc",function(){return n()})})},t.exports=function(){return o.div(".window-header.u-clearfix",function(){return o.span(".window-header-icon.icon-lg.icon-information"),o.h2(".window-title",function(){return o.format("keyboard-shortcuts")})}),o.div(".shortcut-list.markeddown",function(){return o.hr(),r([""," / J"," / K",""],"navigate-cards",function(){return o.p(function(){return o.format("pressing-the-arrow-keys-will-select-adjacent-cards-on-a-board-pressing-j-will-select-the-card-below-the-current-card-pressing-k-will-select-the-card-above-the-current-card")})}),r(["B"],"open-header-boards-menu",function(){return o.p(function(){return o.format("pressing-b-opens-the-boards-menu-in-the-header-you-can-search-for-boards-and-navigate-boards-with-the-up-and-down-arrows-pressing-enter-with-a-board-selected-will-open-it")})}),r(["/"],"focus-search-box",function(){return o.p(function(){return o.format("pressing-puts-the-cursor-in-the-search-box-in-the-header")})}),r(["C"],"archive-card",function(){return o.p(function(){return o.format("pressing-c-will-archive-a-card")})}),r(["D"],"due-date",function(){return o.p(function(){return o.format("pressing-d-will-open-the-due-date-picker-for-a-card")})}),r(["E"],"quick-edit-mode",function(){return o.p(function(){return o.format("if-hovering-over-a-card-pressing-e-will-open-quick-edit-mode-which-lets-you-quickly-edit-the-title-and-other-card-attributes")})}),r(["esc"],"close-menu-cancel-editing",function(){return o.p(function(){return o.format("pressing-esc-will-close-an-open-dialog-window-or-pop-over-or-cancel-edits-and-comments-you-are-composing")})}),r(["Command/Control","Enter"],"save-text",function(){return o.p(function(){return o.format("meta-enter-copy")})}),r(["enter"],"open-card",function(){return o.p(function(){return o.format("pressing-enter-will-open-the-currently-selected-card-pressing-shift-enter-while-submitting-a-card-will-open-it-immediately-after-creating-it")})}),r(["F"],"open-card-filter-menu",function(){return o.p(function(){return o.format("use-f-to-open-the-card-filter-menu-the-search-by-title-input-is-automatically-focused")})}),r(["L"],"label",function(){return o.p(function(){return o.format("pressing-l-opens-a-pop-over-of-the-available-labels-clicking-a-label-will-add-or-remove-it-from-the-card")}),o.p(function(){return o.format("pressing-one-of-the-following-number-keys-will-apply-or-remove-that-label")}),o.table(function(){return o.thead(function(){return o.tr(function(){return o.th(function(){return o.format("key")}),o.th(function(){return o.format("label-color")})})}),o.tbody(function(){var e,t;return e=function(e){var t,n,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(o.tr(function(){return o.td(function(){return o.text(n[0])}),o.td(function(){return o.format(n[1])})}));return i},t=[["1","green"],["2","yellow"],["3","orange"],["4","red"],["5","purple"],["6","blue"],["7","sky"],["8","lime"],["9","pink"],["0","black"]],e(t)})})}),r(["M"],"add-remove-members",function(){return o.p(function(){return o.format("pressing-m-opens-the-add-remove-members-menu-clicking-a-member-s-avatar-will-assign-or-unassign-that-person")})}),r(["N"],"insert-new-card",function(){return o.p(function(){return o.format("pressing-n-opens-a-pop-over-that-allows-you-to-add-a-card-after-the-currently-selected-card")})}),r(["<",">"],"move-card-to-adjacent-list",function(){return o.p(function(){return o.format("pressing-the-left-or-right-angle-brackets-lt-and-gt-will-move-a-card-to-the-adjacent-left-or-right-list")})}),r(["Q"],"my-cards-filter",function(){return o.p(function(){return o.format("pressing-the-q-key-toggles-the-cards-assigned-to-me-filter")})}),r(["S"],"subscribe",function(){return o.p(function(){return o.format("pressing-s-will-subscribe-you-to-or-unsubscribe-you-from-a-card-subscribing-to-a-card-will-give-you-notifications-for-most-actions-to-that-card")})}),r(["space"],"assign-self",function(){return o.p(function(){return o.format("pressing-space-will-assign-or-unassign-yourself-to-a-card")})}),r(["T"],"edit-title",function(){return o.p(function(){return o.format("if-viewing-a-card-pressing-t-will-edit-the-title-if-hovering-over-a-card-pressing-t-will-open-the-card-and-edit-the-title")})}),r(["V"],"vote",function(){return o.p(function(){return o.format("pressing-v-will-add-or-remove-your-vote-on-a-card-if-the-voting-power-up-is-enabled")})}),r(["W"],"toggle-board-menu",function(){return o.p(function(){return o.format("pressing-w-will-collapse-or-expand-the-board-menu-the-sidebar-on-the-right")})}),r(["X"],"clear-all-filters",function(){return o.p(function(){return o.format("use-x-to-clear-all-active-card-filters")})}),r(["?"],"open-shortcuts-page",function(){return o.p(function(){return o.format("pressing-will-open-the-shortcuts-page")})}),r(["@"],"autocomplete-members",function(){return o.p(function(){return o.format("when-writing-a-comment-you-can-type-at-plus-a-member-s-name-username-or-initials-and-get-a-list-of-matching-members-you-can-navigate-that-list-with-the-up-and-down-arrows-pressing-enter-or-tab-with-a-member-selected-will-mention-that-user-in-the-comment-the-mentioned-user-will-get-a-notification-once-submitted")}),o.p(function(){return o.format("when-adding-a-new-card-you-can-use-the-same-method-to-assign-members-to-cards-before-submitting-them")})}),r(["#"],"autocomplete-labels",function(){return o.p(function(){return o.format("when-adding-a-new-card-you-can-type-plus-the-label-s-color-or-title-and-get-a-list-of-matching-labels-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-add-the-label-to-the-composed-card-the-labels-will-be-added-to-the-card-when-you-submit")})}),r(["^"],"autocomplete-position",function(){return o.p(function(){return o.format("when-adding-a-new-card-you-can-type-plus-a-list-name-or-position-in-a-list-you-can-also-type-top-or-bottom-to-add-to-the-top-or-bottom-of-the-current-list-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-automatically-change-the-position-of-the-composed-card")})})})}},{}],883:[function(e,t,n){var r;r=e(491)("sticker_on_card"),t.exports=function(){return r.img(".sticker-image",{src:r.mustacheVar("url"),style:"-webkit-transform: rotate("+r.mustacheVar("rotate")+"deg);transform: rotate("+r.mustacheVar("rotate")+"deg);",alt:r.mustacheVar("image")}),r.mustacheBlock("showEditControls",function(){return r.div(".sticker-controls",function(){return r.span(".sticker-control-btn.rotate-btn.js-rotate-sticker",function(){return r.format("rotate")}),r.span(".sticker-control-btn.move-btn.js-move-sticker",function(){return r.format("move")}),r.span(".sticker-control-btn.remove-btn.js-remove-sticker",function(){return r.format("remove")})})})}},{}],884:[function(e,t,n){var r;r=e(491)("sticker_pack_selection_list"),t.exports=function(){return r.h2(function(){return r.text(r.mustacheVar("displayName"))}),r.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},{}],885:[function(e,t,n){var r;r=e(491)("sticker_select"),t.exports=function(){return r.div(".sticker-list.u-clearfix.js-standard-sticker-list"),r.div(".js-premium-stickers"),r.h2(function(){return r.format("custom-stickers")}),r.div(".sticker-list.u-clearfix.js-custom-sticker-list")}},{}],886:[function(e,t,n){var r;r=e(491)("sticker_select_item"),t.exports=function(){return r.mustacheBlock("pending",function(){return r.img(".sticker-select-image.sticker-select-pending",{src:r.mustacheVar("url")})}),r.mustacheBlockInverted("pending",function(){return r.img(".sticker-select-image.sticker-select-shadow",{src:r.mustacheVar("url")}),r.img(".sticker-select-image.sticker-select-fixed",{src:r.mustacheVar("url")}),r.img(".sticker-select-image.sticker-select-peel",{src:r.mustacheVar("url")})}),r.mustacheBlock("id",function(){return r.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",function(){return r.icon("close",{class:"sticker-select-option-icon"}),r.span(".sticker-select-option-text.u-text-underline",function(){return r.format("delete")})})}),r.mustacheBlock("error",function(){return r.span(".sticker-select-option",function(){return r.span(".sticker-select-option-text",function(){return r.text(r.mustacheVar("error"))})})}),r.mustacheBlock("pending",function(){return r.span(".sticker-select-option",function(){return r.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),r.span(".sticker-select-option-text",function(){return r.format("uploading-ellipsis")})})})}},{}],887:[function(e,t,n){var r;r=e(491)("sticker_select_item_upload"),t.exports=function(){return r.form({action:"/1/member/"+r.mustacheVar("id")+"/customStickers",method:"post",enctype:"multipart/form-data"},function(){return r.input({type:"hidden",name:"token",value:""}),r.input({type:"hidden",name:"format",value:"http"}),r.div(".sticker-select.sticker-select-upload",function(){return r.span(".sticker-select-upload-icon.icon-lg.icon-add"),r.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image "+r.mustacheBlockInverted("enabled_customStickers",function(){return" disabled"}),multiple:"multiple",accept:"image/*"})})})}},{}],888:[function(e,t,n){var r;r=e(491)("sync_error"),t.exports=function(){return r.format("you-have-been-disconnected-from-the-trello-server-for-too-long"),r.br(),r.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload();"},function(){return r.format("reload-now")})}},{}],889:[function(e,t,n){var r;r=e(491)("take_photo"),t.exports=function(){return r.video({class:"video"+r.mustacheBlockInverted("connected",function(){return" hide"}),autoplay:!0,style:"width:100%"}),r.mustacheBlock("error",function(){return r.p(".error",function(){return r.text(r.mustacheVar("error"))})}),r.mustacheBlock("connected",function(){return r.button(".primary.wide.js-snap",function(){return r.format("snap-photo")})}),r.mustacheBlockInverted("connected",function(){return r.mustacheBlock("error",function(){return r.p(function(){return r.format("couldnt-find-a-camera-to-connect-to-ellipsis")})}),r.mustacheBlockInverted("error",function(){return r.p(function(){return r.format("trying-to-access-your-computers-camera-ellipsis-check-the-banner-at-the-top-of-the-page")})}),r.p(".u-bottom",function(){return r.a(".quiet-button.js-connect-camera",{href:"#"},function(){return r.format("try-again")})})})}},{}],890:[function(e,t,n){var r;r=e(491)("tips"),t.exports=r.renderable(function(e){var t,n,o,i,s;return n=e.id,o=e.imgUrl1x,i=e.imgUrl2x,t=e.bgcolor,s=e.url,r.a({class:"tip js-tip",href:s,"data-tipid":n,target:"_blank"},function(){return r.div({class:"tip-image",style:"background-color: "+t+";"},function(){return r.img({class:"tip-image-img",src:o,srcset:o+" 1x, "+i+" 2x"})}),r.h3(".tip-text",r.l(n))})})},{}],891:[function(e,t,n){var r;r=e(491)("tooltip_content"),t.exports=function(){return r.div(".tooltip-content.js-tooltip-content",function(){return r.icon("close",{class:"tooltip-close-button js-tooltip-close-button"}),r.p(function(){return r.text(r.mustacheVar("tooltipText"))})})}},{}],892:[function(e,t,n){var r;r=e(491)("woof_header"),t.exports=function(){return r.a(".header-btn.header-woof",{href:"#"},function(){return r.span(".taco-talk-small-icon"),r.span(".header-btn-text",function(){return r.span(".left-arrow"),r.span(".js-phrase")})})}},{}],893:[function(e,t,n){(function(){var t,r=this,o=r.Backbone,i=[],s=i.push,a=i.slice,u=i.splice;t="undefined"!=typeof n?n:r.Backbone={},t.VERSION="0.9.10";var c=r._;c||"undefined"==typeof e||(c=e("underscore")),t.$=r.jQuery||r.Zepto||r.ender,t.noConflict=function(){return r.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=/\s+/,d=function(e,t,n,r){if(!n)return!0;if("object"==typeof n)for(var o in n)e[t].apply(e,[o,n[o]].concat(r));else{if(!l.test(n))return!0;for(var i=n.split(l),s=0,a=i.length;a>s;s++)e[t].apply(e,[i[s]].concat(r))}},p=function(e,t){var n,r=-1,o=e.length;switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t)}},h=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!d(this,"once",e,[t,n])||!t)return this;var r=this,o=c.once(function(){r.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,n),this},off:function(e,t,n){var r,o,i,s,a,u,l,p;if(!this._events||!d(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:c.keys(this._events),a=0,u=s.length;u>a;a++)if(e=s[a],r=this._events[e]){if(i=[],t||n)for(l=0,p=r.length;p>l;l++)o=r[l],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&i.push(o);this._events[e]=i}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&p(n,t),r&&p(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=c.uniqueId("l"));return r[o]=e,e.on(t,"object"==typeof t?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(r){if(e)e.off(t,"object"==typeof t?this:n,this),t||n||delete r[e._listenerId];else{"object"==typeof t&&(n=this);for(var o in r)r[o].off(t,n,this);this._listeners={}}return this}}};h.bind=h.on,h.unbind=h.off,c.extend(t,h);var m=t.Model=function(e,t){var n,r=e||{};this.cid=c.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{}),(n=c.result(this,"defaults"))&&(r=c.defaults({},r,n)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return c.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return c.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,o,i,s,a,u,l,d;if(null==e)return this;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;i=n.unset,a=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=c.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)t=o[r],c.isEqual(d[r],t)||s.push(r),c.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,i?delete d[r]:d[r]=t;if(!a){s.length&&(this._pending=!0);for(var p=0,h=s.length;h>p;p++)this.trigger("change:"+s[p],this,d[s[p]],n)}if(u)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,c.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,c.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!c.isEmpty(this.changed):c.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?c.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in e)c.isEqual(r[o],t=e[o])||((n||(n={}))[o]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){return e.set(e.parse(n,r),r)?void(t&&t(e,n,r)):!1},this.sync("read",this,e)},save:function(e,t,n){var r,o,i,s,a=this.attributes;return null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,!r||n&&n.wait||this.set(r,n)?(n=c.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=c.extend({},a,r)),void 0===n.parse&&(n.parse=!0),o=n.success,n.success=function(e,t,n){e.attributes=a;var i=e.parse(t,n);return n.wait&&(i=c.extend(r||{},i)),c.isObject(i)&&!e.set(i,n)?!1:void(o&&o(e,t,n))},i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=a),s):!1):!1},destroy:function(e){e=e?c.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(e,t,o){(o.wait||e.isNew())&&r(),n&&n(e,t,o)},this.isNew())return e.success(this,null,e),!1;var o=this.sync("delete",this,e);return e.wait||r(),o},url:function(){var e=c.result(this,"urlRoot")||c.result(this.collection,"url")||E();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=c.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,c.extend({silent:!0},t))};c.extend(f.prototype,h,{model:m,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var n,r,o,i,a,l,d,p,h,m;for(d=[],p=t.at,h=this.comparator&&null==p&&0!=t.sort,m=c.isString(this.comparator)?this.comparator:null,n=0,r=e.length;r>n;n++)(o=this._prepareModel(i=e[n],t))?(a=this.get(o))?t.merge&&(a.set(i===o?o.attributes:i,t),h&&!l&&a.hasChanged(m)&&(l=!0)):(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,i,t);if(d.length&&(h&&(l=!0),this.length+=d.length,null!=p?u.apply(this.models,[p,0].concat(d)):s.apply(this.models,d)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,r=d.length;r>n;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=c.isArray(e)?e.slice():[e],t||(t={});var n,r,o,i;for(n=0,r=e.length;r>n;n++)i=this.get(e[n]),i&&(delete this._byId[i.id],delete this._byId[i.cid],o=this.indexOf(i),this.models.splice(o,1),this.length--,t.silent||(t.index=o,i.trigger("remove",i,this,t)),this._removeReference(i));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,c.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return c.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return c.invoke(this.models,"get",e)},update:function(e,t){t=c.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,o,i,s=[],a=[],u={};if(c.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(r=0,o=e.length;o>r;r++)n=e[r],i=this.get(n),t.remove&&i&&(u[i.cid]=!0),(t.add&&!i||t.merge&&i)&&s.push(n);
if(t.remove)for(r=0,o=this.models.length;o>r;r++)n=this.models[r],u[n.cid]||a.push(n);return a.length&&this.remove(a,t),s.length&&this.add(s,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,c.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?c.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var o=r.update?"update":"reset";e[o](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){if(t=t?c.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,o){o.wait&&n.add(e,o),r&&r(e,t,o)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof m)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=c.isFunction(t)?t:function(e){return e.get(t)};return c.sortedIndex(this.models,e,r,n)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(g,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),c[e].apply(c,t)}});var v=["groupBy","countBy","sortBy"];c.each(v,function(e){f.prototype[e]=function(t,n){var r=c.isFunction(t)?t:function(e){return e.get(t)};return c[e](this.models,r,n)}});var y=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,_=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(e,n,r){return c.isRegExp(e)||(e=this._routeToRegExp(e)),r||(r=this[n]),t.history.route(e,c.bind(function(o){var i=this._extractParameters(e,o);r&&r.apply(this,i),this.trigger.apply(this,["route:"+n].concat(i)),this.trigger("route",n,i),t.history.trigger("route",this,n,i)},this)),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes)for(var e,t=c.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(b,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var C=t.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,S=/msie [\w.]+/,T=/\/$/;C.started=!1,c.extend(C.prototype,h,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(T,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(x,"")},start:function(e){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=c.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,o=S.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(j,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=c.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!C.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new C;var M=t.View=function(e){this.cid=c.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},B=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];c.extend(M.prototype,h,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=c.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(c.isFunction(n)||(n=this[e[t]]),!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(B),o=r[1],i=r[2];n=c.bind(n,this),o+=".delegateEvents"+this.cid,""===i?this.$el.on(o,n):this.$el.on(o,i,n)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=c.extend({},c.result(this,"options"),e)),c.extend(this,c.pick(e,O)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var e=c.extend({},c.result(this,"attributes"));this.id&&(e.id=c.result(this,"id")),this.className&&(e.class=c.result(this,"className"));var n=t.$("<"+c.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}});var L={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.prepareData=function(e,t,n){return"create"==e||"update"==e||"patch"==e?JSON.stringify(t.toJSON(n)):null},t.sync=function(e,n,r){var o=L[e];c.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var i={type:o,dataType:"json"};if(r.url||(i.url=c.result(n,"url")||E()),null==r.data&&n&&(i.contentType="application/json",i.data=t.prepareData(e,n,r)),r.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){i.type="POST",r.emulateJSON&&(i.data._method=o);var s=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===i.type||r.emulateJSON||(i.processData=!1);var a=r.success;r.success=function(e){a&&a(n,e,r),n.trigger("sync",n,e,r)};var u=r.error;r.error=function(e){u&&u(n,e,r),n.trigger("error",n,e,r)};var l=r.xhr=t.ajax(c.extend(i,r));return n.trigger("request",n,l,r),l},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var P=function(e,t){var n,r=this;n=e&&c.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},c.extend(n,r,t);var o=function(){this.constructor=n};return o.prototype=r.prototype,n.prototype=new o,e&&c.extend(n.prototype,e),n.__super__=r.prototype,n};m.extend=f.extend=y.extend=M.extend=C.extend=P;var E=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},{}]},{},[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64]);for(;e.length>0;){var r=e;e=[],r.forEach(function(e){e()})}
